var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,c,i,a){function s(n){var o=+new Date,c=(n.title,n.icon?n.icon:null,e.$new(!0));c.alert={},c.alert.id=o,c.alert.icon=n.icon?n.icon:null,c.alert.type=n.type?n.type:"info",c.alert.title=n.title,c.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var i=r(p)(c);i[0].id=o,d=o,f.append(i),i.addClass(h),t(function(){i.addClass(v)},20),l=t(function(){u(i)},m)}function u(e){if(!e&&d)e=angular.element(document.getElementById(d));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(v),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(c),m=5e3,d="",h="alert-active",v="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(m=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){var n=t.remoteSource?t.remoteSource:t.source;e.compareItem.a=t.remoteSource?n:"screens/reference/"+r.project.id+"/"+n.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n,e.compareItem.c=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n.replace(".png","_diff.png")}var c="modal-open",i="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.activeItem.remoteSource?e.compareItem.a=e.activeItem.remoteSource:e.compareItem.a="screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(c),setTimeout(function(){t.addClass(i)},30))}),e.close=function(){t.removeClass(i),setTimeout(function(){t.removeClass(c)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,c,i){function a(e){var o=+new Date,c=e.msg,i=e.icon?e.icon:h,a=p.replace("BODY",c).replace("ICON",i),v=r(a)(n);v[0].id=o,d=o,f.append(v);var g=f.find("#"+o);u(g,e.type),e.callback&&g.find(".msg-action").addClass("show"),t(function(){g.addClass("add")},20),l=t(function(){s(g)},m)}function s(e){if(!e&&d)e=f.find("#"+d);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),m=5e3,d="",h="info";n.body="",n.callback=null,n.icon=h,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(m=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]);var P=require("./core/preloader");MUG.directive("preloader",["$rootScope","$timeout",function(e,t){function r(e){var t=0,r=0,o=0,c=12;if(e.selectors&&e.selectors.length>0)for(var i=0;i<e.selectors.length;i++)e.selectors[i]&&"container"===e.selectors[i].type&&(o+=1);e.viewports&&e.viewports.length>0&&(r=e.viewports.length),e.meta&&e.meta.delay&&(t=parseInt(e.meta.delay,10)),n=c*(r*o)+30}var n=30;return{replace:!0,restrict:"E",scope:{},template:'<div class="preloader"></div>',link:function(o,c,i,a){function s(e,t){if(t&&t.msg){if(t.project&&r(t.project),!h)return h=!0,void(f=setTimeout(function(){h=!1},10*n));m=t.msg;var o;switch(m){case"Opening Browser Session":o=0;break;case"Capturing Screens":o=1}m!==d&&l&&l.animate&&l.animate(o,n,function(){d=m})}}function u(){l.resetBrowser()}var l,p,f,m,d,h=!1;t(function(){l=new P.Browser,l.init(),p=document.querySelector(".preloader"),p.appendChild(l.instance),l.drawBrowser()},30),e.$on("PRELOADER:UPDATE",s),e.$on("PRELOADER:OFF",u)}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var c;o.$observe("fromTime",function(t){c=e.parse(t)}),r.$watch(function(){return t.getTime()-c},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var i=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=c+t[0],n=c+t[1];e&&i.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),i.resolve(a)})}),i.promise}var o=__dirname+"/",c="data:image/png;base64,",i=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?i[1]:i[0]:t>.1&&2>t?i[1]:i[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs"),path=require("path"),AWS=require("./core/aws");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}function c(e){try{var t=fs.readdirSync(e)}catch(r){return}if(t.length>0)for(var n=0;n<t.length;n++){var o=path.join(e,t[n]);fs.statSync(o).isFile()?fs.unlinkSync(o):rmDir(o)}}function i(t,r){var n=e.defer();return fs.writeFile(t,JSON.stringify(r),function(e){return e?void n.reject(e):void n.resolve()}),n.promise}function a(t){var r=e.defer();return fs.unlink(t,function(e){return e?void r.reject(e):void r.resolve()}),r.promise}var s=__dirname+"/projects.json",u=__dirname+"/projects/";return{get:function(e,t){return o(__dirname+e,t)},getAll:function(){return o(s,[])},getById:function(e){return o(u+e+".json")},getTypeById:function(e,t){var r=t?"_"+t:"";return o(u+e+r+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,c=e.meta.url,i=!0;return!r||!n||!o||!c||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(i=!1)}),n&&n.map(function(e,t){e.query&&e.type||(i=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(i=!1)}),i)},createNew:function(){var t=e.defer(),o=[],c=JSON.parse(fs.readFileSync(s,"utf8")),a=r(c.length),l=n(a);c.unshift(a);var p=i(s,c),f=i(u+a.id+".json",l),m=i(u+a.id+"_history.json",[]);return o.push(p),o.push(f),o.push(m),e.all(o).then(function(){t.resolve(a)},t.reject),t.promise},save:function(t){var r=e.defer(),n=[],c=o(s,[]);c.map(function(e,r){e.id===t.id&&(c[r].title=t.title,c[r].timestamp=+new Date)});var a=i(u+t.id+".json",t),l=i(s,c);return n.push(a),n.push(l),e.all(n).then(function(){r.resolve(t)},r.reject),r.promise},remove:function(t){var r=e.defer(),n=[],o=JSON.parse(fs.readFileSync(s,"utf8"));o.map(function(e,r){e.id===t&&o.splice(r,1)}),this.cleanImageFiles(t);var c=a(u+t+".json"),l=a(u+t+"_history.json"),p=i(s,o);return n.push(c),n.push(l),n.push(p),e.all(n).then(r.resolve,r.reject),r.promise},clearHistory:function(t){var r=e.defer(),n=[],c=o(s,[]);t.currentBatch=null,t.currentReference=null,t.batchHistory={},c.map(function(e,r){e.id===t.id&&(c[r].totals.success=0,c[r].totals.warning=0,c[r].totals.error=0,c[r].totals.views=0)}),this.cleanImageFiles(t.id);var a=i(u+t.id+"_history.json",[]),l=i(u+t.id+".json",t),p=i(s,c);return n.push(a),n.push(l),n.push(p),e.all(n).then(r.resolve,r.reject),r.promise},sync:function(t){if(t){for(var r=this,n=e.defer(),o=this.getById(t),c=this.getTypeById(t,"history"),i=[],a=0;a<c.length;a++){var s=c[a];if(s.source&&-1===s.source.search("amazon")){var u=s.source,l=s.type,p=__dirname+"/screens/"+l+"/"+o.id+"/"+u;i.push({key:l+"/"+u,path:p})}}return AWS.init().upload(i,o.id).then(function(e){r.cleanAfterSync(o,e).then(n.resolve,n.reject)},function(e){n.reject(e)}),n.promise}},cleanAfterSync:function(t,r){var n=e.defer(),c=o(u+t.id+"_history.json",[]),s=[],l=[];t.updatedAt=+new Date;for(var p=0;p<r.length;p++){var f=r[p],m=f.split("/"),d=m[m.length-2],h=m[m.length-1];c.map(function(e,n){if(e.source===h&&"compare"===d){var o=__dirname+"/screens/"+d+"/"+t.id+"/"+h,i=a(o),s=a(o.replace(".","_diff."));delete c[n].source,c[n].remoteSource=r[p],l.push(i),l.push(s)}})}var v=__dirname+"/projects/"+t.id+".json",g=v.replace(".json","_history.json"),y=i(v,t),j=i(g,c);l.unshift(y),l.unshift(j),s.push({key:t.id,path:v}),s.push({key:t.id+"_history",path:g});var w=AWS.init().upload(s,t.id);return l.unshift(w),e.all(l).then(n.resolve,n.reject),n.promise},cleanImageFiles:function(e){var t=__dirname+"/screens/BASE/"+e,r=t.replace("BASE","compare"),n=t.replace("BASE","reference");c(r),c(n)}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,c=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,c)}var n=t.settings.strings,o=n.prefixAgo,c=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,c=n.suffixFromNow);var i=Math.abs(e)/1e3,a=i/60,s=a/60,u=s/24,l=u/365,p=45>i&&r(n.seconds,Math.round(i))||90>i&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,c].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]);var ipc=require("electron").ipcRenderer;MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})},ipc.on("NAVIGATE:TO",function(e){e&&e.location&&(console.log("NAVIGATE:TO",e),r.go(e.location))}),e.SafeApply=function(e,t){e.$$phase||e.$root.$$phase?"undefined"!=typeof t&&t():e.$apply(t)}}]);var fs=require("fs"),AWS=require("./core/aws");MUG.controller("PreferencesCtrl",["$rootScope","$scope","$state",function(e,t,r){t.awsConfig={bucket:"",accessKeyId:"",secretAccessKey:""},t.awsConfig=AWS.getConfig(),t.save=function(){AWS.setConfig(t.awsConfig)}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("electron").ipcRenderer;MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function c(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,n}function i(){if(null!==e.project.currentBatch){var r=o.getTypeById(e.project.id,"history");t.batchItems=c(r),t.runningType=e.project.currentReference>=e.project.currentBatch?"reference":"compare"}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,"reference"===t.runningType?t.hasCompare=!1:(t.hasCompare=null!==e.project.currentBatch&&0!==e.project.currentBatch,t.hasCompare=e.project.currentReference<=e.project.currentBatch)}function u(){e.project=o.getById(e.project.id),t.currentBatch=e.project.currentBatch,t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,e.$emit("SIDEPANEL:UPDATE",e.project)}function l(){void 0===typeof e.project.meta.autoSyncAws||e.project.meta.autoSyncAws!==!0||h||(e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:3,type:"info"}),h=!0,o.sync(e.project.id).then(function(t){h=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:3,type:"success",icon:"check"})},function(t){console.log("syncNow err",t),h=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})}))}function p(r){if(r&&r.msg&&r.percent){t.progress.percent=parseInt(r.percent,10),t.progress.title=r.msg?r.msg:t.progress.title;var n=r;n.project=e.project,e.$emit("PRELOADER:UPDATE",n)}}function f(){r(function(){u(),i(),s(),l(),t.processing=!1},3)}function m(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}var d=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=d,t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"};var h=!1;u(),i(),s(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",p),ipc.on("RUNNER:COMPLETE",f),ipc.on("RUNNER:FAILED",m)}]);var fs=require("fs");MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}function c(){var e=n.get("/config/aws.json",{});return!!(e&&e.bucket&&e.accessKeyId&&e.secretAccessKey)}var i;t.syncing=!1,t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.hasAwsSettings=!1,t.master={},angular.copy(e.project,t.master),t.hasAwsSettings=c(),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.syncNow=function(){t.syncing=!0,e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:5,type:"info"}),n.sync(e.project.id).then(function(r){t.syncing=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:5,type:"success",icon:"check"})},function(r){t.syncing=!1,console.log("syncNow err",r),e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})})},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var c=e.project.id;n.remove(c).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:c}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:c}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active!==!0&&"true"!==e.project[r][n].active,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(r.batchHistory[r.currentBatch].success&&(t.projects[n].totals.success=r.batchHistory[r.currentBatch].success),r.batchHistory[r.currentBatch].warning&&(t.projects[n].totals.warning=r.batchHistory[r.currentBatch].warning),r.batchHistory[r.currentBatch].error&&(t.projects[n].totals.error=r.batchHistory[r.currentBatch].error),r.batchHistory[r.currentBatch].views&&(t.projects[n].totals.views=r.batchHistory[r.currentBatch].views)))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("preferences",{url:"/preferences",templateUrl:"preferences.html",controller:"PreferencesCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,c){console.log("$stateChangeError",c)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJwcmVsb2FkZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcmVmZXJlbmNlc2N0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiaW1hZ2VTcmMiLCJyZW1vdGVTb3VyY2UiLCJzb3VyY2UiLCJjb21wYXJlSXRlbSIsImEiLCJwcm9qZWN0IiwiY3VycmVudEJhdGNoIiwiY3VycmVudFJlZmVyZW5jZSIsImIiLCJjIiwibW9kYWxBY3RpdmUiLCJtb2RhbFZpc2libGUiLCJjb3B5IiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4IiwiYWN0aXZlSXRlbSIsInZpZXdlciIsIml0ZW1zIiwiYW1vdW50IiwiaW52ZXJzZSIsInBlcmNlbnQiLCIkd2F0Y2giLCJudiIsIm92IiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsIm9wdGlvbk1vZGUiLCJhcmdzIiwiY2xvc2UiLCJpdGVtIiwibGVuZ3RoIiwibW9kYWxBY3Rpb25OYXYiLCJuZXh0SWR4IiwidG90YWwiLCJnb1RvSW5kZXgiLCJpZHgiLCJuZXdCb2R5IiwibXNnIiwibmV3SWNuIiwiZGVmYXVsdEljb24iLCJtc2dUZW1wbGF0ZSIsIm5ld01lc3NhZ2UiLCJtc2dFbCIsImZpbmQiLCJjaGFuZ2VUeXBlIiwiYm9keSIsImFjdGlvbkVsIiwiUCIsInJlcXVpcmUiLCJjYWxjdWxhdGVJbmNyZW1lbnRzIiwiZGVsYXkiLCJ2aWV3cG9ydHMiLCJzZWxlY3RvcnMiLCJpbmNyZW1lbnQiLCJpIiwibWV0YSIsInRvdGFsSW5jcmVtZW50IiwidXBkYXRlUHJlbG9hZGVyIiwiaXNBbmltYXRpbmciLCJwcmV2aW91c1RpdGxlIiwiQiIsImFuaW1hdGUiLCJyZXNldFByZWxvYWRlciIsInJlc2V0QnJvd3NlciIsIkJyb3dzZXIiLCJpbml0IiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiaW5zdGFuY2UiLCJkcmF3QnJvd3NlciIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmcyIsImFzeW5jIiwiZmFjdG9yeSIsIiRxIiwiQ29uZmlnIiwicmVhZEFzeW5jIiwiZmlsZSIsInJlYWRGaWxlIiwiZmlsZURpclByZWZpeCIsImNvbXBhcmVTaW5nbGUiLCJkZmQiLCJkZWZlciIsIm91dHB1dCIsInJlc2VtYmxlIiwib3V0cHV0U2V0dGluZ3MiLCJDb21wYXJlIiwibWFwIiwiZXJyIiwicmVzdWx0cyIsImFEYXRhIiwiaW1hZ2VQcmVmaXgiLCJiRGF0YSIsInJlamVjdCIsImNvbXBhcmVUbyIsImlnbm9yZUNvbG9ycyIsIm9uQ29tcGxldGUiLCJkaWZmRGF0YSIsInJlcG9ydCIsInNyYyIsImdldEltYWdlRGF0YVVybCIsInJlc29sdmUiLCJwcm9taXNlIiwiX19kaXJuYW1lIiwic3RhdHVzVHlwZXMiLCJydW5TaW5nbGUiLCJnZXRTdGF0dXMiLCJtaXNNYXRjaFZhbHVlIiwicGFyc2VGbG9hdCIsIm1pc01hdGNoUGVyY2VudGFnZSIsImlzU2FtZURpbWVuc2lvbnMiLCJub3ciLCJ1cGRhdGVUaW1lIiwicGF0aCIsIkFXUyIsImNyZWF0ZVVVSUQiLCJzIiwiQXJyYXkiLCJqb2luIiwibiIsInJhbmRvbSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZUR1bW15UHJvamVjdCIsInByb2plY3RJZCIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwiYmF0Y2hIaXN0b3J5IiwiY29va2llcyIsInVybCIsInJlYWR5RXZlbnQiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicmVhZEZpbGVTeW5jIiwiY29kZSIsIkpTT04iLCJyZW1vdmVBbGxJbkRpcmVjdG9yeSIsImRpclBhdGgiLCJmaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsZVBhdGgiLCJzdGF0U3luYyIsImlzRmlsZSIsInVubGlua1N5bmMiLCJybURpciIsInByb21pc2VXcml0ZSIsIl9xIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwicHJvbWlzZVJlbW92ZSIsIl96IiwidW5saW5rIiwicHJvamVjdHNQYXRoIiwicHJvamVjdEZpbGVzUGF0aCIsImdldEFsbCIsImdldEJ5SWQiLCJnZXRUeXBlQnlJZCIsImFkZGl0aW9uIiwidmFsaWRhdGUiLCJib29sIiwib2JqIiwid2lkdGgiLCJoZWlnaHQiLCJuYW1lIiwicXVlcnkiLCJjcmVhdGVOZXciLCJkZmRkIiwicXVldWVQcm9taXNlcyIsImFsbFByb2plY3RzIiwibmV3UHJvamVjdERhdGEiLCJuZXdQcm9qZWN0RmlsZSIsInVuc2hpZnQiLCJwcm9qZWN0QWxsRGF0YSIsInByb2plY3REYXRhIiwicHJvamVjdEhpc3RvcnlEYXRhIiwicHVzaCIsImFsbCIsInRoZW4iLCJzYXZlIiwicHJvamVjdFRlbXBEYXRhIiwic3BsaWNlIiwiY2xlYW5JbWFnZUZpbGVzIiwiY2xlYXJIaXN0b3J5IiwibWFpblByb2plY3RzIiwic3luYyIsIl90aGlzIiwiZCIsInByb2plY3RGaWxlcyIsInJlYWR5RmlsZXMiLCJ0bXBGaWxlIiwic2VhcmNoIiwia2V5IiwidXBsb2FkIiwicmVzIiwiY2xlYW5BZnRlclN5bmMiLCJuZXdSZWZzIiwiaGlzdG9yeURhdGEiLCJ1cGRhdGVkUmVtb3RlRmlsZXMiLCJ1cGRhdGVkQXQiLCJ0bXBTcmMiLCJ0bXBSZWYiLCJzcGxpdCIsInRtcFR5cGUiLCJ0bXBBbGlhcyIsInJlbVJlZlBhdGgiLCJyZW1SZWYiLCJyZW1SZWZEaWZmIiwicHJvamVjdEZpbGUiLCJwcm9qZWN0SGlzdG9yeUZpbGUiLCJwcm9qZWN0V3JpdGUiLCJwcm9qZWN0SGlzdG9yeVdyaXRlIiwiYXdzVXBsb2FkIiwiYmFzZSIsImNvbXBzIiwicmVmcyIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiaXBjIiwiaXBjUmVuZGVyZXIiLCJjb250cm9sbGVyIiwiJHN0YXRlIiwiUHJvamVjdHMiLCJjdXJyZW50UHJvamVjdElkIiwiY3JlYXRlTmV3UHJvamVjdCIsIiRicm9hZGNhc3QiLCJnbyIsImNvbnNvbGUiLCJsb2ciLCJvbiIsImxvY2F0aW9uIiwiU2FmZUFwcGx5IiwiZm4iLCIkJHBoYXNlIiwiJHJvb3QiLCIkYXBwbHkiLCJhd3NDb25maWciLCJidWNrZXQiLCJhY2Nlc3NLZXlJZCIsInNlY3JldEFjY2Vzc0tleSIsImdldENvbmZpZyIsInNldENvbmZpZyIsIiRzdGF0ZVBhcmFtcyIsImFjdGl2ZUZpbHRlciIsImFjdGl2ZUZpbHRlclF1ZXJ5IiwiaGlzdG9yeUl0ZW1zIiwiY2hhbmdlRmlsdGVyIiwicHJldmlld0l0ZW0iLCIkZW1pdCIsInByb2Nlc3NCYXRjaCIsImFsbERhdGEiLCJwbGFjZUl0ZW0iLCJzdGF0dXMiLCJ0YXJnZXQiLCJmb3JtYXR0ZWQiLCJhY3RpdmVEYXRhIiwiaGFzUmVmZXJlbmNlIiwiYmF0Y2giLCJzZXR1cEN1cnJlbnRCYXRjaCIsImJhdGNoSXRlbXMiLCJydW5uaW5nVHlwZSIsInZhbGlkYXRlUHJvamVjdCIsImlzVmFsaWQiLCJjaGVja1N0YXRlIiwiaGFzU2V0dGluZ3MiLCJoYXNDb21wYXJlIiwiZ3JhYkxhdGVzdERhdGEiLCJzeW5jUHJvamVjdCIsImF1dG9TeW5jQXdzIiwic3luY2luZyIsInJ1bm5lckV2ZW50cyIsInByb2dyZXNzIiwicHJlQXJncyIsInJ1bm5lckNvbXBsZXRlIiwicHJvY2Vzc2luZyIsInJ1bm5lckZhaWxlZCIsInJlYXNvbiIsImRlZmF1bHRGb3JtYXQiLCJwcmV2aWV3QmF0Y2giLCJuZXdDb21wYXJlIiwidmFsaWQiLCJzZW5kIiwibmV3UmVmZXJlbmNlIiwiYWRkTmV3VHlwZSIsImNoZWNrQXdzU2V0dGluZ3MiLCJzYXZlVGltZXIiLCJzZWxlY3RvclR5cGVzIiwiaGFzQ2hhbmdlcyIsImhhc0F3c1NldHRpbmdzIiwibWFzdGVyIiwiblYiLCJvViIsInN5bmNOb3ciLCJjYW5jZWxTYXZlIiwic3VyZSIsImNvbmZpcm0iLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElEIiwiYWRkVmlld3BvcnQiLCJuZXdWaWV3cG9ydCIsImFjdGl2ZSIsImFkZFNlbGVjdG9yIiwibmV3U2VsZWN0b3IiLCJhZGRDb29raWUiLCJuZXdDb29raWUiLCJhY3RpdmF0ZVR5cGUiLCJkZWxldGVUeXBlSXRlbSIsInByb2plY3RzIiwiZ29Ub1Byb2plY3QiLCJjb25zdGFudCIsIkVOViIsIlNUQUdFIiwiUFJPRCIsImVycm9yQ29sb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJlcnJvclR5cGUiLCJ0cmFuc3BhcmVuY3kiLCJsYXJnZUltYWdlVGhyZXNob2xkIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsIm90aGVyd2lzZSIsInJ1biIsIiRodHRwIiwiJGNvbW1vbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxXQUFBLFlBQUEsZ0JDbUJBRixLQUFBRyxVQUFBLFNBQ0EsYUFBQSxXQUFBLFdBQUEsaUJBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxPQUNBQyxTQUFBLElBQ0FDLFNBQUEsRUFDQUMsU0FBQSxtQ0FDQUMsU0FDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxFQUFBQyxHQVNBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsSUFBQSxHQUFBQyxNQUdBQyxHQUZBSCxFQUFBSSxNQUNBSixFQUFBLEtBQUFBLEVBQUFLLEtBQUEsS0FDQWxCLEVBQUFtQixNQUFBLEdBR0FILEdBQUFJLFNBQ0FKLEVBQUFJLE1BQUFDLEdBQUFQLEVBQ0FFLEVBQUFJLE1BQUFGLEtBQUFMLEVBQUEsS0FBQUEsRUFBQUssS0FBQSxLQUNBRixFQUFBSSxNQUFBRSxLQUFBVCxFQUFBLEtBQUFBLEVBQUFTLEtBQUEsT0FDQU4sRUFBQUksTUFBQUgsTUFBQUosRUFBQUksTUFDQUQsRUFBQUksTUFBQUcsT0FBQVYsRUFBQVcsU0FBQSxXQUNBQyxLQUFBSixFQUNBUixHQUFBVyxXQUNBRSxFQUFBRCxPQUhBLElBTUEsSUFBQUUsR0FBQXpCLEVBQUEwQixHQUFBWixFQUdBVyxHQUFBLEdBQUFOLEdBQUFQLEVBQ0FlLEVBQUFmLEVBR0FnQixFQUFBQyxPQUFBSixHQUNBQSxFQUFBSyxTQUFBQyxHQUdBaEMsRUFBQSxXQUNBMEIsRUFBQUssU0FBQUUsSUFDQSxJQUVBQyxFQUFBbEMsRUFBQSxXQUNBeUIsRUFBQUMsSUFDQVMsR0FHQSxRQUFBVixHQUFBVyxHQUNBLElBQUFBLEdBQUFSLEVBQ0FRLEVBQUF4QyxRQUFBeUMsUUFBQUMsU0FBQUMsZUFBQVgsUUFDQSxDQUFBLElBQUFRLEVBQ0EsTUFDQUEsS0FDQUEsRUFBQXhDLFFBQUF5QyxRQUFBRCxJQUdBQSxFQUFBSSxZQUFBUCxHQUNBakMsRUFBQSxXQUNBb0MsRUFBQUssVUFDQSxLQTFEQSxHQUVBUCxHQUZBUCxFQUFBekIsRUFBQXdDLElBQUEsY0FDQWIsRUFBQWpDLFFBQUF5QyxRQUFBN0IsR0FFQTJCLEVBQUEsSUFDQVAsRUFBQSxHQUNBSSxFQUFBLGVBQ0FDLEVBQUEsZUF1REFsQyxHQUFBNEMsSUFBQSxhQUFBLFNBQUFDLEVBQUFoQyxHQUNBQSxFQUFBSSxRQUVBNkIsT0FBQUMsYUFBQVosR0FDQVQsSUFFQWIsRUFBQW1DLE1BQ0FaLEVBQUEsSUFBQXZCLEVBQUFtQyxLQUdBcEMsRUFBQUMsV0MvRkFqQixJQUFBRyxVQUFBLFVBQUEsV0FDQSxPQUNBSyxTQUFBLElBQ0FJLEtBQUEsU0FBQUQsRUFBQThCLEVBQUEzQixHQUNBLEdBQUF1QyxHQUFBQyxTQUFBeEMsRUFBQXlDLFNBQUEsRUFDQWQsR0FBQUwsU0FBQSxXQUVBb0IsV0FBQSxXQUNBZixFQUFBZ0IsSUFBQSxVQUFBLE1BQ0FKLFFDTkFyRCxJQUFBRyxVQUFBLFNBQ0EsV0FBQSxXQUFBLGFBQ0EsU0FBQUUsRUFBQUMsRUFBQUYsR0FDQSxPQUNBSSxTQUFBLElBQ0FDLFNBQUEsRUFDQWlELFlBQUEsYUFDQS9DLFNBQ0FDLEtBQUEsU0FBQStDLEVBQUFDLEVBQUFDLEdBK0NBLFFBQUFDLEdBQUE3QyxHQUNBLEdBQUE4QyxHQUFBOUMsRUFBQStDLGFBQUEvQyxFQUFBK0MsYUFBQS9DLEVBQUFnRCxNQUNBTixHQUFBTyxZQUFBQyxFQUFBbEQsRUFBQStDLGFBQUFELEVBQUEscUJBQUEzRCxFQUFBZ0UsUUFBQTNDLEdBQUEsSUFBQXNDLEVBQUF0RCxRQUFBTCxFQUFBZ0UsUUFBQUMsYUFBQSxPQUFBakUsRUFBQWdFLFFBQUFFLGlCQUFBLFFBQ0FYLEVBQUFPLFlBQUFLLEVBQUF0RCxFQUFBK0MsYUFBQUQsRUFBQSxtQkFBQTNELEVBQUFnRSxRQUFBM0MsR0FBQSxJQUFBc0MsRUFDQUosRUFBQU8sWUFBQU0sRUFBQXZELEVBQUErQyxhQUFBRCxFQUFBLG1CQUFBM0QsRUFBQWdFLFFBQUEzQyxHQUFBLElBQUFzQyxFQUFBdEQsUUFBQSxPQUFBLGFBbERBLEdBQUFnRSxHQUFBLGFBQ0FDLEVBQUEsZUFFQWYsR0FBQVMsUUFBQW5FLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFNBQ0FULEVBQUFpQixhQUFBLFFBQ0FqQixFQUFBa0IsZ0JBQ0FsQixFQUFBbUIsYUFBQSxFQUNBbkIsRUFBQW9CLGNBQ0FwQixFQUFBTyxhQUNBQyxFQUFBLEdBQ0FJLEVBQUEsR0FDQUMsRUFBQSxJQUVBYixFQUFBcUIsUUFDQUMsVUFFQXRCLEVBQUFrQixjQUNBSyxPQUFBLEdBQ0FDLFFBQUEsR0FDQUMsUUFBQSxPQWtCQXpCLEVBQUEwQixPQUFBLHNCQUFBLFNBQUFDLEVBQUFDLEdBQ0FELElBQUFDLElBR0E1QixFQUFBa0IsYUFBQU0sU0FBQSxFQUFBRyxHQUFBRSxRQUFBLEdBQ0E3QixFQUFBa0IsYUFBQU8sUUFBQUssS0FBQUMsTUFBQSxJQUFBSixHQUFBLE9BWUEzQixFQUFBZ0MsV0FBQSxTQUFBakUsR0FDQWlDLEVBQUFpQixhQUFBbEQsR0FHQXRCLEVBQUE0QyxJQUFBLGNBQUEsU0FBQUMsRUFBQTJDLEdBQ0FqQyxFQUFBa0MsVUFHQXpGLEVBQUE0QyxJQUFBLGFBQUEsU0FBQUMsRUFBQTJDLEdBQ0FBLEdBQUFBLEVBQUFsRSxPQUdBaUMsRUFBQW1CLGFBQUEsRUFDQW5CLEVBQUFTLFFBQUFuRSxRQUFBMEUsS0FBQXZFLEVBQUFnRSxTQUdBLFlBQUF3QixFQUFBbEUsT0FDQWlDLEVBQUFvQixXQUFBYSxFQUFBRSxLQUNBbkMsRUFBQXFCLE9BQUFZLEVBQUF4QixZQUNBVCxFQUFBcUIsT0FBQUMsTUFBQSxLQUVBdEIsRUFBQW9CLFdBQUFmLGFBQ0FMLEVBQUFPLFlBQUFDLEVBQUFSLEVBQUFvQixXQUFBZixhQUVBTCxFQUFBTyxZQUFBQyxFQUFBLFdBQUFSLEVBQUFvQixXQUFBckQsS0FBQSxJQUFBdEIsRUFBQWdFLFFBQUEzQyxHQUFBLElBQUFrQyxFQUFBb0IsV0FBQWQsUUFLQSxVQUFBMkIsRUFBQWxFLE1BQUFrRSxFQUFBWCxNQUFBYyxPQUFBLElBQ0FwQyxFQUFBb0IsV0FBQWEsRUFBQVgsTUFBQXRCLEVBQUFtQixjQUNBbkIsRUFBQXFCLE9BQUFZLEVBQUF4QixZQUNBVCxFQUFBcUIsT0FBQUMsTUFBQVcsRUFBQVgsTUFDQW5CLEVBQUFILEVBQUFvQixhQUlBbkIsRUFBQXhCLFNBQUFxQyxHQUVBakIsV0FBQSxXQUNBSSxFQUFBeEIsU0FBQXNDLElBQ0EsT0FHQWYsRUFBQWtDLE1BQUEsV0FDQWpDLEVBQUFmLFlBQUE2QixHQUVBbEIsV0FBQSxXQUNBSSxFQUFBZixZQUFBNEIsSUFDQSxNQUlBZCxFQUFBcUMsZUFBQSxTQUFBdEUsR0FDQSxLQUFBaUMsRUFBQXFCLE9BQUFDLE1BQUFjLE9BQUEsR0FBQSxDQUVBLEdBQ0FFLEdBREFDLEVBQUF2QyxFQUFBcUIsT0FBQUMsTUFBQWMsT0FBQSxDQUlBRSxHQURBLFVBQUF2RSxFQUNBaUMsRUFBQW1CLGVBQUFvQixFQUFBLEVBQUF2QyxFQUFBbUIsYUFBQSxFQUVBLElBQUFuQixFQUFBbUIsYUFBQW9CLEVBQUF2QyxFQUFBbUIsYUFBQSxFQUdBbkIsRUFBQW9CLFdBQUFwQixFQUFBcUIsT0FBQUMsTUFBQWdCLEdBQ0F0QyxFQUFBbUIsYUFBQW1CLEVBQ0FuQyxFQUFBSCxFQUFBb0IsY0FJQXBCLEVBQUF3QyxVQUFBLFNBQUFDLEdBQ0F6QyxFQUFBbUIsZUFBQXNCLElBRUF6QyxFQUFBb0IsV0FBQXBCLEVBQUFxQixPQUFBQyxNQUFBbUIsR0FDQXpDLEVBQUFtQixhQUFBc0IsRUFDQXRDLEVBQUFILEVBQUFvQixtQkMvSEEvRSxJQUFBRyxVQUFBLGFBQ0EsYUFBQSxXQUFBLFdBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxPQUNBSyxTQUNBQyxLQUFBLFNBQUFELEVBQUFFLEVBQUFDLEVBQUFDLEdBc0JBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsSUFBQSxHQUFBQyxNQUNBa0YsRUFBQXBGLEVBQUFxRixJQUNBQyxFQUFBdEYsRUFBQSxLQUFBQSxFQUFBSyxLQUFBa0YsRUFFQTlGLEVBQUErRixFQUFBaEcsUUFBQSxPQUFBNEYsR0FBQTVGLFFBQUEsT0FBQThGLEdBQ0FHLEVBQUFwRyxFQUFBSSxHQUFBQyxFQUdBK0YsR0FBQSxHQUFBakYsR0FBQVAsRUFDQWUsRUFBQWYsRUFHQWdCLEVBQUFDLE9BQUF1RSxFQUdBLElBQUFDLEdBQUF6RSxFQUFBMEUsS0FBQSxJQUFBMUYsRUFDQTJGLEdBQUFGLEVBQUExRixFQUFBUyxNQUVBVCxFQUFBVyxVQUNBK0UsRUFBQUMsS0FBQSxlQUFBeEUsU0FBQSxRQUlBL0IsRUFBQSxXQUNBc0csRUFBQXZFLFNBQUEsUUFDQSxJQUVBRyxFQUFBbEMsRUFBQSxXQUNBeUIsRUFBQTZFLElBQ0FuRSxHQUdBLFFBQUFWLEdBQUFXLEdBQ0EsSUFBQUEsR0FBQVIsRUFDQVEsRUFBQVAsRUFBQTBFLEtBQUEsSUFBQTNFLE9BQ0EsS0FBQVEsRUFBQSxNQUVBQSxHQUFBSSxZQUFBLE9BQ0FKLEVBQUFMLFNBQUEsVUFDQS9CLEVBQUEsV0FDQUosUUFBQXlDLFFBQUFELEdBQUFLLFVBQ0EsS0FJQSxRQUFBK0QsR0FBQXBFLEVBQUFmLEdBQ0FlLEVBQUFJLFlBQUEsWUFDQUosRUFBQUksWUFBQSxZQUVBbkIsR0FDQWUsRUFBQUwsU0FBQSxPQUFBVixHQXhFQSxHQU9BYSxHQVBBa0UsRUFBQSw0TEFNQXZFLEVBQUFqQyxRQUFBeUMsUUFBQTdCLEdBRUEyQixFQUFBLElBQ0FQLEVBQUEsR0FDQXVFLEVBQUEsTUFFQTdGLEdBQUFtRyxLQUFBLEdBQ0FuRyxFQUFBaUIsU0FBQSxLQUNBakIsRUFBQVcsS0FBQWtGLEVBQ0E3RixFQUFBZ0IsT0FBQSxXQUNBLEdBQUFvRixHQUFBN0UsRUFBQTBFLEtBQUEsSUFBQS9FLEtBQUFKLEdBQ0FkLEdBQUFpQixXQUNBRSxFQUFBaUYsSUEwREEzRyxFQUFBNEMsSUFBQSxpQkFBQSxTQUFBQyxFQUFBaEMsR0FDQUEsRUFBQXFGLE1BQ0FwRCxPQUFBQyxhQUFBWixHQUNBVCxJQUVBYixFQUFBbUMsTUFDQVosRUFBQSxJQUFBdkIsRUFBQW1DLEtBR0FuQyxFQUFBVyxXQUNBakIsRUFBQWlCLFNBQUFYLEVBQUFXLFVBR0FaLEVBQUFDLFVDdkdBLElBQUErRixHQUFBQyxRQUFBLG1CQUVBakgsS0FBQUcsVUFBQSxhQUNBLGFBQUEsV0FDQSxTQUFBQyxFQUFBQyxHQUdBLFFBQUE2RyxHQUFBOUMsR0FDQSxHQUFBK0MsR0FBQSxFQUNBQyxFQUFBLEVBQ0FDLEVBQUEsRUFDQUMsRUFBQSxFQUdBLElBQUFsRCxFQUFBaUQsV0FBQWpELEVBQUFpRCxVQUFBdEIsT0FBQSxFQUNBLElBQUEsR0FBQXdCLEdBQUEsRUFBQUEsRUFBQW5ELEVBQUFpRCxVQUFBdEIsT0FBQXdCLElBQ0FuRCxFQUFBaUQsVUFBQUUsSUFBQSxjQUFBbkQsRUFBQWlELFVBQUFFLEdBQUE3RixPQUNBMkYsR0FBQSxFQU1BakQsR0FBQWdELFdBQUFoRCxFQUFBZ0QsVUFBQXJCLE9BQUEsSUFDQXFCLEVBQUFoRCxFQUFBZ0QsVUFBQXJCLFFBSUEzQixFQUFBb0QsTUFBQXBELEVBQUFvRCxLQUFBTCxRQUNBQSxFQUFBN0QsU0FBQWMsRUFBQW9ELEtBQUFMLE1BQUEsS0FJQU0sRUFBQUgsR0FBQUYsRUFBQUMsR0FBQSxHQTVCQSxHQUFBSSxHQUFBLEVBK0JBLFFBQ0FoSCxTQUFBLEVBQ0FELFNBQUEsSUFDQUcsU0FDQUQsU0FBQSxnQ0FDQUUsS0FBQSxTQUFBRCxFQUFBOEIsRUFBQTNCLEVBQUFDLEdBd0JBLFFBQUEyRyxHQUFBekUsRUFBQTJDLEdBQ0EsR0FBQUEsR0FBQUEsRUFBQVUsSUFBQSxDQU9BLEdBTEFWLEVBQUF4QixTQUNBOEMsRUFBQXRCLEVBQUF4QixVQUlBdUQsRUFNQSxNQUxBQSxJQUFBLE9BQ0FwRixFQUFBaUIsV0FBQSxXQUNBbUUsR0FBQSxHQUNBLEdBQUFGLEdBS0FwRyxHQUFBdUUsRUFBQVUsR0FFQSxJQUFBNUUsRUFFQSxRQUFBTCxHQUlBLElBQUEsMEJBQ0FLLEVBQUEsQ0FDQSxNQUNBLEtBQUEsb0JBQ0FBLEVBQUEsRUFZQUwsSUFBQXVHLEdBQUFDLEdBQUFBLEVBQUFDLFNBR0FELEVBQUFDLFFBQUFwRyxFQUFBK0YsRUFBQSxXQUNBRyxFQUFBdkcsS0FLQSxRQUFBMEcsS0FDQUYsRUFBQUcsZUExRUEsR0FBQUgsR0FDQWhILEVBQ0EwQixFQUNBbEIsRUFDQXVHLEVBR0FELEdBQUEsQ0FJQXRILEdBQUEsV0FDQXdILEVBQUEsR0FBQWIsR0FBQWlCLFFBQ0FKLEVBQUFLLE9BR0FySCxFQUFBOEIsU0FBQXdGLGNBQUEsY0FDQXRILEVBQUF1SCxZQUFBUCxFQUFBUSxVQUdBUixFQUFBUyxlQUNBLElBeURBbEksRUFBQTRDLElBQUEsbUJBQUEwRSxHQUNBdEgsRUFBQTRDLElBQUEsZ0JBQUErRSxRQ3BJQS9ILElBQUFHLFVBQUEsV0FDQSxpQkFBQSxpQkFDQSxTQUFBb0ksRUFBQUMsR0FDQSxPQUNBaEksU0FBQSxLQUNBSSxLQUFBLFNBQUFELEVBQUE4QixFQUFBM0IsR0FDQSxHQUFBMkgsRUFHQTNILEdBQUE0SCxTQUFBLFdBQUEsU0FBQUMsR0FDQUYsRUFBQUYsRUFBQUssTUFBQUQsS0FJQWhJLEVBQUEwRSxPQUFBLFdBQ0EsTUFBQW1ELEdBQUFLLFVBQUFKLEdBQ0EsU0FBQUUsR0FDQTFJLFFBQUF5QyxRQUFBRCxHQUFBcUcsS0FBQVAsRUFBQVEsUUFBQUosVUNqQkEsSUFBQUssSUFBQS9CLFFBQUEsTUFDQWdDLE1BQUFoQyxRQUFBLFFBRUFqSCxLQUFBa0osUUFBQSxXQUNBLEtBQUEsU0FDQSxTQUFBQyxFQUFBQyxHQU9BLFFBQUFDLEdBQUFDLEVBQUExSCxHQUNBb0gsR0FBQU8sU0FBQUMsRUFBQUYsRUFBQSxTQUFBMUgsR0FJQSxRQUFBNkgsR0FBQXRGLEVBQUFJLEdBQ0EsR0FBQW1GLEdBQUFQLEVBQUFRLFFBQ0FDLElBMkJBLE9BeEJBQyxVQUFBQyxlQUFBVixFQUFBVyxTQUdBZCxNQUFBZSxLQUFBN0YsRUFBQUksR0FBQThFLEVBQUEsU0FBQVksRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxFQUFBRixFQUFBLEdBQ0FHLEVBQUFELEVBQUFGLEVBQUEsRUFHQUQsSUFDQVAsRUFBQVksT0FBQUwsR0FJQUosU0FBQU0sR0FDQUksVUFBQUYsR0FDQUcsZUFDQUMsV0FBQSxTQUFBQyxHQUNBZCxFQUFBZSxPQUFBRCxFQUNBZCxFQUFBZ0IsSUFBQUYsRUFBQUcsa0JBRUFuQixFQUFBb0IsUUFBQWxCLE9BSUFGLEVBQUFxQixRQXZDQSxHQUFBdkIsR0FBQXdCLFVBQUEsSUFDQVosRUFBQSx5QkFDQWEsR0FBQSxTQUFBLFVBQUEsU0F3Q0EsUUFLQUMsVUFBQXpCLEVBS0EwQixVQUFBLFNBQUFsSyxHQUNBLEdBQUFtSyxHQUFBQyxXQUFBcEssRUFBQXFLLG1CQUdBLE9BQUEsR0FBQUYsRUFHQW5LLEVBQUFzSyxvQkFBQSxFQUNBTixFQUFBLEdBRUFBLEVBQUEsR0FLQUcsRUFBQSxJQUFBLEVBQUFBLEVBQ0FILEVBQUEsR0FJQUEsRUFBQSxRQy9FQWpMLElBQUFrSixRQUFBLFdBQ0EsV0FDQSxTQUFBN0ksR0FDQSxHQUFBbUksR0FBQXJILEtBQUFxSyxNQUNBQyxFQUFBLFdBQ0FwTCxFQUFBLFdBQ0FtSSxFQUFBckgsS0FBQXFLLE1BQ0FDLEtBQ0EsS0FJQSxPQURBQSxNQUVBNUMsUUFBQSxXQUNBLE1BQUFMLE9DZEEsSUFBQVEsSUFBQS9CLFFBQUEsTUFDQXlFLEtBQUF6RSxRQUFBLFFBQ0EwRSxJQUFBMUUsUUFBQSxhQUVBakgsS0FBQWtKLFFBQUEsWUFDQSxLQUNBLFNBQUFDLEdBTUEsUUFBQXlDLEdBQUFDLEdBTUEsTUFKQSxnQkFBQUEsSUFBQUEsSUFBQXZJLFNBQUF1SSxFQUFBLE1BQ0FBLEVBQUFDLE1BQUFELEVBQUEsR0FBQUUsS0FBQSxNQUdBRixFQUFBcEwsUUFBQSxLQUFBLFdBQ0EsR0FBQXVMLEdBQUF2RyxLQUFBQyxNQUFBLEdBQUFELEtBQUF3RyxVQUFBLEVBRUEsT0FEQUQsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEVBQUFBLEVBQ0FFLE9BQUFDLGFBQUFILEtBS0EsUUFBQUksR0FBQWxHLEdBQ0FBLEVBQUFBLEdBQUEsQ0FDQSxJQUFBbUcsR0FBQVQsRUFBQSxHQUNBLFFBQ0FuSyxHQUFBNEssRUFDQWhMLE1BQUEsWUFBQWlDLFNBQUE0QyxFQUFBLElBQUEsR0FDQW9HLFdBQUEsR0FBQW5MLE1BQ0FvTCxRQUNBQyxRQUFBLEtBQ0FDLFFBQUEsS0FDQUMsTUFBQSxLQUNBQyxNQUFBLElBTUEsUUFBQUMsR0FBQUMsR0FDQWpCLEVBQUEsR0FDQSxRQUNBa0IsZ0JBQ0F6SSxhQUFBLEtBQ0FDLGlCQUFBLEtBQ0E3QyxHQUFBb0wsRUFBQXBMLEdBQ0FKLE1BQUF3TCxFQUFBeEwsTUFDQWlMLFVBQUFPLEVBQUFQLFVBQ0FsRixhQUNBQyxhQUNBMEYsV0FDQXZGLE1BQ0F3RixJQUFBLEtBQ0FDLFdBQUEsS0FDQTlGLE1BQUEsS0FDQStGLGtCQUFBLE9BTUEsUUFBQUMsR0FBQXpCLEVBQUFoSyxHQUNBLEdBQUE0SCxFQUVBLEtBQ0FBLEVBQUFOLEdBQUFvRSxhQUFBMUIsRUFBQSxRQUNBLE1BQUF6SSxHQUVBLEdBQUEsV0FBQUEsRUFBQW9LLEtBQ0EsTUFBQTNMLE1BRUEsTUFBQXVCLEdBSUEsTUFBQXFLLE1BQUExRSxNQUFBVSxHQUlBLFFBQUFpRSxHQUFBQyxHQUNBLElBQ0EsR0FBQUMsR0FBQXpFLEdBQUEwRSxZQUFBRixHQUNBLE1BQUF2SyxHQUFBLE9BRUEsR0FBQXdLLEVBQUExSCxPQUFBLEVBQ0EsSUFBQSxHQUFBd0IsR0FBQSxFQUFBQSxFQUFBa0csRUFBQTFILE9BQUF3QixJQUFBLENBQ0EsR0FBQW9HLEdBQUFqQyxLQUFBSyxLQUFBeUIsRUFBQUMsRUFBQWxHLEdBRUF5QixJQUFBNEUsU0FBQUQsR0FBQUUsU0FDQTdFLEdBQUE4RSxXQUFBSCxHQUVBSSxNQUFBSixJQU1BLFFBQUFLLEdBQUFMLEVBQUExTSxHQUNBLEdBQUFnTixHQUFBOUUsRUFBQVEsT0FXQSxPQVRBWCxJQUFBa0YsVUFBQVAsRUFBQUwsS0FBQWEsVUFBQWxOLEdBQUEsU0FBQWdKLEdBQ0EsTUFBQUEsT0FDQWdFLEdBQUEzRCxPQUFBTCxPQUlBZ0UsR0FBQW5ELFlBR0FtRCxFQUFBbEQsUUFJQSxRQUFBcUQsR0FBQTFDLEdBQ0EsR0FBQTJDLEdBQUFsRixFQUFBUSxPQVlBLE9BVEFYLElBQUFzRixPQUFBNUMsRUFBQSxTQUFBekIsR0FDQSxNQUFBQSxPQUNBb0UsR0FBQS9ELE9BQUFMLE9BSUFvRSxHQUFBdkQsWUFHQXVELEVBQUF0RCxRQTFIQSxHQUFBd0QsR0FBQXZELFVBQUEsaUJBQ0F3RCxFQUFBeEQsVUFBQSxZQTRIQSxRQUVBakksSUFBQSxTQUFBMkksRUFBQWhLLEdBQ0EsTUFBQXlMLEdBQUFuQyxVQUFBVSxFQUFBaEssSUFHQStNLE9BQUEsV0FDQSxNQUFBdEIsR0FBQW9CLE9BR0FHLFFBQUEsU0FBQWpOLEdBQ0EsTUFBQTBMLEdBQUFxQixFQUFBL00sRUFBQSxVQUdBa04sWUFBQSxTQUFBbE4sRUFBQUMsR0FDQSxHQUFBa04sR0FBQSxFQUFBLElBQUFsTixFQUFBLEVBQ0EsT0FBQXlMLEdBQUFxQixFQUFBL00sRUFBQW1OLEVBQUEsYUFNQUMsU0FBQSxTQUFBekssR0FDQSxHQUFBMkksR0FBQTNJLEVBQUEySSxRQUNBM0YsRUFBQWhELEVBQUFnRCxVQUNBQyxFQUFBakQsRUFBQWlELFVBQ0FoRyxFQUFBK0MsRUFBQS9DLE1BQ0EyTCxFQUFBNUksRUFBQW9ELEtBQUF3RixJQUNBOEIsR0FBQSxDQUdBLFFBQUExSCxJQUFBQyxJQUFBaEcsSUFBQTJMLEdBQUE1RixFQUFBckIsT0FBQSxHQUFBc0IsRUFBQXRCLE9BQUEsR0FDQSxHQUlBcUIsR0FDQUEsRUFBQTRDLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQUMsT0FBQUQsRUFBQUUsUUFBQUYsRUFBQUcsT0FDQUosR0FBQSxLQU1BekgsR0FDQUEsRUFBQTJDLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQUksT0FBQUosRUFBQXJOLE9BQ0FvTixHQUFBLEtBTUEvQixHQUNBQSxFQUFBL0MsSUFBQSxTQUFBK0UsRUFBQTNJLEdBQ0EySSxFQUFBRyxNQUFBSCxFQUFBckQsTUFBQXFELEVBQUFwRyxRQUNBbUcsR0FBQSxLQU1BQSxJQU1BTSxVQUFBLFdBQ0EsR0FBQUMsR0FBQWxHLEVBQUFRLFFBQ0EyRixLQUNBQyxFQUFBakMsS0FBQTFFLE1BQUFJLEdBQUFvRSxhQUFBbUIsRUFBQSxTQUNBaUIsRUFBQXBELEVBQUFtRCxFQUFBeEosUUFDQTBKLEVBQUE3QyxFQUFBNEMsRUFFQUQsR0FBQUcsUUFBQUYsRUFHQSxJQUFBRyxHQUFBM0IsRUFBQU8sRUFBQWdCLEdBQ0FLLEVBQUE1QixFQUFBUSxFQUFBZ0IsRUFBQS9OLEdBQUEsUUFBQWdPLEdBQ0FJLEVBQUE3QixFQUFBUSxFQUFBZ0IsRUFBQS9OLEdBQUEsbUJBVUEsT0FUQTZOLEdBQUFRLEtBQUFILEdBQ0FMLEVBQUFRLEtBQUFGLEdBQ0FOLEVBQUFRLEtBQUFELEdBR0ExRyxFQUFBNEcsSUFBQVQsR0FBQVUsS0FBQSxXQUNBWCxFQUFBdkUsUUFBQTBFLElBQ0FILEVBQUEvRSxRQUVBK0UsRUFBQXRFLFNBSUFrRixLQUFBLFNBQUFMLEdBQ0EsR0FBQVAsR0FBQWxHLEVBQUFRLFFBQ0EyRixLQUNBQyxFQUFBcEMsRUFBQW9CLEtBR0FnQixHQUFBdkYsSUFBQSxTQUFBK0UsRUFBQTNJLEdBQ0EySSxFQUFBdE4sS0FBQW1PLEVBQUFuTyxLQUNBOE4sRUFBQW5KLEdBQUEvRSxNQUFBdU8sRUFBQXZPLE1BQ0FrTyxFQUFBbkosR0FBQWtHLFdBQUEsR0FBQW5MLFFBS0EsSUFBQStPLEdBQUFsQyxFQUFBUSxFQUFBb0IsRUFBQW5PLEdBQUEsUUFBQW1PLEdBQ0FELEVBQUEzQixFQUFBTyxFQUFBZ0IsRUFTQSxPQVJBRCxHQUFBUSxLQUFBSSxHQUNBWixFQUFBUSxLQUFBSCxHQUdBeEcsRUFBQTRHLElBQUFULEdBQUFVLEtBQUEsV0FDQVgsRUFBQXZFLFFBQUE4RSxJQUNBUCxFQUFBL0UsUUFFQStFLEVBQUF0RSxTQUlBakksT0FBQSxTQUFBckIsR0FDQSxHQUFBNE4sR0FBQWxHLEVBQUFRLFFBQ0EyRixLQUNBQyxFQUFBakMsS0FBQTFFLE1BQUFJLEdBQUFvRSxhQUFBbUIsRUFBQSxRQUdBZ0IsR0FBQXZGLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQXROLEtBQUFBLEdBQ0E4TixFQUFBWSxPQUFBL0osRUFBQSxLQUtBdkUsS0FBQXVPLGdCQUFBM08sRUFHQSxJQUFBbU8sR0FBQXhCLEVBQUFJLEVBQUEvTSxFQUFBLFNBQ0FvTyxFQUFBekIsRUFBQUksRUFBQS9NLEVBQUEsaUJBQ0FrTyxFQUFBM0IsRUFBQU8sRUFBQWdCLEVBUUEsT0FQQUQsR0FBQVEsS0FBQUYsR0FDQU4sRUFBQVEsS0FBQUQsR0FDQVAsRUFBQVEsS0FBQUgsR0FHQXhHLEVBQUE0RyxJQUFBVCxHQUFBVSxLQUFBWCxFQUFBdkUsUUFBQXVFLEVBQUEvRSxRQUVBK0UsRUFBQXRFLFNBTUFzRixhQUFBLFNBQUFqTSxHQUNBLEdBQUFpTCxHQUFBbEcsRUFBQVEsUUFDQTJGLEtBQ0FnQixFQUFBbkQsRUFBQW9CLEtBR0FuSyxHQUFBQyxhQUFBLEtBQ0FELEVBQUFFLGlCQUFBLEtBQ0FGLEVBQUEwSSxnQkFHQXdELEVBQUF0RyxJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUF0TixLQUFBMkMsRUFBQTNDLEtBQ0E2TyxFQUFBbEssR0FBQW1HLE9BQUFDLFFBQUEsRUFDQThELEVBQUFsSyxHQUFBbUcsT0FBQUUsUUFBQSxFQUNBNkQsRUFBQWxLLEdBQUFtRyxPQUFBRyxNQUFBLEVBQ0E0RCxFQUFBbEssR0FBQW1HLE9BQUFJLE1BQUEsS0FLQTlLLEtBQUF1TyxnQkFBQWhNLEVBQUEzQyxHQUdBLElBQUFvTyxHQUFBN0IsRUFBQVEsRUFBQXBLLEVBQUEzQyxHQUFBLG9CQUNBbU8sRUFBQTVCLEVBQUFRLEVBQUFwSyxFQUFBM0MsR0FBQSxRQUFBMkMsR0FDQXVMLEVBQUEzQixFQUFBTyxFQUFBK0IsRUFRQSxPQVBBaEIsR0FBQVEsS0FBQUQsR0FDQVAsRUFBQVEsS0FBQUYsR0FDQU4sRUFBQVEsS0FBQUgsR0FHQXhHLEVBQUE0RyxJQUFBVCxHQUFBVSxLQUFBWCxFQUFBdkUsUUFBQXVFLEVBQUEvRSxRQUVBK0UsRUFBQXRFLFNBT0F3RixLQUFBLFNBQUE5TyxHQUNBLEdBQUFBLEVBQUEsQ0FTQSxJQUFBLEdBUEErTyxHQUFBM08sS0FDQTRPLEVBQUF0SCxFQUFBUSxRQUNBdkYsRUFBQXZDLEtBQUE2TSxRQUFBak4sR0FDQWlQLEVBQUE3TyxLQUFBOE0sWUFBQWxOLEVBQUEsV0FDQWtQLEtBR0FwSixFQUFBLEVBQUFBLEVBQUFtSixFQUFBM0ssT0FBQXdCLElBQUEsQ0FDQSxHQUFBcUosR0FBQUYsRUFBQW5KLEVBQ0EsSUFBQXFKLEVBQUEzTSxRQUFBLEtBQUEyTSxFQUFBM00sT0FBQTRNLE9BQUEsVUFBQSxDQUNBLEdBQUFqRyxHQUFBZ0csRUFBQTNNLE9BQ0F2QyxFQUFBa1AsRUFBQWxQLEtBQ0FnSyxFQUFBVixVQUFBLFlBQUF0SixFQUFBLElBQUEwQyxFQUFBM0MsR0FBQSxJQUFBbUosQ0FDQStGLEdBQUFiLE1BQUFnQixJQUFBcFAsRUFBQSxJQUFBa0osRUFBQWMsS0FBQUEsS0FpQkEsTUFaQUMsS0FBQXpELE9BQ0E2SSxPQUFBSixFQUFBdk0sRUFBQTNDLElBQ0F1TyxLQUFBLFNBQUFnQixHQUdBUixFQUFBUyxlQUFBN00sRUFBQTRNLEdBQUFoQixLQUFBUyxFQUFBM0YsUUFBQTJGLEVBQUFuRyxTQUdBLFNBQUFMLEdBQ0F3RyxFQUFBbkcsT0FBQUwsS0FHQXdHLEVBQUExRixVQU1Ba0csZUFBQSxTQUFBN00sRUFBQThNLEdBQ0EsR0FBQTdCLEdBQUFsRyxFQUFBUSxRQUNBd0gsRUFBQWhFLEVBQUFxQixFQUFBcEssRUFBQTNDLEdBQUEsb0JBQ0EyUCxLQUNBOUIsSUFDQWxMLEdBQUFpTixXQUFBLEdBQUFsUSxLQUdBLEtBQUEsR0FBQW9HLEdBQUEsRUFBQUEsRUFBQTJKLEVBQUFuTCxPQUFBd0IsSUFBQSxDQUNBLEdBQUErSixHQUFBSixFQUFBM0osR0FDQWdLLEVBQUFELEVBQUFFLE1BQUEsS0FDQUMsRUFBQUYsRUFBQUEsRUFBQXhMLE9BQUEsR0FDQTJMLEVBQUFILEVBQUFBLEVBQUF4TCxPQUFBLEVBRUFvTCxHQUFBbkgsSUFBQSxTQUFBbEUsRUFBQU0sR0FHQSxHQUFBTixFQUFBN0IsU0FBQXlOLEdBQUEsWUFBQUQsRUFBQSxDQUVBLEdBQUFFLEdBQUEzRyxVQUFBLFlBQUF5RyxFQUFBLElBQUFyTixFQUFBM0MsR0FBQSxJQUFBaVEsRUFDQUUsRUFBQXhELEVBQUF1RCxHQUNBRSxFQUFBekQsRUFBQXVELEVBQUFsUixRQUFBLElBQUEsaUJBR0EwUSxHQUFBL0ssR0FBQW5DLE9BQ0FrTixFQUFBL0ssR0FBQXBDLGFBQUFrTixFQUFBM0osR0FHQStILEVBQUFRLEtBQUE4QixHQUNBdEMsRUFBQVEsS0FBQStCLE1BTUEsR0FBQUMsR0FBQTlHLFVBQUEsYUFBQTVHLEVBQUEzQyxHQUFBLFFBQ0FzUSxFQUFBRCxFQUFBclIsUUFBQSxRQUFBLGlCQUNBdVIsRUFBQWhFLEVBQUE4RCxFQUFBMU4sR0FDQTZOLEVBQUFqRSxFQUFBK0QsRUFBQVosRUFDQTdCLEdBQUFJLFFBQUFzQyxHQUNBMUMsRUFBQUksUUFBQXVDLEdBR0FiLEVBQUF0QixNQUFBZ0IsSUFBQTFNLEVBQUEzQyxHQUFBaUssS0FBQW9HLElBQ0FWLEVBQUF0QixNQUFBZ0IsSUFBQTFNLEVBQUEzQyxHQUFBLFdBQUFpSyxLQUFBcUcsR0FHQSxJQUFBRyxHQUFBdkcsSUFBQXpELE9BQUE2SSxPQUFBSyxFQUFBaE4sRUFBQTNDLEdBTUEsT0FMQTZOLEdBQUFJLFFBQUF3QyxHQUdBL0ksRUFBQTRHLElBQUFULEdBQUFVLEtBQUFYLEVBQUF2RSxRQUFBdUUsRUFBQS9FLFFBRUErRSxFQUFBdEUsU0FNQXFGLGdCQUFBLFNBQUEvRCxHQUNBLEdBQUE4RixHQUFBbkgsVUFBQSxpQkFBQXFCLEVBQ0ErRixFQUFBRCxFQUFBMVIsUUFBQSxPQUFBLFdBQ0E0UixFQUFBRixFQUFBMVIsUUFBQSxPQUFBLFlBRUE4TSxHQUFBNkUsR0FDQTdFLEVBQUE4RSxRSGpiQXJTLElBQUFrSixRQUFBLFVBQUEsV0EwQkEsUUFBQW9KLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsV0FBQUMsTUFBQSxFQUFBLEdBQ0EsT0FBQSxLQUFBRixFQUFBek0sT0FBQXpDLFNBQUFrUCxHQUFBRCxFQTNCQSxHQUFBSSxLQXFGQSxPQW5GQUEsR0FBQUMsVUFDQUMsY0FBQSxJQUNBQyxhQUFBLEVBQ0FDLFNBQ0FDLFVBQUEsS0FDQUMsY0FBQSxLQUNBQyxVQUFBLE1BQ0FDLGNBQUEsV0FDQUMsUUFBQSxxQkFDQUMsT0FBQSxpQkFDQUMsUUFBQSxhQUNBQyxLQUFBLGdCQUNBQyxNQUFBLFdBQ0FDLElBQUEsUUFDQUMsS0FBQSxVQUNBQyxNQUFBLGdCQUNBQyxPQUFBLFlBQ0FDLEtBQUEsZUFDQUMsTUFBQSxXQUNBQyxhQVNBcEIsRUFBQTVKLFFBQUEsU0FBQWlMLEdBaUJBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQW5VLFFBQUFvVSxXQUFBSCxHQUNBQSxFQUFBQyxFQUFBSCxHQUFBRSxFQUNBdkwsRUFBQTJMLEVBQUFQLFNBQUFPLEVBQUFQLFFBQUFJLElBQUFBLENBQ0EsT0FBQUMsR0FBQTNULFFBQUEsTUFBQWtJLEdBcEJBLEdBQUEyTCxHQUFBM0IsRUFBQUMsU0FBQUcsUUFDQXdCLEVBQUFELEVBQUF0QixVQUNBd0IsRUFBQUYsRUFBQXBCLFNBQ0FQLEdBQUFDLFNBQUFFLGFBQ0EsRUFBQWtCLElBQ0FPLEVBQUFELEVBQUFyQixjQUNBdUIsRUFBQUYsRUFBQW5CLGNBSUEsSUFBQUMsR0FBQTNOLEtBQUFnUCxJQUFBVCxHQUFBLElBQ0FWLEVBQUFGLEVBQUEsR0FDQUksRUFBQUYsRUFBQSxHQUNBSSxFQUFBRixFQUFBLEdBQ0FNLEVBQUFKLEVBQUEsSUFTQWdCLEVBQUEsR0FBQXRCLEdBQUFhLEVBQUFLLEVBQUFsQixRQUFBM04sS0FBQUMsTUFBQTBOLEtBQ0EsR0FBQUEsR0FBQWEsRUFBQUssRUFBQWpCLE9BQUEsSUFDQSxHQUFBQyxHQUFBVyxFQUFBSyxFQUFBaEIsUUFBQTdOLEtBQUFDLE1BQUE0TixLQUNBLEdBQUFBLEdBQUFXLEVBQUFLLEVBQUFmLEtBQUEsSUFDQSxHQUFBQyxHQUFBUyxFQUFBSyxFQUFBZCxNQUFBL04sS0FBQUMsTUFBQThOLEtBQ0EsR0FBQUEsR0FBQVMsRUFBQUssRUFBQWIsSUFBQSxJQUNBLEdBQUFDLEdBQUFPLEVBQUFLLEVBQUFaLEtBQUFqTyxLQUFBQyxNQUFBZ08sS0FDQSxHQUFBQSxHQUFBTyxFQUFBSyxFQUFBWCxNQUFBLElBQ0EsSUFBQUQsR0FBQU8sRUFBQUssRUFBQVYsT0FBQW5PLEtBQUFDLE1BQUFnTyxFQUFBLE1BQ0EsSUFBQUksR0FBQUcsRUFBQUssRUFBQVQsS0FBQSxJQUNBSSxFQUFBSyxFQUFBUixNQUFBck8sS0FBQUMsTUFBQW9PLElBRUFhLEVBQUFDLFNBQUFOLEVBQUFPLGNBQUEsSUFBQVAsRUFBQU8sYUFDQSxRQUFBTixFQUFBRyxFQUFBRixHQUFBekksS0FBQTRJLEdBQUFHLFFBR0FuQyxFQUFBL0osTUFBQSxTQUFBbU0sR0FDQSxHQUFBOVUsUUFBQStVLFNBQUFELEdBQUEsQ0FDQUEsR0FBQSxFQUVBLElBQUFFLEdBQUEzQyxFQUFBeUMsRUFDQSxPQUFBelIsVUFBQTJSLEVBQUEsSUFFQSxHQUFBcEosSUFBQWtKLEdBQUEsSUFBQUQsTUFLQSxPQUpBakosR0FBQUEsRUFBQXBMLFFBQUEsUUFBQSxJQUNBb0wsRUFBQUEsRUFBQXBMLFFBQUEsSUFBQSxLQUFBQSxRQUFBLElBQUEsS0FDQW9MLEVBQUFBLEVBQUFwTCxRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLFFBQ0FvTCxFQUFBQSxFQUFBcEwsUUFBQSx3QkFBQSxTQUNBLEdBQUFVLE1BQUEwSyxJQUdBOEcsSUl0RkEzUyxJQUFBa1YsT0FBQSxXQUNBLFVBQUEsVUFDQSxTQUFBMU0sRUFBQUQsR0FDQSxNQUFBLFVBQUFJLEdBQ0EsR0FBQUYsR0FBQUYsRUFBQUssTUFBQUQsR0FDQXdNLEVBQUEzTSxFQUFBSyxVQUFBSixDQUNBLE9BQUFGLEdBQUFRLFFBQUFvTSxNQ05BLElBQUFDLEtBQUFuTyxRQUFBLFlBQUFvTyxXQUVBclYsS0FBQXNWLFdBQUEsWUFDQSxhQUFBLFNBQUEsU0FBQSxTQUFBLFdBQ0EsU0FBQWxWLEVBQUF1RCxFQUFBNFIsRUFBQW5NLEVBQUFvTSxHQUNBcFYsRUFBQXFWLGlCQUFBLEdBRUE5UixFQUFBK1IsaUJBQUEsV0FDQUYsRUFBQXBHLFlBQUFZLEtBQUEsU0FBQWdCLEdBQ0E1USxFQUFBdVYsV0FBQSx1QkFBQTNFLEdBQ0F1RSxFQUFBSyxHQUFBLHFCQUFBblUsR0FBQXVQLEVBQUF2UCxNQUdBLFNBQUF3SSxHQUNBNEwsUUFBQUMsSUFBQSxNQUFBN0wsTUFJQW1MLElBQUFXLEdBQUEsY0FBQSxTQUFBblEsR0FDQUEsR0FBQUEsRUFBQW9RLFdBRUFILFFBQUFDLElBQUEsY0FBQWxRLEdBQ0EyUCxFQUFBSyxHQUFBaFEsRUFBQW9RLGFBSUE1VixFQUFBNlYsVUFBQSxTQUFBdFYsRUFBQXVWLEdBQ0F2VixFQUFBd1YsU0FBQXhWLEVBQUF5VixNQUFBRCxRQUNBLG1CQUFBRCxJQUNBQSxJQUdBdlYsRUFBQTBWLE9BQUFILE1DaENBLElBQUFsTixJQUFBL0IsUUFBQSxNQUNBMEUsSUFBQTFFLFFBQUEsYUFFQWpILEtBQUFzVixXQUFBLG1CQUNBLGFBQUEsU0FBQSxTQUNBLFNBQUFsVixFQUFBdUQsRUFBQTRSLEdBQ0E1UixFQUFBMlMsV0FDQUMsT0FBQSxHQUNBQyxZQUFBLEdBQ0FDLGdCQUFBLElBSUE5UyxFQUFBMlMsVUFBQTNLLElBQUErSyxZQUVBL1MsRUFBQXNNLEtBQUEsV0FFQXRFLElBQUFnTCxVQUFBaFQsRUFBQTJTLGVDakJBdFcsSUFBQXNWLFdBQUEsZUFDQSxhQUFBLFNBQUEsZUFBQSxXQUNBLFNBQUFsVixFQUFBdUQsRUFBQWlULEVBQUFwQixHQUdBcFYsRUFBQWdFLFFBQUFvUixFQUFBOUcsUUFBQWtJLEVBQUFuVixPQ0xBekIsSUFBQXNWLFdBQUEsc0JBQ0EsYUFBQSxTQUFBLGVBQUEsV0FDQSxTQUFBbFYsRUFBQXVELEVBQUFpVCxFQUFBcEIsR0FDQTdSLEVBQUFrVCxhQUFBLE1BQ0FsVCxFQUFBbVQsa0JBQUEsR0FHQW5ULEVBQUFvVCxhQUFBdkIsRUFBQTdHLFlBQUFpSSxFQUFBblYsR0FBQSxXQUVBa0MsRUFBQXFULGFBQUEsU0FBQXRWLEdBQ0FpQyxFQUFBa1QsYUFBQW5WLEVBQ0FpQyxFQUFBbVQsa0JBQUEsT0FBQXBWLEVBQUEsR0FBQUEsR0FHQWlDLEVBQUFzVCxZQUFBLFNBQUFuUixHQUNBMUYsRUFBQThXLE1BQUEsY0FBQXhWLEtBQUEsVUFBQW9FLEtBQUFBLEVBQUExQixRQUFBaEUsRUFBQWdFLGFDZkEsSUFBQWdSLEtBQUFuTyxRQUFBLFlBQUFvTyxXQUVBclYsS0FBQXNWLFdBQUEscUJBQ0EsYUFBQSxTQUFBLFdBQUEsZUFBQSxXQUNBLFNBQUFsVixFQUFBdUQsRUFBQXRELEVBQUF1VyxFQUFBcEIsR0FpQkEsUUFBQTJCLEdBQUFDLEdBYUEsUUFBQUMsR0FBQXZSLEdBR0EsR0FBQUEsRUFBQXdSLE9BQUEsQ0FDQSxHQUFBQyxHQUFBLENBRUEsUUFBQXpSLEVBQUF3UixRQUNBLElBQUEsVUFDQUMsRUFBQSxDQUNBLE1BQ0EsS0FBQSxTQUNBQSxFQUFBLEVBSUFDLEVBQUFELEdBQUF0UyxNQUFBeUssUUFBQTVKLEdBQ0FuQyxFQUFBOFQsV0FBQUQsRUFBQUQsR0FBQTdWLE1BQUFpQyxFQUFBOFQsV0FBQUQsRUFBQUQsR0FBQTdWLE1BQUEsR0E1QkEsSUFBQTBWLEdBQUFBLEVBQUFyUixPQUFBLEVBRUEsTUFEQXBDLEdBQUErVCxjQUFBLElBS0EvVCxHQUFBOFQsY0FDQTlULEVBQUE4VCxXQUFBakwsUUFBQSxFQUNBN0ksRUFBQThULFdBQUFoTCxRQUFBLEVBQ0E5SSxFQUFBOFQsV0FBQS9LLE1BQUEsQ0FDQSxJQUFBOEssS0FBQTlWLEtBQUEsVUFBQXVELFdBQUF2RCxLQUFBLFVBQUF1RCxXQUFBdkQsS0FBQSxRQUFBdUQsVUE2QkEsT0FQQW1TLEdBQUFwTixJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUE0SSxRQUFBaFUsRUFBQVUsY0FDQWdULEVBQUF0SSxLQUlBcEwsRUFBQStULGNBQUEsRUFDQUYsRUFHQSxRQUFBSSxLQUNBLEdBQUEsT0FBQXhYLEVBQUFnRSxRQUFBQyxhQUFBLENBR0EsR0FBQThNLEdBQUFxRSxFQUFBN0csWUFBQXZPLEVBQUFnRSxRQUFBM0MsR0FBQSxVQUdBa0MsR0FBQWtVLFdBQUFWLEVBQUFoRyxHQUdBeE4sRUFBQW1VLFlBQUExWCxFQUFBZ0UsUUFBQUUsa0JBQUFsRSxFQUFBZ0UsUUFBQUMsYUFBQSxZQUFBLFdBSUEsUUFBQTBULEtBRUEsR0FBQUMsR0FBQXhDLEVBQUEzRyxTQUFBek8sRUFBQWdFLFFBT0EsT0FKQTRULElBQ0E1WCxFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSxzQ0FBQStCLElBQUEsRUFBQTFCLEtBQUEsUUFBQUosS0FBQSxTQUdBMFcsRUFJQSxRQUFBQyxLQUNBdFUsRUFBQXVVLFlBQUFILElBQ0FwVSxFQUFBK1QsYUFBQSxPQUFBdFgsRUFBQWdFLFFBQUFFLGlCQUVBLGNBQUFYLEVBQUFtVSxZQUNBblUsRUFBQXdVLFlBQUEsR0FFQXhVLEVBQUF3VSxXQUFBLE9BQUEvWCxFQUFBZ0UsUUFBQUMsY0FBQSxJQUFBakUsRUFBQWdFLFFBQUFDLGFBQ0FWLEVBQUF3VSxXQUFBL1gsRUFBQWdFLFFBQUFFLGtCQUFBbEUsRUFBQWdFLFFBQUFDLGNBS0EsUUFBQStULEtBQ0FoWSxFQUFBZ0UsUUFBQW9SLEVBQUE5RyxRQUFBdE8sRUFBQWdFLFFBQUEzQyxJQUNBa0MsRUFBQVUsYUFBQWpFLEVBQUFnRSxRQUFBQyxhQUdBVixFQUFBOFQsV0FBQXJYLEVBQUFnRSxTQUFBaEUsRUFBQWdFLFFBQUEwSSxhQUFBMU0sRUFBQWdFLFFBQUEwSSxhQUFBbkosRUFBQVUsY0FBQSxLQUVBakUsRUFBQThXLE1BQUEsbUJBQUE5VyxFQUFBZ0UsU0FNQSxRQUFBaVUsS0FDQXpELGVBQUF4VSxHQUFBZ0UsUUFBQW9ELEtBQUE4USxhQUFBbFksRUFBQWdFLFFBQUFvRCxLQUFBOFEsZUFBQSxHQUFBQyxJQUNBblksRUFBQXVWLFdBQUEsY0FBQXRVLE1BQUEsZ0JBQUErQixJQUFBLEVBQUExQixLQUFBLFNBQ0E2VyxHQUFBLEVBRUEvQyxFQUFBakYsS0FBQW5RLEVBQUFnRSxRQUFBM0MsSUFDQXVPLEtBQUEsU0FBQWdCLEdBQ0F1SCxHQUFBLEVBQ0FuWSxFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsVUFBQUosS0FBQSxXQUdBLFNBQUEySSxHQUNBNEwsUUFBQUMsSUFBQSxjQUFBN0wsR0FDQXNPLEdBQUEsRUFDQW5ZLEVBQUF1VixXQUFBLGNBQUF0VSxNQUFBLGNBQUErQixJQUFBLEVBQUExQixLQUFBLFFBQUFKLEtBQUEsYUFpREEsUUFBQWtYLEdBQUE1UyxHQUNBLEdBQUFBLEdBQUFBLEVBQUFVLEtBQUFWLEVBQUFSLFFBQUEsQ0FHQXpCLEVBQUE4VSxTQUFBclQsUUFBQTlCLFNBQUFzQyxFQUFBUixRQUFBLElBQ0F6QixFQUFBOFUsU0FBQXBYLE1BQUF1RSxFQUFBLElBQUFBLEVBQUFVLElBQUEzQyxFQUFBOFUsU0FBQXBYLEtBRUEsSUFBQXFYLEdBQUE5UyxDQUNBOFMsR0FBQXRVLFFBQUFoRSxFQUFBZ0UsUUFDQWhFLEVBQUE4VyxNQUFBLG1CQUFBd0IsSUFJQSxRQUFBQyxLQUNBdFksRUFBQSxXQUNBK1gsSUFDQVIsSUFDQUssSUFDQUksSUFDQTFVLEVBQUFpVixZQUFBLEdBQ0EsR0FHQSxRQUFBQyxHQUFBQyxHQUNBakQsUUFBQUMsSUFBQSx1QkFBQWdELEdBQ0FuVixFQUFBaVYsWUFBQSxFQXhNQSxHQUFBRyxLQUFBclgsS0FBQSxVQUFBdUQsV0FBQXZELEtBQUEsVUFBQXVELFdBQUF2RCxLQUFBLFFBQUF1RCxVQUVBdEIsR0FBQWlWLFlBQUEsRUFDQWpWLEVBQUF1VSxhQUFBLEVBQ0F2VSxFQUFBK1QsY0FBQSxFQUNBL1QsRUFBQXdVLFlBQUEsRUFDQXhVLEVBQUFtVSxZQUFBLFlBQ0FuVSxFQUFBa1UsV0FBQWtCLEVBQ0FwVixFQUFBOFQsY0FDQTlULEVBQUFVLGFBQUFqRSxFQUFBZ0UsUUFBQUMsY0FBQSxFQUNBVixFQUFBOFUsVUFDQXJULFFBQUEsRUFDQS9ELE1BQUEsV0FrR0EsSUFBQWtYLElBQUEsQ0FxQkFILEtBQ0FSLElBQ0FLLElBR0F0VSxFQUFBcVYsYUFBQSxTQUFBL1QsR0FDQTdFLEVBQUE4VyxNQUFBLGNBQUF4VixLQUFBLFFBQUF1RCxNQUFBQSxFQUFBYixRQUFBaEUsRUFBQWdFLFdBSUFULEVBQUFzVixXQUFBLFdBQ0EsR0FBQUMsR0FBQW5CLEdBR0FtQixLQUVBdlYsRUFBQW1VLFlBQUEsVUFDQW5VLEVBQUFpVixZQUFBLEVBRUFwVixXQUFBLFdBQ0FwRCxFQUFBOFcsTUFBQSxpQkFDQSxJQUVBOUIsSUFBQStELEtBQUEsZUFBQXpYLEtBQUEsVUFBQTJLLFVBQUFqTSxFQUFBZ0UsUUFBQTNDLE9BSUFrQyxFQUFBeVYsYUFBQSxXQUNBLEdBQUFGLEdBQUFuQixHQUdBbUIsS0FFQXZWLEVBQUFpVixZQUFBLEVBQ0FqVixFQUFBbVUsWUFBQSxZQUNBblUsRUFBQXdVLFlBQUEsRUFFQTNVLFdBQUEsV0FDQXBELEVBQUE4VyxNQUFBLGlCQUNBLElBRUE5QixJQUFBK0QsS0FBQSxlQUFBelgsS0FBQSxZQUFBMkssVUFBQWpNLEVBQUFnRSxRQUFBM0MsT0ErQkEyVCxJQUFBVyxHQUFBLGtCQUFBeUMsR0FDQXBELElBQUFXLEdBQUEsa0JBQUE0QyxHQUNBdkQsSUFBQVcsR0FBQSxnQkFBQThDLEtDbE5BLElBQUE3UCxJQUFBL0IsUUFBQSxLQUVBakgsS0FBQXNWLFdBQUEsdUJBQ0EsYUFBQSxTQUFBLFNBQUEsV0FDQSxTQUFBbFYsRUFBQXVELEVBQUE0UixFQUFBQyxHQVVBLFFBQUE2RCxHQUFBM1gsRUFBQVQsR0FDQWIsRUFBQWdFLFFBQUExQyxHQUFBb08sS0FBQTdPLEdBR0EsUUFBQXFZLEtBRUEsR0FBQWhRLEdBQUFrTSxFQUFBelMsSUFBQSxzQkFFQSxVQUFBdUcsR0FBQUEsRUFBQWlOLFFBQUFqTixFQUFBa04sYUFBQWxOLEVBQUFtTixpQkFqQkEsR0FBQThDLEVBRUE1VixHQUFBNFUsU0FBQSxFQUNBNVUsRUFBQTZWLGVBQUEsWUFBQSxPQUFBLFVBQ0E3VixFQUFBOFYsWUFBQSxFQUNBOVYsRUFBQStWLGdCQUFBLEVBQ0EvVixFQUFBZ1csVUFDQTFaLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFFBQUFULEVBQUFnVyxRQWtCQWhXLEVBQUErVixlQUFBSixJQUdBM1YsRUFBQTBCLE9BQUEsVUFBQSxTQUFBdVUsRUFBQUMsR0FDQUQsR0FBQUMsSUFDQWxXLEVBQUE4VixZQUFBLEVBR0E5VixFQUFBc00sVUFFQSxHQUlBdE0sRUFBQXNNLEtBQUEsV0FDQXNKLEdBQ0FyVyxPQUFBQyxhQUFBb1csR0FJQUEsRUFBQS9WLFdBQUEsV0FHQWdTLEVBQUF2RixLQUFBN1AsRUFBQWdFLFNBQ0E0TCxLQUFBLFNBQUFnQixHQUVBNVEsRUFBQThXLE1BQUEsbUJBQUFsRyxHQUdBL1EsUUFBQTBFLEtBQUF2RSxFQUFBZ0UsUUFBQVQsRUFBQWdXLFFBQ0FoVyxFQUFBOFYsWUFBQSxHQUdBLFNBQUF4UCxHQUNBNEwsUUFBQUMsSUFBQSxNQUFBN0wsTUFFQSxNQUlBdEcsRUFBQW1XLFFBQUEsV0FDQW5XLEVBQUE0VSxTQUFBLEVBQ0FuWSxFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsU0FFQThULEVBQUFqRixLQUFBblEsRUFBQWdFLFFBQUEzQyxJQUNBdU8sS0FBQSxTQUFBZ0IsR0FDQXJOLEVBQUE0VSxTQUFBLEVBQ0FuWSxFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsVUFBQUosS0FBQSxXQUdBLFNBQUEySSxHQUNBdEcsRUFBQTRVLFNBQUEsRUFDQTFDLFFBQUFDLElBQUEsY0FBQTdMLEdBQ0E3SixFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSxjQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxRQUFBSixLQUFBLGFBS0FxQyxFQUFBb1csV0FBQSxXQUNBLEdBQUFDLEdBQUFDLFFBQUEsbURBQ0FELEtBRUEvWixRQUFBMEUsS0FBQWhCLEVBQUFnVyxPQUFBdlosRUFBQWdFLFNBQ0FULEVBQUE4VixZQUFBLElBS0E5VixFQUFBdVcsY0FBQSxXQUNBLEdBQUFGLEdBQUFDLFFBQUEsZ0RBQ0EsSUFBQUQsRUFBQSxDQUNBLEdBQUFHLEdBQUEvWixFQUFBZ0UsUUFBQTNDLEVBRUErVCxHQUFBMVMsT0FBQXFYLEdBQ0FuSyxLQUFBLFNBQUFnQixHQUNBNVEsRUFBQThXLE1BQUEsb0JBQUF6VixHQUFBMFksSUFDQTVFLEVBQUFLLEdBQUEsUUFDQXhWLEVBQUFnRSxXQUNBVCxFQUFBOFYsWUFBQSxFQUNBclosRUFBQXVWLFdBQUEsY0FBQXRVLE1BQUEsK0JBQUErQixJQUFBLEVBQUExQixLQUFBLGFBR0EsU0FBQXVJLEdBQ0E0TCxRQUFBQyxJQUFBLE1BQUE3TCxHQUNBN0osRUFBQThXLE1BQUEsb0JBQUF6VixHQUFBMFksSUFDQTVFLEVBQUFLLEdBQUEsUUFDQXhWLEVBQUFnRSxXQUNBVCxFQUFBOFYsWUFBQSxNQU1BOVYsRUFBQXlXLFlBQUEsV0FDQSxHQUFBQyxJQUNBQyxRQUFBLEVBQ0FwTCxLQUFBLEtBQ0FGLE1BQUEsS0FDQUMsT0FBQSxLQUdBb0ssR0FBQSxZQUFBZ0IsSUFJQTFXLEVBQUE0VyxZQUFBLFdBQ0EsR0FBQUMsSUFDQUYsUUFBQSxFQUNBNVksS0FBQSxZQUNBeU4sTUFBQSxLQUdBa0ssR0FBQSxZQUFBbUIsSUFJQTdXLEVBQUE4VyxVQUFBLFdBQ0EsR0FBQUMsSUFDQUosUUFBQSxFQUNBcEwsS0FBQSxLQUNBdkcsTUFBQSxLQUNBK0MsS0FBQSxLQUdBMk4sR0FBQSxVQUFBcUIsSUFJQS9XLEVBQUFnWCxhQUFBLFNBQUFqWixFQUFBRCxHQUNBckIsRUFBQWdFLFFBQUExQyxHQUFBRCxHQUFBNlksT0FBQWxhLEVBQUFnRSxRQUFBMUMsR0FBQUQsR0FBQTZZLFVBQUEsR0FBQSxTQUFBbGEsRUFBQWdFLFFBQUExQyxHQUFBRCxHQUFBNlksT0FHQTNXLEVBQUFzTSxRQUlBdE0sRUFBQWlYLGVBQUEsU0FBQWxaLEVBQUFELEdBQ0FyQixFQUFBZ0UsUUFBQTFDLEdBQUF5TyxPQUFBMU8sRUFBQSxHQUdBa0MsRUFBQXNNLFFBSUF0TSxFQUFBME0sYUFBQSxXQUNBbUYsRUFBQW5GLGFBQUFqUSxFQUFBZ0UsU0FDQTRMLEtBQUEsU0FBQWdCLEdBQ0E1USxFQUFBdVYsV0FBQSxjQUFBdFUsTUFBQSx1QkFBQStCLElBQUEsRUFBQTFCLEtBQUEsVUFBQUosS0FBQSxhQUdBLFNBQUEySSxHQUNBN0osRUFBQXVWLFdBQUEsY0FBQXRVLE1BQUEsb0NBQUErQixJQUFBLEVBQUExQixLQUFBLFFBQUFKLEtBQUEsY0NyTEEsSUFBQTBILElBQUEvQixRQUFBLEtBRUFqSCxLQUFBc1YsV0FBQSxpQkFDQSxhQUFBLFNBQUEsU0FBQSxXQUNBLFNBQUFsVixFQUFBdUQsRUFBQTRSLEVBQUFDLEdBQ0E3UixFQUFBa1gsWUFHQWxYLEVBQUFrWCxTQUFBckYsRUFBQS9HLFNBR0FyTyxFQUFBNEMsSUFBQSx1QkFBQSxTQUFBQyxFQUFBMkMsR0FDQUEsR0FBQUEsRUFBQW5FLElBRUFrQyxFQUFBa1gsU0FBQW5MLFFBQUE5SixLQUlBeEYsRUFBQTRDLElBQUEsbUJBQUEsU0FBQUMsRUFBQTJDLEdBQ0FBLEdBQUFBLEVBQUFuRSxJQUVBa0MsRUFBQWtYLFNBQUE3USxJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUF0TixLQUFBbUUsRUFBQW5FLEtBQ0FrQyxFQUFBa1gsU0FBQXpVLEdBQUEvRSxNQUFBdUUsRUFBQXZFLE1BQ0FzQyxFQUFBa1gsU0FBQXpVLEdBQUFrRyxVQUFBMUcsRUFBQTBHLFVBRUExRyxFQUFBa0gsYUFBQWxILEVBQUF2QixnQkFFQXVCLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFtSSxVQUNBN0ksRUFBQWtYLFNBQUF6VSxHQUFBbUcsT0FBQUMsUUFBQTVHLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFtSSxTQUdBNUcsRUFBQWtILGFBQUFsSCxFQUFBdkIsY0FBQW9JLFVBQ0E5SSxFQUFBa1gsU0FBQXpVLEdBQUFtRyxPQUFBRSxRQUFBN0csRUFBQWtILGFBQUFsSCxFQUFBdkIsY0FBQW9JLFNBR0E3RyxFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBcUksUUFDQS9JLEVBQUFrWCxTQUFBelUsR0FBQW1HLE9BQUFHLE1BQUE5RyxFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBcUksT0FHQTlHLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFzSSxRQUNBaEosRUFBQWtYLFNBQUF6VSxHQUFBbUcsT0FBQUksTUFBQS9HLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFzSSxhQVFBdk0sRUFBQTRDLElBQUEsbUJBQUEsU0FBQUMsRUFBQTJDLEdBQ0FBLEdBQUFBLEVBQUFuRSxJQUVBa0MsRUFBQWtYLFNBQUE3USxJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUF0TixLQUFBbUUsRUFBQW5FLElBQ0FrQyxFQUFBa1gsU0FBQTFLLE9BQUEvSixFQUFBLE9BS0F6QyxFQUFBbVgsWUFBQSxTQUFBclosR0FHQSxHQUFBQyxHQUFBLFFBR0E2VCxHQUFBSyxHQUFBLFlBQUFsVSxHQUFBRCxHQUFBQSxJQUNBckIsRUFBQXFWLGlCQUFBaFUsTUMvREF6QixJQUFBK2EsU0FBQSxVQUNBQyxJQUFBLFFBQ0FDLFNBRUFDLFFBRUFuUixTQUNBb1IsWUFDQUMsSUFBQSxJQUNBQyxNQUFBLEVBQ0FDLEtBQUEsS0FFQUMsVUFBQSxPQUNBQyxhQUFBLEVBQ0FDLG9CQUFBLEtDakJBemIsSUFBQTBiLFFBQ0EsaUJBQUEscUJBQ0EsU0FBQUMsRUFBQUMsR0FTQUQsRUFLQUUsTUFBQSxRQUNBN08sSUFBQSxJQUNBdEosWUFBQSxjQUVBbVksTUFBQSxlQUNBN08sSUFBQSxlQUNBdEosWUFBQSxtQkFDQTRSLFdBQUEsb0JBTUF1RyxNQUFBLFlBQ0E3TyxJQUFBLGdCQUNBdEosWUFBQSxnQkFDQTRSLFdBQUEsZ0JBRUF1RyxNQUFBLHFCQUNBN08sSUFBQSxZQUNBdEosWUFBQSx5QkFDQTRSLFdBQUEsd0JBRUF1RyxNQUFBLG1CQUNBN08sSUFBQSxVQUNBdEosWUFBQSx1QkFDQTRSLFdBQUEsc0JBRUF1RyxNQUFBLG9CQUNBN08sSUFBQSxXQUNBdEosWUFBQSx3QkFDQTRSLFdBQUEsdUJBc0JBc0csRUFBQUUsVUFBQSxRQ3JFQTliLElBQUErYixLQUFBLGFBQUEsUUFDQSxTQUFBM2IsRUFBQTRiLEdBR0EsR0FBQUMsR0FBQUQsRUFBQUUsU0FBQUMsUUFBQUMsTUFDQUgsR0FBQSxnQkFBQSxtQkFFQTdiLEVBQUE0QyxJQUFBLG9CQUFBLFNBQUFxWixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBL1AsR0FDQW1KLFFBQUFDLElBQUEsb0JBQUFwSiIsImZpbGUiOiJtdWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTVVHID0gYW5ndWxhci5tb2R1bGUoJ211Z3Nob3QnLCBbJ3VpLnJvdXRlcicsICdtdWd0ZW1wbGF0ZXMnXSk7XG4iLCIvKipcbiAqIGFsZXJ0XG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIGFsZXJ0cyBhbmQgbm90aWNlcyBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogPGFsZXJ0PjwvYWxlcnQ+XG4gKlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBpbmZvLCBzdWNjZXNzLCB3YXJuaW5nLCBlcnJvclxuICpcbiAqIE9QVElPTlM6XG4gKiAtIHRpdGxlOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlLCBpbiBzZWNvbmRzXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBubyBkZWZhdWx0LCBzZWUgaHR0cHM6Ly9vY3RpY29ucy5naXRodWIuY29tLyBmb3Igb3B0aW9uc1xuICovXG5NVUcuZGlyZWN0aXZlKCdhbGVydCcsXG5bJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnJHRlbXBsYXRlQ2FjaGUnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlLCAkdGVtcGxhdGVDYWNoZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJhbGVydC1wYXJlbnRcIj48L2Rpdj4nLFxuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgYWxlcnRUZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYWxlcnQuaHRtbCcpO1xuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSAnJztcbiAgICAgIHZhciBhbGVydEFjdGl2ZSA9ICdhbGVydC1hY3RpdmUnO1xuICAgICAgdmFyIGFsZXJ0VmlzaWJsZSA9ICdhbGVydC12aXNpYmxlJztcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UoZGF0YSkge1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLnRpdGxlO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbikgPyBkYXRhLmljb24gOiBudWxsO1xuICAgICAgICB2YXIgJHRtcFNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuXG4gICAgICAgIC8vIHNldHVwIHNpbXBsZSBzY29wZSBmb3Igb25seSB0aGlzIGFsZXJ0IGl0ZW1cbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0ID0ge307XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5pZCA9IF9pZDtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0Lmljb24gPSAoZGF0YS5pY29uKSA/IGRhdGEuaWNvbiA6IG51bGw7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50eXBlID0gKGRhdGEudHlwZSkgPyBkYXRhLnR5cGUgOiAnaW5mbyc7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50aXRsZSA9IGRhdGEudGl0bGU7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5hY3Rpb24gPSAoIWRhdGEuY2FsbGJhY2spID8gbnVsbCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBhY3Rpb25FbCA9IHRoaXMuaWQ7XG4gICAgICAgICAgZGF0YS5jYWxsYmFjaygpO1xuICAgICAgICAgIGNsZWFyRWwodGhpcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFsZXJ0RWwgPSAkY29tcGlsZShhbGVydFRlbXBsYXRlKSgkdG1wU2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBhbGVydEVsWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZChhbGVydEVsKTtcbiAgICAgICAgYWxlcnRFbC5hZGRDbGFzcyhhbGVydEFjdGl2ZSk7XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBhbGVydEVsLmFkZENsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNsZWFyRWwoYWxlcnRFbCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbChlbGVtKSB7XG4gICAgICAgIGlmICghZWxlbSAmJiBwcmV2aW91c0lkKSB7XG4gICAgICAgICAgZWxlbSA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmV2aW91c0lkKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVsZW0pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbSkge1xuICAgICAgICAgIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZWxlbSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdBTEVSVDpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEudGl0bGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZiAoZGF0YS5kdXIpIHtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBmYWRlSW5cbiAqIEEgZGlyZWN0aXZlIGZvciBhbmltYXRpbmcgaW4gZWxlbWVudHNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnZmFkZUluJywgW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoYXR0cnMuZmFkZUluKSB8fCAxMDtcbiAgICAgIGVsZW0uYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbS5jc3MoJ29wYWNpdHknLCAnMScpO1xuICAgICAgfSwgb2Zmc2V0KTtcbiAgICB9XG4gIH07XG5cbn1dKTtcbiIsIi8qKlxuICogTW9kYWxcbiAqIEJ1aWxkcyBhIG1vZGFsIGZvciBpbWFnZSB2aWV3aW5nIGFuZCBjb21wYXJpbmdcbiAqXG4gKiBAdXNhZ2VcbiAqIDxtb2RhbD48L21vZGFsPlxuICovXG5NVUcuZGlyZWN0aXZlKCdtb2RhbCcsXG5bJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLFxuZnVuY3Rpb24oJHRpbWVvdXQsICRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgbW9kYWxBY3RpdmUgPSAnbW9kYWwtb3Blbic7XG4gICAgICB2YXIgbW9kYWxWaXNpYmxlID0gJ21vZGFsLXZpc2libGUnO1xuXG4gICAgICAkc2NvcGUucHJvamVjdCA9IGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9ICdzaWRlcyc7XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge307XG4gICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICRzY29wZS5hY3RpdmVJdGVtID0ge307XG4gICAgICAkc2NvcGUuY29tcGFyZUl0ZW0gPSB7XG4gICAgICAgIGE6ICcnLFxuICAgICAgICBiOiAnJyxcbiAgICAgICAgYzogJydcbiAgICAgIH07XG4gICAgICAkc2NvcGUudmlld2VyID0ge1xuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge1xuICAgICAgICBhbW91bnQ6IDAuOCxcbiAgICAgICAgaW52ZXJzZTogMC4yLFxuICAgICAgICBwZXJjZW50OiAnODAlJ1xuICAgICAgfTtcblxuICAgICAgLy8gd2luZG93LkFUTF9KUV9QQUdFX1BST1BTID0ge1xuICAgICAgLy8gICB0cmlnZ2VyRnVuY3Rpb246IGZ1bmN0aW9uKHNob3dDb2xsZWN0b3JEaWFsb2cpIHtcbiAgICAgIC8vICAgICAvL1JlcXVpcmVzIHRoYXQgalF1ZXJ5IGlzIGF2YWlsYWJsZSFcbiAgICAgIC8vICAgICAkKFwiI2Z1blRpY2tldFRpbWVcIikuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgLy8gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gICAgICAgc2hvd0NvbGxlY3RvckRpYWxvZygpO1xuICAgICAgLy8gICAgIH0pO1xuICAgICAgLy8gICB9LFxuICAgICAgLy8gICBmaWVsZFZhbHVlczoge1xuICAgICAgLy8gICAgIHN1bW1hcnk6ICdWaXN1YWwgRGlmZjogJyArICRzY29wZS5hY3RpdmVJdGVtLnN0YXR1cyArICcgZm9yICcgKyAkc2NvcGUuYWN0aXZlSXRlbS5uYW1lLFxuICAgICAgLy8gICAgIGRlc2NyaXB0aW9uOiAnRGV0YWlsczpcXG5cXG4qKlN0YXR1czoqKiBFcnJvcicsXG4gICAgICAvLyAgICAgcHJpb3JpdHk6ICcyJ1xuICAgICAgLy8gICB9XG4gICAgICAvLyB9O1xuXG4gICAgICAkc2NvcGUuJHdhdGNoKCdvcGFjaXR5UmFuZ2UuYW1vdW50JywgZnVuY3Rpb24obnYsIG92KSB7XG4gICAgICAgIGlmIChudiA9PT0gb3YpIHtyZXR1cm47fVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgb3RoZXIgdmFsdWVzXG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UuaW52ZXJzZSA9ICgxIC0gbnYpLnRvRml4ZWQoMik7XG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UucGVyY2VudCA9IE1hdGgucm91bmQobnYgKiAxMDApICsgJyUnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHNldCB0aGUgYWN0aXZlIGl0ZW0gd2l0aCBjb3JyZWN0IHBhdGhzXG4gICAgICBmdW5jdGlvbiBzZXRBY3RpdmVJdGVtKGRhdGEpIHtcbiAgICAgICAgdmFyIGltYWdlU3JjID0gKCFkYXRhLnJlbW90ZVNvdXJjZSkgPyBkYXRhLnNvdXJjZSA6IGRhdGEucmVtb3RlU291cmNlO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gJ3NjcmVlbnMvcmVmZXJlbmNlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBpbWFnZVNyYy5yZXBsYWNlKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggKyAnLnBuZycsICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlICsgJy5wbmcnKSA6IGltYWdlU3JjO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYiA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gJ3NjcmVlbnMvY29tcGFyZS8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgaW1hZ2VTcmMgOiBpbWFnZVNyYztcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmMgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGltYWdlU3JjLnJlcGxhY2UoJy5wbmcnLCAnX2RpZmYucG5nJykgOiBpbWFnZVNyYztcbiAgICAgIH1cblxuICAgICAgLy8gQ2hvb3NlIHRoZSB2aWV3ZXIgbGF5b3V0XG4gICAgICAkc2NvcGUub3B0aW9uTW9kZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9IHR5cGU7XG4gICAgICB9O1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6Q0xPU0UnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgICAgICRzY29wZS5jbG9zZSgpO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNT0RBTDpPUEVOJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MudHlwZSkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgdG8gcmVzZXQgY3VycmVudCBJbmRleFxuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgJHNjb3BlLnByb2plY3QgPSBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0KTtcblxuICAgICAgICAvLyBTaG93IGEgc2luZ2xlIGl0ZW1cbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gbnVsbDtcblxuICAgICAgICAgIGlmICgkc2NvcGUuYWN0aXZlSXRlbS5yZW1vdGVTb3VyY2UpIHtcbiAgICAgICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5hID0gJHNjb3BlLmFjdGl2ZUl0ZW0ucmVtb3RlU291cmNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICdzY3JlZW5zLycgKyAkc2NvcGUuYWN0aXZlSXRlbS50eXBlICsgJy8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgJHNjb3BlLmFjdGl2ZUl0ZW0uc291cmNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgbXVsdGlwbGUgaXRlbXNcbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ2JhdGNoJyAmJiBhcmdzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IGFyZ3MuaXRlbXNbJHNjb3BlLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gYXJncy5pdGVtcztcbiAgICAgICAgICBzZXRBY3RpdmVJdGVtKCRzY29wZS5hY3RpdmVJdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1ha2UgdGhlIG1vZGFsIGFjdGl2ZSB3aXRoIGRhdGFcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MobW9kYWxBY3RpdmUpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MobW9kYWxWaXNpYmxlKTtcbiAgICAgICAgfSwgMzApO1xuICAgICAgfSk7XG5cbiAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhtb2RhbFZpc2libGUpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxBY3RpdmUpO1xuICAgICAgICB9LCAyMzApO1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgb2YgbGVmdC9yaWdodCBuYXZpZ2F0aW9uXG4gICAgICAkc2NvcGUubW9kYWxBY3Rpb25OYXYgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIGlmICgkc2NvcGUudmlld2VyLml0ZW1zLmxlbmd0aCA8IDEpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdmFyIHRvdGFsID0gJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgbmV4dElkeDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIG5leHRJZHggPSAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gdG90YWwpID8gMCA6ICRzY29wZS5jdXJyZW50SW5kZXggKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRJZHggPSAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gMCkgPyB0b3RhbCA6ICRzY29wZS5jdXJyZW50SW5kZXggLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSAkc2NvcGUudmlld2VyLml0ZW1zW25leHRJZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gbmV4dElkeDtcbiAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBHbyBkaXJlY3RseSB0byBhbiBpdGVtXG4gICAgICAkc2NvcGUuZ29Ub0luZGV4ID0gZnVuY3Rpb24oaWR4KSB7XG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudEluZGV4ID09PSBpZHgpIHtyZXR1cm47fVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tpZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaWR4O1xuICAgICAgICBzZXRBY3RpdmVJdGVtKCRzY29wZS5hY3RpdmVJdGVtKTtcbiAgICAgIH07XG5cbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIG1zZ0NlbnRlclxuICogYSBkaXJlY3RpdmUgZm9yIGhhbmRsaW5nIGFsbCBtZXNzYWdlIHJlbGF5IGZvciBhIHVzZXJcbiAqXG4gKiBVU0U6XG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ01TR0NFTlRFUjpGSVJFJywgeyBtc2c6IFwiSGV5IHRoZXJlLCBJbSBhIG1lc3NhZ2UhIVwiLCBkdXI6IDUsIHR5cGU6IFwiaW5mb1wiLCBpY29uOiBcImluZm9cIiwgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSB9KTtcbiAqXG4gKiBUWVBFUzpcbiAqIC0gREVGQVVMVCwgc2hvd3MgZ3JlZW4gbWVzc2FnZSwgdXNlZCBmb3Igc3VjY2Vzc1xuICogLSBXYXJuaW5nOiBcIndhcm5cIiAtIHNob3dzIG9yYW5nZSBtZXNzYWdlLCB1c2VkIGZvciBlcnJvcnMgb3Igd2FybmluZ3NcbiAqIC0gSW5mbzogXCJpbmZvXCIgLSBzaG93cyBkYXJrIGJsdWUgbWVzc2FnZSwgdXNlZCBmb3IgZ2VuZXJhbCB0aGluZ3NcbiAqXG4gKiBPUFRJT05TOlxuICogLSBtc2c6IHRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSwgKFRPRE86IGNhbiBiZSBodG1sIG9yIHNpbXBsZSB0ZXh0KVxuICogLSBjYWxsYmFjazogYSBmdW5jdGlvbiB0byBmaXJlIG9uIGFjdGlvbiB0YWtlbiBvbiBtZXNzYWdlXG4gKiAtIGR1cjogdGhlIHRpbWVvdXQgb2YgdGhlIG1lc3NhZ2VcbiAqIC0gdHlwZTogc2VlIGFib3ZlIHR5cGVzXG4gKiAtIGljb246IGRlZmF1bHQgaXMgZ2xvYmUsIGNhbiBiZSBzZXQgdG8gQU5ZIGktc3ByaXRlcyAoc3ByaXRlcy5sZXNzKVxuICovXG5NVUcuZGlyZWN0aXZlKCdtc2dDZW50ZXInLFxuWyBcIiRyb290U2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIiRjb21waWxlXCIsXG5mdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgbXNnVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1zZ1wiIG5nLWNsaWNrPVwiYWN0aW9uKClcIj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWljblwiPjxpIGNsYXNzPVwiaXcgaS1JQ09OXCI+PC9pPjwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctY29udFwiPkJPRFk8L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWFjdGlvblwiPjxpIGNsYXNzPVwiaWIgaS1yLWFycm93XCI+PC9pPjwvZGl2PicrXG4gICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICB2YXIgX2VsID0gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgcHJldmlvdXNJZCA9IFwiXCI7XG4gICAgICB2YXIgZGVmYXVsdEljb24gPSBcImluZm9cIjtcblxuICAgICAgc2NvcGUuYm9keSA9IFwiXCI7XG4gICAgICBzY29wZS5jYWxsYmFjayA9IG51bGw7XG4gICAgICBzY29wZS5pY29uID0gZGVmYXVsdEljb247XG4gICAgICBzY29wZS5hY3Rpb24gPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYWN0aW9uRWwgPSBfZWwuZmluZChcIiNcIiArIHRoaXMuaWQpO1xuICAgICAgICBzY29wZS5jYWxsYmFjaygpO1xuICAgICAgICBjbGVhckVsKCBhY3Rpb25FbCApO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UgKCBkYXRhICl7XG4gICAgICAgIHZhciBfaWQgPSAoK25ldyBEYXRlKCkpO1xuICAgICAgICB2YXIgbmV3Qm9keSA9IGRhdGEubXNnO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbik/IGRhdGEuaWNvbiA6IGRlZmF1bHRJY29uO1xuXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IG1zZ1RlbXBsYXRlLnJlcGxhY2UoXCJCT0RZXCIsIG5ld0JvZHkpLnJlcGxhY2UoXCJJQ09OXCIsIG5ld0ljbik7XG4gICAgICAgIHZhciBuZXdNZXNzYWdlID0gJGNvbXBpbGUodGVtcGxhdGUpKHNjb3BlKTtcblxuICAgICAgICAvLyBzZXQgYSB1bmlxdWUgaWRcbiAgICAgICAgbmV3TWVzc2FnZVswXS5pZCA9IF9pZDtcbiAgICAgICAgcHJldmlvdXNJZCA9IF9pZDtcblxuICAgICAgICAvLyB0aHJvdyBpbnRvIGRvbSwgdGhlbiBzaG93IGluIHZpZXcsIHN0YXJ0IHRpbWVyXG4gICAgICAgIF9lbC5hcHBlbmQoIG5ld01lc3NhZ2UgKTtcblxuICAgICAgICAvLyByZW1lbWJlciB0aGUgbmV3IGVsIGZvciBsYXRlclxuICAgICAgICB2YXIgbXNnRWwgPSBfZWwuZmluZChcIiNcIiArIF9pZCk7XG4gICAgICAgIGNoYW5nZVR5cGUoIG1zZ0VsLCBkYXRhLnR5cGUgKTtcblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBtc2dFbC5maW5kKFwiLm1zZy1hY3Rpb25cIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBtc2dFbC5hZGRDbGFzcygnYWRkJyk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2xlYXJFbCggbXNnRWwgKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhckVsICggZWxlbSApIHtcbiAgICAgICAgaWYoIWVsZW0gJiYgcHJldmlvdXNJZCl7XG4gICAgICAgICAgZWxlbSA9IF9lbC5maW5kKFwiI1wiICsgcHJldmlvdXNJZCk7XG4gICAgICAgIH0gZWxzZSBpZighZWxlbSkgeyByZXR1cm47IH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdhZGQnKTtcbiAgICAgICAgZWxlbS5hZGRDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW0pLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgdGhlIHR5cGUgYnkgYSBjbGFzc1xuICAgICAgZnVuY3Rpb24gY2hhbmdlVHlwZSAoIGVsZW0sIHR5cGUgKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy1pbmZvJyk7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy13YXJuJyk7XG5cbiAgICAgICAgaWYodHlwZSl7XG4gICAgICAgICAgZWxlbS5hZGRDbGFzcygnbXNnLScgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTVNHQ0VOVEVSOkZJUkUnLCBmdW5jdGlvbihlLCBkYXRhKXtcbiAgICAgICAgaWYoIWRhdGEubXNnKXsgcmV0dXJuOyB9XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBjbGVhckVsKCk7XG5cbiAgICAgICAgaWYoZGF0YS5kdXIpe1xuICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXIgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgc2NvcGUuY2FsbGJhY2sgPSBkYXRhLmNhbGxiYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd01lc3NhZ2UoIGRhdGEgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogcHJlbG9hZGVyXG4gKiBhIGRpcmVjdGl2ZSBmb3Igc2hvd2luZyBhIHByZWxvYWRlciBhbmltYXRpb24gZHVyaW5nIGEgcHJvY2Vzc2luZyBwZXJpb2RcbiAqXG4gKiBVU0U6XG4gKiA8cHJlbG9hZGVyPjwvcHJlbG9hZGVyPlxuICpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnUFJFTE9BREVSOlVQREFURScsIHsgbXNnOiAnT3BlbmluZyBCcm93c2VyIFNlc3Npb24nLCBwZXJjZW50OiAzNyB9KTtcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnUFJFTE9BREVSOk9GRicpO1xuICpcbiAqL1xudmFyIFAgPSByZXF1aXJlKCcuL2NvcmUvcHJlbG9hZGVyJyk7XG5cbk1VRy5kaXJlY3RpdmUoJ3ByZWxvYWRlcicsXG5bJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcbiAgdmFyIHRvdGFsSW5jcmVtZW50ID0gMzA7XG5cbiAgZnVuY3Rpb24gY2FsY3VsYXRlSW5jcmVtZW50cyhwcm9qZWN0KSB7XG4gICAgdmFyIGRlbGF5ID0gMDtcbiAgICB2YXIgdmlld3BvcnRzID0gMDtcbiAgICB2YXIgc2VsZWN0b3JzID0gMDtcbiAgICB2YXIgaW5jcmVtZW50ID0gMTI7XG5cbiAgICAvLyBnZXQgYWxsIGNvbnRhaW5lciBzZWxlY3RvcnMgdG90YWxcbiAgICBpZiAocHJvamVjdC5zZWxlY3RvcnMgJiYgcHJvamVjdC5zZWxlY3RvcnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qZWN0LnNlbGVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocHJvamVjdC5zZWxlY3RvcnNbaV0gJiYgcHJvamVjdC5zZWxlY3RvcnNbaV0udHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICBzZWxlY3RvcnMgPSBzZWxlY3RvcnMgKyAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSB2aWV3cG9ydHNcbiAgICBpZiAocHJvamVjdC52aWV3cG9ydHMgJiYgcHJvamVjdC52aWV3cG9ydHMubGVuZ3RoID4gMCkge1xuICAgICAgdmlld3BvcnRzID0gcHJvamVjdC52aWV3cG9ydHMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIHNlZSBpZiB0aGVyZSBpcyBhIGRlbGF5XG4gICAgaWYgKHByb2plY3QubWV0YSAmJiBwcm9qZWN0Lm1ldGEuZGVsYXkpIHtcbiAgICAgIGRlbGF5ID0gcGFyc2VJbnQocHJvamVjdC5tZXRhLmRlbGF5LCAxMCk7XG4gICAgfVxuXG4gICAgLy8gY2FsY3VsYXRlIGEgcmVhc29uYWJsZSBpbmNyZW1lbnQgZm9yIHRoZSBhbmltYXRpb25cbiAgICB0b3RhbEluY3JlbWVudCA9IChpbmNyZW1lbnQgKiAodmlld3BvcnRzICogc2VsZWN0b3JzKSkgKyAzMDsgLy8gKyBkZWxheVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgc2NvcGU6IHt9LFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInByZWxvYWRlclwiPjwvZGl2PicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgQjtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciB0aXRsZTtcbiAgICAgIHZhciBwcmV2aW91c1RpdGxlO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBsb2FkaW5nID0gJ2xvYWRpbmcnO1xuICAgICAgdmFyIGlzQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgIC8vIElOSVQhXG4gICAgICAvLyBhdm9pZCB0aGUgbmctY2xvYWsgdGltZWxpbmVcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBCID0gbmV3IFAuQnJvd3NlcigpO1xuICAgICAgICBCLmluaXQoKTtcblxuICAgICAgICAvLyBzZXR1cCBvbmUgaW5zdGFuY2Ugb2YgdGhlIGNhbnZhc1xuICAgICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoQi5pbnN0YW5jZSk7XG5cbiAgICAgICAgLy8gZHJhdyBicm93c2VyXG4gICAgICAgIEIuZHJhd0Jyb3dzZXIoKTtcbiAgICAgIH0sIDMwKTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlUHJlbG9hZGVyKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLm1zZykgeyByZXR1cm47IH1cblxuICAgICAgICBpZiAoYXJncy5wcm9qZWN0KSB7XG4gICAgICAgICAgY2FsY3VsYXRlSW5jcmVtZW50cyhhcmdzLnByb2plY3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIGRvbnQgYW5pbWF0ZSBvdmVyIGEgcHJldmlvdXMgYW5pbWF0aW9uXG4gICAgICAgIGlmICghaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB9LCB0b3RhbEluY3JlbWVudCAqIDEwKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRpdGxlID0gYXJncy5tc2c7XG5cbiAgICAgICAgdmFyIHR5cGU7XG5cbiAgICAgICAgc3dpdGNoICh0aXRsZSkge1xuICAgICAgICAgIC8vIGNhc2UgJ1N0YXJ0aW5nIGNvbXBhcmUgY2FwdHVyZSc6XG4gICAgICAgICAgLy8gICB0eXBlID0gMDtcbiAgICAgICAgICAvLyAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ09wZW5pbmcgQnJvd3NlciBTZXNzaW9uJzpcbiAgICAgICAgICAgIHR5cGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnQ2FwdHVyaW5nIFNjcmVlbnMnOlxuICAgICAgICAgICAgdHlwZSA9IDE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIC8vIGNhc2UgJ1VwZGF0ZWQgUHJvamVjdCBIaXN0b3J5JzpcbiAgICAgICAgICAvLyAgIHR5cGUgPSAyO1xuICAgICAgICAgIC8vICAgYnJlYWs7XG4gICAgICAgICAgLy8gY2FzZSAnQ29tcGFyaW5nIENhcHR1cmUgRGF0YSc6XG4gICAgICAgICAgLy8gICB0eXBlID0gMjtcbiAgICAgICAgICAvLyAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGUgdGl0bGUgaGFzIGNoYW5nZWRcbiAgICAgICAgaWYgKHRpdGxlICE9PSBwcmV2aW91c1RpdGxlICYmIEIgJiYgQi5hbmltYXRlKSB7XG5cbiAgICAgICAgICAvLyBTdGFydCBhbmltYXRpb25cbiAgICAgICAgICBCLmFuaW1hdGUodHlwZSwgdG90YWxJbmNyZW1lbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJldmlvdXNUaXRsZSA9IHRpdGxlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc2V0UHJlbG9hZGVyKCkge1xuICAgICAgICBCLnJlc2V0QnJvd3NlcigpO1xuICAgICAgfVxuXG4gICAgICAvLyAkcm9vdFNjb3BlLiRvbignUFJFTE9BREVSOk9OJywgc2hvd1ByZWxvYWRlcik7XG4gICAgICAkcm9vdFNjb3BlLiRvbignUFJFTE9BREVSOlVQREFURScsIHVwZGF0ZVByZWxvYWRlcik7XG4gICAgICAkcm9vdFNjb3BlLiRvbignUFJFTE9BREVSOk9GRicsIHJlc2V0UHJlbG9hZGVyKTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgndGltZUFnbycsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlcnZpY2UgPSB7fTtcblxuICBzZXJ2aWNlLnNldHRpbmdzID0ge1xuICAgIHJlZnJlc2hNaWxsaXM6IDYwMDAwLFxuICAgIGFsbG93RnV0dXJlOiBmYWxzZSxcbiAgICBzdHJpbmdzOiB7XG4gICAgICBwcmVmaXhBZ286IG51bGwsXG4gICAgICBwcmVmaXhGcm9tTm93OiBudWxsLFxuICAgICAgc3VmZml4QWdvOiAnYWdvJyxcbiAgICAgIHN1ZmZpeEZyb21Ob3c6ICdmcm9tIG5vdycsXG4gICAgICBzZWNvbmRzOiAnbGVzcyB0aGFuIGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZTogJ2Fib3V0IGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZXM6ICclZCBtaW51dGVzJyxcbiAgICAgIGhvdXI6ICdhYm91dCBhbiBob3VyJyxcbiAgICAgIGhvdXJzOiAnJWQgaG91cnMnLFxuICAgICAgZGF5OiAnYSBkYXknLFxuICAgICAgZGF5czogJyVkIGRheXMnLFxuICAgICAgbW9udGg6ICdhYm91dCBhIG1vbnRoJyxcbiAgICAgIG1vbnRoczogJyVkIG1vbnRocycsXG4gICAgICB5ZWFyOiAnYWJvdXQgYSB5ZWFyJyxcbiAgICAgIHllYXJzOiAnJWQgeWVhcnMnLFxuICAgICAgbnVtYmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdHJpbURpZ2l0cyAoIG51bSApIHtcbiAgICAgIHZhciBtID0gbnVtLnRvU3RyaW5nKCkuc2xpY2UoMCwxMyk7XG4gICAgICByZXR1cm4gKG0ubGVuZ3RoID09IDEzKT8gcGFyc2VJbnQobSkgOiBudW07XG4gIH1cblxuICBzZXJ2aWNlLmluV29yZHMgPSBmdW5jdGlvbiAoZGlzdGFuY2VNaWxsaXMpIHtcbiAgICB2YXIgJGwgPSBzZXJ2aWNlLnNldHRpbmdzLnN0cmluZ3M7XG4gICAgdmFyIHByZWZpeCA9ICRsLnByZWZpeEFnbztcbiAgICB2YXIgc3VmZml4ID0gJGwuc3VmZml4QWdvO1xuICAgIGlmIChzZXJ2aWNlLnNldHRpbmdzLmFsbG93RnV0dXJlKSB7XG4gICAgICBpZiAoZGlzdGFuY2VNaWxsaXMgPCAwKSB7XG4gICAgICAgIHByZWZpeCA9ICRsLnByZWZpeEZyb21Ob3c7XG4gICAgICAgIHN1ZmZpeCA9ICRsLnN1ZmZpeEZyb21Ob3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBNYXRoLmFicyhkaXN0YW5jZU1pbGxpcykgLyAxMDAwO1xuICAgIHZhciBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xuICAgIHZhciBob3VycyA9IG1pbnV0ZXMgLyA2MDtcbiAgICB2YXIgZGF5cyA9IGhvdXJzIC8gMjQ7XG4gICAgdmFyIHllYXJzID0gZGF5cyAvIDM2NTtcblxuICAgIGZ1bmN0aW9uIHN1YnN0aXR1dGUoc3RyaW5nT3JGdW5jdGlvbiwgbnVtYmVyKSB7XG4gICAgICB2YXIgc3RyaW5nID0gYW5ndWxhci5pc0Z1bmN0aW9uKHN0cmluZ09yRnVuY3Rpb24pID9cbiAgICAgIHN0cmluZ09yRnVuY3Rpb24obnVtYmVyLCBkaXN0YW5jZU1pbGxpcykgOiBzdHJpbmdPckZ1bmN0aW9uO1xuICAgICAgdmFyIHZhbHVlID0gKCRsLm51bWJlcnMgJiYgJGwubnVtYmVyc1tudW1iZXJdKSB8fCBudW1iZXI7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyVkL2ksIHZhbHVlKTtcbiAgICB9XG5cbiAgICB2YXIgd29yZHMgPSBzZWNvbmRzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5zZWNvbmRzLCBNYXRoLnJvdW5kKHNlY29uZHMpKSB8fFxuICAgICAgICBzZWNvbmRzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGUsIDEpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZXMsIE1hdGgucm91bmQobWludXRlcykpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLmhvdXIsIDEpIHx8XG4gICAgICAgIGhvdXJzIDwgMjQgJiYgc3Vic3RpdHV0ZSgkbC5ob3VycywgTWF0aC5yb3VuZChob3VycykpIHx8XG4gICAgICAgIGhvdXJzIDwgNDIgJiYgc3Vic3RpdHV0ZSgkbC5kYXksIDEpIHx8XG4gICAgICAgIGRheXMgPCAzMCAmJiBzdWJzdGl0dXRlKCRsLmRheXMsIE1hdGgucm91bmQoZGF5cykpIHx8XG4gICAgICAgIGRheXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRoLCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzY1ICYmIHN1YnN0aXR1dGUoJGwubW9udGhzLCBNYXRoLnJvdW5kKGRheXMgLyAzMCkpIHx8XG4gICAgICAgIHllYXJzIDwgMS41ICYmIHN1YnN0aXR1dGUoJGwueWVhciwgMSkgfHxcbiAgICAgICAgc3Vic3RpdHV0ZSgkbC55ZWFycywgTWF0aC5yb3VuZCh5ZWFycykpO1xuXG4gICAgdmFyIHNlcGFyYXRvciA9ICRsLndvcmRTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCA/ICcgJyA6ICRsLndvcmRTZXBhcmF0b3I7XG4gICAgcmV0dXJuIFtwcmVmaXgsIHdvcmRzLCBzdWZmaXhdLmpvaW4oc2VwYXJhdG9yKS50cmltKCk7XG4gIH07XG5cbiAgc2VydmljZS5wYXJzZSA9IGZ1bmN0aW9uIChpc284NjAxKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoaXNvODYwMSkpIHtcbiAgICAgIGlzbzg2MDEgPSBpc284NjAxICsgXCJcIjtcbiAgICAgIC8vIGZvcm1hdCBmb3IgY29ycmVjdCBsZW5ndGhcbiAgICAgIHZhciBvcmlnaW5hbFRpbWVzdGFtcCA9IHRyaW1EaWdpdHMoIGlzbzg2MDEgKTtcbiAgICAgIHJldHVybiBwYXJzZUludChvcmlnaW5hbFRpbWVzdGFtcCwgMTApO1xuICAgIH1cbiAgICB2YXIgcyA9IChpc284NjAxIHx8ICcnKS50cmltKCk7XG4gICAgcyA9IHMucmVwbGFjZSgvXFwuXFxkKy8sICcnKTsgLy8gcmVtb3ZlIG1pbGxpc2Vjb25kc1xuICAgIHMgPSBzLnJlcGxhY2UoLy0vLCAnLycpLnJlcGxhY2UoLy0vLCAnLycpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1QvLCAnICcpLnJlcGxhY2UoL1ovLCAnIFVUQycpO1xuICAgIHMgPSBzLnJlcGxhY2UoLyhbXFwrXFwtXVxcZFxcZClcXDo/KFxcZFxcZCkvLCAnICQxJDInKTsgLy8gLTA0OjAwIC0+IC0wNDAwXG4gICAgcmV0dXJuIG5ldyBEYXRlKHMpO1xuICB9O1xuXG4gIHJldHVybiBzZXJ2aWNlO1xufSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIGFzeW5jID0gcmVxdWlyZSgnYXN5bmMnKTtcblxuTVVHLmZhY3RvcnkoJ0NvbXBhcmUnLFxuWyckcScsICdDb25maWcnLFxuZnVuY3Rpb24oJHEsIENvbmZpZykge1xuICAvLyBDb25maWcgdmFyc1xuICB2YXIgZmlsZURpclByZWZpeCA9IF9fZGlybmFtZSArICcvJztcbiAgdmFyIGltYWdlUHJlZml4ID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnO1xuICB2YXIgc3RhdHVzVHlwZXMgPSBbJ3Bhc3NlZCcsICd3YXJuaW5nJywgJ2ZhaWxlZCddO1xuXG4gIC8vIGFzeW5jIGhlbHBlclxuICBmdW5jdGlvbiByZWFkQXN5bmMoZmlsZSwgY2FsbGJhY2spIHtcbiAgICBmcy5yZWFkRmlsZShmaWxlRGlyUHJlZml4ICsgZmlsZSwgJ2Jhc2U2NCcsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8vIFRPRE86IGxldCB0aGUgYmFja2VuZCBwcm9jZXNzIGhhbmRsZSB0aGlzIVxuICBmdW5jdGlvbiBjb21wYXJlU2luZ2xlKGEsIGIpIHtcbiAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgb3V0cHV0ID0ge307XG5cbiAgICAvLyBBcHBseSBNYWluIENvbXBhcmUgQ29uZmlnXG4gICAgcmVzZW1ibGUub3V0cHV0U2V0dGluZ3MoQ29uZmlnLkNvbXBhcmUpO1xuXG4gICAgLy8gT3BlbiBib3RoIGZpbGVzLCBiZWZvcmUgd2UgYXJlIHJlYWR5IHRvIHByb2Nlc3NcbiAgICBhc3luYy5tYXAoW2EsIGJdLCByZWFkQXN5bmMsIGZ1bmN0aW9uKGVyciwgcmVzdWx0cykge1xuICAgICAgdmFyIGFEYXRhID0gaW1hZ2VQcmVmaXggKyByZXN1bHRzWzBdO1xuICAgICAgdmFyIGJEYXRhID0gaW1hZ2VQcmVmaXggKyByZXN1bHRzWzFdO1xuXG4gICAgICAvLyBIYW5kbGVzIGVycm9yc1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJ1biB0aGUgY29tcGFyZSBmdW5jdGlvbiwgcmV0dXJuIHRoZSBkaWZmIGRhdGFcbiAgICAgIHJlc2VtYmxlKGFEYXRhKVxuICAgICAgICAuY29tcGFyZVRvKGJEYXRhKVxuICAgICAgICAuaWdub3JlQ29sb3JzKClcbiAgICAgICAgLm9uQ29tcGxldGUoZnVuY3Rpb24oZGlmZkRhdGEpIHtcbiAgICAgICAgICBvdXRwdXQucmVwb3J0ID0gZGlmZkRhdGE7XG4gICAgICAgICAgb3V0cHV0LnNyYyA9IGRpZmZEYXRhLmdldEltYWdlRGF0YVVybCgpO1xuXG4gICAgICAgICAgZGZkLnJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gIH07XG5cbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHR3byBpbWFnZXMgYW5kIHJldHVybnMgYWxsIGRhdGEgd2l0aCBhbiBpbWFnZSBvZiBjaGFuZ2VzXG4gICAgICovXG4gICAgcnVuU2luZ2xlOiBjb21wYXJlU2luZ2xlLFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgdHlwZSBvZiBwYXNzL3dhcm4vZmFpbCBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBtaXNNYXRjaFZhbHVlID0gcGFyc2VGbG9hdChkYXRhLm1pc01hdGNoUGVyY2VudGFnZSk7XG5cbiAgICAgIC8vIGxvd2VzdCB0b2xlcmFuY2VcbiAgICAgIGlmIChtaXNNYXRjaFZhbHVlIDwgMC4xKSB7XG5cbiAgICAgICAgLy8gV2FybiB0aGF0IGRpbWVuc2lvbnMgYXJlIGRpZmZlcmVuY2VcbiAgICAgICAgaWYgKGRhdGEuaXNTYW1lRGltZW5zaW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzBdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdhcm5pbmcgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA+IDAuMSAmJiBtaXNNYXRjaFZhbHVlIDwgMikge1xuICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMV07XG4gICAgICB9XG5cbiAgICAgIC8vIGVycm9yIHRvbGVyYW5jZSByZWFjaGVkXG4gICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMl07XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgnbm93VGltZScsXG5bJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gIHZhciBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgdmFyIHVwZGF0ZVRpbWUgPSBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdXBkYXRlVGltZSgpO1xuICAgIH0sIDEwMDApO1xuICB9O1xuXG4gIHVwZGF0ZVRpbWUoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRUaW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBub3dUaW1lO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBBV1MgPSByZXF1aXJlKCcuL2NvcmUvYXdzJyk7XG5cbk1VRy5mYWN0b3J5KCdQcm9qZWN0cycsXG5bJyRxJyxcbmZ1bmN0aW9uKCRxKSB7XG4gIC8vIENvbmZpZyB0aGUgbWFpbiBwYXRoc1xuICB2YXIgcHJvamVjdHNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy5qc29uJztcbiAgdmFyIHByb2plY3RGaWxlc1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLyc7XG5cbiAgLy8gQ3JlYXRlcyBhIFVVSUQgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGhcbiAgZnVuY3Rpb24gY3JlYXRlVVVJRChzKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKHR5cGVvZiBzID09ICdudW1iZXInICYmIHMgPT09IHBhcnNlSW50KHMsIDEwKSkge1xuICAgICAgcyA9IEFycmF5KHMgKyAxKS5qb2luKCd4Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMucmVwbGFjZSgveC9nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNjEpICsgNDg7XG4gICAgICBuID0gbiA+IDU3ID8gKG4gKyA3ID4gOTAgPyBuICsgMTMgOiBuICsgNykgOiBuO1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDcmVhdGVzIGEgSlNPTiBvYmplY3QgZm9yIGEgYmFzZWxpbmUgbmV3IHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0KHRvdGFsKSB7XG4gICAgdG90YWwgPSB0b3RhbCB8fCAwO1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgIHRpdGxlOiAnUHJvamVjdCAnICsgKHBhcnNlSW50KHRvdGFsLCAxMCkgKyAxKSxcbiAgICAgIHRpbWVzdGFtcDogKCtuZXcgRGF0ZSksXG4gICAgICB0b3RhbHM6IHtcbiAgICAgICAgc3VjY2VzczogbnVsbCxcbiAgICAgICAgd2FybmluZzogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHZpZXdzOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIG5lZWRlZCBiYXNlIGRhdGEgZm9yIHN0b3JpbmcgYW4gaW5kaXZpZHVhbCBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdEZpbGUob3B0aW9ucykge1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgYmF0Y2hIaXN0b3J5OiB7fSxcbiAgICAgIGN1cnJlbnRCYXRjaDogbnVsbCxcbiAgICAgIGN1cnJlbnRSZWZlcmVuY2U6IG51bGwsXG4gICAgICBpZDogb3B0aW9ucy5pZCxcbiAgICAgIHRpdGxlOiBvcHRpb25zLnRpdGxlLFxuICAgICAgdGltZXN0YW1wOiBvcHRpb25zLnRpbWVzdGFtcCxcbiAgICAgIHZpZXdwb3J0czogW10sXG4gICAgICBzZWxlY3RvcnM6IFtdLFxuICAgICAgY29va2llczogW10sXG4gICAgICBtZXRhOiB7XG4gICAgICAgIHVybDogbnVsbCxcbiAgICAgICAgcmVhZHlFdmVudDogbnVsbCxcbiAgICAgICAgZGVsYXk6IG51bGwsXG4gICAgICAgIG1pc01hdGNoVGhyZXNob2xkOiBudWxsXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIEdyYWJzIEpTT04gZmlsZSBhbmQgYXBwcm9wcmlhdGVseSBoYW5kbGVzIGVycm9yc1xuICBmdW5jdGlvbiBnZXRKc29uRmlsZShwYXRoLCB0eXBlKSB7XG4gICAgdmFyIGZpbGU7XG5cbiAgICB0cnkge1xuICAgICAgZmlsZSA9IGZzLnJlYWRGaWxlU3luYyhwYXRoLCAndXRmOCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGNvdWxkbid0IGZpbmQgZmlsZVxuICAgICAgaWYgKGUuY29kZSA9PT0gJ0VOT0VOVCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUgfHwge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBKU09OLnBhcnNlKGZpbGUpO1xuICB9XG5cbiAgLy8gcmVtb3ZlIGFsbCBmaWxlcyBpbiBkaXJlY3RvcnlcbiAgZnVuY3Rpb24gcmVtb3ZlQWxsSW5EaXJlY3RvcnkoZGlyUGF0aCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyhkaXJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7IHJldHVybjsgfVxuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmaWxlUGF0aCA9IHBhdGguam9pbihkaXJQYXRoLCBmaWxlc1tpXSk7XG5cbiAgICAgICAgaWYgKGZzLnN0YXRTeW5jKGZpbGVQYXRoKS5pc0ZpbGUoKSkge1xuICAgICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJtRGlyKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9O1xuXG4gIC8vIHNldHMgdXAgYSBwcm9taXNlIGRyaXZlbiBmaWxlIHdyaXRlXG4gIGZ1bmN0aW9uIHByb21pc2VXcml0ZShmaWxlUGF0aCwgZGF0YSkge1xuICAgIHZhciBfcSA9ICRxLmRlZmVyKCk7XG5cbiAgICBmcy53cml0ZUZpbGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGRhdGEpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgX3EucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3EucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF9xLnByb21pc2U7XG4gIH1cblxuICAvLyBzZXRzIHVwIGEgcHJvbWlzZSBkcml2ZW4gZmlsZSBkZWxldGVcbiAgZnVuY3Rpb24gcHJvbWlzZVJlbW92ZShwYXRoKSB7XG4gICAgdmFyIF96ID0gJHEuZGVmZXIoKTtcblxuICAgIC8vIGZzLnVubGlua1xuICAgIGZzLnVubGluayhwYXRoLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgX3oucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3oucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF96LnByb21pc2U7XG4gIH1cblxuICByZXR1cm4ge1xuXG4gICAgZ2V0OiBmdW5jdGlvbihwYXRoLCB0eXBlKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUoX19kaXJuYW1lICsgcGF0aCwgdHlwZSk7XG4gICAgfSxcblxuICAgIGdldEFsbDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdHNQYXRoLCBbXSk7XG4gICAgfSxcblxuICAgIGdldEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJy5qc29uJyk7XG4gICAgfSxcblxuICAgIGdldFR5cGVCeUlkOiBmdW5jdGlvbihpZCwgdHlwZSkge1xuICAgICAgdmFyIGFkZGl0aW9uID0gKHR5cGUpID8gJ18nICsgdHlwZSA6ICcnO1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBpZCArIGFkZGl0aW9uICsgJy5qc29uJywgW10pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB2YWxpZGF0ZXMgdGhlIHByb2plY3QsIG1ha2VzIHN1cmUgYWxsIHNldHRpbmdzIGFyZSBzZXR1cCBhbmQgdmFsaWRcbiAgICAgKi9cbiAgICB2YWxpZGF0ZTogZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgdmFyIGNvb2tpZXMgPSBwcm9qZWN0LmNvb2tpZXM7XG4gICAgICB2YXIgdmlld3BvcnRzID0gcHJvamVjdC52aWV3cG9ydHM7XG4gICAgICB2YXIgc2VsZWN0b3JzID0gcHJvamVjdC5zZWxlY3RvcnM7XG4gICAgICB2YXIgdGl0bGUgPSBwcm9qZWN0LnRpdGxlO1xuICAgICAgdmFyIHVybCA9IHByb2plY3QubWV0YS51cmw7XG4gICAgICB2YXIgYm9vbCA9IHRydWU7XG5cbiAgICAgIC8vIHZlcmlmeSBhbGwgZGVmYXVsdHMgYXJlIHNldHVwXG4gICAgICBpZiAoIXZpZXdwb3J0cyB8fCAhc2VsZWN0b3JzIHx8ICF0aXRsZSB8fCAhdXJsIHx8IHZpZXdwb3J0cy5sZW5ndGggPCAxIHx8IHNlbGVjdG9ycy5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSB2aWV3cG9ydHMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAodmlld3BvcnRzKSB7XG4gICAgICAgIHZpZXdwb3J0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai53aWR0aCB8fCAhb2JqLmhlaWdodCB8fCAhb2JqLm5hbWUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIHNlbGVjdG9ycywgdmVyaWZ5IHRoZXkncmUgc2V0dXAgcmlnaHRcbiAgICAgIGlmIChzZWxlY3RvcnMpIHtcbiAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLnF1ZXJ5IHx8ICFvYmoudHlwZSkge1xuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgY29va2llcywgdmVyaWZ5IHRoZXkncmUgc2V0dXAgcmlnaHRcbiAgICAgIGlmIChjb29raWVzKSB7XG4gICAgICAgIGNvb2tpZXMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoubmFtZSB8fCAhb2JqLnBhdGggfHwgIW9iai52YWx1ZSkge1xuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGRlZmF1bHQgdG8gdHJ1ZVxuICAgICAgcmV0dXJuIGJvb2w7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZXMgYSBuZXcgcHJvamVjdCwgYW5kIHJldHVybnMgdGhlIGRhdGEgaW4gYSBwcm9taXNlXG4gICAgICovXG4gICAgY3JlYXRlTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkZmRkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBxdWV1ZVByb21pc2VzID0gW107XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuICAgICAgdmFyIG5ld1Byb2plY3REYXRhID0gY3JlYXRlRHVtbXlQcm9qZWN0KGFsbFByb2plY3RzLmxlbmd0aCk7XG4gICAgICB2YXIgbmV3UHJvamVjdEZpbGUgPSBjcmVhdGVEdW1teVByb2plY3RGaWxlKG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgYWxsUHJvamVjdHMudW5zaGlmdChuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgIHZhciBwcm9qZWN0QWxsRGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0c1BhdGgsIGFsbFByb2plY3RzKTtcbiAgICAgIHZhciBwcm9qZWN0RGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0RmlsZXNQYXRoICsgbmV3UHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBuZXdQcm9qZWN0RmlsZSk7XG4gICAgICB2YXIgcHJvamVjdEhpc3RvcnlEYXRhID0gcHJvbWlzZVdyaXRlKHByb2plY3RGaWxlc1BhdGggKyBuZXdQcm9qZWN0RGF0YS5pZCArICdfaGlzdG9yeS5qc29uJywgW10pO1xuICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHByb2plY3RBbGxEYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdEhpc3RvcnlEYXRhKTtcblxuICAgICAgLy8gZG8gYWxsIHByb21pc2Ugb3BlcmF0aW9uc1xuICAgICAgJHEuYWxsKHF1ZXVlUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGRmZGQucmVzb2x2ZShuZXdQcm9qZWN0RGF0YSk7XG4gICAgICB9LCBkZmRkLnJlamVjdCk7XG5cbiAgICAgIHJldHVybiBkZmRkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIHNhdmUgdG8gZmlsZSBhbmQgbGlzdHMsIHJldHVybiBsaXN0IGRhdGFcbiAgICBzYXZlOiBmdW5jdGlvbihwcm9qZWN0RGF0YSkge1xuICAgICAgdmFyIGRmZGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIHF1ZXVlUHJvbWlzZXMgPSBbXTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IHByb2plY3REYXRhLmlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aXRsZSA9IHByb2plY3REYXRhLnRpdGxlO1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGltZXN0YW1wID0gKCtuZXcgRGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICB2YXIgcHJvamVjdFRlbXBEYXRhID0gcHJvbWlzZVdyaXRlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0RGF0YS5pZCArICcuanNvbicsIHByb2plY3REYXRhKTtcbiAgICAgIHZhciBwcm9qZWN0QWxsRGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0c1BhdGgsIGFsbFByb2plY3RzKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0VGVtcERhdGEpO1xuICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHByb2plY3RBbGxEYXRhKTtcblxuICAgICAgLy8gZG8gYWxsIHByb21pc2Ugb3BlcmF0aW9uc1xuICAgICAgJHEuYWxsKHF1ZXVlUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGRmZGQucmVzb2x2ZShwcm9qZWN0RGF0YSk7XG4gICAgICB9LCBkZmRkLnJlamVjdCk7XG5cbiAgICAgIHJldHVybiBkZmRkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZXMgYSBzaW5nbGUgcHJvamVjdCBieSBJRFxuICAgIHJlbW92ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBkZmRkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBxdWV1ZVByb21pc2VzID0gW107XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IGlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyByZW1vdmUgYWxsIGxvY2FsIGltYWdlc1xuICAgICAgdGhpcy5jbGVhbkltYWdlRmlsZXMoaWQpO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICB2YXIgcHJvamVjdERhdGEgPSBwcm9taXNlUmVtb3ZlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicpO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5RGF0YSA9IHByb21pc2VSZW1vdmUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ19oaXN0b3J5Lmpzb24nKTtcbiAgICAgIHZhciBwcm9qZWN0QWxsRGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0c1BhdGgsIGFsbFByb2plY3RzKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdEhpc3RvcnlEYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0QWxsRGF0YSk7XG5cbiAgICAgIC8vIGRvIGFsbCBwcm9taXNlIG9wZXJhdGlvbnNcbiAgICAgICRxLmFsbChxdWV1ZVByb21pc2VzKS50aGVuKGRmZGQucmVzb2x2ZSwgZGZkZC5yZWplY3QpO1xuXG4gICAgICByZXR1cm4gZGZkZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmVzIGFsbCBzdG9yZWQgaGlzdG9yeSBmb3IgYSBwcm9qZWN0XG4gICAgICovXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbihwcm9qZWN0KSB7XG4gICAgICB2YXIgZGZkZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgcXVldWVQcm9taXNlcyA9IFtdO1xuICAgICAgdmFyIG1haW5Qcm9qZWN0cyA9IGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb2plY3QgZGF0YSB0byByZWZsZWN0IG5vIGhpc3RvcnlcbiAgICAgIHByb2plY3QuY3VycmVudEJhdGNoID0gbnVsbDtcbiAgICAgIHByb2plY3QuY3VycmVudFJlZmVyZW5jZSA9IG51bGw7XG4gICAgICBwcm9qZWN0LmJhdGNoSGlzdG9yeSA9IHt9O1xuXG4gICAgICAvLyB1cGRhdGUgdGhlIGN1cnJlbnQgcHJvamVjdCB0byBoYXZlIG5vIGJhdGNoSGlzdG9yeVxuICAgICAgbWFpblByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0LmlkKSB7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLnN1Y2Nlc3MgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy53YXJuaW5nID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy52aWV3cyA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyByZW1vdmUgYWxsIGxvY2FsIGltYWdlc1xuICAgICAgdGhpcy5jbGVhbkltYWdlRmlsZXMocHJvamVjdC5pZCk7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgIHZhciBwcm9qZWN0SGlzdG9yeURhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIFtdKTtcbiAgICAgIHZhciBwcm9qZWN0RGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdC5pZCArICcuanNvbicsIHByb2plY3QpO1xuICAgICAgdmFyIHByb2plY3RBbGxEYXRhID0gcHJvbWlzZVdyaXRlKHByb2plY3RzUGF0aCwgbWFpblByb2plY3RzKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0SGlzdG9yeURhdGEpO1xuICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHByb2plY3REYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0QWxsRGF0YSk7XG5cbiAgICAgIC8vIGRvIGFsbCBwcm9taXNlIG9wZXJhdGlvbnNcbiAgICAgICRxLmFsbChxdWV1ZVByb21pc2VzKS50aGVuKGRmZGQucmVzb2x2ZSwgZGZkZC5yZWplY3QpO1xuXG4gICAgICByZXR1cm4gZGZkZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBwYXNzIGluIGEgcHJvamVjdElkLCB0aGVuIGl0IHdpbGwgcmVhZCB0aGUgcHJvamVjdCBhbmQgaXRzIGN1cnJlbnQgYmF0Y2ggb2YgZmlsZXMgdG8gdXBsb2FkXG4gICAgICogb25jZSBjb21wbGV0ZSwgaXQgd2lsbCBjbGVhbiBvdXQgYW55IGxvY2FsIHNjcmVlbnMgYW5kIHJlcGxhY2Ugd2l0aCBhd3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgc3luYzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIGlmICghaWQpIHtyZXR1cm47fVxuXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIHByb2plY3QgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgICAgdmFyIHByb2plY3RGaWxlcyA9IHRoaXMuZ2V0VHlwZUJ5SWQoaWQsICdoaXN0b3J5Jyk7XG4gICAgICB2YXIgcmVhZHlGaWxlcyA9IFtdO1xuXG4gICAgICAvLyBwdWxsIG91dCBmaWxlcyB0aGF0IGFyZSBhbHJlYWR5IGluc2lkZSBhd3MsIHByZXAgZm9yIHVwbG9hZFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qZWN0RmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRtcEZpbGUgPSBwcm9qZWN0RmlsZXNbaV07XG4gICAgICAgIGlmICh0bXBGaWxlLnNvdXJjZSAmJiB0bXBGaWxlLnNvdXJjZS5zZWFyY2goJ2FtYXpvbicpID09PSAtMSkge1xuICAgICAgICAgIHZhciBzcmMgPSB0bXBGaWxlLnNvdXJjZTtcbiAgICAgICAgICB2YXIgdHlwZSA9IHRtcEZpbGUudHlwZTtcbiAgICAgICAgICB2YXIgcGF0aCA9IF9fZGlybmFtZSArICcvc2NyZWVucy8nICsgdHlwZSArICcvJyArIHByb2plY3QuaWQgKyAnLycgKyBzcmM7XG4gICAgICAgICAgcmVhZHlGaWxlcy5wdXNoKHsga2V5OiB0eXBlICsgJy8nICsgc3JjLCBwYXRoOiBwYXRoIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHVwbG9hZCBmaWxlc1xuICAgICAgQVdTLmluaXQoKVxuICAgICAgICAudXBsb2FkKHJlYWR5RmlsZXMsIHByb2plY3QuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuXG4gICAgICAgICAgLy8gZG8gcG9zdC1wcm9jZXNzIGFjdGlvblxuICAgICAgICAgIF90aGlzLmNsZWFuQWZ0ZXJTeW5jKHByb2plY3QsIHJlcykudGhlbihkLnJlc29sdmUsIGQucmVqZWN0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBkLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIGQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2xlYW4gbG9jYWwgaW1hZ2VzLCB1cGRhdGUgaGlzdG9yeSB3aXRoIGF3cyByZXNvdXJjZXMsIHJldHVybnMgdGhlIHVwZGF0ZXNcbiAgICAgKi9cbiAgICBjbGVhbkFmdGVyU3luYzogZnVuY3Rpb24ocHJvamVjdCwgbmV3UmVmcykge1xuICAgICAgdmFyIGRmZGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGhpc3RvcnlEYXRhID0gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIFtdKTtcbiAgICAgIHZhciB1cGRhdGVkUmVtb3RlRmlsZXMgPSBbXTtcbiAgICAgIHZhciBxdWV1ZVByb21pc2VzID0gW107XG4gICAgICBwcm9qZWN0LnVwZGF0ZWRBdCA9ICgrbmV3IERhdGUoKSk7XG5cbiAgICAgIC8vIGxvb3AgdGhyb3VnaCBuZXcgZmlsZXNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3UmVmcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wU3JjID0gbmV3UmVmc1tpXTtcbiAgICAgICAgdmFyIHRtcFJlZiA9IHRtcFNyYy5zcGxpdCgnLycpO1xuICAgICAgICB2YXIgdG1wVHlwZSA9IHRtcFJlZlt0bXBSZWYubGVuZ3RoIC0gMl07XG4gICAgICAgIHZhciB0bXBBbGlhcyA9IHRtcFJlZlt0bXBSZWYubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaGlzdG9yeURhdGEubWFwKGZ1bmN0aW9uKGl0ZW0sIGlkeCkge1xuXG4gICAgICAgICAgLy8gdXBkYXRlIGhpc3RvcnkgcmVmXG4gICAgICAgICAgaWYgKGl0ZW0uc291cmNlID09PSB0bXBBbGlhcyAmJiB0bXBUeXBlID09PSAnY29tcGFyZScpIHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIGRpZmYgYWxzb1xuICAgICAgICAgICAgdmFyIHJlbVJlZlBhdGggPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvJyArIHRtcFR5cGUgKyAnLycgKyBwcm9qZWN0LmlkICsgJy8nICsgdG1wQWxpYXM7XG4gICAgICAgICAgICB2YXIgcmVtUmVmID0gcHJvbWlzZVJlbW92ZShyZW1SZWZQYXRoKTtcbiAgICAgICAgICAgIHZhciByZW1SZWZEaWZmID0gcHJvbWlzZVJlbW92ZShyZW1SZWZQYXRoLnJlcGxhY2UoJy4nLCAnX2RpZmYuJykpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgaGlzdG9yeVxuICAgICAgICAgICAgZGVsZXRlIGhpc3RvcnlEYXRhW2lkeF0uc291cmNlO1xuICAgICAgICAgICAgaGlzdG9yeURhdGFbaWR4XS5yZW1vdGVTb3VyY2UgPSBuZXdSZWZzW2ldO1xuXG4gICAgICAgICAgICAvLyBhZGQgdG8gcHJvbWlzZSBsaXN0XG4gICAgICAgICAgICBxdWV1ZVByb21pc2VzLnB1c2gocmVtUmVmKTtcbiAgICAgICAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChyZW1SZWZEaWZmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBzYXZlIGhpc3RvcnkgJiBwcm9qZWN0XG4gICAgICB2YXIgcHJvamVjdEZpbGUgPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLycgKyBwcm9qZWN0LmlkICsgJy5qc29uJztcbiAgICAgIHZhciBwcm9qZWN0SGlzdG9yeUZpbGUgPSBwcm9qZWN0RmlsZS5yZXBsYWNlKCcuanNvbicsICdfaGlzdG9yeS5qc29uJyk7XG4gICAgICB2YXIgcHJvamVjdFdyaXRlID0gcHJvbWlzZVdyaXRlKHByb2plY3RGaWxlLCBwcm9qZWN0KTtcbiAgICAgIHZhciBwcm9qZWN0SGlzdG9yeVdyaXRlID0gcHJvbWlzZVdyaXRlKHByb2plY3RIaXN0b3J5RmlsZSwgaGlzdG9yeURhdGEpO1xuICAgICAgcXVldWVQcm9taXNlcy51bnNoaWZ0KHByb2plY3RXcml0ZSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnVuc2hpZnQocHJvamVjdEhpc3RvcnlXcml0ZSk7XG5cbiAgICAgIC8vIGFkZCBwcm9qZWN0IGZpbGVzIHRvIHRoZSB1cGxvYWQgcmVhZGluZXNzXG4gICAgICB1cGRhdGVkUmVtb3RlRmlsZXMucHVzaCh7IGtleTogcHJvamVjdC5pZCwgcGF0aDogcHJvamVjdEZpbGUgfSk7XG4gICAgICB1cGRhdGVkUmVtb3RlRmlsZXMucHVzaCh7IGtleTogcHJvamVjdC5pZCArICdfaGlzdG9yeScsIHBhdGg6IHByb2plY3RIaXN0b3J5RmlsZSB9KTtcblxuICAgICAgLy8gdXBsb2FkIHVwZGF0ZWQgaGlzdG9yeSAmIHByb2plY3RcbiAgICAgIHZhciBhd3NVcGxvYWQgPSBBV1MuaW5pdCgpLnVwbG9hZCh1cGRhdGVkUmVtb3RlRmlsZXMsIHByb2plY3QuaWQpO1xuICAgICAgcXVldWVQcm9taXNlcy51bnNoaWZ0KGF3c1VwbG9hZCk7XG5cbiAgICAgIC8vIGRvIGFsbCBwcm9taXNlIG9wZXJhdGlvbnNcbiAgICAgICRxLmFsbChxdWV1ZVByb21pc2VzKS50aGVuKGRmZGQucmVzb2x2ZSwgZGZkZC5yZWplY3QpO1xuXG4gICAgICByZXR1cm4gZGZkZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjbGVhbiBsb2NhbCBpbWFnZXMsIHVwZGF0ZSBoaXN0b3J5IHdpdGggYXdzIHJlc291cmNlcywgcmV0dXJucyB0aGUgdXBkYXRlc1xuICAgICAqL1xuICAgIGNsZWFuSW1hZ2VGaWxlczogZnVuY3Rpb24ocHJvamVjdElkKSB7XG4gICAgICB2YXIgYmFzZSA9IF9fZGlybmFtZSArICcvc2NyZWVucy9CQVNFLycgKyBwcm9qZWN0SWQ7XG4gICAgICB2YXIgY29tcHMgPSBiYXNlLnJlcGxhY2UoJ0JBU0UnLCAnY29tcGFyZScpO1xuICAgICAgdmFyIHJlZnMgPSBiYXNlLnJlcGxhY2UoJ0JBU0UnLCAncmVmZXJlbmNlJyk7XG5cbiAgICAgIHJlbW92ZUFsbEluRGlyZWN0b3J5KGNvbXBzKTtcbiAgICAgIHJlbW92ZUFsbEluRGlyZWN0b3J5KHJlZnMpO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwiTVVHLmZpbHRlcigndGltZUFnbycsXG5bJ25vd1RpbWUnLCAndGltZUFnbycsXG5mdW5jdGlvbiAobm93VGltZSwgdGltZUFnbykge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGZyb21UaW1lID0gdGltZUFnby5wYXJzZSh2YWx1ZSk7XG4gICAgdmFyIGRpZmYgPSBub3dUaW1lLmdldFRpbWUoKSAtIGZyb21UaW1lO1xuICAgIHJldHVybiB0aW1lQWdvLmluV29yZHMoZGlmZik7XG4gIH07XG59XSk7XG4iLCJ2YXIgaXBjID0gcmVxdWlyZShcImVsZWN0cm9uXCIpLmlwY1JlbmRlcmVyO1xuXG5NVUcuY29udHJvbGxlcignTWFpbkN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnQ29uZmlnJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBDb25maWcsIFByb2plY3RzKSB7XG4gICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9ICcnO1xuXG4gICRzY29wZS5jcmVhdGVOZXdQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY3JlYXRlTmV3KCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnU0lERVBBTkVMOk5FV1BST0pFQ1QnLCByZXMpO1xuICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cy5zZXR0aW5ncycsIHsgaWQ6IHJlcy5pZCB9KTtcbiAgICB9LFxuXG4gICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBpcGMub24oJ05BVklHQVRFOlRPJywgZnVuY3Rpb24oYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5sb2NhdGlvbikge3JldHVybjt9XG5cbiAgICBjb25zb2xlLmxvZygnTkFWSUdBVEU6VE8nLCBhcmdzKTtcbiAgICAkc3RhdGUuZ28oYXJncy5sb2NhdGlvbik7XG4gIH0pO1xuXG4gIC8vIFVTRSBUSElTIGluc3RlYWQgb2YgJHNjb3BlLiRhcHBseSgpOyBJdCB3aWxsIG1ha2UgdGhlICRkaWdlc3QgZXJyb3JzIG5vdCBoYXBwZW4uXG4gICRyb290U2NvcGUuU2FmZUFwcGx5ID0gZnVuY3Rpb24oc2NvcGUsIGZuKSB7XG4gICAgaWYgKHNjb3BlLiQkcGhhc2UgfHwgc2NvcGUuJHJvb3QuJCRwaGFzZSkge1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NvcGUuJGFwcGx5KGZuKTtcbiAgICB9XG4gIH07XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgQVdTID0gcmVxdWlyZSgnLi9jb3JlL2F3cycpO1xuXG5NVUcuY29udHJvbGxlcignUHJlZmVyZW5jZXNDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlKSB7XG4gICRzY29wZS5hd3NDb25maWcgPSB7XG4gICAgYnVja2V0OiAnJyxcbiAgICBhY2Nlc3NLZXlJZDogJycsXG4gICAgc2VjcmV0QWNjZXNzS2V5OiAnJ1xuICB9O1xuXG4gIC8vIGdyYWIgc2V0dGluZ3MgcmVhbCBxdWlja1xuICAkc2NvcGUuYXdzQ29uZmlnID0gQVdTLmdldENvbmZpZygpO1xuXG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gc2F2ZSB0aGUgQVdTIGNvbmZpZ1xuICAgIEFXUy5zZXRDb25maWcoJHNjb3BlLmF3c0NvbmZpZyk7XG4gIH07XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcblxuICAvLyBBbGxvdyB0aGUgY2hpbGQgdmlld3MgdG8gYmluZCB0byBzYW1lIHNjb3BlXG4gICRyb290U2NvcGUucHJvamVjdCA9IFByb2plY3RzLmdldEJ5SWQoJHN0YXRlUGFyYW1zLmlkKTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RIaXN0b3J5Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICdBbGwnO1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAnJztcblxuICAvLyBncmFiIGFsbCB0aGUgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5oaXN0b3J5SXRlbXMgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAodHlwZSA9PSAnQWxsJykgPyAnJyA6IHR5cGU7XG4gIH07XG5cbiAgJHNjb3BlLnByZXZpZXdJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdwcmV2aWV3JywgaXRlbTogaXRlbSwgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgaXBjID0gcmVxdWlyZShcImVsZWN0cm9uXCIpLmlwY1JlbmRlcmVyO1xuXG5NVUcuY29udHJvbGxlcignUHJvamVjdFJ1bm5lckN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckdGltZW91dCcsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkdGltZW91dCwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICB2YXIgZGVmYXVsdEZvcm1hdCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1NldHRpbmdzID0gZmFsc2U7XG4gICRzY29wZS5oYXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc0NvbXBhcmUgPSBmYWxzZTtcbiAgJHNjb3BlLnJ1bm5pbmdUeXBlID0gJ3JlZmVyZW5jZSc7XG4gICRzY29wZS5iYXRjaEl0ZW1zID0gZGVmYXVsdEZvcm1hdDtcbiAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggfHwgMDtcbiAgJHNjb3BlLnByb2dyZXNzID0ge1xuICAgIHBlcmNlbnQ6IDAsXG4gICAgdGl0bGU6ICdTdGFydGluZydcbiAgfTtcblxuICAvLyBQdXRzIGRhdGEgaW50byBzb3J0ZWQgc2VjdGlvbnNcbiAgZnVuY3Rpb24gcHJvY2Vzc0JhdGNoKGFsbERhdGEpIHtcbiAgICBpZiAoIWFsbERhdGEgfHwgYWxsRGF0YS5sZW5ndGggPCAxKSB7XG4gICAgICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gZmFsc2U7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gcmVzZXQganVzdCB0aGUgc3RhdHNcbiAgICAkc2NvcGUuYWN0aXZlRGF0YSA9IHt9O1xuICAgICRzY29wZS5hY3RpdmVEYXRhLnN1Y2Nlc3MgPSAwO1xuICAgICRzY29wZS5hY3RpdmVEYXRhLndhcm5pbmcgPSAwO1xuICAgICRzY29wZS5hY3RpdmVEYXRhLmVycm9yID0gMDtcbiAgICB2YXIgZm9ybWF0dGVkID0gW3sgdHlwZTogJ3N1Y2Nlc3MnLCBpdGVtczogW119LCB7IHR5cGU6ICd3YXJuaW5nJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnZXJyb3InLCBpdGVtczogW119XTtcblxuICAgIGZ1bmN0aW9uIHBsYWNlSXRlbShpdGVtKSB7XG5cbiAgICAgIC8vIEtlZXAgdGhpbmdzIG9yZ2FuaXplcyB3aXRoIHByZXNldCBwcmlvcml0eVxuICAgICAgaWYgKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAwO1xuXG4gICAgICAgIHN3aXRjaCAoaXRlbS5zdGF0dXMpIHtcbiAgICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0dGVkW3RhcmdldF0uaXRlbXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZURhdGFbZm9ybWF0dGVkW3RhcmdldF0udHlwZV0gPSAkc2NvcGUuYWN0aXZlRGF0YVtmb3JtYXR0ZWRbdGFyZ2V0XS50eXBlXSArIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxsRGF0YS5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouYmF0Y2ggPT09ICRzY29wZS5jdXJyZW50QmF0Y2gpIHtcbiAgICAgICAgcGxhY2VJdGVtKG9iaik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gdHJ1ZTtcbiAgICByZXR1cm4gZm9ybWF0dGVkO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0dXBDdXJyZW50QmF0Y2goKSB7XG4gICAgaWYgKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggPT09IG51bGwpIHtyZXR1cm47fVxuXG4gICAgLy8gZ3JhYiBhbGwgdGhlIHJ1bm5lciB0ZXN0IGRhdGFcbiAgICB2YXIgaGlzdG9yeURhdGEgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkcm9vdFNjb3BlLnByb2plY3QuaWQsICdoaXN0b3J5Jyk7XG5cbiAgICAvLyBTdG9yZSB0aGUgcHJvY2Vzc2VkIGRhdGEgaW50byB0aGUgYmF0Y2ggZGF0YVxuICAgICRzY29wZS5iYXRjaEl0ZW1zID0gcHJvY2Vzc0JhdGNoKGhpc3RvcnlEYXRhKTtcblxuICAgIC8vIHNldHVwIHdoaWNoIHZpZXcgdG8gc2hvdyBiYXNlZCBvbiBoaXN0b3J5XG4gICAgJHNjb3BlLnJ1bm5pbmdUeXBlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlID49ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2gpID8gJ3JlZmVyZW5jZScgOiAnY29tcGFyZSc7XG4gIH1cblxuICAvLyB2YWxpZGF0aW9uIG9mIHByb2plY3RcbiAgZnVuY3Rpb24gdmFsaWRhdGVQcm9qZWN0KCkge1xuICAgIC8vIHZlcmlmeSBpZiBpdHMgdmFsaWRcbiAgICB2YXIgaXNWYWxpZCA9IFByb2plY3RzLnZhbGlkYXRlKCRyb290U2NvcGUucHJvamVjdCk7XG5cbiAgICAvLyBhbGVydCBvZiBpbnZhbGlkaXR5XG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnUGxlYXNlIGZpbmlzaCBjb25maWd1cmluZyBzZXR0aW5ncyEnLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wJyB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNWYWxpZDtcbiAgfVxuXG4gIC8vIGNoZWNrcyBmb3IgY2hhbmdlcyBhbmQgdXBkYXRlcyBVSSBhY2NvdXJkaW5nbHlcbiAgZnVuY3Rpb24gY2hlY2tTdGF0ZSgpIHtcbiAgICAkc2NvcGUuaGFzU2V0dGluZ3MgPSB2YWxpZGF0ZVByb2plY3QoKTtcbiAgICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlICE9PSBudWxsKTtcblxuICAgIGlmICgkc2NvcGUucnVubmluZ1R5cGUgPT09ICdyZWZlcmVuY2UnKSB7XG4gICAgICAkc2NvcGUuaGFzQ29tcGFyZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuaGFzQ29tcGFyZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoICE9PSBudWxsICYmICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggIT09IDApO1xuICAgICAgJHNjb3BlLmhhc0NvbXBhcmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgPD0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCk7XG4gICAgfVxuICB9XG5cbiAgLy8gZ3JhYiB0aGUgbGF0ZXN0IGRhdGEgZm9yIHRoZSBwcm9qZWN0XG4gIGZ1bmN0aW9uIGdyYWJMYXRlc3REYXRhKCkge1xuICAgICRyb290U2NvcGUucHJvamVjdCA9IFByb2plY3RzLmdldEJ5SWQoJHJvb3RTY29wZS5wcm9qZWN0LmlkKTtcbiAgICAkc2NvcGUuY3VycmVudEJhdGNoID0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaDtcblxuICAgIC8vIFNldCB0aGUgYWN0aXZlIGRhdGEgYmFzZWQgb24gY3VycmVudEJhdGNoXG4gICAgJHNjb3BlLmFjdGl2ZURhdGEgPSAoJHJvb3RTY29wZS5wcm9qZWN0ICYmICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnkpID8gJHJvb3RTY29wZS5wcm9qZWN0LmJhdGNoSGlzdG9yeVskc2NvcGUuY3VycmVudEJhdGNoXSA6IG51bGw7XG5cbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6VVBEQVRFJywgJHJvb3RTY29wZS5wcm9qZWN0KTtcbiAgfVxuXG4gIC8vIHN5bmMgYWxsIHByb2plY3QgZmlsZXMgYW5kIHNldHRpbmdzIHRvIEFXU1xuICB2YXIgc3luY2luZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIHN5bmNQcm9qZWN0KCkge1xuICAgIGlmICh0eXBlb2YgJHJvb3RTY29wZS5wcm9qZWN0Lm1ldGEuYXV0b1N5bmNBd3MgIT09IHVuZGVmaW5lZCAmJiAkcm9vdFNjb3BlLnByb2plY3QubWV0YS5hdXRvU3luY0F3cyA9PT0gdHJ1ZSAmJiAhc3luY2luZykge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgU3RhcnRpbmcnLCBkdXI6IDMsIHR5cGU6ICdpbmZvJyB9KTtcbiAgICAgIHN5bmNpbmcgPSB0cnVlO1xuXG4gICAgICBQcm9qZWN0cy5zeW5jKCRyb290U2NvcGUucHJvamVjdC5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgc3luY2luZyA9IGZhbHNlO1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIENvbXBsZXRlJywgZHVyOiAzLCB0eXBlOiAnc3VjY2VzcycsIGljb246ICdjaGVjaycgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdzeW5jTm93IGVycicsIGVycik7XG4gICAgICAgICAgc3luY2luZyA9IGZhbHNlO1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIEZhaWxlZCcsIGR1cjogNSwgdHlwZTogJ2Vycm9yJywgaWNvbjogJ3N0b3BlJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ3JhYkxhdGVzdERhdGEoKTtcbiAgc2V0dXBDdXJyZW50QmF0Y2goKTtcbiAgY2hlY2tTdGF0ZSgpO1xuXG4gIC8vIEZpcmUgb2ZmIHRoZSB2aWV3ZXJcbiAgJHNjb3BlLnByZXZpZXdCYXRjaCA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ2JhdGNoJywgaXRlbXM6IGl0ZW1zLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbiAgLy8gRmlyZSBvZmYgYSBuZXcgdGVzdCEhXG4gICRzY29wZS5uZXdDb21wYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbGlkID0gdmFsaWRhdGVQcm9qZWN0KCk7XG5cbiAgICAvLyB2YWxpZGF0aW9uIHBhdXNlXG4gICAgaWYgKCF2YWxpZCkge3JldHVybjt9XG5cbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAnY29tcGFyZSc7XG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRyb290U2NvcGUuJGVtaXQoJ1BSRUxPQURFUjpPTicpO1xuICAgIH0sIDEwKTtcblxuICAgIGlwYy5zZW5kKCdSVU5ORVI6RklSRScsIHsgdHlwZTogJ2NvbXBhcmUnLCBwcm9qZWN0SWQ6ICRyb290U2NvcGUucHJvamVjdC5pZCB9KTtcbiAgfTtcblxuICAvLyBzZXR1cCBuZXcgcmVmZXJlbmNlXG4gICRzY29wZS5uZXdSZWZlcmVuY2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsaWQgPSB2YWxpZGF0ZVByb2plY3QoKTtcblxuICAgIC8vIHZhbGlkYXRpb24gcGF1c2VcbiAgICBpZiAoIXZhbGlkKSB7cmV0dXJuO31cblxuICAgICRzY29wZS5wcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAncmVmZXJlbmNlJztcbiAgICAkc2NvcGUuaGFzQ29tcGFyZSA9IGZhbHNlO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRyb290U2NvcGUuJGVtaXQoJ1BSRUxPQURFUjpPTicpO1xuICAgIH0sIDEwKTtcblxuICAgIGlwYy5zZW5kKCdSVU5ORVI6RklSRScsIHsgdHlwZTogJ3JlZmVyZW5jZScsIHByb2plY3RJZDogJHJvb3RTY29wZS5wcm9qZWN0LmlkIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJ1bm5lckV2ZW50cyhhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLm1zZyB8fCAhYXJncy5wZXJjZW50KSB7cmV0dXJuO31cblxuICAgIC8vIFdyaXRlIHRoZSBwcm9ncmVzcyB0byBVSVxuICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gcGFyc2VJbnQoYXJncy5wZXJjZW50LCAxMCk7XG4gICAgJHNjb3BlLnByb2dyZXNzLnRpdGxlID0gKGFyZ3MubXNnKSA/IGFyZ3MubXNnIDogJHNjb3BlLnByb2dyZXNzLnRpdGxlO1xuXG4gICAgdmFyIHByZUFyZ3MgPSBhcmdzO1xuICAgIHByZUFyZ3MucHJvamVjdCA9ICRyb290U2NvcGUucHJvamVjdDtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdQUkVMT0FERVI6VVBEQVRFJywgcHJlQXJncyk7XG4gIH1cblxuICAvLyBzaWduYWwgVUkgb2YgY2hhbmdlc1xuICBmdW5jdGlvbiBydW5uZXJDb21wbGV0ZSgpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGdyYWJMYXRlc3REYXRhKCk7XG4gICAgICBzZXR1cEN1cnJlbnRCYXRjaCgpO1xuICAgICAgY2hlY2tTdGF0ZSgpO1xuICAgICAgc3luY1Byb2plY3QoKTtcbiAgICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgfSwgMyk7XG4gIH1cblxuICBmdW5jdGlvbiBydW5uZXJGYWlsZWQocmVhc29uKSB7XG4gICAgY29uc29sZS5sb2coJ1JVTk5FUjpGQUlMRUQgcmVhc29uJywgcmVhc29uKTtcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICB9XG5cbiAgaXBjLm9uKCdSVU5ORVI6UFJPR1JFU1MnLCBydW5uZXJFdmVudHMpO1xuICBpcGMub24oJ1JVTk5FUjpDT01QTEVURScsIHJ1bm5lckNvbXBsZXRlKTtcbiAgaXBjLm9uKCdSVU5ORVI6RkFJTEVEJywgcnVubmVyRmFpbGVkKTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RTZXR0aW5nc0N0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gIHZhciBzYXZlVGltZXI7XG5cbiAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLnNlbGVjdG9yVHlwZXMgPSBbJ2NvbnRhaW5lcicsICdoaWRlJywgJ3JlbW92ZSddO1xuICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzQXdzU2V0dGluZ3MgPSBmYWxzZTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcblxuICBmdW5jdGlvbiBhZGROZXdUeXBlKHR5cGUsIGRhdGEpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0ucHVzaChkYXRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQXdzU2V0dGluZ3MoKSB7XG4gICAgLy8gcmVhZCBpZiBhd3Mgc2V0dGluZ3MgYW5kIGlmIHRoZXkgYXJlIGNvcnJlY3RcbiAgICB2YXIgZmlsZSA9IFByb2plY3RzLmdldCgnL2NvbmZpZy9hd3MuanNvbicsIHt9KTtcblxuICAgIGlmICghZmlsZSB8fCAhZmlsZS5idWNrZXQgfHwgIWZpbGUuYWNjZXNzS2V5SWQgfHwgIWZpbGUuc2VjcmV0QWNjZXNzS2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBpbml0aWFsIGF3cyBjcmVkIGNoZWNrXG4gICRzY29wZS5oYXNBd3NTZXR0aW5ncyA9IGNoZWNrQXdzU2V0dGluZ3MoKTtcblxuICAvLyBXYXRjaCBmb3IgY2hhbmdlcywgc28gd2UgY2FuIHNhdmVcbiAgJHNjb3BlLiR3YXRjaCgncHJvamVjdCcsIGZ1bmN0aW9uKG5WLCBvVikge1xuICAgIGlmIChuViAhPSBvVikge1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSB0cnVlO1xuXG4gICAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICAgJHNjb3BlLnNhdmUoKTtcbiAgICB9XG4gIH0sIHRydWUpO1xuXG4gIC8vIFRPRE86IHNldHVwIHZhbGlkYXRpb25zXG4gIC8vIHNhdmUgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzYXZlVGltZXIpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoc2F2ZVRpbWVyKTtcbiAgICB9XG5cbiAgICAvLyB0aHJvdHRsZSB0aGUgc2F2ZXMsIHNpbmNlIHdlIHNhdmUgb24gYW55IGNoYW5nZXNcbiAgICBzYXZlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAvLyBTYXZlIHRlaCBwcm9qZWN0b2lkXG4gICAgICBQcm9qZWN0cy5zYXZlKCRyb290U2NvcGUucHJvamVjdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzaWRlYmFyIHdpdGggY2hhbmdlc1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpVUERBVEUnLCByZXMpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXZlcnQgbW9kZWxcbiAgICAgICAgICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LCAyMDApO1xuICB9O1xuXG4gIC8vIHN5bmMgdGhpcyBwcm9qZWN0IHRvIEFXU1xuICAkc2NvcGUuc3luY05vdyA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zeW5jaW5nID0gdHJ1ZTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBTdGFydGluZycsIGR1cjogNSwgdHlwZTogJ2luZm8nIH0pO1xuXG4gICAgUHJvamVjdHMuc3luYygkcm9vdFNjb3BlLnByb2plY3QuaWQpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgQ29tcGxldGUnLCBkdXI6IDUsIHR5cGU6ICdzdWNjZXNzJywgaWNvbjogJ2NoZWNrJyB9KTtcbiAgICAgIH1cblxuICAgICAgLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coJ3N5bmNOb3cgZXJyJywgZXJyKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgRmFpbGVkJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcGUnIH0pO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLy8gcmV2ZXJ0IHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLmNhbmNlbFNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciBhbGwgeW91ciBjaGFuZ2VzPycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICAvLyBwdXQgcmV2ZXJ0IG1vZGVsIGludG8gdGhlIHByb2plY3QgbW9kZWxcbiAgICAgIGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGVsZXRlIHRoZSBwcm9qZWN0LCBhbmQgcmVtb3ZlIGZyb20gcHJvamVjdCBsaXN0cywgdGhlbiByZWRpcmVjdCB0byBtYWluXG4gICRzY29wZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdD8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgdmFyIHByb2plY3RJRCA9ICRyb290U2NvcGUucHJvamVjdC5pZDtcblxuICAgICAgUHJvamVjdHMucmVtb3ZlKHByb2plY3RJRClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdQcm9qZWN0IFJlbW92ZWQgU3VjY2Vzc2Z1bGx5JywgZHVyOiA1LCB0eXBlOiAnc3VjY2VzcycgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IHZpZXdwb3J0IGl0ZW1cbiAgJHNjb3BlLmFkZFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1ZpZXdwb3J0ID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3ZpZXdwb3J0cycsIG5ld1ZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IHNlbGVjdG9yIGl0ZW1cbiAgJHNjb3BlLmFkZFNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1NlbGVjdG9yID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgdHlwZTogJ2NvbnRhaW5lcicsXG4gICAgICBxdWVyeTogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdzZWxlY3RvcnMnLCBuZXdTZWxlY3Rvcik7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBjb29raWUgaXRlbVxuICAkc2NvcGUuYWRkQ29va2llID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0Nvb2tpZSA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHBhdGg6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnY29va2llcycsIG5ld0Nvb2tpZSk7XG4gIH07XG5cbiAgLy8gYWN0aXZhdGUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmFjdGl2YXRlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09IHRydWUgfHwgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09ICd0cnVlJykgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5kZWxldGVUeXBlSXRlbSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnNwbGljZShpZCwgMSk7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlcyBhbGwgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5jbGVhckhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICBQcm9qZWN0cy5jbGVhckhpc3RvcnkoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdDbGVhcmVkIEFsbCBIaXN0b3J5IScsIGR1cjogNSwgdHlwZTogJ3N1Y2Nlc3MnLCBpY29uOiAnaGlzdG9yeScgfSk7XG4gICAgICB9XG5cbiAgICAgICwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdFcnJvciBPY2N1cnJlZCEgUGxlYXNlIHRyeSBhZ2Fpbi4nLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wJyB9KTtcbiAgICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuY29udHJvbGxlcignU2lkZVBhbmVsQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2plY3RzID0gW107XG5cbiAgLy8gZ3JhYiBhbGwgcHJvamVjdHMgbGlzdFxuICAkc2NvcGUucHJvamVjdHMgPSBQcm9qZWN0cy5nZXRBbGwoKTtcblxuICAvLyBhZGQgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy51bnNoaWZ0KGFyZ3MpO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50aXRsZSA9IGFyZ3MudGl0bGU7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9IGFyZ3MudGltZXN0YW1wO1xuXG4gICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0pIHtcbiAgICAgICAgICAvLyBvbmx5IHVwZGF0ZSB0b3RhbHMgaWYgd2UgaGF2ZSB0aGVtXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuc3VjY2VzcyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLndhcm5pbmcgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLmVycm9yKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uZXJyb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS52aWV3cykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLnZpZXdzID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnZpZXdzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpSRU1PVkUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gICRzY29wZS5nb1RvUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgLy8gVE9ETzogZml4IHRoaXNcbiAgICAvLyB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG4gICAgdmFyIHR5cGUgPSAncnVubmVyJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMjU1LFxuICAgICAgZ3JlZW46IDAsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ2ZsYXQnLFxuICAgIHRyYW5zcGFyZW5jeTogMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAwXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG4gIC5zdGF0ZSgncHJlZmVyZW5jZXMnLCB7XG4gICAgdXJsOiAnL3ByZWZlcmVuY2VzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3ByZWZlcmVuY2VzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcmVmZXJlbmNlc0N0cmwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG59XSk7XG4iLCJNVUcucnVuKFsnJHJvb3RTY29wZScsICckaHR0cCcsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkaHR0cCkge1xuXG4gIC8vIGhlYWRlcnNcbiAgdmFyICRjb21tb24gPSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbjtcbiAgJGNvbW1vblsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJyRzdGF0ZUNoYW5nZUVycm9yJywgZXJyb3IpO1xuICB9KTtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
