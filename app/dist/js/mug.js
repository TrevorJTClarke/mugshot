var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,i,c,a){function s(n){var o=+new Date,i=(n.title,n.icon?n.icon:null,e.$new(!0));i.alert={},i.alert.id=o,i.alert.icon=n.icon?n.icon:null,i.alert.type=n.type?n.type:"info",i.alert.title=n.title,i.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var c=r(p)(i);c[0].id=o,m=o,f.append(c),c.addClass(v),t(function(){c.addClass(h)},20),l=t(function(){u(c)},d)}function u(e){if(!e&&m)e=angular.element(document.getElementById(m));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(h),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(i),d=5e3,m="",v="alert-active",h="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(d=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){var n=t.remoteSource?t.remoteSource:t.source;e.compareItem.a=t.remoteSource?n:"screens/reference/"+r.project.id+"/"+n.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n,e.compareItem.c=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n.replace(".png","_diff.png")}var i="modal-open",c="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.compareItem.a=e.activeItem.remoteSource?e.activeItem.remoteSource:"screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(i),setTimeout(function(){t.addClass(c)},30))}),e.close=function(){t.removeClass(c),setTimeout(function(){t.removeClass(i)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=p.replace("BODY",i).replace("ICON",c),h=r(a)(n);h[0].id=o,m=o,f.append(h);var g=f.find("#"+o);u(g,e.type),e.callback&&g.find(".msg-action").addClass("show"),t(function(){g.addClass("add")},20),l=t(function(){s(g)},d)}function s(e){if(!e&&m)e=f.find("#"+m);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),d=5e3,m="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(d=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]);var P=require("./vendor/core/preloader");MUG.directive("preloader",["$rootScope","$timeout",function(e,t){function r(e){var t=0,r=0,o=0,i=12;if(e.selectors&&e.selectors.length>0)for(var c=0;c<e.selectors.length;c++)e.selectors[c]&&"container"===e.selectors[c].type&&(o+=1);e.viewports&&e.viewports.length>0&&(r=e.viewports.length),e.meta&&e.meta.delay&&(t=parseInt(e.meta.delay,10)),n=i*r*o+30}var n=30;return{replace:!0,restrict:"E",scope:{},template:'<div class="preloader"></div>',link:function(o,i,c,a){function s(e,t){if(t&&t.msg){if(t.project&&r(t.project),!v)return v=!0,void(f=setTimeout(function(){v=!1},10*n));d=t.msg;var o;switch(d){case"Opening Browser Session":o=0;break;case"Capturing Screens":o=1}d!==m&&l&&l.animate&&l.animate(o,n,function(){m=d})}}function u(){l.resetBrowser()}var l,p,f,d,m,v=!1;t(function(){l=new P.Browser,l.init(),p=document.querySelector(".preloader"),p.appendChild(l.instance),l.drawBrowser()},30),e.$on("PRELOADER:UPDATE",s),e.$on("PRELOADER:OFF",u)}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var c=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&c.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),c.resolve(a)})}),c.promise}var o=__dirname+"/",i="data:image/png;base64,",c=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?c[1]:c[0]:t>.1&&2>t?c[1]:c[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs"),path=require("path"),AWS=require("./vendor/core/aws");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}function i(e){try{var t=fs.readdirSync(e)}catch(r){return}if(t.length>0)for(var n=0;n<t.length;n++){var o=path.join(e,t[n]);fs.statSync(o).isFile()?fs.unlinkSync(o):rmDir(o)}}function c(t,r){var n=e.defer();return fs.writeFile(t,JSON.stringify(r),function(e){return e?void n.reject(e):void n.resolve()}),n.promise}function a(t){var r=e.defer();return fs.unlink(t,function(e){return e?void r.reject(e):void r.resolve()}),r.promise}var s=__dirname+"/projects.json",u=__dirname+"/projects/";return{get:function(e,t){return o(__dirname+e,t)},getAll:function(){return o(s,[])},getById:function(e){return o(u+e+".json")},getTypeById:function(e,t){var r=t?"_"+t:"";return o(u+e+r+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,i=e.meta.url,c=!0;return!r||!n||!o||!i||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(c=!1)}),n&&n.map(function(e,t){e.query&&e.type||(c=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(c=!1)}),c)},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(s,"utf8")),i=r(o.length),c=n(i);return o.unshift(i),fs.writeFile(s,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(u+i.id+".json",JSON.stringify(c),function(e){return e?void t.reject(e):void fs.writeFile(u+i.id+"_history.json",JSON.stringify([]),function(e){return e?void t.reject(e):void t.resolve(i)})})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(s,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(u+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(s,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(u+t+".json",function(e){return e?void r.reject(e):void fs.unlink(u+t+"_history.json",function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},clearHistory:function(t){var r=e.defer(),n=o(s,[]);return t.currentBatch=null,t.currentReference=null,t.batchHistory={},n.map(function(e,r){e.id===t.id&&(n[r].totals.success=0,n[r].totals.warning=0,n[r].totals.error=0,n[r].totals.views=0)}),this.cleanImageFiles(t),fs.writeFile(u+t.id+"_history.json",JSON.stringify([]),function(e){return e?void r.reject(e):void fs.writeFile(u+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},sync:function(t){if(t){for(var r=this,n=e.defer(),o=this.getById(t),i=this.getTypeById(t,"history"),c=[],a=0;a<i.length;a++){var s=i[a];if(s.source&&-1===s.source.search("amazon")){var u=s.source,l=s.type,p=__dirname+"/screens/"+l+"/"+o.id+"/"+u;c.push({key:l+"/"+u,path:p})}}return AWS.init().upload(c,o.id).then(function(e){r.cleanAfterSync(o,e).then(n.resolve,n.reject)},function(e){n.reject(e)}),n.promise}},cleanAfterSync:function(t,r){var n=e.defer(),i=o(u+t.id+"_history.json",[]),s=[],l=[];t.updatedAt=+new Date;for(var p=0;p<r.length;p++){var f=r[p],d=f.split("/"),m=d[d.length-2],v=d[d.length-1];i.map(function(e,n){if(e.source===v&&"compare"===m){var o=__dirname+"/screens/"+m+"/"+t.id+"/"+v,c=a(o),s=a(o.replace(".","_diff."));delete i[n].source,i[n].remoteSource=r[p],l.push(c),l.push(s)}})}var h=__dirname+"/projects/"+t.id+".json",g=h.replace(".json","_history.json"),y=c(h,t),j=c(g,i);l.unshift(y),l.unshift(j),s.push({key:t.id,path:h}),s.push({key:t.id+"_history",path:g});var w=AWS.init().upload(s,t.id);return l.unshift(w),e.all(l).then(n.resolve,n.reject),n.promise},cleanImageFiles:function(e){var t=__dirname+"/screens/BASE/"+e.id,r=t.replace("BASE","compare"),n=t.replace("BASE","reference");i(r),i(n)}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,p=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,i].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]);var ipc=require("ipc");MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})},ipc.on("NAVIGATE:TO",function(e){e&&e.location&&(console.log("NAVIGATE:TO",e),r.go(e.location))}),e.SafeApply=function(e,t){e.$$phase||e.$root.$$phase?"undefined"!=typeof t&&t():e.$apply(t)}}]);var fs=require("fs"),AWS=require("./vendor/core/aws");MUG.controller("PreferencesCtrl",["$rootScope","$scope","$state",function(e,t,r){t.awsConfig={bucket:"",accessKeyId:"",secretAccessKey:""},t.awsConfig=AWS.getConfig(),t.save=function(){AWS.setConfig(t.awsConfig)}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("ipc");MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,n}function c(){if(null!==e.project.currentBatch){var r=o.getTypeById(e.project.id,"history");t.batchItems=i(r),t.runningType=e.project.currentReference>=e.project.currentBatch?"reference":"compare"}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,"reference"===t.runningType?t.hasCompare=!1:(t.hasCompare=null!==e.project.currentBatch&&0!==e.project.currentBatch,t.hasCompare=e.project.currentReference<=e.project.currentBatch)}function u(){e.project=o.getById(e.project.id),t.currentBatch=e.project.currentBatch,t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,e.$emit("SIDEPANEL:UPDATE",e.project)}function l(){void 0===typeof e.project.meta.autoSyncAws||e.project.meta.autoSyncAws!==!0||v||(e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:3,type:"info"}),v=!0,o.sync(e.project.id).then(function(t){v=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:3,type:"success",icon:"check"})},function(t){console.log("syncNow err",t),v=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})}))}function p(r){if(r&&r.msg&&r.percent){t.progress.percent=parseInt(r.percent,10),t.progress.title=r.msg?r.msg:t.progress.title;var n=r;n.project=e.project,e.$emit("PRELOADER:UPDATE",n)}}function f(){r(function(){u(),c(),s(),l(),t.processing=!1},3)}function d(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}var m=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=m,t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"};var v=!1;u(),c(),s(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",p),ipc.on("RUNNER:COMPLETE",f),ipc.on("RUNNER:FAILED",d)}]);var fs=require("fs");MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}function i(){var e=n.get("/config/aws.json",{});return e&&e.bucket&&e.accessKeyId&&e.secretAccessKey?!0:!1}var c;t.syncing=!1,t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.hasAwsSettings=!1,t.master={},angular.copy(e.project,t.master),t.hasAwsSettings=i(),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){c&&window.clearTimeout(c),c=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.syncNow=function(){t.syncing=!0,e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:5,type:"info"}),n.sync(e.project.id).then(function(r){t.syncing=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:5,type:"success",icon:"check"})},function(r){t.syncing=!1,console.log("syncNow err",r),e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})})},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(r.batchHistory[r.currentBatch].success&&(t.projects[n].totals.success=r.batchHistory[r.currentBatch].success),r.batchHistory[r.currentBatch].warning&&(t.projects[n].totals.warning=r.batchHistory[r.currentBatch].warning),r.batchHistory[r.currentBatch].error&&(t.projects[n].totals.error=r.batchHistory[r.currentBatch].error),r.batchHistory[r.currentBatch].views&&(t.projects[n].totals.views=r.batchHistory[r.currentBatch].views)))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("preferences",{url:"/preferences",templateUrl:"preferences.html",controller:"PreferencesCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJwcmVsb2FkZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcmVmZXJlbmNlc2N0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiaW1hZ2VTcmMiLCJyZW1vdGVTb3VyY2UiLCJzb3VyY2UiLCJjb21wYXJlSXRlbSIsImEiLCJwcm9qZWN0IiwiY3VycmVudEJhdGNoIiwiY3VycmVudFJlZmVyZW5jZSIsImIiLCJjIiwibW9kYWxBY3RpdmUiLCJtb2RhbFZpc2libGUiLCJjb3B5IiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4IiwiYWN0aXZlSXRlbSIsInZpZXdlciIsIml0ZW1zIiwiYW1vdW50IiwiaW52ZXJzZSIsInBlcmNlbnQiLCIkd2F0Y2giLCJudiIsIm92IiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsIm9wdGlvbk1vZGUiLCJhcmdzIiwiY2xvc2UiLCJpdGVtIiwibGVuZ3RoIiwibW9kYWxBY3Rpb25OYXYiLCJuZXh0SWR4IiwidG90YWwiLCJnb1RvSW5kZXgiLCJpZHgiLCJuZXdCb2R5IiwibXNnIiwibmV3SWNuIiwiZGVmYXVsdEljb24iLCJtc2dUZW1wbGF0ZSIsIm5ld01lc3NhZ2UiLCJtc2dFbCIsImZpbmQiLCJjaGFuZ2VUeXBlIiwiYm9keSIsImFjdGlvbkVsIiwiUCIsInJlcXVpcmUiLCJjYWxjdWxhdGVJbmNyZW1lbnRzIiwiZGVsYXkiLCJ2aWV3cG9ydHMiLCJzZWxlY3RvcnMiLCJpbmNyZW1lbnQiLCJpIiwibWV0YSIsInRvdGFsSW5jcmVtZW50IiwidXBkYXRlUHJlbG9hZGVyIiwiaXNBbmltYXRpbmciLCJwcmV2aW91c1RpdGxlIiwiQiIsImFuaW1hdGUiLCJyZXNldFByZWxvYWRlciIsInJlc2V0QnJvd3NlciIsIkJyb3dzZXIiLCJpbml0IiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiaW5zdGFuY2UiLCJkcmF3QnJvd3NlciIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmcyIsImFzeW5jIiwiZmFjdG9yeSIsIiRxIiwiQ29uZmlnIiwicmVhZEFzeW5jIiwiZmlsZSIsInJlYWRGaWxlIiwiZmlsZURpclByZWZpeCIsImNvbXBhcmVTaW5nbGUiLCJkZmQiLCJkZWZlciIsIm91dHB1dCIsInJlc2VtYmxlIiwib3V0cHV0U2V0dGluZ3MiLCJDb21wYXJlIiwibWFwIiwiZXJyIiwicmVzdWx0cyIsImFEYXRhIiwiaW1hZ2VQcmVmaXgiLCJiRGF0YSIsInJlamVjdCIsImNvbXBhcmVUbyIsImlnbm9yZUNvbG9ycyIsIm9uQ29tcGxldGUiLCJkaWZmRGF0YSIsInJlcG9ydCIsInNyYyIsImdldEltYWdlRGF0YVVybCIsInJlc29sdmUiLCJwcm9taXNlIiwiX19kaXJuYW1lIiwic3RhdHVzVHlwZXMiLCJydW5TaW5nbGUiLCJnZXRTdGF0dXMiLCJtaXNNYXRjaFZhbHVlIiwicGFyc2VGbG9hdCIsIm1pc01hdGNoUGVyY2VudGFnZSIsImlzU2FtZURpbWVuc2lvbnMiLCJub3ciLCJ1cGRhdGVUaW1lIiwicGF0aCIsIkFXUyIsImNyZWF0ZVVVSUQiLCJzIiwiQXJyYXkiLCJqb2luIiwibiIsInJhbmRvbSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZUR1bW15UHJvamVjdCIsInByb2plY3RJZCIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwiYmF0Y2hIaXN0b3J5IiwiY29va2llcyIsInVybCIsInJlYWR5RXZlbnQiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicmVhZEZpbGVTeW5jIiwiY29kZSIsIkpTT04iLCJyZW1vdmVBbGxJbkRpcmVjdG9yeSIsImRpclBhdGgiLCJmaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsZVBhdGgiLCJzdGF0U3luYyIsImlzRmlsZSIsInVubGlua1N5bmMiLCJybURpciIsInByb21pc2VXcml0ZSIsIl9xIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwicHJvbWlzZVJlbW92ZSIsIl96IiwidW5saW5rIiwicHJvamVjdHNQYXRoIiwicHJvamVjdEZpbGVzUGF0aCIsImdldEFsbCIsImdldEJ5SWQiLCJnZXRUeXBlQnlJZCIsImFkZGl0aW9uIiwidmFsaWRhdGUiLCJib29sIiwib2JqIiwid2lkdGgiLCJoZWlnaHQiLCJuYW1lIiwicXVlcnkiLCJjcmVhdGVOZXciLCJhbGxQcm9qZWN0cyIsIm5ld1Byb2plY3REYXRhIiwibmV3UHJvamVjdEZpbGUiLCJ1bnNoaWZ0Iiwic2F2ZSIsInByb2plY3REYXRhIiwic3BsaWNlIiwiY2xlYXJIaXN0b3J5IiwibWFpblByb2plY3RzIiwiY2xlYW5JbWFnZUZpbGVzIiwic3luYyIsIl90aGlzIiwiZCIsInByb2plY3RGaWxlcyIsInJlYWR5RmlsZXMiLCJ0bXBGaWxlIiwic2VhcmNoIiwicHVzaCIsImtleSIsInVwbG9hZCIsInRoZW4iLCJyZXMiLCJjbGVhbkFmdGVyU3luYyIsIm5ld1JlZnMiLCJkZmRkIiwiaGlzdG9yeURhdGEiLCJ1cGRhdGVkUmVtb3RlRmlsZXMiLCJxdWV1ZVByb21pc2VzIiwidXBkYXRlZEF0IiwidG1wU3JjIiwidG1wUmVmIiwic3BsaXQiLCJ0bXBUeXBlIiwidG1wQWxpYXMiLCJyZW1SZWZQYXRoIiwicmVtUmVmIiwicmVtUmVmRGlmZiIsInByb2plY3RGaWxlIiwicHJvamVjdEhpc3RvcnlGaWxlIiwicHJvamVjdFdyaXRlIiwicHJvamVjdEhpc3RvcnlXcml0ZSIsImF3c1VwbG9hZCIsImFsbCIsImJhc2UiLCJjb21wcyIsInJlZnMiLCJ0cmltRGlnaXRzIiwibnVtIiwibSIsInRvU3RyaW5nIiwic2xpY2UiLCJzZXJ2aWNlIiwic2V0dGluZ3MiLCJyZWZyZXNoTWlsbGlzIiwiYWxsb3dGdXR1cmUiLCJzdHJpbmdzIiwicHJlZml4QWdvIiwicHJlZml4RnJvbU5vdyIsInN1ZmZpeEFnbyIsInN1ZmZpeEZyb21Ob3ciLCJzZWNvbmRzIiwibWludXRlIiwibWludXRlcyIsImhvdXIiLCJob3VycyIsImRheSIsImRheXMiLCJtb250aCIsIm1vbnRocyIsInllYXIiLCJ5ZWFycyIsIm51bWJlcnMiLCJkaXN0YW5jZU1pbGxpcyIsInN1YnN0aXR1dGUiLCJzdHJpbmdPckZ1bmN0aW9uIiwibnVtYmVyIiwic3RyaW5nIiwiaXNGdW5jdGlvbiIsIiRsIiwicHJlZml4Iiwic3VmZml4IiwiYWJzIiwid29yZHMiLCJzZXBhcmF0b3IiLCJ1bmRlZmluZWQiLCJ3b3JkU2VwYXJhdG9yIiwidHJpbSIsImlzbzg2MDEiLCJpc051bWJlciIsIm9yaWdpbmFsVGltZXN0YW1wIiwiZmlsdGVyIiwiZGlmZiIsImlwYyIsImNvbnRyb2xsZXIiLCIkc3RhdGUiLCJQcm9qZWN0cyIsImN1cnJlbnRQcm9qZWN0SWQiLCJjcmVhdGVOZXdQcm9qZWN0IiwiJGJyb2FkY2FzdCIsImdvIiwiY29uc29sZSIsImxvZyIsIm9uIiwibG9jYXRpb24iLCJTYWZlQXBwbHkiLCJmbiIsIiQkcGhhc2UiLCIkcm9vdCIsIiRhcHBseSIsImF3c0NvbmZpZyIsImJ1Y2tldCIsImFjY2Vzc0tleUlkIiwic2VjcmV0QWNjZXNzS2V5IiwiZ2V0Q29uZmlnIiwic2V0Q29uZmlnIiwiJHN0YXRlUGFyYW1zIiwiYWN0aXZlRmlsdGVyIiwiYWN0aXZlRmlsdGVyUXVlcnkiLCJoaXN0b3J5SXRlbXMiLCJjaGFuZ2VGaWx0ZXIiLCJwcmV2aWV3SXRlbSIsIiRlbWl0IiwicHJvY2Vzc0JhdGNoIiwiYWxsRGF0YSIsInBsYWNlSXRlbSIsInN0YXR1cyIsInRhcmdldCIsImZvcm1hdHRlZCIsImFjdGl2ZURhdGEiLCJoYXNSZWZlcmVuY2UiLCJiYXRjaCIsInNldHVwQ3VycmVudEJhdGNoIiwiYmF0Y2hJdGVtcyIsInJ1bm5pbmdUeXBlIiwidmFsaWRhdGVQcm9qZWN0IiwiaXNWYWxpZCIsImNoZWNrU3RhdGUiLCJoYXNTZXR0aW5ncyIsImhhc0NvbXBhcmUiLCJncmFiTGF0ZXN0RGF0YSIsInN5bmNQcm9qZWN0IiwiYXV0b1N5bmNBd3MiLCJzeW5jaW5nIiwicnVubmVyRXZlbnRzIiwicHJvZ3Jlc3MiLCJwcmVBcmdzIiwicnVubmVyQ29tcGxldGUiLCJwcm9jZXNzaW5nIiwicnVubmVyRmFpbGVkIiwicmVhc29uIiwiZGVmYXVsdEZvcm1hdCIsInByZXZpZXdCYXRjaCIsIm5ld0NvbXBhcmUiLCJ2YWxpZCIsInNlbmQiLCJuZXdSZWZlcmVuY2UiLCJhZGROZXdUeXBlIiwiY2hlY2tBd3NTZXR0aW5ncyIsInNhdmVUaW1lciIsInNlbGVjdG9yVHlwZXMiLCJoYXNDaGFuZ2VzIiwiaGFzQXdzU2V0dGluZ3MiLCJtYXN0ZXIiLCJuViIsIm9WIiwic3luY05vdyIsImNhbmNlbFNhdmUiLCJzdXJlIiwiY29uZmlybSIsImRlbGV0ZVByb2plY3QiLCJwcm9qZWN0SUQiLCJhZGRWaWV3cG9ydCIsIm5ld1ZpZXdwb3J0IiwiYWN0aXZlIiwiYWRkU2VsZWN0b3IiLCJuZXdTZWxlY3RvciIsImFkZENvb2tpZSIsIm5ld0Nvb2tpZSIsImFjdGl2YXRlVHlwZSIsImRlbGV0ZVR5cGVJdGVtIiwicHJvamVjdHMiLCJnb1RvUHJvamVjdCIsImNvbnN0YW50IiwiRU5WIiwiU1RBR0UiLCJQUk9EIiwiZXJyb3JDb2xvciIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImVycm9yVHlwZSIsInRyYW5zcGFyZW5jeSIsImxhcmdlSW1hZ2VUaHJlc2hvbGQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwib3RoZXJ3aXNlIiwicnVuIiwiJGh0dHAiLCIkY29tbW9uIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFdBQUEsWUFBQSxnQkNtQkFGLEtBQUFHLFVB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QUNBek8sSUFBQSxZQUNBdEosWUFBQSx5QkFDQXdSLFdBQUEsd0JBRUF1RyxNQUFBLG1CQUNBek8sSUFBQSxVQUNBdEosWUFBQSx1QkFDQXdSLFdBQUEsc0JBRUF1RyxNQUFBLG9CQUNBek8sSUFBQSxXQUNBdEosWUFBQSx3QkFDQXdSLFdBQUEsdUJBc0JBc0csRUFBQUUsVUFBQSxRQ3JFQTFiLElBQUEyYixLQUFBLGFBQUEsUUFDQSxTQUFBdmIsRUFBQXdiLEdBR0EsR0FBQUMsR0FBQUQsRUFBQUUsU0FBQUMsUUFBQUMsTUFDQUgsR0FBQSxnQkFBQSxtQkFFQXpiLEVBQUE0QyxJQUFBLG9CQUFBLFNBQUFpWixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBM1AsR0FDQStJLFFBQUFDLElBQUEsb0JBQUFoSiIsImZpbGUiOiJtdWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTVVHID0gYW5ndWxhci5tb2R1bGUoJ211Z3Nob3QnLCBbJ3VpLnJvdXRlcicsICdtdWd0ZW1wbGF0ZXMnXSk7XG4iLCIvKipcbiAqIGFsZXJ0XG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIGFsZXJ0cyBhbmQgbm90aWNlcyBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogPGFsZXJ0PjwvYWxlcnQ+XG4gKlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBpbmZvLCBzdWNjZXNzLCB3YXJuaW5nLCBlcnJvclxuICpcbiAqIE9QVElPTlM6XG4gKiAtIHRpdGxlOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlLCBpbiBzZWNvbmRzXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBubyBkZWZhdWx0LCBzZWUgaHR0cHM6Ly9vY3RpY29ucy5naXRodWIuY29tLyBmb3Igb3B0aW9uc1xuICovXG5NVUcuZGlyZWN0aXZlKCdhbGVydCcsXG5bJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnJHRlbXBsYXRlQ2FjaGUnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlLCAkdGVtcGxhdGVDYWNoZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJhbGVydC1wYXJlbnRcIj48L2Rpdj4nLFxuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgYWxlcnRUZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYWxlcnQuaHRtbCcpO1xuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSAnJztcbiAgICAgIHZhciBhbGVydEFjdGl2ZSA9ICdhbGVydC1hY3RpdmUnO1xuICAgICAgdmFyIGFsZXJ0VmlzaWJsZSA9ICdhbGVydC12aXNpYmxlJztcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UoZGF0YSkge1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLnRpdGxlO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbikgPyBkYXRhLmljb24gOiBudWxsO1xuICAgICAgICB2YXIgJHRtcFNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuXG4gICAgICAgIC8vIHNldHVwIHNpbXBsZSBzY29wZSBmb3Igb25seSB0aGlzIGFsZXJ0IGl0ZW1cbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0ID0ge307XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5pZCA9IF9pZDtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0Lmljb24gPSAoZGF0YS5pY29uKSA/IGRhdGEuaWNvbiA6IG51bGw7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50eXBlID0gKGRhdGEudHlwZSkgPyBkYXRhLnR5cGUgOiAnaW5mbyc7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50aXRsZSA9IGRhdGEudGl0bGU7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5hY3Rpb24gPSAoIWRhdGEuY2FsbGJhY2spID8gbnVsbCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBhY3Rpb25FbCA9IHRoaXMuaWQ7XG4gICAgICAgICAgZGF0YS5jYWxsYmFjaygpO1xuICAgICAgICAgIGNsZWFyRWwodGhpcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFsZXJ0RWwgPSAkY29tcGlsZShhbGVydFRlbXBsYXRlKSgkdG1wU2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBhbGVydEVsWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZChhbGVydEVsKTtcbiAgICAgICAgYWxlcnRFbC5hZGRDbGFzcyhhbGVydEFjdGl2ZSk7XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBhbGVydEVsLmFkZENsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNsZWFyRWwoYWxlcnRFbCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbChlbGVtKSB7XG4gICAgICAgIGlmICghZWxlbSAmJiBwcmV2aW91c0lkKSB7XG4gICAgICAgICAgZWxlbSA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmV2aW91c0lkKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVsZW0pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbSkge1xuICAgICAgICAgIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZWxlbSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdBTEVSVDpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEudGl0bGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZiAoZGF0YS5kdXIpIHtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBmYWRlSW5cbiAqIEEgZGlyZWN0aXZlIGZvciBhbmltYXRpbmcgaW4gZWxlbWVudHNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnZmFkZUluJywgW2Z1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoYXR0cnMuZmFkZUluKSB8fCAxMDtcbiAgICAgIGVsZW0uYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbS5jc3MoJ29wYWNpdHknLCAnMScpO1xuICAgICAgfSwgb2Zmc2V0KTtcbiAgICB9XG4gIH07XG5cbn1dKTtcbiIsIi8qKlxuICogTW9kYWxcbiAqIEJ1aWxkcyBhIG1vZGFsIGZvciBpbWFnZSB2aWV3aW5nIGFuZCBjb21wYXJpbmdcbiAqXG4gKiBAdXNhZ2VcbiAqIDxtb2RhbD48L21vZGFsPlxuICovXG5NVUcuZGlyZWN0aXZlKCdtb2RhbCcsXG5bJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLFxuZnVuY3Rpb24oJHRpbWVvdXQsICRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgbW9kYWxBY3RpdmUgPSAnbW9kYWwtb3Blbic7XG4gICAgICB2YXIgbW9kYWxWaXNpYmxlID0gJ21vZGFsLXZpc2libGUnO1xuXG4gICAgICAkc2NvcGUucHJvamVjdCA9IGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9ICdzaWRlcyc7XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge307XG4gICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICRzY29wZS5hY3RpdmVJdGVtID0ge307XG4gICAgICAkc2NvcGUuY29tcGFyZUl0ZW0gPSB7XG4gICAgICAgIGE6ICcnLFxuICAgICAgICBiOiAnJyxcbiAgICAgICAgYzogJydcbiAgICAgIH07XG4gICAgICAkc2NvcGUudmlld2VyID0ge1xuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge1xuICAgICAgICBhbW91bnQ6IDAuOCxcbiAgICAgICAgaW52ZXJzZTogMC4yLFxuICAgICAgICBwZXJjZW50OiAnODAlJ1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLiR3YXRjaCgnb3BhY2l0eVJhbmdlLmFtb3VudCcsIGZ1bmN0aW9uKG52LCBvdikge1xuICAgICAgICBpZiAobnYgPT09IG92KSB7cmV0dXJuO31cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIG90aGVyIHZhbHVlc1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLmludmVyc2UgPSAoMSAtIG52KS50b0ZpeGVkKDIpO1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLnBlcmNlbnQgPSBNYXRoLnJvdW5kKG52ICogMTAwKSArICclJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzZXQgdGhlIGFjdGl2ZSBpdGVtIHdpdGggY29ycmVjdCBwYXRoc1xuICAgICAgZnVuY3Rpb24gc2V0QWN0aXZlSXRlbShkYXRhKSB7XG4gICAgICAgIHZhciBpbWFnZVNyYyA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gZGF0YS5zb3VyY2UgOiBkYXRhLnJlbW90ZVNvdXJjZTtcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL3JlZmVyZW5jZS8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgaW1hZ2VTcmMucmVwbGFjZSgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoICsgJy5wbmcnLCAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSArICcucG5nJykgOiBpbWFnZVNyYztcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmIgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGltYWdlU3JjIDogaW1hZ2VTcmM7XG4gICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5jID0gKCFkYXRhLnJlbW90ZVNvdXJjZSkgPyAnc2NyZWVucy9jb21wYXJlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBpbWFnZVNyYy5yZXBsYWNlKCcucG5nJywgJ19kaWZmLnBuZycpIDogaW1hZ2VTcmM7XG4gICAgICB9XG5cbiAgICAgIC8vIENob29zZSB0aGUgdmlld2VyIGxheW91dFxuICAgICAgJHNjb3BlLm9wdGlvbk1vZGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSB0eXBlO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlc2V0IGN1cnJlbnQgSW5kZXhcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICRzY29wZS5wcm9qZWN0ID0gYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCk7XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IG51bGw7XG5cbiAgICAgICAgICBpZiAoJHNjb3BlLmFjdGl2ZUl0ZW0ucmVtb3RlU291cmNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICRzY29wZS5hY3RpdmVJdGVtLnJlbW90ZVNvdXJjZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAnc2NyZWVucy8nICsgJHNjb3BlLmFjdGl2ZUl0ZW0udHlwZSArICcvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArICRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IG11bHRpcGxlIGl0ZW1zXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdiYXRjaCcgJiYgYXJncy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW1zWyRzY29wZS5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IGFyZ3MuaXRlbXM7XG4gICAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG4gICAgICAgIHNldEFjdGl2ZUl0ZW0oJHNjb3BlLmFjdGl2ZUl0ZW0pO1xuICAgICAgfTtcblxuICAgICAgLy8gR28gZGlyZWN0bHkgdG8gYW4gaXRlbVxuICAgICAgJHNjb3BlLmdvVG9JbmRleCA9IGZ1bmN0aW9uKGlkeCkge1xuICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gaWR4KSB7cmV0dXJuO31cblxuICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9ICRzY29wZS52aWV3ZXIuaXRlbXNbaWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGlkeDtcbiAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICB9O1xuXG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBtc2dDZW50ZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgbWVzc2FnZSByZWxheSBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdNU0dDRU5URVI6RklSRScsIHsgbXNnOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIERFRkFVTFQsIHNob3dzIGdyZWVuIG1lc3NhZ2UsIHVzZWQgZm9yIHN1Y2Nlc3NcbiAqIC0gV2FybmluZzogXCJ3YXJuXCIgLSBzaG93cyBvcmFuZ2UgbWVzc2FnZSwgdXNlZCBmb3IgZXJyb3JzIG9yIHdhcm5pbmdzXG4gKiAtIEluZm86IFwiaW5mb1wiIC0gc2hvd3MgZGFyayBibHVlIG1lc3NhZ2UsIHVzZWQgZm9yIGdlbmVyYWwgdGhpbmdzXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gbXNnOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBkZWZhdWx0IGlzIGdsb2JlLCBjYW4gYmUgc2V0IHRvIEFOWSBpLXNwcml0ZXMgKHNwcml0ZXMubGVzcylcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbXNnQ2VudGVyJyxcblsgXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkY29tcGlsZVwiLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIG1zZ1RlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtc2dcIiBuZy1jbGljaz1cImFjdGlvbigpXCI+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1pY25cIj48aSBjbGFzcz1cIml3IGktSUNPTlwiPjwvaT48L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWNvbnRcIj5CT0RZPC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1hY3Rpb25cIj48aSBjbGFzcz1cImliIGktci1hcnJvd1wiPjwvaT48L2Rpdj4nK1xuICAgICAgICAnPC9kaXY+JztcblxuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSBcIlwiO1xuICAgICAgdmFyIGRlZmF1bHRJY29uID0gXCJpbmZvXCI7XG5cbiAgICAgIHNjb3BlLmJvZHkgPSBcIlwiO1xuICAgICAgc2NvcGUuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgc2NvcGUuaWNvbiA9IGRlZmF1bHRJY29uO1xuICAgICAgc2NvcGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFjdGlvbkVsID0gX2VsLmZpbmQoXCIjXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgc2NvcGUuY2FsbGJhY2soKTtcbiAgICAgICAgY2xlYXJFbCggYWN0aW9uRWwgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlICggZGF0YSApe1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLm1zZztcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pPyBkYXRhLmljb24gOiBkZWZhdWx0SWNvbjtcblxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBtc2dUZW1wbGF0ZS5yZXBsYWNlKFwiQk9EWVwiLCBuZXdCb2R5KS5yZXBsYWNlKFwiSUNPTlwiLCBuZXdJY24pO1xuICAgICAgICB2YXIgbmV3TWVzc2FnZSA9ICRjb21waWxlKHRlbXBsYXRlKShzY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIG5ld01lc3NhZ2VbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKCBuZXdNZXNzYWdlICk7XG5cbiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIG5ldyBlbCBmb3IgbGF0ZXJcbiAgICAgICAgdmFyIG1zZ0VsID0gX2VsLmZpbmQoXCIjXCIgKyBfaWQpO1xuICAgICAgICBjaGFuZ2VUeXBlKCBtc2dFbCwgZGF0YS50eXBlICk7XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgbXNnRWwuZmluZChcIi5tc2ctYWN0aW9uXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbXNnRWwuYWRkQ2xhc3MoJ2FkZCcpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsZWFyRWwoIG1zZ0VsICk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbCAoIGVsZW0gKSB7XG4gICAgICAgIGlmKCFlbGVtICYmIHByZXZpb3VzSWQpe1xuICAgICAgICAgIGVsZW0gPSBfZWwuZmluZChcIiNcIiArIHByZXZpb3VzSWQpO1xuICAgICAgICB9IGVsc2UgaWYoIWVsZW0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnYWRkJyk7XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHRoZSB0eXBlIGJ5IGEgY2xhc3NcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVR5cGUgKCBlbGVtLCB0eXBlICkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctaW5mbycpO1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctd2FybicpO1xuXG4gICAgICAgIGlmKHR5cGUpe1xuICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21zZy0nICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01TR0NFTlRFUjpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLm1zZyl7IHJldHVybjsgfVxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmKGRhdGEuZHVyKXtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIHNjb3BlLmNhbGxiYWNrID0gZGF0YS5jYWxsYmFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKCBkYXRhICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIHByZWxvYWRlclxuICogYSBkaXJlY3RpdmUgZm9yIHNob3dpbmcgYSBwcmVsb2FkZXIgYW5pbWF0aW9uIGR1cmluZyBhIHByb2Nlc3NpbmcgcGVyaW9kXG4gKlxuICogVVNFOlxuICogPHByZWxvYWRlcj48L3ByZWxvYWRlcj5cbiAqXG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1BSRUxPQURFUjpVUERBVEUnLCB7IG1zZzogJ09wZW5pbmcgQnJvd3NlciBTZXNzaW9uJywgcGVyY2VudDogMzcgfSk7XG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1BSRUxPQURFUjpPRkYnKTtcbiAqXG4gKi9cbnZhciBQID0gcmVxdWlyZSgnLi92ZW5kb3IvY29yZS9wcmVsb2FkZXInKTtcblxuTVVHLmRpcmVjdGl2ZSgncHJlbG9hZGVyJyxcblsnJHJvb3RTY29wZScsICckdGltZW91dCcsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkdGltZW91dCkge1xuICB2YXIgdG90YWxJbmNyZW1lbnQgPSAzMDtcblxuICBmdW5jdGlvbiBjYWxjdWxhdGVJbmNyZW1lbnRzKHByb2plY3QpIHtcbiAgICB2YXIgZGVsYXkgPSAwO1xuICAgIHZhciB2aWV3cG9ydHMgPSAwO1xuICAgIHZhciBzZWxlY3RvcnMgPSAwO1xuICAgIHZhciBpbmNyZW1lbnQgPSAxMjtcblxuICAgIC8vIGdldCBhbGwgY29udGFpbmVyIHNlbGVjdG9ycyB0b3RhbFxuICAgIGlmIChwcm9qZWN0LnNlbGVjdG9ycyAmJiBwcm9qZWN0LnNlbGVjdG9ycy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2plY3Quc2VsZWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwcm9qZWN0LnNlbGVjdG9yc1tpXSAmJiBwcm9qZWN0LnNlbGVjdG9yc1tpXS50eXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgICAgIHNlbGVjdG9ycyA9IHNlbGVjdG9ycyArIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIHZpZXdwb3J0c1xuICAgIGlmIChwcm9qZWN0LnZpZXdwb3J0cyAmJiBwcm9qZWN0LnZpZXdwb3J0cy5sZW5ndGggPiAwKSB7XG4gICAgICB2aWV3cG9ydHMgPSBwcm9qZWN0LnZpZXdwb3J0cy5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gc2VlIGlmIHRoZXJlIGlzIGEgZGVsYXlcbiAgICBpZiAocHJvamVjdC5tZXRhICYmIHByb2plY3QubWV0YS5kZWxheSkge1xuICAgICAgZGVsYXkgPSBwYXJzZUludChwcm9qZWN0Lm1ldGEuZGVsYXksIDEwKTtcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgYSByZWFzb25hYmxlIGluY3JlbWVudCBmb3IgdGhlIGFuaW1hdGlvblxuICAgIHRvdGFsSW5jcmVtZW50ID0gKGluY3JlbWVudCAqICh2aWV3cG9ydHMgKiBzZWxlY3RvcnMpKSArIDMwOyAvLyArIGRlbGF5XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBzY29wZToge30sXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicHJlbG9hZGVyXCI+PC9kaXY+JyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBCO1xuICAgICAgdmFyIGVsO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIHRpdGxlO1xuICAgICAgdmFyIHByZXZpb3VzVGl0bGU7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIGxvYWRpbmcgPSAnbG9hZGluZyc7XG4gICAgICB2YXIgaXNBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgLy8gSU5JVCFcbiAgICAgIC8vIGF2b2lkIHRoZSBuZy1jbG9hayB0aW1lbGluZVxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIEIgPSBuZXcgUC5Ccm93c2VyKCk7XG4gICAgICAgIEIuaW5pdCgpO1xuXG4gICAgICAgIC8vIHNldHVwIG9uZSBpbnN0YW5jZSBvZiB0aGUgY2FudmFzXG4gICAgICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlcicpO1xuICAgICAgICBlbC5hcHBlbmRDaGlsZChCLmluc3RhbmNlKTtcblxuICAgICAgICAvLyBkcmF3IGJyb3dzZXJcbiAgICAgICAgQi5kcmF3QnJvd3NlcigpO1xuICAgICAgfSwgMzApO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVQcmVsb2FkZXIoZSwgYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubXNnKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGlmIChhcmdzLnByb2plY3QpIHtcbiAgICAgICAgICBjYWxjdWxhdGVJbmNyZW1lbnRzKGFyZ3MucHJvamVjdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZG9udCBhbmltYXRlIG92ZXIgYSBwcmV2aW91cyBhbmltYXRpb25cbiAgICAgICAgaWYgKCFpc0FuaW1hdGluZykge1xuICAgICAgICAgIGlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgIH0sIHRvdGFsSW5jcmVtZW50ICogMTApO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGl0bGUgPSBhcmdzLm1zZztcblxuICAgICAgICB2YXIgdHlwZTtcblxuICAgICAgICBzd2l0Y2ggKHRpdGxlKSB7XG4gICAgICAgICAgLy8gY2FzZSAnU3RhcnRpbmcgY29tcGFyZSBjYXB0dXJlJzpcbiAgICAgICAgICAvLyAgIHR5cGUgPSAwO1xuICAgICAgICAgIC8vICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnT3BlbmluZyBCcm93c2VyIFNlc3Npb24nOlxuICAgICAgICAgICAgdHlwZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdDYXB0dXJpbmcgU2NyZWVucyc6XG4gICAgICAgICAgICB0eXBlID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgLy8gY2FzZSAnVXBkYXRlZCBQcm9qZWN0IEhpc3RvcnknOlxuICAgICAgICAgIC8vICAgdHlwZSA9IDI7XG4gICAgICAgICAgLy8gICBicmVhaztcbiAgICAgICAgICAvLyBjYXNlICdDb21wYXJpbmcgQ2FwdHVyZSBEYXRhJzpcbiAgICAgICAgICAvLyAgIHR5cGUgPSAyO1xuICAgICAgICAgIC8vICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGVjayB0aGF0IHRoZSB0aXRsZSBoYXMgY2hhbmdlZFxuICAgICAgICBpZiAodGl0bGUgIT09IHByZXZpb3VzVGl0bGUgJiYgQiAmJiBCLmFuaW1hdGUpIHtcblxuICAgICAgICAgIC8vIFN0YXJ0IGFuaW1hdGlvblxuICAgICAgICAgIEIuYW5pbWF0ZSh0eXBlLCB0b3RhbEluY3JlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwcmV2aW91c1RpdGxlID0gdGl0bGU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVzZXRQcmVsb2FkZXIoKSB7XG4gICAgICAgIEIucmVzZXRCcm93c2VyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vICRyb290U2NvcGUuJG9uKCdQUkVMT0FERVI6T04nLCBzaG93UHJlbG9hZGVyKTtcbiAgICAgICRyb290U2NvcGUuJG9uKCdQUkVMT0FERVI6VVBEQVRFJywgdXBkYXRlUHJlbG9hZGVyKTtcbiAgICAgICRyb290U2NvcGUuJG9uKCdQUkVMT0FERVI6T0ZGJywgcmVzZXRQcmVsb2FkZXIpO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIk1VRy5mYWN0b3J5KCd0aW1lQWdvJywgZnVuY3Rpb24gKCkge1xuICB2YXIgc2VydmljZSA9IHt9O1xuXG4gIHNlcnZpY2Uuc2V0dGluZ3MgPSB7XG4gICAgcmVmcmVzaE1pbGxpczogNjAwMDAsXG4gICAgYWxsb3dGdXR1cmU6IGZhbHNlLFxuICAgIHN0cmluZ3M6IHtcbiAgICAgIHByZWZpeEFnbzogbnVsbCxcbiAgICAgIHByZWZpeEZyb21Ob3c6IG51bGwsXG4gICAgICBzdWZmaXhBZ286ICdhZ28nLFxuICAgICAgc3VmZml4RnJvbU5vdzogJ2Zyb20gbm93JyxcbiAgICAgIHNlY29uZHM6ICdsZXNzIHRoYW4gYSBtaW51dGUnLFxuICAgICAgbWludXRlOiAnYWJvdXQgYSBtaW51dGUnLFxuICAgICAgbWludXRlczogJyVkIG1pbnV0ZXMnLFxuICAgICAgaG91cjogJ2Fib3V0IGFuIGhvdXInLFxuICAgICAgaG91cnM6ICclZCBob3VycycsXG4gICAgICBkYXk6ICdhIGRheScsXG4gICAgICBkYXlzOiAnJWQgZGF5cycsXG4gICAgICBtb250aDogJ2Fib3V0IGEgbW9udGgnLFxuICAgICAgbW9udGhzOiAnJWQgbW9udGhzJyxcbiAgICAgIHllYXI6ICdhYm91dCBhIHllYXInLFxuICAgICAgeWVhcnM6ICclZCB5ZWFycycsXG4gICAgICBudW1iZXJzOiBbXVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB0cmltRGlnaXRzICggbnVtICkge1xuICAgICAgdmFyIG0gPSBudW0udG9TdHJpbmcoKS5zbGljZSgwLDEzKTtcbiAgICAgIHJldHVybiAobS5sZW5ndGggPT0gMTMpPyBwYXJzZUludChtKSA6IG51bTtcbiAgfVxuXG4gIHNlcnZpY2UuaW5Xb3JkcyA9IGZ1bmN0aW9uIChkaXN0YW5jZU1pbGxpcykge1xuICAgIHZhciAkbCA9IHNlcnZpY2Uuc2V0dGluZ3Muc3RyaW5ncztcbiAgICB2YXIgcHJlZml4ID0gJGwucHJlZml4QWdvO1xuICAgIHZhciBzdWZmaXggPSAkbC5zdWZmaXhBZ287XG4gICAgaWYgKHNlcnZpY2Uuc2V0dGluZ3MuYWxsb3dGdXR1cmUpIHtcbiAgICAgIGlmIChkaXN0YW5jZU1pbGxpcyA8IDApIHtcbiAgICAgICAgcHJlZml4ID0gJGwucHJlZml4RnJvbU5vdztcbiAgICAgICAgc3VmZml4ID0gJGwuc3VmZml4RnJvbU5vdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2Vjb25kcyA9IE1hdGguYWJzKGRpc3RhbmNlTWlsbGlzKSAvIDEwMDA7XG4gICAgdmFyIG1pbnV0ZXMgPSBzZWNvbmRzIC8gNjA7XG4gICAgdmFyIGhvdXJzID0gbWludXRlcyAvIDYwO1xuICAgIHZhciBkYXlzID0gaG91cnMgLyAyNDtcbiAgICB2YXIgeWVhcnMgPSBkYXlzIC8gMzY1O1xuXG4gICAgZnVuY3Rpb24gc3Vic3RpdHV0ZShzdHJpbmdPckZ1bmN0aW9uLCBudW1iZXIpIHtcbiAgICAgIHZhciBzdHJpbmcgPSBhbmd1bGFyLmlzRnVuY3Rpb24oc3RyaW5nT3JGdW5jdGlvbikgP1xuICAgICAgc3RyaW5nT3JGdW5jdGlvbihudW1iZXIsIGRpc3RhbmNlTWlsbGlzKSA6IHN0cmluZ09yRnVuY3Rpb247XG4gICAgICB2YXIgdmFsdWUgPSAoJGwubnVtYmVycyAmJiAkbC5udW1iZXJzW251bWJlcl0pIHx8IG51bWJlcjtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvJWQvaSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHZhciB3b3JkcyA9IHNlY29uZHMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLnNlY29uZHMsIE1hdGgucm91bmQoc2Vjb25kcykpIHx8XG4gICAgICAgIHNlY29uZHMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZSwgMSkgfHxcbiAgICAgICAgbWludXRlcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubWludXRlcywgTWF0aC5yb3VuZChtaW51dGVzKSkgfHxcbiAgICAgICAgbWludXRlcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwuaG91ciwgMSkgfHxcbiAgICAgICAgaG91cnMgPCAyNCAmJiBzdWJzdGl0dXRlKCRsLmhvdXJzLCBNYXRoLnJvdW5kKGhvdXJzKSkgfHxcbiAgICAgICAgaG91cnMgPCA0MiAmJiBzdWJzdGl0dXRlKCRsLmRheSwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDMwICYmIHN1YnN0aXR1dGUoJGwuZGF5cywgTWF0aC5yb3VuZChkYXlzKSkgfHxcbiAgICAgICAgZGF5cyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubW9udGgsIDEpIHx8XG4gICAgICAgIGRheXMgPCAzNjUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aHMsIE1hdGgucm91bmQoZGF5cyAvIDMwKSkgfHxcbiAgICAgICAgeWVhcnMgPCAxLjUgJiYgc3Vic3RpdHV0ZSgkbC55ZWFyLCAxKSB8fFxuICAgICAgICBzdWJzdGl0dXRlKCRsLnllYXJzLCBNYXRoLnJvdW5kKHllYXJzKSk7XG5cbiAgICB2YXIgc2VwYXJhdG9yID0gJGwud29yZFNlcGFyYXRvciA9PT0gdW5kZWZpbmVkID8gJyAnIDogJGwud29yZFNlcGFyYXRvcjtcbiAgICByZXR1cm4gW3ByZWZpeCwgd29yZHMsIHN1ZmZpeF0uam9pbihzZXBhcmF0b3IpLnRyaW0oKTtcbiAgfTtcblxuICBzZXJ2aWNlLnBhcnNlID0gZnVuY3Rpb24gKGlzbzg2MDEpIHtcbiAgICBpZiAoYW5ndWxhci5pc051bWJlcihpc284NjAxKSkge1xuICAgICAgaXNvODYwMSA9IGlzbzg2MDEgKyBcIlwiO1xuICAgICAgLy8gZm9ybWF0IGZvciBjb3JyZWN0IGxlbmd0aFxuICAgICAgdmFyIG9yaWdpbmFsVGltZXN0YW1wID0gdHJpbURpZ2l0cyggaXNvODYwMSApO1xuICAgICAgcmV0dXJuIHBhcnNlSW50KG9yaWdpbmFsVGltZXN0YW1wLCAxMCk7XG4gICAgfVxuICAgIHZhciBzID0gKGlzbzg2MDEgfHwgJycpLnRyaW0oKTtcbiAgICBzID0gcy5yZXBsYWNlKC9cXC5cXGQrLywgJycpOyAvLyByZW1vdmUgbWlsbGlzZWNvbmRzXG4gICAgcyA9IHMucmVwbGFjZSgvLS8sICcvJykucmVwbGFjZSgvLS8sICcvJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvVC8sICcgJykucmVwbGFjZSgvWi8sICcgVVRDJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvKFtcXCtcXC1dXFxkXFxkKVxcOj8oXFxkXFxkKS8sICcgJDEkMicpOyAvLyAtMDQ6MDAgLT4gLTA0MDBcbiAgICByZXR1cm4gbmV3IERhdGUocyk7XG4gIH07XG5cbiAgcmV0dXJuIHNlcnZpY2U7XG59KTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgYXN5bmMgPSByZXF1aXJlKCdhc3luYycpO1xuXG5NVUcuZmFjdG9yeSgnQ29tcGFyZScsXG5bJyRxJywgJ0NvbmZpZycsXG5mdW5jdGlvbigkcSwgQ29uZmlnKSB7XG4gIC8vIENvbmZpZyB2YXJzXG4gIHZhciBmaWxlRGlyUHJlZml4ID0gX19kaXJuYW1lICsgJy8nO1xuICB2YXIgaW1hZ2VQcmVmaXggPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCc7XG4gIHZhciBzdGF0dXNUeXBlcyA9IFsncGFzc2VkJywgJ3dhcm5pbmcnLCAnZmFpbGVkJ107XG5cbiAgLy8gYXN5bmMgaGVscGVyXG4gIGZ1bmN0aW9uIHJlYWRBc3luYyhmaWxlLCBjYWxsYmFjaykge1xuICAgIGZzLnJlYWRGaWxlKGZpbGVEaXJQcmVmaXggKyBmaWxlLCAnYmFzZTY0JywgY2FsbGJhY2spO1xuICB9XG5cbiAgLy8gVE9ETzogbGV0IHRoZSBiYWNrZW5kIHByb2Nlc3MgaGFuZGxlIHRoaXMhXG4gIGZ1bmN0aW9uIGNvbXBhcmVTaW5nbGUoYSwgYikge1xuICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBvdXRwdXQgPSB7fTtcblxuICAgIC8vIEFwcGx5IE1haW4gQ29tcGFyZSBDb25maWdcbiAgICByZXNlbWJsZS5vdXRwdXRTZXR0aW5ncyhDb25maWcuQ29tcGFyZSk7XG5cbiAgICAvLyBPcGVuIGJvdGggZmlsZXMsIGJlZm9yZSB3ZSBhcmUgcmVhZHkgdG8gcHJvY2Vzc1xuICAgIGFzeW5jLm1hcChbYSwgYl0sIHJlYWRBc3luYywgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7XG4gICAgICB2YXIgYURhdGEgPSBpbWFnZVByZWZpeCArIHJlc3VsdHNbMF07XG4gICAgICB2YXIgYkRhdGEgPSBpbWFnZVByZWZpeCArIHJlc3VsdHNbMV07XG5cbiAgICAgIC8vIEhhbmRsZXMgZXJyb3JzXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgIH1cblxuICAgICAgLy8gUnVuIHRoZSBjb21wYXJlIGZ1bmN0aW9uLCByZXR1cm4gdGhlIGRpZmYgZGF0YVxuICAgICAgcmVzZW1ibGUoYURhdGEpXG4gICAgICAgIC5jb21wYXJlVG8oYkRhdGEpXG4gICAgICAgIC5pZ25vcmVDb2xvcnMoKVxuICAgICAgICAub25Db21wbGV0ZShmdW5jdGlvbihkaWZmRGF0YSkge1xuICAgICAgICAgIG91dHB1dC5yZXBvcnQgPSBkaWZmRGF0YTtcbiAgICAgICAgICBvdXRwdXQuc3JjID0gZGlmZkRhdGEuZ2V0SW1hZ2VEYXRhVXJsKCk7XG5cbiAgICAgICAgICBkZmQucmVzb2x2ZShvdXRwdXQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdHdvIGltYWdlcyBhbmQgcmV0dXJucyBhbGwgZGF0YSB3aXRoIGFuIGltYWdlIG9mIGNoYW5nZXNcbiAgICAgKi9cbiAgICBydW5TaW5nbGU6IGNvbXBhcmVTaW5nbGUsXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSB0eXBlIG9mIHBhc3Mvd2Fybi9mYWlsIHN0YXR1c1xuICAgICAqL1xuICAgIGdldFN0YXR1czogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIG1pc01hdGNoVmFsdWUgPSBwYXJzZUZsb2F0KGRhdGEubWlzTWF0Y2hQZXJjZW50YWdlKTtcblxuICAgICAgLy8gbG93ZXN0IHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPCAwLjEpIHtcblxuICAgICAgICAvLyBXYXJuIHRoYXQgZGltZW5zaW9ucyBhcmUgZGlmZmVyZW5jZVxuICAgICAgICBpZiAoZGF0YS5pc1NhbWVEaW1lbnNpb25zID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1sxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2FybmluZyB0b2xlcmFuY2VcbiAgICAgIGlmIChtaXNNYXRjaFZhbHVlID4gMC4xICYmIG1pc01hdGNoVmFsdWUgPCAyKSB7XG4gICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1sxXTtcbiAgICAgIH1cblxuICAgICAgLy8gZXJyb3IgdG9sZXJhbmNlIHJlYWNoZWRcbiAgICAgIHJldHVybiBzdGF0dXNUeXBlc1syXTtcbiAgICB9XG5cbiAgfTtcbn1dKTtcbiIsIk1VRy5mYWN0b3J5KCdub3dUaW1lJyxcblsnJHRpbWVvdXQnLFxuZnVuY3Rpb24oJHRpbWVvdXQpIHtcbiAgdmFyIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICB2YXIgdXBkYXRlVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgbm93VGltZSA9IERhdGUubm93KCk7XG4gICAgICB1cGRhdGVUaW1lKCk7XG4gICAgfSwgMTAwMCk7XG4gIH07XG5cbiAgdXBkYXRlVGltZSgpO1xuICByZXR1cm4ge1xuICAgIGdldFRpbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5vd1RpbWU7XG4gICAgfVxuICB9O1xufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xudmFyIEFXUyA9IHJlcXVpcmUoJy4vdmVuZG9yL2NvcmUvYXdzJyk7XG5cbk1VRy5mYWN0b3J5KCdQcm9qZWN0cycsXG5bJyRxJyxcbmZ1bmN0aW9uKCRxKSB7XG4gIC8vIENvbmZpZyB0aGUgbWFpbiBwYXRoc1xuICB2YXIgcHJvamVjdHNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy5qc29uJztcbiAgdmFyIHByb2plY3RGaWxlc1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLyc7XG5cbiAgLy8gQ3JlYXRlcyBhIFVVSUQgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGhcbiAgZnVuY3Rpb24gY3JlYXRlVVVJRChzKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKHR5cGVvZiBzID09ICdudW1iZXInICYmIHMgPT09IHBhcnNlSW50KHMsIDEwKSkge1xuICAgICAgcyA9IEFycmF5KHMgKyAxKS5qb2luKCd4Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMucmVwbGFjZSgveC9nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNjEpICsgNDg7XG4gICAgICBuID0gbiA+IDU3ID8gKG4gKyA3ID4gOTAgPyBuICsgMTMgOiBuICsgNykgOiBuO1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDcmVhdGVzIGEgSlNPTiBvYmplY3QgZm9yIGEgYmFzZWxpbmUgbmV3IHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0KHRvdGFsKSB7XG4gICAgdG90YWwgPSB0b3RhbCB8fCAwO1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgIHRpdGxlOiAnUHJvamVjdCAnICsgKHBhcnNlSW50KHRvdGFsLCAxMCkgKyAxKSxcbiAgICAgIHRpbWVzdGFtcDogKCtuZXcgRGF0ZSksXG4gICAgICB0b3RhbHM6IHtcbiAgICAgICAgc3VjY2VzczogbnVsbCxcbiAgICAgICAgd2FybmluZzogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHZpZXdzOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIG5lZWRlZCBiYXNlIGRhdGEgZm9yIHN0b3JpbmcgYW4gaW5kaXZpZHVhbCBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdEZpbGUob3B0aW9ucykge1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgYmF0Y2hIaXN0b3J5OiB7fSxcbiAgICAgIGN1cnJlbnRCYXRjaDogbnVsbCxcbiAgICAgIGN1cnJlbnRSZWZlcmVuY2U6IG51bGwsXG4gICAgICBpZDogb3B0aW9ucy5pZCxcbiAgICAgIHRpdGxlOiBvcHRpb25zLnRpdGxlLFxuICAgICAgdGltZXN0YW1wOiBvcHRpb25zLnRpbWVzdGFtcCxcbiAgICAgIHZpZXdwb3J0czogW10sXG4gICAgICBzZWxlY3RvcnM6IFtdLFxuICAgICAgY29va2llczogW10sXG4gICAgICBtZXRhOiB7XG4gICAgICAgIHVybDogbnVsbCxcbiAgICAgICAgcmVhZHlFdmVudDogbnVsbCxcbiAgICAgICAgZGVsYXk6IG51bGwsXG4gICAgICAgIG1pc01hdGNoVGhyZXNob2xkOiBudWxsXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIEdyYWJzIEpTT04gZmlsZSBhbmQgYXBwcm9wcmlhdGVseSBoYW5kbGVzIGVycm9yc1xuICBmdW5jdGlvbiBnZXRKc29uRmlsZShwYXRoLCB0eXBlKSB7XG4gICAgdmFyIGZpbGU7XG5cbiAgICB0cnkge1xuICAgICAgZmlsZSA9IGZzLnJlYWRGaWxlU3luYyhwYXRoLCAndXRmOCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGNvdWxkbid0IGZpbmQgZmlsZVxuICAgICAgaWYgKGUuY29kZSA9PT0gJ0VOT0VOVCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUgfHwge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBKU09OLnBhcnNlKGZpbGUpO1xuICB9XG5cbiAgLy8gcmVtb3ZlIGFsbCBmaWxlcyBpbiBkaXJlY3RvcnlcbiAgZnVuY3Rpb24gcmVtb3ZlQWxsSW5EaXJlY3RvcnkoZGlyUGF0aCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyhkaXJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7IHJldHVybjsgfVxuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmaWxlUGF0aCA9IHBhdGguam9pbihkaXJQYXRoLCBmaWxlc1tpXSk7XG5cbiAgICAgICAgaWYgKGZzLnN0YXRTeW5jKGZpbGVQYXRoKS5pc0ZpbGUoKSkge1xuICAgICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJtRGlyKGZpbGVQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9O1xuXG4gIC8vIHNldHMgdXAgYSBwcm9taXNlIGRyaXZlbiBmaWxlIHdyaXRlXG4gIGZ1bmN0aW9uIHByb21pc2VXcml0ZShmaWxlUGF0aCwgZGF0YSkge1xuICAgIHZhciBfcSA9ICRxLmRlZmVyKCk7XG5cbiAgICBmcy53cml0ZUZpbGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGRhdGEpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgX3EucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF9xLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfcS5wcm9taXNlO1xuICB9XG5cbiAgLy8gc2V0cyB1cCBhIHByb21pc2UgZHJpdmVuIGZpbGUgZGVsZXRlXG4gIGZ1bmN0aW9uIHByb21pc2VSZW1vdmUocGF0aCkge1xuICAgIHZhciBfeiA9ICRxLmRlZmVyKCk7XG5cbiAgICAvLyBmcy51bmxpbmtcbiAgICBmcy51bmxpbmsocGF0aCwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIF96LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBfei5yZXNvbHZlKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3oucHJvbWlzZTtcbiAgfVxuXG4gIHJldHVybiB7XG5cbiAgICBnZXQ6IGZ1bmN0aW9uKHBhdGgsIHR5cGUpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShfX2Rpcm5hbWUgKyBwYXRoLCB0eXBlKTtcbiAgICB9LFxuXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcbiAgICB9LFxuXG4gICAgZ2V0QnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICB9LFxuXG4gICAgZ2V0VHlwZUJ5SWQ6IGZ1bmN0aW9uKGlkLCB0eXBlKSB7XG4gICAgICB2YXIgYWRkaXRpb24gPSAodHlwZSkgPyAnXycgKyB0eXBlIDogJyc7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgYWRkaXRpb24gKyAnLmpzb24nLCBbXSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHZhbGlkYXRlcyB0aGUgcHJvamVjdCwgbWFrZXMgc3VyZSBhbGwgc2V0dGluZ3MgYXJlIHNldHVwIGFuZCB2YWxpZFxuICAgICAqL1xuICAgIHZhbGlkYXRlOiBmdW5jdGlvbihwcm9qZWN0KSB7XG4gICAgICB2YXIgY29va2llcyA9IHByb2plY3QuY29va2llcztcbiAgICAgIHZhciB2aWV3cG9ydHMgPSBwcm9qZWN0LnZpZXdwb3J0cztcbiAgICAgIHZhciBzZWxlY3RvcnMgPSBwcm9qZWN0LnNlbGVjdG9ycztcbiAgICAgIHZhciB0aXRsZSA9IHByb2plY3QudGl0bGU7XG4gICAgICB2YXIgdXJsID0gcHJvamVjdC5tZXRhLnVybDtcbiAgICAgIHZhciBib29sID0gdHJ1ZTtcblxuICAgICAgLy8gdmVyaWZ5IGFsbCBkZWZhdWx0cyBhcmUgc2V0dXBcbiAgICAgIGlmICghdmlld3BvcnRzIHx8ICFzZWxlY3RvcnMgfHwgIXRpdGxlIHx8ICF1cmwgfHwgdmlld3BvcnRzLmxlbmd0aCA8IDEgfHwgc2VsZWN0b3JzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIHZpZXdwb3J0cywgdmVyaWZ5IHRoZXkncmUgc2V0dXAgcmlnaHRcbiAgICAgIGlmICh2aWV3cG9ydHMpIHtcbiAgICAgICAgdmlld3BvcnRzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLndpZHRoIHx8ICFvYmouaGVpZ2h0IHx8ICFvYmoubmFtZSkge1xuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgc2VsZWN0b3JzLCB2ZXJpZnkgdGhleSdyZSBzZXR1cCByaWdodFxuICAgICAgaWYgKHNlbGVjdG9ycykge1xuICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoucXVlcnkgfHwgIW9iai50eXBlKSB7XG4gICAgICAgICAgICBib29sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSBjb29raWVzLCB2ZXJpZnkgdGhleSdyZSBzZXR1cCByaWdodFxuICAgICAgaWYgKGNvb2tpZXMpIHtcbiAgICAgICAgY29va2llcy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai5uYW1lIHx8ICFvYmoucGF0aCB8fCAhb2JqLnZhbHVlKSB7XG4gICAgICAgICAgICBib29sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZGVmYXVsdCB0byB0cnVlXG4gICAgICByZXR1cm4gYm9vbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlcyBhIG5ldyBwcm9qZWN0LCBhbmQgcmV0dXJucyB0aGUgZGF0YSBpbiBhIHByb21pc2VcbiAgICAgKi9cbiAgICBjcmVhdGVOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuICAgICAgdmFyIG5ld1Byb2plY3REYXRhID0gY3JlYXRlRHVtbXlQcm9qZWN0KGFsbFByb2plY3RzLmxlbmd0aCk7XG4gICAgICB2YXIgbmV3UHJvamVjdEZpbGUgPSBjcmVhdGVEdW1teVByb2plY3RGaWxlKG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgYWxsUHJvamVjdHMudW5zaGlmdChuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBuZXdQcm9qZWN0RGF0YS5pZCArICcuanNvbicsIEpTT04uc3RyaW5naWZ5KG5ld1Byb2plY3RGaWxlKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHNhdmUgYXMgYW4gaW5kaXZpZHVhbCBmaWxlXG4gICAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBuZXdQcm9qZWN0RGF0YS5pZCArICdfaGlzdG9yeS5qc29uJywgSlNPTi5zdHJpbmdpZnkoW10pLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IHVzZXIgdG8gdGhlIHNldHRpbmdzIHBhZ2VcbiAgICAgICAgICAgIGRmZC5yZXNvbHZlKG5ld1Byb2plY3REYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlIHRvIGZpbGUgYW5kIGxpc3RzLCByZXR1cm4gbGlzdCBkYXRhXG4gICAgc2F2ZTogZnVuY3Rpb24ocHJvamVjdERhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0RGF0YS5pZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGl0bGUgPSBwcm9qZWN0RGF0YS50aXRsZTtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9ICgrbmV3IERhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0RGF0YSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJldHVybiB0aGUgbGlzdGluZyBkYXRhLCBzbyB3ZSBjYW4gdXBkYXRlIHRoZSBzaWRlcGFuZWxcbiAgICAgICAgICBkZmQucmVzb2x2ZShwcm9qZWN0RGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gVE9ETzogc2hvdWxkIHJlbW92ZSBpbWFnZXMgdXBvbiBkZWxldGU/XG4gICAgLy8gUmVtb3ZlcyBhIHNpbmdsZSBwcm9qZWN0IGJ5IElEXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IGlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIHByb2plY3QgZmlsZVxuICAgICAgZnMudW5saW5rKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcHJvamVjdCBoaXN0b3J5IGZpbGVcbiAgICAgICAgZnMudW5saW5rKHByb2plY3RGaWxlc1BhdGggKyBpZCArICdfaGlzdG9yeS5qc29uJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJldHVyblxuICAgICAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmVzIGFsbCBzdG9yZWQgaGlzdG9yeSBmb3IgYSBwcm9qZWN0XG4gICAgICovXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbihwcm9qZWN0KSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBtYWluUHJvamVjdHMgPSBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9qZWN0IGRhdGEgdG8gcmVmbGVjdCBubyBoaXN0b3J5XG4gICAgICBwcm9qZWN0LmN1cnJlbnRCYXRjaCA9IG51bGw7XG4gICAgICBwcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgPSBudWxsO1xuICAgICAgcHJvamVjdC5iYXRjaEhpc3RvcnkgPSB7fTtcblxuICAgICAgLy8gdXBkYXRlIHRoZSBjdXJyZW50IHByb2plY3QgdG8gaGF2ZSBubyBiYXRjaEhpc3RvcnlcbiAgICAgIG1haW5Qcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gcHJvamVjdC5pZCkge1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy5zdWNjZXNzID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMud2FybmluZyA9IDA7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLmVycm9yID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMudmlld3MgPSAwO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gcmVtb3ZlIGFsbCBsb2NhbCBpbWFnZXNcbiAgICAgIHRoaXMuY2xlYW5JbWFnZUZpbGVzKHByb2plY3QpO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIEpTT04uc3RyaW5naWZ5KFtdKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgaWQgcHJvamVjdFxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGF0YSBvbiB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KG1haW5Qcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBwYXNzIGluIGEgcHJvamVjdElkLCB0aGVuIGl0IHdpbGwgcmVhZCB0aGUgcHJvamVjdCBhbmQgaXRzIGN1cnJlbnQgYmF0Y2ggb2YgZmlsZXMgdG8gdXBsb2FkXG4gICAgICogb25jZSBjb21wbGV0ZSwgaXQgd2lsbCBjbGVhbiBvdXQgYW55IGxvY2FsIHNjcmVlbnMgYW5kIHJlcGxhY2Ugd2l0aCBhd3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgc3luYzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIGlmICghaWQpIHtyZXR1cm47fVxuXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIHByb2plY3QgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgICAgdmFyIHByb2plY3RGaWxlcyA9IHRoaXMuZ2V0VHlwZUJ5SWQoaWQsICdoaXN0b3J5Jyk7XG4gICAgICB2YXIgcmVhZHlGaWxlcyA9IFtdO1xuXG4gICAgICAvLyBwdWxsIG91dCBmaWxlcyB0aGF0IGFyZSBhbHJlYWR5IGluc2lkZSBhd3MsIHByZXAgZm9yIHVwbG9hZFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qZWN0RmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRtcEZpbGUgPSBwcm9qZWN0RmlsZXNbaV07XG4gICAgICAgIGlmICh0bXBGaWxlLnNvdXJjZSAmJiB0bXBGaWxlLnNvdXJjZS5zZWFyY2goJ2FtYXpvbicpID09PSAtMSkge1xuICAgICAgICAgIHZhciBzcmMgPSB0bXBGaWxlLnNvdXJjZTtcbiAgICAgICAgICB2YXIgdHlwZSA9IHRtcEZpbGUudHlwZTtcbiAgICAgICAgICB2YXIgcGF0aCA9IF9fZGlybmFtZSArICcvc2NyZWVucy8nICsgdHlwZSArICcvJyArIHByb2plY3QuaWQgKyAnLycgKyBzcmM7XG4gICAgICAgICAgcmVhZHlGaWxlcy5wdXNoKHsga2V5OiB0eXBlICsgJy8nICsgc3JjLCBwYXRoOiBwYXRoIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHVwbG9hZCBmaWxlc1xuICAgICAgQVdTLmluaXQoKVxuICAgICAgICAudXBsb2FkKHJlYWR5RmlsZXMsIHByb2plY3QuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuXG4gICAgICAgICAgLy8gZG8gcG9zdC1wcm9jZXNzIGFjdGlvblxuICAgICAgICAgIF90aGlzLmNsZWFuQWZ0ZXJTeW5jKHByb2plY3QsIHJlcykudGhlbihkLnJlc29sdmUsIGQucmVqZWN0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNsZWFuIGxvY2FsIGltYWdlcywgdXBkYXRlIGhpc3Rvcnkgd2l0aCBhd3MgcmVzb3VyY2VzLCByZXR1cm5zIHRoZSB1cGRhdGVzXG4gICAgICovXG4gICAgY2xlYW5BZnRlclN5bmM6IGZ1bmN0aW9uIChwcm9qZWN0LCBuZXdSZWZzKSB7XG4gICAgICB2YXIgZGZkZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgaGlzdG9yeURhdGEgPSBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdC5pZCArICdfaGlzdG9yeS5qc29uJywgW10pO1xuICAgICAgdmFyIHVwZGF0ZWRSZW1vdGVGaWxlcyA9IFtdO1xuICAgICAgdmFyIHF1ZXVlUHJvbWlzZXMgPSBbXTtcbiAgICAgIHByb2plY3QudXBkYXRlZEF0ID0gKCtuZXcgRGF0ZSgpKTtcblxuICAgICAgLy8gbG9vcCB0aHJvdWdoIG5ldyBmaWxlc1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdSZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0bXBTcmMgPSBuZXdSZWZzW2ldO1xuICAgICAgICB2YXIgdG1wUmVmID0gdG1wU3JjLnNwbGl0KCcvJyk7XG4gICAgICAgIHZhciB0bXBUeXBlID0gdG1wUmVmW3RtcFJlZi5sZW5ndGggLSAyXTtcbiAgICAgICAgdmFyIHRtcEFsaWFzID0gdG1wUmVmW3RtcFJlZi5sZW5ndGggLSAxXTtcblxuICAgICAgICBoaXN0b3J5RGF0YS5tYXAoZnVuY3Rpb24oaXRlbSwgaWR4KSB7XG5cbiAgICAgICAgICAvLyB1cGRhdGUgaGlzdG9yeSByZWZcbiAgICAgICAgICBpZiAoaXRlbS5zb3VyY2UgPT09IHRtcEFsaWFzICYmIHRtcFR5cGUgPT09ICdjb21wYXJlJykge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgZGlmZiBhbHNvXG4gICAgICAgICAgICB2YXIgcmVtUmVmUGF0aCA9IF9fZGlybmFtZSArICcvc2NyZWVucy8nICsgdG1wVHlwZSArICcvJyArIHByb2plY3QuaWQgKyAnLycgKyB0bXBBbGlhcztcbiAgICAgICAgICAgIHZhciByZW1SZWYgPSBwcm9taXNlUmVtb3ZlKHJlbVJlZlBhdGgpO1xuICAgICAgICAgICAgdmFyIHJlbVJlZkRpZmYgPSBwcm9taXNlUmVtb3ZlKHJlbVJlZlBhdGgucmVwbGFjZSgnLicsICdfZGlmZi4nKSk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBoaXN0b3J5XG4gICAgICAgICAgICBkZWxldGUgaGlzdG9yeURhdGFbaWR4XS5zb3VyY2U7XG4gICAgICAgICAgICBoaXN0b3J5RGF0YVtpZHhdLnJlbW90ZVNvdXJjZSA9IG5ld1JlZnNbaV07XG5cbiAgICAgICAgICAgIC8vIGFkZCB0byBwcm9taXNlIGxpc3RcbiAgICAgICAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChyZW1SZWYpO1xuICAgICAgICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHJlbVJlZkRpZmYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNhdmUgaGlzdG9yeSAmIHByb2plY3RcbiAgICAgIHZhciBwcm9qZWN0RmlsZSA9IF9fZGlybmFtZSArICcvcHJvamVjdHMvJyArIHByb2plY3QuaWQgKyAnLmpzb24nO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5RmlsZSA9IHByb2plY3RGaWxlLnJlcGxhY2UoJy5qc29uJywgJ19oaXN0b3J5Lmpzb24nKTtcbiAgICAgIHZhciBwcm9qZWN0V3JpdGUgPSBwcm9taXNlV3JpdGUocHJvamVjdEZpbGUsIHByb2plY3QpO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5V3JpdGUgPSBwcm9taXNlV3JpdGUocHJvamVjdEhpc3RvcnlGaWxlLCBoaXN0b3J5RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnVuc2hpZnQocHJvamVjdFdyaXRlKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMudW5zaGlmdChwcm9qZWN0SGlzdG9yeVdyaXRlKTtcblxuICAgICAgLy8gYWRkIHByb2plY3QgZmlsZXMgdG8gdGhlIHVwbG9hZCByZWFkaW5lc3NcbiAgICAgIHVwZGF0ZWRSZW1vdGVGaWxlcy5wdXNoKHsga2V5OiBwcm9qZWN0LmlkLCBwYXRoOiBwcm9qZWN0RmlsZSB9KTtcbiAgICAgIHVwZGF0ZWRSZW1vdGVGaWxlcy5wdXNoKHsga2V5OiBwcm9qZWN0LmlkICsgJ19oaXN0b3J5JywgcGF0aDogcHJvamVjdEhpc3RvcnlGaWxlIH0pO1xuXG4gICAgICAvLyB1cGxvYWQgdXBkYXRlZCBoaXN0b3J5ICYgcHJvamVjdFxuICAgICAgdmFyIGF3c1VwbG9hZCA9IEFXUy5pbml0KCkudXBsb2FkKHVwZGF0ZWRSZW1vdGVGaWxlcywgcHJvamVjdC5pZCk7XG4gICAgICBxdWV1ZVByb21pc2VzLnVuc2hpZnQoYXdzVXBsb2FkKTtcblxuICAgICAgLy8gZG8gYWxsIHByb21pc2Ugb3BlcmF0aW9uc1xuICAgICAgJHEuYWxsKHF1ZXVlUHJvbWlzZXMpLnRoZW4oZGZkZC5yZXNvbHZlLCBkZmRkLnJlamVjdCk7XG5cbiAgICAgIHJldHVybiBkZmRkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNsZWFuIGxvY2FsIGltYWdlcywgdXBkYXRlIGhpc3Rvcnkgd2l0aCBhd3MgcmVzb3VyY2VzLCByZXR1cm5zIHRoZSB1cGRhdGVzXG4gICAgICovXG4gICAgY2xlYW5JbWFnZUZpbGVzOiBmdW5jdGlvbiAocHJvamVjdCkge1xuICAgICAgdmFyIGJhc2UgPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvQkFTRS8nICsgcHJvamVjdC5pZDtcbiAgICAgIHZhciBjb21wcyA9IGJhc2UucmVwbGFjZSgnQkFTRScsICdjb21wYXJlJyk7XG4gICAgICB2YXIgcmVmcyA9IGJhc2UucmVwbGFjZSgnQkFTRScsICdyZWZlcmVuY2UnKTtcblxuICAgICAgcmVtb3ZlQWxsSW5EaXJlY3RvcnkoY29tcHMpO1xuICAgICAgcmVtb3ZlQWxsSW5EaXJlY3RvcnkocmVmcyk7XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJNVUcuZmlsdGVyKCd0aW1lQWdvJyxcblsnbm93VGltZScsICd0aW1lQWdvJyxcbmZ1bmN0aW9uIChub3dUaW1lLCB0aW1lQWdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZnJvbVRpbWUgPSB0aW1lQWdvLnBhcnNlKHZhbHVlKTtcbiAgICB2YXIgZGlmZiA9IG5vd1RpbWUuZ2V0VGltZSgpIC0gZnJvbVRpbWU7XG4gICAgcmV0dXJuIHRpbWVBZ28uaW5Xb3JkcyhkaWZmKTtcbiAgfTtcbn1dKTtcbiIsInZhciBpcGMgPSByZXF1aXJlKCdpcGMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ01haW5DdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ0NvbmZpZycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgQ29uZmlnLCBQcm9qZWN0cykge1xuICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSAnJztcblxuICAkc2NvcGUuY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIFByb2plY3RzLmNyZWF0ZU5ldygpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgcmVzKTtcbiAgICAgICRzdGF0ZS5nbygncHJvamVjdHMuc2V0dGluZ3MnLCB7IGlkOiByZXMuaWQgfSk7XG4gICAgfSxcblxuICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgaXBjLm9uKCdOQVZJR0FURTpUTycsIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubG9jYXRpb24pIHtyZXR1cm47fVxuXG4gICAgY29uc29sZS5sb2coJ05BVklHQVRFOlRPJywgYXJncyk7XG4gICAgJHN0YXRlLmdvKGFyZ3MubG9jYXRpb24pO1xuICB9KTtcblxuICAvLyBVU0UgVEhJUyBpbnN0ZWFkIG9mICRzY29wZS4kYXBwbHkoKTsgSXQgd2lsbCBtYWtlIHRoZSAkZGlnZXN0IGVycm9ycyBub3QgaGFwcGVuLlxuICAkcm9vdFNjb3BlLlNhZmVBcHBseSA9IGZ1bmN0aW9uKHNjb3BlLCBmbikge1xuICAgIGlmIChzY29wZS4kJHBoYXNlIHx8IHNjb3BlLiRyb290LiQkcGhhc2UpIHtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjb3BlLiRhcHBseShmbik7XG4gICAgfVxuICB9O1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIEFXUyA9IHJlcXVpcmUoJy4vdmVuZG9yL2NvcmUvYXdzJyk7XG5cbk1VRy5jb250cm9sbGVyKCdQcmVmZXJlbmNlc0N0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUpIHtcbiAgJHNjb3BlLmF3c0NvbmZpZyA9IHtcbiAgICBidWNrZXQ6ICcnLFxuICAgIGFjY2Vzc0tleUlkOiAnJyxcbiAgICBzZWNyZXRBY2Nlc3NLZXk6ICcnXG4gIH07XG5cbiAgLy8gZ3JhYiBzZXR0aW5ncyByZWFsIHF1aWNrXG4gICRzY29wZS5hd3NDb25maWcgPSBBV1MuZ2V0Q29uZmlnKCk7XG5cbiAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBzYXZlIHRoZSBBV1MgY29uZmlnXG4gICAgQVdTLnNldENvbmZpZygkc2NvcGUuYXdzQ29uZmlnKTtcbiAgfTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuXG4gIC8vIEFsbG93IHRoZSBjaGlsZCB2aWV3cyB0byBiaW5kIHRvIHNhbWUgc2NvcGVcbiAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkc3RhdGVQYXJhbXMuaWQpO1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEhpc3RvcnlDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gJ0FsbCc7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICcnO1xuXG4gIC8vIGdyYWIgYWxsIHRoZSBoaXN0b3J5IGRhdGFcbiAgJHNjb3BlLmhpc3RvcnlJdGVtcyA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAkc2NvcGUuY2hhbmdlRmlsdGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXIgPSB0eXBlO1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICh0eXBlID09ICdBbGwnKSA/ICcnIDogdHlwZTtcbiAgfTtcblxuICAkc2NvcGUucHJldmlld0l0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ3ByZXZpZXcnLCBpdGVtOiBpdGVtLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbn1dKTtcbiIsInZhciBpcGMgPSByZXF1aXJlKCdpcGMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RSdW5uZXJDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgdmFyIGRlZmF1bHRGb3JtYXQgPSBbeyB0eXBlOiAnc3VjY2VzcycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ3dhcm5pbmcnLCBpdGVtczogW119LCB7IHR5cGU6ICdlcnJvcicsIGl0ZW1zOiBbXX1dO1xuXG4gICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICRzY29wZS5oYXNTZXR0aW5ncyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gZmFsc2U7XG4gICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG4gICRzY29wZS5ydW5uaW5nVHlwZSA9ICdyZWZlcmVuY2UnO1xuICAkc2NvcGUuYmF0Y2hJdGVtcyA9IGRlZmF1bHRGb3JtYXQ7XG4gICRzY29wZS5hY3RpdmVEYXRhID0ge307XG4gICRzY29wZS5jdXJyZW50QmF0Y2ggPSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoIHx8IDA7XG4gICRzY29wZS5wcm9ncmVzcyA9IHtcbiAgICBwZXJjZW50OiAwLFxuICAgIHRpdGxlOiAnU3RhcnRpbmcnXG4gIH07XG5cbiAgLy8gUHV0cyBkYXRhIGludG8gc29ydGVkIHNlY3Rpb25zXG4gIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaChhbGxEYXRhKSB7XG4gICAgaWYgKCFhbGxEYXRhIHx8IGFsbERhdGEubGVuZ3RoIDwgMSkge1xuICAgICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIHJlc2V0IGp1c3QgdGhlIHN0YXRzXG4gICAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5zdWNjZXNzID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS53YXJuaW5nID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5lcnJvciA9IDA7XG4gICAgdmFyIGZvcm1hdHRlZCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgICBmdW5jdGlvbiBwbGFjZUl0ZW0oaXRlbSkge1xuXG4gICAgICAvLyBLZWVwIHRoaW5ncyBvcmdhbml6ZXMgd2l0aCBwcmVzZXQgcHJpb3JpdHlcbiAgICAgIGlmIChpdGVtLnN0YXR1cykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICB0YXJnZXQgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZFt0YXJnZXRdLml0ZW1zLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICRzY29wZS5hY3RpdmVEYXRhW2Zvcm1hdHRlZFt0YXJnZXRdLnR5cGVdID0gJHNjb3BlLmFjdGl2ZURhdGFbZm9ybWF0dGVkW3RhcmdldF0udHlwZV0gKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsbERhdGEubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmJhdGNoID09PSAkc2NvcGUuY3VycmVudEJhdGNoKSB7XG4gICAgICAgIHBsYWNlSXRlbShvYmopO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IHRydWU7XG4gICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldHVwQ3VycmVudEJhdGNoKCkge1xuICAgIGlmICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoID09PSBudWxsKSB7cmV0dXJuO31cblxuICAgIC8vIGdyYWIgYWxsIHRoZSBydW5uZXIgdGVzdCBkYXRhXG4gICAgdmFyIGhpc3RvcnlEYXRhID0gUHJvamVjdHMuZ2V0VHlwZUJ5SWQoJHJvb3RTY29wZS5wcm9qZWN0LmlkLCAnaGlzdG9yeScpO1xuXG4gICAgLy8gU3RvcmUgdGhlIHByb2Nlc3NlZCBkYXRhIGludG8gdGhlIGJhdGNoIGRhdGFcbiAgICAkc2NvcGUuYmF0Y2hJdGVtcyA9IHByb2Nlc3NCYXRjaChoaXN0b3J5RGF0YSk7XG5cbiAgICAvLyBzZXR1cCB3aGljaCB2aWV3IHRvIHNob3cgYmFzZWQgb24gaGlzdG9yeVxuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSA+PSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoKSA/ICdyZWZlcmVuY2UnIDogJ2NvbXBhcmUnO1xuICB9XG5cbiAgLy8gdmFsaWRhdGlvbiBvZiBwcm9qZWN0XG4gIGZ1bmN0aW9uIHZhbGlkYXRlUHJvamVjdCgpIHtcbiAgICAvLyB2ZXJpZnkgaWYgaXRzIHZhbGlkXG4gICAgdmFyIGlzVmFsaWQgPSBQcm9qZWN0cy52YWxpZGF0ZSgkcm9vdFNjb3BlLnByb2plY3QpO1xuXG4gICAgLy8gYWxlcnQgb2YgaW52YWxpZGl0eVxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1BsZWFzZSBmaW5pc2ggY29uZmlndXJpbmcgc2V0dGluZ3MhJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcCcgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH1cblxuICAvLyBjaGVja3MgZm9yIGNoYW5nZXMgYW5kIHVwZGF0ZXMgVUkgYWNjb3VyZGluZ2x5XG4gIGZ1bmN0aW9uIGNoZWNrU3RhdGUoKSB7XG4gICAgJHNjb3BlLmhhc1NldHRpbmdzID0gdmFsaWRhdGVQcm9qZWN0KCk7XG4gICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSAhPT0gbnVsbCk7XG5cbiAgICBpZiAoJHNjb3BlLnJ1bm5pbmdUeXBlID09PSAncmVmZXJlbmNlJykge1xuICAgICAgJHNjb3BlLmhhc0NvbXBhcmUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLmhhc0NvbXBhcmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gbnVsbCAmJiAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoICE9PSAwKTtcbiAgICAgICRzY29wZS5oYXNDb21wYXJlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlIDw9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2gpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGdyYWIgdGhlIGxhdGVzdCBkYXRhIGZvciB0aGUgcHJvamVjdFxuICBmdW5jdGlvbiBncmFiTGF0ZXN0RGF0YSgpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3QgPSBQcm9qZWN0cy5nZXRCeUlkKCRyb290U2NvcGUucHJvamVjdC5pZCk7XG4gICAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2g7XG5cbiAgICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAgICRzY29wZS5hY3RpdmVEYXRhID0gKCRyb290U2NvcGUucHJvamVjdCAmJiAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5KSA/ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF0gOiBudWxsO1xuXG4gICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsICRyb290U2NvcGUucHJvamVjdCk7XG4gIH1cblxuICAvLyBzeW5jIGFsbCBwcm9qZWN0IGZpbGVzIGFuZCBzZXR0aW5ncyB0byBBV1NcbiAgdmFyIHN5bmNpbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBzeW5jUHJvamVjdCgpIHtcbiAgICBpZiAodHlwZW9mICRyb290U2NvcGUucHJvamVjdC5tZXRhLmF1dG9TeW5jQXdzICE9PSB1bmRlZmluZWQgJiYgJHJvb3RTY29wZS5wcm9qZWN0Lm1ldGEuYXV0b1N5bmNBd3MgPT09IHRydWUgJiYgIXN5bmNpbmcpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIFN0YXJ0aW5nJywgZHVyOiAzLCB0eXBlOiAnaW5mbycgfSk7XG4gICAgICBzeW5jaW5nID0gdHJ1ZTtcblxuICAgICAgUHJvamVjdHMuc3luYygkcm9vdFNjb3BlLnByb2plY3QuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBDb21wbGV0ZScsIGR1cjogMywgdHlwZTogJ3N1Y2Nlc3MnLCBpY29uOiAnY2hlY2snIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3luY05vdyBlcnInLCBlcnIpO1xuICAgICAgICAgIHN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBGYWlsZWQnLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wZScgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdyYWJMYXRlc3REYXRhKCk7XG4gIHNldHVwQ3VycmVudEJhdGNoKCk7XG4gIGNoZWNrU3RhdGUoKTtcblxuICAvLyBGaXJlIG9mZiB0aGUgdmlld2VyXG4gICRzY29wZS5wcmV2aWV3QmF0Y2ggPSBmdW5jdGlvbihpdGVtcykge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdiYXRjaCcsIGl0ZW1zOiBpdGVtcywgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG4gIC8vIEZpcmUgb2ZmIGEgbmV3IHRlc3QhIVxuICAkc2NvcGUubmV3Q29tcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWxpZCA9IHZhbGlkYXRlUHJvamVjdCgpO1xuXG4gICAgLy8gdmFsaWRhdGlvbiBwYXVzZVxuICAgIGlmICghdmFsaWQpIHtyZXR1cm47fVxuXG4gICAgJHNjb3BlLnJ1bm5pbmdUeXBlID0gJ2NvbXBhcmUnO1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gdHJ1ZTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkcm9vdFNjb3BlLiRlbWl0KCdQUkVMT0FERVI6T04nKTtcbiAgICB9LCAxMCk7XG5cbiAgICBpcGMuc2VuZCgnUlVOTkVSOkZJUkUnLCB7IHR5cGU6ICdjb21wYXJlJywgcHJvamVjdElkOiAkcm9vdFNjb3BlLnByb2plY3QuaWQgfSk7XG4gIH07XG5cbiAgLy8gc2V0dXAgbmV3IHJlZmVyZW5jZVxuICAkc2NvcGUubmV3UmVmZXJlbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbGlkID0gdmFsaWRhdGVQcm9qZWN0KCk7XG5cbiAgICAvLyB2YWxpZGF0aW9uIHBhdXNlXG4gICAgaWYgKCF2YWxpZCkge3JldHVybjt9XG5cbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IHRydWU7XG4gICAgJHNjb3BlLnJ1bm5pbmdUeXBlID0gJ3JlZmVyZW5jZSc7XG4gICAgJHNjb3BlLmhhc0NvbXBhcmUgPSBmYWxzZTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkcm9vdFNjb3BlLiRlbWl0KCdQUkVMT0FERVI6T04nKTtcbiAgICB9LCAxMCk7XG5cbiAgICBpcGMuc2VuZCgnUlVOTkVSOkZJUkUnLCB7IHR5cGU6ICdyZWZlcmVuY2UnLCBwcm9qZWN0SWQ6ICRyb290U2NvcGUucHJvamVjdC5pZCB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBydW5uZXJFdmVudHMoYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5tc2cgfHwgIWFyZ3MucGVyY2VudCkge3JldHVybjt9XG5cbiAgICAvLyBXcml0ZSB0aGUgcHJvZ3Jlc3MgdG8gVUlcbiAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IHBhcnNlSW50KGFyZ3MucGVyY2VudCwgMTApO1xuICAgICRzY29wZS5wcm9ncmVzcy50aXRsZSA9IChhcmdzLm1zZykgPyBhcmdzLm1zZyA6ICRzY29wZS5wcm9ncmVzcy50aXRsZTtcblxuICAgIHZhciBwcmVBcmdzID0gYXJncztcbiAgICBwcmVBcmdzLnByb2plY3QgPSAkcm9vdFNjb3BlLnByb2plY3Q7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnUFJFTE9BREVSOlVQREFURScsIHByZUFyZ3MpO1xuICB9XG5cbiAgLy8gc2lnbmFsIFVJIG9mIGNoYW5nZXNcbiAgZnVuY3Rpb24gcnVubmVyQ29tcGxldGUoKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBncmFiTGF0ZXN0RGF0YSgpO1xuICAgICAgc2V0dXBDdXJyZW50QmF0Y2goKTtcbiAgICAgIGNoZWNrU3RhdGUoKTtcbiAgICAgIHN5bmNQcm9qZWN0KCk7XG4gICAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIH0sIDMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVubmVyRmFpbGVkKHJlYXNvbikge1xuICAgIGNvbnNvbGUubG9nKCdSVU5ORVI6RkFJTEVEIHJlYXNvbicsIHJlYXNvbik7XG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGlwYy5vbignUlVOTkVSOlBST0dSRVNTJywgcnVubmVyRXZlbnRzKTtcbiAgaXBjLm9uKCdSVU5ORVI6Q09NUExFVEUnLCBydW5uZXJDb21wbGV0ZSk7XG4gIGlwYy5vbignUlVOTkVSOkZBSUxFRCcsIHJ1bm5lckZhaWxlZCk7XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5jb250cm9sbGVyKCdQcm9qZWN0U2V0dGluZ3NDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICB2YXIgc2F2ZVRpbWVyO1xuXG4gICRzY29wZS5zeW5jaW5nID0gZmFsc2U7XG4gICRzY29wZS5zZWxlY3RvclR5cGVzID0gWydjb250YWluZXInLCAnaGlkZScsICdyZW1vdmUnXTtcbiAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc0F3c1NldHRpbmdzID0gZmFsc2U7XG4gICRzY29wZS5tYXN0ZXIgPSB7fTtcbiAgYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCwgJHNjb3BlLm1hc3Rlcik7XG5cbiAgZnVuY3Rpb24gYWRkTmV3VHlwZSh0eXBlLCBkYXRhKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnB1c2goZGF0YSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0F3c1NldHRpbmdzKCkge1xuICAgIC8vIHJlYWQgaWYgYXdzIHNldHRpbmdzIGFuZCBpZiB0aGV5IGFyZSBjb3JyZWN0XG4gICAgdmFyIGZpbGUgPSBQcm9qZWN0cy5nZXQoJy9jb25maWcvYXdzLmpzb24nLCB7fSk7XG5cbiAgICBpZiAoIWZpbGUgfHwgIWZpbGUuYnVja2V0IHx8ICFmaWxlLmFjY2Vzc0tleUlkIHx8ICFmaWxlLnNlY3JldEFjY2Vzc0tleSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gaW5pdGlhbCBhd3MgY3JlZCBjaGVja1xuICAkc2NvcGUuaGFzQXdzU2V0dGluZ3MgPSBjaGVja0F3c1NldHRpbmdzKCk7XG5cbiAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMsIHNvIHdlIGNhbiBzYXZlXG4gICRzY29wZS4kd2F0Y2goJ3Byb2plY3QnLCBmdW5jdGlvbihuViwgb1YpIHtcbiAgICBpZiAoblYgIT0gb1YpIHtcbiAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gdHJ1ZTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAgICRzY29wZS5zYXZlKCk7XG4gICAgfVxuICB9LCB0cnVlKTtcblxuICAvLyBUT0RPOiBzZXR1cCB2YWxpZGF0aW9uc1xuICAvLyBzYXZlIHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2F2ZVRpbWVyKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHNhdmVUaW1lcik7XG4gICAgfVxuXG4gICAgLy8gdGhyb3R0bGUgdGhlIHNhdmVzLCBzaW5jZSB3ZSBzYXZlIG9uIGFueSBjaGFuZ2VzXG4gICAgc2F2ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuICAgICAgLy8gU2F2ZSB0ZWggcHJvamVjdG9pZFxuICAgICAgUHJvamVjdHMuc2F2ZSgkcm9vdFNjb3BlLnByb2plY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2lkZWJhciB3aXRoIGNoYW5nZXNcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6VVBEQVRFJywgcmVzKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmV2ZXJ0IG1vZGVsXG4gICAgICAgICAgYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCwgJHNjb3BlLm1hc3Rlcik7XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICAvLyBzeW5jIHRoaXMgcHJvamVjdCB0byBBV1NcbiAgJHNjb3BlLnN5bmNOb3cgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc3luY2luZyA9IHRydWU7XG4gICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgU3RhcnRpbmcnLCBkdXI6IDUsIHR5cGU6ICdpbmZvJyB9KTtcblxuICAgIFByb2plY3RzLnN5bmMoJHJvb3RTY29wZS5wcm9qZWN0LmlkKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICRzY29wZS5zeW5jaW5nID0gZmFsc2U7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIENvbXBsZXRlJywgZHVyOiA1LCB0eXBlOiAnc3VjY2VzcycsIGljb246ICdjaGVjaycgfSk7XG4gICAgICB9XG5cbiAgICAgICwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICRzY29wZS5zeW5jaW5nID0gZmFsc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzeW5jTm93IGVycicsIGVycik7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIEZhaWxlZCcsIGR1cjogNSwgdHlwZTogJ2Vycm9yJywgaWNvbjogJ3N0b3BlJyB9KTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vIHJldmVydCB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5jYW5jZWxTYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2xlYXIgYWxsIHlvdXIgY2hhbmdlcz8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgLy8gcHV0IHJldmVydCBtb2RlbCBpbnRvIHRoZSBwcm9qZWN0IG1vZGVsXG4gICAgICBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3RlciwgJHJvb3RTY29wZS5wcm9qZWN0KTtcbiAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRlbGV0ZSB0aGUgcHJvamVjdCwgYW5kIHJlbW92ZSBmcm9tIHByb2plY3QgbGlzdHMsIHRoZW4gcmVkaXJlY3QgdG8gbWFpblxuICAkc2NvcGUuZGVsZXRlUHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdXJlID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2plY3Q/Jyk7XG4gICAgaWYgKHN1cmUpIHtcbiAgICAgIHZhciBwcm9qZWN0SUQgPSAkcm9vdFNjb3BlLnByb2plY3QuaWQ7XG5cbiAgICAgIFByb2plY3RzLnJlbW92ZShwcm9qZWN0SUQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpSRU1PVkUnLCB7IGlkOiBwcm9qZWN0SUQgfSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdtYWluJyk7XG4gICAgICAgICAgJHJvb3RTY29wZS5wcm9qZWN0ID0ge307XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnUHJvamVjdCBSZW1vdmVkIFN1Y2Nlc3NmdWxseScsIGR1cjogNSwgdHlwZTogJ3N1Y2Nlc3MnIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpSRU1PVkUnLCB7IGlkOiBwcm9qZWN0SUQgfSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdtYWluJyk7XG4gICAgICAgICAgJHJvb3RTY29wZS5wcm9qZWN0ID0ge307XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkcyBhIG5ldyB2aWV3cG9ydCBpdGVtXG4gICRzY29wZS5hZGRWaWV3cG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdWaWV3cG9ydCA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbCxcbiAgICAgIGhlaWdodDogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCd2aWV3cG9ydHMnLCBuZXdWaWV3cG9ydCk7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBzZWxlY3RvciBpdGVtXG4gICRzY29wZS5hZGRTZWxlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTZWxlY3RvciA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIHR5cGU6ICdjb250YWluZXInLFxuICAgICAgcXVlcnk6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnc2VsZWN0b3JzJywgbmV3U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8vIEFkZHMgYSBuZXcgY29va2llIGl0ZW1cbiAgJHNjb3BlLmFkZENvb2tpZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdDb29raWUgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBwYXRoOiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ2Nvb2tpZXMnLCBuZXdDb29raWUpO1xuICB9O1xuXG4gIC8vIGFjdGl2YXRlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5hY3RpdmF0ZVR5cGUgPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID0gKCRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSB0cnVlIHx8ICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSAndHJ1ZScpID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG4gIC8vIFJlbW92ZSBhIGNvb2tpZS92aWV3L3NlbGVjdFxuICAkc2NvcGUuZGVsZXRlVHlwZUl0ZW0gPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5zcGxpY2UoaWQsIDEpO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG4gIC8vIFJlbW92ZXMgYWxsIGhpc3RvcnkgZGF0YVxuICAkc2NvcGUuY2xlYXJIaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY2xlYXJIaXN0b3J5KCRyb290U2NvcGUucHJvamVjdClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnQ2xlYXJlZCBBbGwgSGlzdG9yeSEnLCBkdXI6IDUsIHR5cGU6ICdzdWNjZXNzJywgaWNvbjogJ2hpc3RvcnknIH0pO1xuICAgICAgfVxuXG4gICAgICAsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnRXJyb3IgT2NjdXJyZWQhIFBsZWFzZSB0cnkgYWdhaW4uJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcCcgfSk7XG4gICAgICB9KTtcbiAgfTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1NpZGVQYW5lbEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gICRzY29wZS5wcm9qZWN0cyA9IFtdO1xuXG4gIC8vIGdyYWIgYWxsIHByb2plY3RzIGxpc3RcbiAgJHNjb3BlLnByb2plY3RzID0gUHJvamVjdHMuZ2V0QWxsKCk7XG5cbiAgLy8gYWRkIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6TkVXUFJPSkVDVCcsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMudW5zaGlmdChhcmdzKTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6VVBEQVRFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udGl0bGUgPSBhcmdzLnRpdGxlO1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50aW1lc3RhbXAgPSBhcmdzLnRpbWVzdGFtcDtcblxuICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdKSB7XG4gICAgICAgICAgLy8gb25seSB1cGRhdGUgdG90YWxzIGlmIHdlIGhhdmUgdGhlbVxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uc3VjY2Vzcykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLnN1Y2Nlc3MgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uc3VjY2VzcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLndhcm5pbmcpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRvdGFscy53YXJuaW5nID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLndhcm5pbmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5lcnJvcikge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLmVycm9yID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLmVycm9yO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0udmlld3MpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRvdGFscy52aWV3cyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS52aWV3cztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6UkVNT1ZFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAkc2NvcGUuZ29Ub1Byb2plY3QgPSBmdW5jdGlvbihpZCkge1xuICAgIC8vIFRPRE86IGZpeCB0aGlzXG4gICAgLy8gdmFyIHR5cGUgPSAnc2V0dGluZ3MnO1xuICAgIHZhciB0eXBlID0gJ3J1bm5lcic7XG5cbiAgICAvLyBUT0RPOiBzZXR1cCB0byBmaWd1cmUgb3V0IGlmIHdlIG5lZWQgdG8gZ28gdG8gc2V0dGluZ3MsIG90aGVyd2lzZSBnbyB0byBydW5uZXJcbiAgICAkc3RhdGUuZ28oJ3Byb2plY3RzLicgKyB0eXBlLCB7IGlkOiBpZCB9KTtcbiAgICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSBpZDtcbiAgfVxuXG59XSk7XG4iLCIvKipcbiAqIENvbmZpZ1xuICovXG5NVUcuY29uc3RhbnQoJ0NvbmZpZycsIHtcbiAgRU5WOiAnU1RBR0UnLFxuICBTVEFHRToge1xuICB9LFxuICBQUk9EOiB7XG4gIH0sXG4gIENvbXBhcmU6IHtcbiAgICBlcnJvckNvbG9yOiB7XG4gICAgICByZWQ6IDI1NSxcbiAgICAgIGdyZWVuOiAwLFxuICAgICAgYmx1ZTogMjU1XG4gICAgfSxcbiAgICBlcnJvclR5cGU6ICdmbGF0JyxcbiAgICB0cmFuc3BhcmVuY3k6IDEsXG4gICAgbGFyZ2VJbWFnZVRocmVzaG9sZDogMFxuICB9XG59KTtcbiIsIk1VRy5jb25maWcoXG5bJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG5mdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgLy8gUm91dGVzXG4gIC8vIC9cbiAgLy8gL3Byb2plY3RzXG4gIC8vIC9wcm9qZWN0cy86aWQvcnVubmVyXG4gIC8vIC9wcm9qZWN0cy86aWQvaGlzdG9yeVxuICAvLyAvcHJvamVjdHMvOmlkL3NldHRpbmdzXG5cbiAgJHN0YXRlUHJvdmlkZXJcblxuICAvKipcbiAgICogQmFzZSBSb3V0ZVxuICAgKi9cbiAgLnN0YXRlKCdtYWluJywge1xuICAgIHVybDogJy8nLFxuICAgIHRlbXBsYXRlVXJsOiAnbWFpbi5odG1sJ1xuICB9KVxuICAuc3RhdGUoJ3ByZWZlcmVuY2VzJywge1xuICAgIHVybDogJy9wcmVmZXJlbmNlcycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcmVmZXJlbmNlcy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJlZmVyZW5jZXNDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBQcm9qZWN0IFJvdXRlc1xuICAgKi9cbiAgLnN0YXRlKCdwcm9qZWN0cycsIHtcbiAgICB1cmw6ICcvcHJvamVjdHMvOmlkJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0Q3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5zZXR0aW5ncycsIHtcbiAgICB1cmw6ICcvc2V0dGluZ3MnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuc2V0dGluZ3MuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RTZXR0aW5nc0N0cmwnXG4gIH0pXG4gIC5zdGF0ZSgncHJvamVjdHMucnVubmVyJywge1xuICAgIHVybDogJy9ydW5uZXInLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMucnVubmVyLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0UnVubmVyQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5oaXN0b3J5Jywge1xuICAgIHVybDogJy9oaXN0b3J5JyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLmhpc3RvcnkuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RIaXN0b3J5Q3RybCdcbiAgfSlcblxuICAvKipcbiAgICogU3RhdGljIFJvdXRlc1xuICAgKi9cblxuICAvLyAuc3RhdGUoJ21haW4uNDA0Jywge1xuICAvLyAgICAgdXJsOiBcIi80MDRcIixcbiAgLy8gICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy80MDQuaHRtbFwiLFxuICAvLyAgICAgaXNFeHRlcm5hbDogdHJ1ZVxuICAvLyB9KVxuXG4gIC8vIEVuZCBvZiB0aGUgd29ybGRcbiAgO1xuXG4gIC8vIHVybCByZS1yb3V0aW5nXG4gIC8vICR1cmxSb3V0ZXJQcm92aWRlclxuICAvLyAgIC53aGVuKCcvcHJvamVjdHMnLCAnLycpXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cy8nLCAnLycpO1xuXG4gIC8vIGlmIG5vbmUgb2YgdGhlIGFib3ZlIHN0YXRlcyBhcmUgbWF0Y2hlZCwgdXNlIHRoaXMgYXMgdGhlIGZhbGxiYWNrXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxufV0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJGh0dHApIHtcblxuICAvLyBoZWFkZXJzXG4gIHZhciAkY29tbW9uID0gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb247XG4gICRjb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCckc3RhdGVDaGFuZ2VFcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==