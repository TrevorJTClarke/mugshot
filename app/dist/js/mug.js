var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{}}),MUG.run(["$rootScope","$http",function(t,e){var n=e.defaults.headers.common;n["Content-Type"]="application/json"}]),MUG.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("main",{url:"/",templateUrl:"main.html",controller:"MainCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectSettingsCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html"}),e.otherwise("/")}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","$http",function(t,e,n,r,o){}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Config","$http",function(t,e,n,r,o){}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(t,e,n){var r=parseInt(n.fadeIn)||10;e.addClass("fade-in"),setTimeout(function(){e.css("opacity","1")},r)}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(t,e,n){return{scope:{},link:function(r,o,i,a){function s(t){var o=+new Date,i=t.msg,a=t.icon?t.icon:g,s=m.replace("BODY",i).replace("ICON",a),h=n(s)(r);h[0].id=o,p=o,d.append(h);var v=d.find("#"+o);c(v,t.type),t.callback&&v.find(".msg-action").addClass("show"),e(function(){v.addClass("add")},20),l=e(function(){u(v)},f)}function u(t){if(!t&&p)t=d.find("#"+p);else if(!t)return;t.removeClass("add"),t.addClass("remove"),e(function(){angular.element(t).remove()},300)}function c(t,e){t.removeClass("msg-info"),t.removeClass("msg-warn"),e&&t.addClass("msg-"+e)}var l,m='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',d=angular.element(o),f=5e3,p="",g="info";r.body="",r.callback=null,r.icon=g,r.action=function(){var t=d.find("#"+this.id);r.callback(),u(t)},t.$on("MSGCENTER:FIRE",function(t,e){e.msg&&(window.clearTimeout(l),u(),e.dur&&(f=1e3*e.dur),e.callback&&(r.callback=e.callback),s(e))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(t,e){return{restrict:"EA",link:function(n,r,o){var i;o.$observe("fromTime",function(e){i=t.parse(e)}),n.$watch(function(){return e.getTime()-i},function(e){angular.element(r).text(t.inWords(e))})}}}]),MUG.factory("nowTime",["$timeout",function(t){var e=Date.now(),n=function(){t(function(){e=Date.now(),n()},1e3)};return n(),{getTime:function(){return e}}}]),MUG.factory("timeAgo",function(){function t(t){var e=t.toString().slice(0,13);return 13==e.length?parseInt(e):t}var e={};return e.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},e.inWords=function(t){function n(e,n){var o=angular.isFunction(e)?e(n,t):e,i=r.numbers&&r.numbers[n]||n;return o.replace(/%d/i,i)}var r=e.settings.strings,o=r.prefixAgo,i=r.suffixAgo;e.settings.allowFuture&&0>t&&(o=r.prefixFromNow,i=r.suffixFromNow);var a=Math.abs(t)/1e3,s=a/60,u=s/60,c=u/24,l=c/365,m=45>a&&n(r.seconds,Math.round(a))||90>a&&n(r.minute,1)||45>s&&n(r.minutes,Math.round(s))||90>s&&n(r.hour,1)||24>u&&n(r.hours,Math.round(u))||42>u&&n(r.day,1)||30>c&&n(r.days,Math.round(c))||45>c&&n(r.month,1)||365>c&&n(r.months,Math.round(c/30))||1.5>l&&n(r.year,1)||n(r.years,Math.round(l)),d=void 0===r.wordSeparator?" ":r.wordSeparator;return[o,m,i].join(d).trim()},e.parse=function(e){if(angular.isNumber(e)){e+="";var n=t(e);return parseInt(n,10)}var r=(e||"").trim();return r=r.replace(/\.\d+/,""),r=r.replace(/-/,"/").replace(/-/,"/"),r=r.replace(/T/," ").replace(/Z/," UTC"),r=r.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(r)},e}),MUG.filter("timeAgo",["nowTime","timeAgo",function(t,e){return function(n){var r=e.parse(n),o=t.getTime()-r;return e.inWords(o)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsImluaXQuanMiLCJyb3V0ZXMuanMiLCJtYWluY3RybC5qcyIsInByb2plY3RzZXR0aW5nc2N0cmwuanMiLCJmYWRlaW4uanMiLCJtc2djZW50ZXIuanMiLCJ0aW1lYWdvLmpzIiwibm93dGltZS5qcyIsInRpbWUtYWdvLmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsIkVOViIsIlNUQUdFIiwiUFJPRCIsInJ1biIsIiRyb290U2NvcGUiLCIkaHR0cCIsIiRjb21tb24iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwiJHNjb3BlIiwiJHN0YXRlIiwiQ29uZmlnIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImNzcyIsIiR0aW1lb3V0IiwiJGNvbXBpbGUiLCJlbCIsImN0cmwiLCJzaG93TWVzc2FnZSIsImRhdGEiLCJfaWQiLCJEYXRlIiwibmV3Qm9keSIsIm1zZyIsIm5ld0ljbiIsImljb24iLCJkZWZhdWx0SWNvbiIsInRlbXBsYXRlIiwibXNnVGVtcGxhdGUiLCJyZXBsYWNlIiwibmV3TWVzc2FnZSIsImlkIiwicHJldmlvdXNJZCIsIl9lbCIsImFwcGVuZCIsIm1zZ0VsIiwiZmluZCIsImNoYW5nZVR5cGUiLCJ0eXBlIiwiY2FsbGJhY2siLCJ0aW1lciIsImNsZWFyRWwiLCJkdXJhdGlvbiIsInJlbW92ZUNsYXNzIiwiZWxlbWVudCIsInJlbW92ZSIsImJvZHkiLCJhY3Rpb24iLCJhY3Rpb25FbCIsInRoaXMiLCIkb24iLCJlIiwid2luZG93IiwiY2xlYXJUaW1lb3V0IiwiZHVyIiwidGltZUFnbyIsIm5vd1RpbWUiLCJmcm9tVGltZSIsIiRvYnNlcnZlIiwidmFsdWUiLCJwYXJzZSIsIiR3YXRjaCIsImdldFRpbWUiLCJ0ZXh0IiwiaW5Xb3JkcyIsImZhY3RvcnkiLCJub3ciLCJ1cGRhdGVUaW1lIiwidHJpbURpZ2l0cyIsIm51bSIsIm0iLCJ0b1N0cmluZyIsInNsaWNlIiwibGVuZ3RoIiwic2VydmljZSIsInNldHRpbmdzIiwicmVmcmVzaE1pbGxpcyIsImFsbG93RnV0dXJlIiwic3RyaW5ncyIsInByZWZpeEFnbyIsInByZWZpeEZyb21Ob3ciLCJzdWZmaXhBZ28iLCJzdWZmaXhGcm9tTm93Iiwic2Vjb25kcyIsIm1pbnV0ZSIsIm1pbnV0ZXMiLCJob3VyIiwiaG91cnMiLCJkYXkiLCJkYXlzIiwibW9udGgiLCJtb250aHMiLCJ5ZWFyIiwieWVhcnMiLCJudW1iZXJzIiwiZGlzdGFuY2VNaWxsaXMiLCJzdWJzdGl0dXRlIiwic3RyaW5nT3JGdW5jdGlvbiIsIm51bWJlciIsInN0cmluZyIsImlzRnVuY3Rpb24iLCIkbCIsInByZWZpeCIsInN1ZmZpeCIsIk1hdGgiLCJhYnMiLCJ3b3JkcyIsInJvdW5kIiwic2VwYXJhdG9yIiwidW5kZWZpbmVkIiwid29yZFNlcGFyYXRvciIsImpvaW4iLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJzIiwiZmlsdGVyIiwiZGlmZiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxXQUFBLFlBQUEsZ0JDR0FGLEtBQUFHLFNBQUEsVUFDQUMsSUFBQSxRQUNBQyxTQUVBQyxVQ1BBTixJQUFBTyxLQUFBLGFBQUEsUUFDQSxTQUFBQyxFQUFBQyxHQUVBLEdBQUFDLEdBQUFELEVBQUFFLFNBQUFDLFFBQUFDLE1BQ0FILEdBQUEsZ0JBQUEsc0JDSkFWLElBQUFjLFFBQ0EsaUJBQUEscUJBQ0EsU0FBQUMsRUFBQUMsR0FTQUQsRUFLQUUsTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsWUFDQUMsV0FBQSxhQU1BSCxNQUFBLFlBQ0FDLElBQUEsZ0JBQ0FDLFlBQUEsZ0JBQ0FDLFdBQUEsd0JBRUFILE1BQUEscUJBQ0FDLElBQUEsWUFDQUMsWUFBQSwyQkFFQUYsTUFBQSxtQkFDQUMsSUFBQSxVQUNBQyxZQUFBLHlCQUVBRixNQUFBLG9CQUNBQyxJQUFBLFdBQ0FDLFlBQUEsMEJBc0JBSCxFQUFBSyxVQUFBLFFDOURBckIsSUFBQW9CLFdBQUEsWUFDQSxhQUFBLFNBQUEsU0FBQSxTQUFBLFFBQ0EsU0FBQVosRUFBQWMsRUFBQUMsRUFBQUMsRUFBQWYsT0NGQVQsSUFBQW9CLFdBQUEsdUJBQ0EsYUFBQSxTQUFBLFNBQUEsU0FBQSxRQUNBLFNBQUFaLEVBQUFjLEVBQUFDLEVBQUFDLEVBQUFmLE9DRUFULElBQUF5QixVQUFBLFVBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxTQUFBRixFQUFBRyxTQUFBLEVBQ0FKLEdBQUFLLFNBQUEsV0FFQUMsV0FBQSxXQUNBTixFQUFBTyxJQUFBLFVBQUEsTUFDQUwsUUNNQS9CLElBQUF5QixVQUFBLGFBQ0EsYUFBQSxXQUFBLFdBQ0EsU0FBQWpCLEVBQUE2QixFQUFBQyxHQUNBLE9BQ0FWLFNBQ0FELEtBQUEsU0FBQUMsRUFBQVcsRUFBQVQsRUFBQVUsR0FzQkEsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxJQUFBLEdBQUFDLE1BQ0FDLEVBQUFILEVBQUFJLElBQ0FDLEVBQUFMLEVBQUEsS0FBQUEsRUFBQU0sS0FBQUMsRUFFQUMsRUFBQUMsRUFBQUMsUUFBQSxPQUFBUCxHQUFBTyxRQUFBLE9BQUFMLEdBQ0FNLEVBQUFmLEVBQUFZLEdBQUF0QixFQUdBeUIsR0FBQSxHQUFBQyxHQUFBWCxFQUNBWSxFQUFBWixFQUdBYSxFQUFBQyxPQUFBSixFQUdBLElBQUFLLEdBQUFGLEVBQUFHLEtBQUEsSUFBQWhCLEVBQ0FpQixHQUFBRixFQUFBaEIsRUFBQW1CLE1BRUFuQixFQUFBb0IsVUFDQUosRUFBQUMsS0FBQSxlQUFBekIsU0FBQSxRQUlBRyxFQUFBLFdBQ0FxQixFQUFBeEIsU0FBQSxRQUNBLElBRUE2QixFQUFBMUIsRUFBQSxXQUNBMkIsRUFBQU4sSUFDQU8sR0FHQSxRQUFBRCxHQUFBbkMsR0FDQSxJQUFBQSxHQUFBMEIsRUFDQTFCLEVBQUEyQixFQUFBRyxLQUFBLElBQUFKLE9BQ0EsS0FBQTFCLEVBQUEsTUFFQUEsR0FBQXFDLFlBQUEsT0FDQXJDLEVBQUFLLFNBQUEsVUFDQUcsRUFBQSxXQUNBcEMsUUFBQWtFLFFBQUF0QyxHQUFBdUMsVUFDQSxLQUlBLFFBQUFSLEdBQUEvQixFQUFBZ0MsR0FDQWhDLEVBQUFxQyxZQUFBLFlBQ0FyQyxFQUFBcUMsWUFBQSxZQUVBTCxHQUNBaEMsRUFBQUssU0FBQSxPQUFBMkIsR0F4RUEsR0FPQUUsR0FQQVosRUFBQSw0TEFNQUssRUFBQXZELFFBQUFrRSxRQUFBNUIsR0FFQTBCLEVBQUEsSUFDQVYsRUFBQSxHQUNBTixFQUFBLE1BRUFyQixHQUFBeUMsS0FBQSxHQUNBekMsRUFBQWtDLFNBQUEsS0FDQWxDLEVBQUFvQixLQUFBQyxFQUNBckIsRUFBQTBDLE9BQUEsV0FDQSxHQUFBQyxHQUFBZixFQUFBRyxLQUFBLElBQUFhLEtBQUFsQixHQUNBMUIsR0FBQWtDLFdBQ0FFLEVBQUFPLElBMERBL0QsRUFBQWlFLElBQUEsaUJBQUEsU0FBQUMsRUFBQWhDLEdBQ0FBLEVBQUFJLE1BQ0E2QixPQUFBQyxhQUFBYixHQUNBQyxJQUVBdEIsRUFBQW1DLE1BQ0FaLEVBQUEsSUFBQXZCLEVBQUFtQyxLQUdBbkMsRUFBQW9CLFdBQ0FsQyxFQUFBa0MsU0FBQXBCLEVBQUFvQixVQUdBckIsRUFBQUMsV0NsSEExQyxJQUFBeUIsVUFBQSxXQUNBLGlCQUFBLGlCQUNBLFNBQUFxRCxFQUFBQyxHQUNBLE9BQ0FyRCxTQUFBLEtBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBa0QsRUFHQWxELEdBQUFtRCxTQUFBLFdBQUEsU0FBQUMsR0FDQUYsRUFBQUYsRUFBQUssTUFBQUQsS0FJQXRELEVBQUF3RCxPQUFBLFdBQ0EsTUFBQUwsR0FBQU0sVUFBQUwsR0FDQSxTQUFBRSxHQUNBakYsUUFBQWtFLFFBQUF0QyxHQUFBeUQsS0FBQVIsRUFBQVMsUUFBQUwsV0NqQkFsRixJQUFBd0YsUUFBQSxXQUNBLFdBQ0EsU0FBQW5ELEdBQ0EsR0FBQTBDLEdBQUFuQyxLQUFBNkMsTUFDQUMsRUFBQSxXQUNBckQsRUFBQSxXQUNBMEMsRUFBQW5DLEtBQUE2QyxNQUNBQyxLQUNBLEtBR0EsT0FEQUEsTUFFQUwsUUFBQSxXQUNBLE1BQUFOLFFEYkEvRSxJQUFBd0YsUUFBQSxVQUFBLFdBMEJBLFFBQUFHLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsV0FBQUMsTUFBQSxFQUFBLEdBQ0EsT0FBQSxLQUFBRixFQUFBRyxPQUFBaEUsU0FBQTZELEdBQUFELEVBM0JBLEdBQUFLLEtBcUZBLE9BbkZBQSxHQUFBQyxVQUNBQyxjQUFBLElBQ0FDLGFBQUEsRUFDQUMsU0FDQUMsVUFBQSxLQUNBQyxjQUFBLEtBQ0FDLFVBQUEsTUFDQUMsY0FBQSxXQUNBQyxRQUFBLHFCQUNBQyxPQUFBLGlCQUNBQyxRQUFBLGFBQ0FDLEtBQUEsZ0JBQ0FDLE1BQUEsV0FDQUMsSUFBQSxRQUNBQyxLQUFBLFVBQ0FDLE1BQUEsZ0JBQ0FDLE9BQUEsWUFDQUMsS0FBQSxlQUNBQyxNQUFBLFdBQ0FDLGFBU0FwQixFQUFBVixRQUFBLFNBQUErQixHQWlCQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUF6SCxRQUFBMEgsV0FBQUgsR0FDQUEsRUFBQUMsRUFBQUgsR0FBQUUsRUFDQXRDLEVBQUEwQyxFQUFBUCxTQUFBTyxFQUFBUCxRQUFBSSxJQUFBQSxDQUNBLE9BQUFDLEdBQUF0RSxRQUFBLE1BQUE4QixHQXBCQSxHQUFBMEMsR0FBQTNCLEVBQUFDLFNBQUFHLFFBQ0F3QixFQUFBRCxFQUFBdEIsVUFDQXdCLEVBQUFGLEVBQUFwQixTQUNBUCxHQUFBQyxTQUFBRSxhQUNBLEVBQUFrQixJQUNBTyxFQUFBRCxFQUFBckIsY0FDQXVCLEVBQUFGLEVBQUFuQixjQUlBLElBQUFDLEdBQUFxQixLQUFBQyxJQUFBVixHQUFBLElBQ0FWLEVBQUFGLEVBQUEsR0FDQUksRUFBQUYsRUFBQSxHQUNBSSxFQUFBRixFQUFBLEdBQ0FNLEVBQUFKLEVBQUEsSUFTQWlCLEVBQUEsR0FBQXZCLEdBQUFhLEVBQUFLLEVBQUFsQixRQUFBcUIsS0FBQUcsTUFBQXhCLEtBQ0EsR0FBQUEsR0FBQWEsRUFBQUssRUFBQWpCLE9BQUEsSUFDQSxHQUFBQyxHQUFBVyxFQUFBSyxFQUFBaEIsUUFBQW1CLEtBQUFHLE1BQUF0QixLQUNBLEdBQUFBLEdBQUFXLEVBQUFLLEVBQUFmLEtBQUEsSUFDQSxHQUFBQyxHQUFBUyxFQUFBSyxFQUFBZCxNQUFBaUIsS0FBQUcsTUFBQXBCLEtBQ0EsR0FBQUEsR0FBQVMsRUFBQUssRUFBQWIsSUFBQSxJQUNBLEdBQUFDLEdBQUFPLEVBQUFLLEVBQUFaLEtBQUFlLEtBQUFHLE1BQUFsQixLQUNBLEdBQUFBLEdBQUFPLEVBQUFLLEVBQUFYLE1BQUEsSUFDQSxJQUFBRCxHQUFBTyxFQUFBSyxFQUFBVixPQUFBYSxLQUFBRyxNQUFBbEIsRUFBQSxNQUNBLElBQUFJLEdBQUFHLEVBQUFLLEVBQUFULEtBQUEsSUFDQUksRUFBQUssRUFBQVIsTUFBQVcsS0FBQUcsTUFBQWQsSUFFQWUsRUFBQUMsU0FBQVIsRUFBQVMsY0FBQSxJQUFBVCxFQUFBUyxhQUNBLFFBQUFSLEVBQUFJLEVBQUFILEdBQUFRLEtBQUFILEdBQUFJLFFBR0F0QyxFQUFBZCxNQUFBLFNBQUFxRCxHQUNBLEdBQUF2SSxRQUFBd0ksU0FBQUQsR0FBQSxDQUNBQSxHQUFBLEVBRUEsSUFBQUUsR0FBQS9DLEVBQUE2QyxFQUNBLE9BQUF4RyxVQUFBMEcsRUFBQSxJQUVBLEdBQUFDLElBQUFILEdBQUEsSUFBQUQsTUFLQSxPQUpBSSxHQUFBQSxFQUFBdkYsUUFBQSxRQUFBLElBQ0F1RixFQUFBQSxFQUFBdkYsUUFBQSxJQUFBLEtBQUFBLFFBQUEsSUFBQSxLQUNBdUYsRUFBQUEsRUFBQXZGLFFBQUEsSUFBQSxLQUFBQSxRQUFBLElBQUEsUUFDQXVGLEVBQUFBLEVBQUF2RixRQUFBLHdCQUFBLFNBQ0EsR0FBQVIsTUFBQStGLElBR0ExQyxJRXRGQWpHLElBQUE0SSxPQUFBLFdBQ0EsVUFBQSxVQUNBLFNBQUE3RCxFQUFBRCxHQUNBLE1BQUEsVUFBQUksR0FDQSxHQUFBRixHQUFBRixFQUFBSyxNQUFBRCxHQUNBMkQsRUFBQTlELEVBQUFNLFVBQUFMLENBQ0EsT0FBQUYsR0FBQVMsUUFBQXNEIiwiZmlsZSI6Im11Zy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNVUcgPSBhbmd1bGFyLm1vZHVsZSgnbXVnc2hvdCcsIFsndWkucm91dGVyJywgJ211Z3RlbXBsYXRlcyddKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudChcIkNvbmZpZ1wiLCB7XG4gIFwiRU5WXCI6IFwiU1RBR0VcIixcbiAgXCJTVEFHRVwiOiB7XG4gIH0sXG4gIFwiUFJPRFwiOiB7XG4gIH1cbn0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICRodHRwKSB7XG4gIC8vIGhlYWRlcnNcbiAgdmFyICRjb21tb24gPSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbjtcbiAgJGNvbW1vbltcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xuXG59XSk7XG4iLCJNVUcuY29uZmlnKFxuWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLFxuZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG4gIC8vIFJvdXRlc1xuICAvLyAvXG4gIC8vIC9wcm9qZWN0c1xuICAvLyAvcHJvamVjdHMvOmlkL3J1bm5lclxuICAvLyAvcHJvamVjdHMvOmlkL2hpc3RvcnlcbiAgLy8gL3Byb2plY3RzLzppZC9zZXR0aW5nc1xuXG4gICRzdGF0ZVByb3ZpZGVyXG5cbiAgLyoqXG4gICAqIEJhc2UgUm91dGVcbiAgICovXG4gIC5zdGF0ZSgnbWFpbicsIHtcbiAgICB1cmw6ICcvJyxcbiAgICB0ZW1wbGF0ZVVybDogJ21haW4uaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ01haW5DdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBQcm9qZWN0IFJvdXRlc1xuICAgKi9cbiAgLnN0YXRlKCdwcm9qZWN0cycsIHtcbiAgICB1cmw6ICcvcHJvamVjdHMvOmlkJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0U2V0dGluZ3NDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnJ1bm5lcicsIHtcbiAgICB1cmw6ICcvcnVubmVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLnJ1bm5lci5odG1sJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ01haW5DdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ0NvbmZpZycsICckaHR0cCcsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgQ29uZmlnLCAkaHR0cCkge1xuICAvLyAkc3RhdGUuZ28oJ3Byb2plY3RzJyk7XG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdFNldHRpbmdzQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdDb25maWcnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIENvbmZpZywgJGh0dHApIHtcbiAgLy8gJHN0YXRlLmdvKCdwcm9qZWN0cy5zZXR0aW5ncycpO1xuXG59XSk7XG4iLCIvKipcbiAqIGZhZGVJblxuICogQSBkaXJlY3RpdmUgZm9yIGFuaW1hdGluZyBpbiBlbGVtZW50c1xuICovXG5NVUcuZGlyZWN0aXZlKCdmYWRlSW4nLCBbIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoYXR0cnMuZmFkZUluKSB8fCAxMDtcbiAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jc3MoXCJvcGFjaXR5XCIsIFwiMVwiKTtcbiAgICAgICAgICAgIH0sIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiLyoqXG4gKiBtc2dDZW50ZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgbWVzc2FnZSByZWxheSBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdNU0dDRU5URVI6RklSRScsIHsgbXNnOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIERFRkFVTFQsIHNob3dzIGdyZWVuIG1lc3NhZ2UsIHVzZWQgZm9yIHN1Y2Nlc3NcbiAqIC0gV2FybmluZzogXCJ3YXJuXCIgLSBzaG93cyBvcmFuZ2UgbWVzc2FnZSwgdXNlZCBmb3IgZXJyb3JzIG9yIHdhcm5pbmdzXG4gKiAtIEluZm86IFwiaW5mb1wiIC0gc2hvd3MgZGFyayBibHVlIG1lc3NhZ2UsIHVzZWQgZm9yIGdlbmVyYWwgdGhpbmdzXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gbXNnOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBkZWZhdWx0IGlzIGdsb2JlLCBjYW4gYmUgc2V0IHRvIEFOWSBpLXNwcml0ZXMgKHNwcml0ZXMubGVzcylcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbXNnQ2VudGVyJyxcblsgXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkY29tcGlsZVwiLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIG1zZ1RlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtc2dcIiBuZy1jbGljaz1cImFjdGlvbigpXCI+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1pY25cIj48aSBjbGFzcz1cIml3IGktSUNPTlwiPjwvaT48L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWNvbnRcIj5CT0RZPC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1hY3Rpb25cIj48aSBjbGFzcz1cImliIGktci1hcnJvd1wiPjwvaT48L2Rpdj4nK1xuICAgICAgICAnPC9kaXY+JztcblxuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSBcIlwiO1xuICAgICAgdmFyIGRlZmF1bHRJY29uID0gXCJpbmZvXCI7XG5cbiAgICAgIHNjb3BlLmJvZHkgPSBcIlwiO1xuICAgICAgc2NvcGUuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgc2NvcGUuaWNvbiA9IGRlZmF1bHRJY29uO1xuICAgICAgc2NvcGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFjdGlvbkVsID0gX2VsLmZpbmQoXCIjXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgc2NvcGUuY2FsbGJhY2soKTtcbiAgICAgICAgY2xlYXJFbCggYWN0aW9uRWwgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlICggZGF0YSApe1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLm1zZztcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pPyBkYXRhLmljb24gOiBkZWZhdWx0SWNvbjtcblxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBtc2dUZW1wbGF0ZS5yZXBsYWNlKFwiQk9EWVwiLCBuZXdCb2R5KS5yZXBsYWNlKFwiSUNPTlwiLCBuZXdJY24pO1xuICAgICAgICB2YXIgbmV3TWVzc2FnZSA9ICRjb21waWxlKHRlbXBsYXRlKShzY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIG5ld01lc3NhZ2VbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKCBuZXdNZXNzYWdlICk7XG5cbiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIG5ldyBlbCBmb3IgbGF0ZXJcbiAgICAgICAgdmFyIG1zZ0VsID0gX2VsLmZpbmQoXCIjXCIgKyBfaWQpO1xuICAgICAgICBjaGFuZ2VUeXBlKCBtc2dFbCwgZGF0YS50eXBlICk7XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgbXNnRWwuZmluZChcIi5tc2ctYWN0aW9uXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbXNnRWwuYWRkQ2xhc3MoJ2FkZCcpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsZWFyRWwoIG1zZ0VsICk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbCAoIGVsZW0gKSB7XG4gICAgICAgIGlmKCFlbGVtICYmIHByZXZpb3VzSWQpe1xuICAgICAgICAgIGVsZW0gPSBfZWwuZmluZChcIiNcIiArIHByZXZpb3VzSWQpO1xuICAgICAgICB9IGVsc2UgaWYoIWVsZW0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnYWRkJyk7XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHRoZSB0eXBlIGJ5IGEgY2xhc3NcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVR5cGUgKCBlbGVtLCB0eXBlICkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctaW5mbycpO1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctd2FybicpO1xuXG4gICAgICAgIGlmKHR5cGUpe1xuICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21zZy0nICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01TR0NFTlRFUjpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLm1zZyl7IHJldHVybjsgfVxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmKGRhdGEuZHVyKXtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIHNjb3BlLmNhbGxiYWNrID0gZGF0YS5jYWxsYmFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKCBkYXRhICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgndGltZUFnbycsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlcnZpY2UgPSB7fTtcblxuICBzZXJ2aWNlLnNldHRpbmdzID0ge1xuICAgIHJlZnJlc2hNaWxsaXM6IDYwMDAwLFxuICAgIGFsbG93RnV0dXJlOiBmYWxzZSxcbiAgICBzdHJpbmdzOiB7XG4gICAgICBwcmVmaXhBZ286IG51bGwsXG4gICAgICBwcmVmaXhGcm9tTm93OiBudWxsLFxuICAgICAgc3VmZml4QWdvOiAnYWdvJyxcbiAgICAgIHN1ZmZpeEZyb21Ob3c6ICdmcm9tIG5vdycsXG4gICAgICBzZWNvbmRzOiAnbGVzcyB0aGFuIGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZTogJ2Fib3V0IGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZXM6ICclZCBtaW51dGVzJyxcbiAgICAgIGhvdXI6ICdhYm91dCBhbiBob3VyJyxcbiAgICAgIGhvdXJzOiAnJWQgaG91cnMnLFxuICAgICAgZGF5OiAnYSBkYXknLFxuICAgICAgZGF5czogJyVkIGRheXMnLFxuICAgICAgbW9udGg6ICdhYm91dCBhIG1vbnRoJyxcbiAgICAgIG1vbnRoczogJyVkIG1vbnRocycsXG4gICAgICB5ZWFyOiAnYWJvdXQgYSB5ZWFyJyxcbiAgICAgIHllYXJzOiAnJWQgeWVhcnMnLFxuICAgICAgbnVtYmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdHJpbURpZ2l0cyAoIG51bSApIHtcbiAgICAgIHZhciBtID0gbnVtLnRvU3RyaW5nKCkuc2xpY2UoMCwxMyk7XG4gICAgICByZXR1cm4gKG0ubGVuZ3RoID09IDEzKT8gcGFyc2VJbnQobSkgOiBudW07XG4gIH1cblxuICBzZXJ2aWNlLmluV29yZHMgPSBmdW5jdGlvbiAoZGlzdGFuY2VNaWxsaXMpIHtcbiAgICB2YXIgJGwgPSBzZXJ2aWNlLnNldHRpbmdzLnN0cmluZ3M7XG4gICAgdmFyIHByZWZpeCA9ICRsLnByZWZpeEFnbztcbiAgICB2YXIgc3VmZml4ID0gJGwuc3VmZml4QWdvO1xuICAgIGlmIChzZXJ2aWNlLnNldHRpbmdzLmFsbG93RnV0dXJlKSB7XG4gICAgICBpZiAoZGlzdGFuY2VNaWxsaXMgPCAwKSB7XG4gICAgICAgIHByZWZpeCA9ICRsLnByZWZpeEZyb21Ob3c7XG4gICAgICAgIHN1ZmZpeCA9ICRsLnN1ZmZpeEZyb21Ob3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBNYXRoLmFicyhkaXN0YW5jZU1pbGxpcykgLyAxMDAwO1xuICAgIHZhciBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xuICAgIHZhciBob3VycyA9IG1pbnV0ZXMgLyA2MDtcbiAgICB2YXIgZGF5cyA9IGhvdXJzIC8gMjQ7XG4gICAgdmFyIHllYXJzID0gZGF5cyAvIDM2NTtcblxuICAgIGZ1bmN0aW9uIHN1YnN0aXR1dGUoc3RyaW5nT3JGdW5jdGlvbiwgbnVtYmVyKSB7XG4gICAgICB2YXIgc3RyaW5nID0gYW5ndWxhci5pc0Z1bmN0aW9uKHN0cmluZ09yRnVuY3Rpb24pID9cbiAgICAgIHN0cmluZ09yRnVuY3Rpb24obnVtYmVyLCBkaXN0YW5jZU1pbGxpcykgOiBzdHJpbmdPckZ1bmN0aW9uO1xuICAgICAgdmFyIHZhbHVlID0gKCRsLm51bWJlcnMgJiYgJGwubnVtYmVyc1tudW1iZXJdKSB8fCBudW1iZXI7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyVkL2ksIHZhbHVlKTtcbiAgICB9XG5cbiAgICB2YXIgd29yZHMgPSBzZWNvbmRzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5zZWNvbmRzLCBNYXRoLnJvdW5kKHNlY29uZHMpKSB8fFxuICAgICAgICBzZWNvbmRzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGUsIDEpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZXMsIE1hdGgucm91bmQobWludXRlcykpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLmhvdXIsIDEpIHx8XG4gICAgICAgIGhvdXJzIDwgMjQgJiYgc3Vic3RpdHV0ZSgkbC5ob3VycywgTWF0aC5yb3VuZChob3VycykpIHx8XG4gICAgICAgIGhvdXJzIDwgNDIgJiYgc3Vic3RpdHV0ZSgkbC5kYXksIDEpIHx8XG4gICAgICAgIGRheXMgPCAzMCAmJiBzdWJzdGl0dXRlKCRsLmRheXMsIE1hdGgucm91bmQoZGF5cykpIHx8XG4gICAgICAgIGRheXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRoLCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzY1ICYmIHN1YnN0aXR1dGUoJGwubW9udGhzLCBNYXRoLnJvdW5kKGRheXMgLyAzMCkpIHx8XG4gICAgICAgIHllYXJzIDwgMS41ICYmIHN1YnN0aXR1dGUoJGwueWVhciwgMSkgfHxcbiAgICAgICAgc3Vic3RpdHV0ZSgkbC55ZWFycywgTWF0aC5yb3VuZCh5ZWFycykpO1xuXG4gICAgdmFyIHNlcGFyYXRvciA9ICRsLndvcmRTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCA/ICcgJyA6ICRsLndvcmRTZXBhcmF0b3I7XG4gICAgcmV0dXJuIFtwcmVmaXgsIHdvcmRzLCBzdWZmaXhdLmpvaW4oc2VwYXJhdG9yKS50cmltKCk7XG4gIH07XG5cbiAgc2VydmljZS5wYXJzZSA9IGZ1bmN0aW9uIChpc284NjAxKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoaXNvODYwMSkpIHtcbiAgICAgIGlzbzg2MDEgPSBpc284NjAxICsgXCJcIjtcbiAgICAgIC8vIGZvcm1hdCBmb3IgY29ycmVjdCBsZW5ndGhcbiAgICAgIHZhciBvcmlnaW5hbFRpbWVzdGFtcCA9IHRyaW1EaWdpdHMoIGlzbzg2MDEgKTtcbiAgICAgIHJldHVybiBwYXJzZUludChvcmlnaW5hbFRpbWVzdGFtcCwgMTApO1xuICAgIH1cbiAgICB2YXIgcyA9IChpc284NjAxIHx8ICcnKS50cmltKCk7XG4gICAgcyA9IHMucmVwbGFjZSgvXFwuXFxkKy8sICcnKTsgLy8gcmVtb3ZlIG1pbGxpc2Vjb25kc1xuICAgIHMgPSBzLnJlcGxhY2UoLy0vLCAnLycpLnJlcGxhY2UoLy0vLCAnLycpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1QvLCAnICcpLnJlcGxhY2UoL1ovLCAnIFVUQycpO1xuICAgIHMgPSBzLnJlcGxhY2UoLyhbXFwrXFwtXVxcZFxcZClcXDo/KFxcZFxcZCkvLCAnICQxJDInKTsgLy8gLTA0OjAwIC0+IC0wNDAwXG4gICAgcmV0dXJuIG5ldyBEYXRlKHMpO1xuICB9O1xuXG4gIHJldHVybiBzZXJ2aWNlO1xufSk7XG4iLCJNVUcuZmFjdG9yeSgnbm93VGltZScsXG5bJyR0aW1lb3V0JyxcbmZ1bmN0aW9uICgkdGltZW91dCkge1xuICB2YXIgbm93VGltZSA9IERhdGUubm93KCk7XG4gIHZhciB1cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcbiAgdXBkYXRlVGltZSgpO1xuICByZXR1cm4ge1xuICAgIGdldFRpbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5vd1RpbWU7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZpbHRlcigndGltZUFnbycsXG5bJ25vd1RpbWUnLCAndGltZUFnbycsXG5mdW5jdGlvbiAobm93VGltZSwgdGltZUFnbykge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGZyb21UaW1lID0gdGltZUFnby5wYXJzZSh2YWx1ZSk7XG4gICAgdmFyIGRpZmYgPSBub3dUaW1lLmdldFRpbWUoKSAtIGZyb21UaW1lO1xuICAgIHJldHVybiB0aW1lQWdvLmluV29yZHMoZGlmZik7XG4gIH07XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=