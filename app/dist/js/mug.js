var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,i,a,c){function s(n){var o=+new Date,i=(n.title,n.icon?n.icon:null,e.$new(!0));i.alert={},i.alert.id=o,i.alert.icon=n.icon?n.icon:null,i.alert.type=n.type?n.type:"info",i.alert.title=n.title,i.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var a=r(p)(i);a[0].id=o,d=o,f.append(a),a.addClass(v),t(function(){a.addClass(g)},20),l=t(function(){u(a)},m)}function u(e){if(!e&&d)e=angular.element(document.getElementById(d));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(g),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(i),m=5e3,d="",v="alert-active",g="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(m=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope","Compare",function(e,t,r,n){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,o){function i(t){var r="screens/compare/body_tablet_projectIdRandum_0.png";n.runSingle(t,r).then(function(t){console.log("res",t),e.compareItem.b.src=r,e.compareItem.c=t,e.activeItem.analysis=t.report.analysisTime,e.activeItem.status=n.getStatus(t.report)},function(e){console.log("err",e)})}var a="modal-open",c="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={b:{},c:{}},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(r,n){n&&n.type&&(e.currentIndex=0,"preview"===n.type&&(e.activeItem=n.item,e.viewer=n.project||{},e.viewer.items=null),"batch"===n.type&&n.items.length>0&&(e.activeItem=n.items[e.currentIndex],e.viewer=n.project||{},e.viewer.items=n.items,i(e.activeItem.source)),t.addClass(a),setTimeout(function(){t.addClass(c)},30))}),e.close=function(){t.removeClass(c),setTimeout(function(){t.removeClass(a)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,i(e.activeItem.source)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,i(e.activeItem.source))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,a){function c(e){var o=+new Date,i=e.msg,a=e.icon?e.icon:v,c=p.replace("BODY",i).replace("ICON",a),g=r(c)(n);g[0].id=o,d=o,f.append(g);var h=f.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},m)}function s(e){if(!e&&d)e=f.find("#"+d);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),m=5e3,d="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(m=1e3*t.dur),t.callback&&(n.callback=t.callback),c(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var a=e.defer(),c={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&a.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){c.report=e,c.src=e.getImageDataUrl(),a.resolve(c)})}),a.promise}var o=__dirname+"/",i="data:image/png;base64,",a=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?a[1]:a[0]:t>.1&&2>t?a[1]:a[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",a=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(a+e+".json")},getTypeById:function(e,t){return o(a+e+"_"+t+".json",[])},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),c=r(o.length),s=n(c);return o.unshift(c),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(a+c.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void t.resolve(c)})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(a+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(a+t+".json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})}),r.promise}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var a=Math.abs(e)/1e3,c=a/60,s=c/60,u=s/24,l=u/365,p=45>a&&r(n.seconds,Math.round(a))||90>a&&r(n.minute,1)||45>c&&r(n.minutes,Math.round(c))||90>c&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,i].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]),MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var t=0;switch(e.status){case"warning":t=1;break;case"failed":t=2}n[t].items.unshift(e)}}if(!e||e.length<1)return t.hasReference=!1,[];var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),n}t.processing=!1,t.hasSettings=!0,t.hasReference=!0,t.activeFilter="All",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0},t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,t.changeFilter=function(e){t.activeFilter=e};var a=o.getTypeById(n.id,"history");t.batchItems=i(a),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.runNewTest=function(){t.processing=!0,r(function(){t.progress.percent=12},200),r(function(){t.progress.percent=56},700),r(function(){t.progress.percent=93},1800),r(function(){t.processing=!1},2e3)},e.$on("RUNNER:PROGRESS:UPDATE",function(e,r){r&&(t.progress.percent=parseInt(r.percent,10))})}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1},function(e){console.log("err",e)})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n]=r)})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJDb21wYXJlIiwidGVtcGxhdGVVcmwiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRyIiwiY29tcGFyZVNpbmdsZSIsImEiLCJiIiwicnVuU2luZ2xlIiwidGhlbiIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJjb21wYXJlSXRlbSIsInNyYyIsImMiLCJhY3RpdmVJdGVtIiwiYW5hbHlzaXMiLCJyZXBvcnQiLCJhbmFseXNpc1RpbWUiLCJzdGF0dXMiLCJnZXRTdGF0dXMiLCJlcnIiLCJtb2RhbEFjdGl2ZSIsIm1vZGFsVmlzaWJsZSIsInByb2plY3QiLCJjb3B5IiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4Iiwidmlld2VyIiwiaXRlbXMiLCJhbW91bnQiLCJpbnZlcnNlIiwicGVyY2VudCIsIiR3YXRjaCIsIm52Iiwib3YiLCJ0b0ZpeGVkIiwiTWF0aCIsInJvdW5kIiwib3B0aW9uTW9kZSIsImFyZ3MiLCJjbG9zZSIsIml0ZW0iLCJsZW5ndGgiLCJzb3VyY2UiLCJtb2RhbEFjdGlvbk5hdiIsIm5leHRJZHgiLCJ0b3RhbCIsImdvVG9JbmRleCIsImlkeCIsIm5ld0JvZHkiLCJtc2ciLCJuZXdJY24iLCJkZWZhdWx0SWNvbiIsIm1zZ1RlbXBsYXRlIiwibmV3TWVzc2FnZSIsIm1zZ0VsIiwiZmluZCIsImNoYW5nZVR5cGUiLCJib2R5IiwiYWN0aW9uRWwiLCJ0aW1lQWdvIiwibm93VGltZSIsImZyb21UaW1lIiwiJG9ic2VydmUiLCJ2YWx1ZSIsInBhcnNlIiwiZ2V0VGltZSIsInRleHQiLCJpbldvcmRzIiwiZnMiLCJyZXF1aXJlIiwiYXN5bmMiLCJmYWN0b3J5IiwiJHEiLCJDb25maWciLCJyZWFkQXN5bmMiLCJmaWxlIiwicmVhZEZpbGUiLCJmaWxlRGlyUHJlZml4IiwiZGZkIiwiZGVmZXIiLCJvdXRwdXQiLCJyZXNlbWJsZSIsIm91dHB1dFNldHRpbmdzIiwibWFwIiwicmVzdWx0cyIsImFEYXRhIiwiaW1hZ2VQcmVmaXgiLCJiRGF0YSIsInJlamVjdCIsImNvbXBhcmVUbyIsImlnbm9yZUNvbG9ycyIsIm9uQ29tcGxldGUiLCJkaWZmRGF0YSIsImdldEltYWdlRGF0YVVybCIsInJlc29sdmUiLCJwcm9taXNlIiwiX19kaXJuYW1lIiwic3RhdHVzVHlwZXMiLCJtaXNNYXRjaFZhbHVlIiwicGFyc2VGbG9hdCIsIm1pc01hdGNoUGVyY2VudGFnZSIsImlzU2FtZURpbWVuc2lvbnMiLCJub3ciLCJ1cGRhdGVUaW1lIiwiY3JlYXRlVVVJRCIsInMiLCJBcnJheSIsImpvaW4iLCJuIiwicmFuZG9tIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY3JlYXRlRHVtbXlQcm9qZWN0IiwicHJvamVjdElkIiwidGltZXN0YW1wIiwidG90YWxzIiwic3VjY2VzcyIsIndhcm5pbmciLCJlcnJvciIsInZpZXdzIiwiY3JlYXRlRHVtbXlQcm9qZWN0RmlsZSIsIm9wdGlvbnMiLCJ2aWV3cG9ydHMiLCJzZWxlY3RvcnMiLCJjb29raWVzIiwibWV0YSIsInVybCIsInJlYWR5RXZlbnQiLCJkZWxheSIsIm1pc01hdGNoVGhyZXNob2xkIiwiZ2V0SnNvbkZpbGUiLCJwYXRoIiwicmVhZEZpbGVTeW5jIiwiY29kZSIsIkpTT04iLCJwcm9qZWN0c1BhdGgiLCJwcm9qZWN0RmlsZXNQYXRoIiwiZ2V0QWxsIiwiZ2V0QnlJZCIsImdldFR5cGVCeUlkIiwiY3JlYXRlTmV3IiwiYWxsUHJvamVjdHMiLCJuZXdQcm9qZWN0RGF0YSIsIm5ld1Byb2plY3RGaWxlIiwidW5zaGlmdCIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsInNhdmUiLCJwcm9qZWN0RGF0YSIsIm9iaiIsInNwbGljZSIsInVubGluayIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiY29udHJvbGxlciIsIiRzdGF0ZSIsIlByb2plY3RzIiwiY3VycmVudFByb2plY3RJZCIsImNyZWF0ZU5ld1Byb2plY3QiLCIkYnJvYWRjYXN0IiwiZ28iLCIkc3RhdGVQYXJhbXMiLCJhY3RpdmVGaWx0ZXIiLCJhY3RpdmVGaWx0ZXJRdWVyeSIsImhpc3RvcnlJdGVtcyIsImNoYW5nZUZpbHRlciIsInByZXZpZXdJdGVtIiwiJGVtaXQiLCJwcm9jZXNzQmF0Y2giLCJhbGxEYXRhIiwicGxhY2VJdGVtIiwidGFyZ2V0IiwiZm9ybWF0dGVkIiwiaGFzUmVmZXJlbmNlIiwiYmF0Y2giLCJjdXJyZW50QmF0Y2giLCJwcm9jZXNzaW5nIiwiaGFzU2V0dGluZ3MiLCJiYXRjaEl0ZW1zIiwiYWN0aXZlRGF0YSIsInByb2dyZXNzIiwiYmF0Y2hIaXN0b3J5IiwiaGlzdG9yeURhdGEiLCJwcmV2aWV3QmF0Y2giLCJydW5OZXdUZXN0IiwiYWRkTmV3VHlwZSIsInB1c2giLCJzYXZlVGltZXIiLCJzZWxlY3RvclR5cGVzIiwiaGFzQ2hhbmdlcyIsIm1hc3RlciIsIm5WIiwib1YiLCJjYW5jZWxTYXZlIiwic3VyZSIsImNvbmZpcm0iLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElEIiwiYWRkVmlld3BvcnQiLCJuZXdWaWV3cG9ydCIsImFjdGl2ZSIsIm5hbWUiLCJ3aWR0aCIsImhlaWdodCIsImFkZFNlbGVjdG9yIiwibmV3U2VsZWN0b3IiLCJxdWVyeSIsImFkZENvb2tpZSIsIm5ld0Nvb2tpZSIsImFjdGl2YXRlVHlwZSIsImRlbGV0ZVR5cGVJdGVtIiwicHJvamVjdHMiLCJnb1RvUHJvamVjdCIsImNvbnN0YW50IiwiRU5WIiwiU1RBR0UiLCJQUk9EIiwiZXJyb3JDb2xvciIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImVycm9yVHlwZSIsInRyYW5zcGFyZW5jeSIsImxhcmdlSW1hZ2VUaHJlc2hvbGQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwib3RoZXJ3aXNlIiwicnVuIiwiJGh0dHAiLCIkY29tbW9uIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFdBQUEsWUFBQSxnQkNtQkFGLEtBQUFHLFVBQUEsU0FDQSxhQUFBLFdBQUEsV0FBQSxpQkFDQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLE9BQ0FDLFNBQUEsSUFDQUMsU0FBQSxFQUNBQyxTQUFBLG1DQUNBQyxTQUNBQyxLQUFBLFNBQUFELEVBQUFFLEVBQUFDLEVBQUFDLEdBU0EsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxJQUFBLEdBQUFDLE1BR0FDLEdBRkFILEVBQUFJLE1BQ0FKLEVBQUEsS0FBQUEsRUFBQUssS0FBQSxLQUNBbEIsRUFBQW1CLE1BQUEsR0FHQUgsR0FBQUksU0FDQUosRUFBQUksTUFBQUMsR0FBQVAsRUFDQUUsRUFBQUksTUFBQUYsS0FBQUwsRUFBQSxLQUFBQSxFQUFBSyxLQUFBLEtBQ0FGLEVBQUFJLE1BQUFFLEtBQUFULEVBQUEsS0FBQUEsRUFBQVMsS0FBQSxPQUNBTixFQUFBSSxNQUFBSCxNQUFBSixFQUFBSSxNQUNBRCxFQUFBSSxNQUFBRyxPQUFBVixFQUFBVyxTQUFB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IjoibXVnLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1VRyA9IGFuZ3VsYXIubW9kdWxlKCdtdWdzaG90JywgWyd1aS5yb3V0ZXInLCAnbXVndGVtcGxhdGVzJ10pO1xuIiwiLyoqXG4gKiBhbGVydFxuICogYSBkaXJlY3RpdmUgZm9yIGhhbmRsaW5nIGFsbCBhbGVydHMgYW5kIG5vdGljZXMgZm9yIGEgdXNlclxuICpcbiAqIFVTRTpcbiAqIDxhbGVydD48L2FsZXJ0PlxuICpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6IFwiSGV5IHRoZXJlLCBJbSBhIG1lc3NhZ2UhIVwiLCBkdXI6IDUsIHR5cGU6IFwiaW5mb1wiLCBpY29uOiBcImluZm9cIiwgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSB9KTtcbiAqXG4gKiBUWVBFUzpcbiAqIC0gaW5mbywgc3VjY2Vzcywgd2FybmluZywgZXJyb3JcbiAqXG4gKiBPUFRJT05TOlxuICogLSB0aXRsZTogdGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLCAoVE9ETzogY2FuIGJlIGh0bWwgb3Igc2ltcGxlIHRleHQpXG4gKiAtIGNhbGxiYWNrOiBhIGZ1bmN0aW9uIHRvIGZpcmUgb24gYWN0aW9uIHRha2VuIG9uIG1lc3NhZ2VcbiAqIC0gZHVyOiB0aGUgdGltZW91dCBvZiB0aGUgbWVzc2FnZSwgaW4gc2Vjb25kc1xuICogLSB0eXBlOiBzZWUgYWJvdmUgdHlwZXNcbiAqIC0gaWNvbjogbm8gZGVmYXVsdCwgc2VlIGh0dHBzOi8vb2N0aWNvbnMuZ2l0aHViLmNvbS8gZm9yIG9wdGlvbnNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnYWxlcnQnLFxuWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyR0ZW1wbGF0ZUNhY2hlJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiYWxlcnQtcGFyZW50XCI+PC9kaXY+JyxcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIGFsZXJ0VGVtcGxhdGUgPSAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FsZXJ0Lmh0bWwnKTtcbiAgICAgIHZhciBfZWwgPSBhbmd1bGFyLmVsZW1lbnQoZWwpO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBwcmV2aW91c0lkID0gJyc7XG4gICAgICB2YXIgYWxlcnRBY3RpdmUgPSAnYWxlcnQtYWN0aXZlJztcbiAgICAgIHZhciBhbGVydFZpc2libGUgPSAnYWxlcnQtdmlzaWJsZSc7XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgdmFyIF9pZCA9ICgrbmV3IERhdGUoKSk7XG4gICAgICAgIHZhciBuZXdCb2R5ID0gZGF0YS50aXRsZTtcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pID8gZGF0YS5pY29uIDogbnVsbDtcbiAgICAgICAgdmFyICR0bXBTY29wZSA9ICRyb290U2NvcGUuJG5ldyh0cnVlKTtcblxuICAgICAgICAvLyBzZXR1cCBzaW1wbGUgc2NvcGUgZm9yIG9ubHkgdGhpcyBhbGVydCBpdGVtXG4gICAgICAgICR0bXBTY29wZS5hbGVydCA9IHt9O1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuaWQgPSBfaWQ7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5pY29uID0gKGRhdGEuaWNvbikgPyBkYXRhLmljb24gOiBudWxsO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQudHlwZSA9IChkYXRhLnR5cGUpID8gZGF0YS50eXBlIDogJ2luZm8nO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQudGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuYWN0aW9uID0gKCFkYXRhLmNhbGxiYWNrKSA/IG51bGwgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYWN0aW9uRWwgPSB0aGlzLmlkO1xuICAgICAgICAgIGRhdGEuY2FsbGJhY2soKTtcbiAgICAgICAgICBjbGVhckVsKHRoaXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBhbGVydEVsID0gJGNvbXBpbGUoYWxlcnRUZW1wbGF0ZSkoJHRtcFNjb3BlKTtcblxuICAgICAgICAvLyBzZXQgYSB1bmlxdWUgaWRcbiAgICAgICAgYWxlcnRFbFswXS5pZCA9IF9pZDtcbiAgICAgICAgcHJldmlvdXNJZCA9IF9pZDtcblxuICAgICAgICAvLyB0aHJvdyBpbnRvIGRvbSwgdGhlbiBzaG93IGluIHZpZXcsIHN0YXJ0IHRpbWVyXG4gICAgICAgIF9lbC5hcHBlbmQoYWxlcnRFbCk7XG4gICAgICAgIGFsZXJ0RWwuYWRkQ2xhc3MoYWxlcnRBY3RpdmUpO1xuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYWxlcnRFbC5hZGRDbGFzcyhhbGVydFZpc2libGUpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjbGVhckVsKGFsZXJ0RWwpO1xuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRWwoZWxlbSkge1xuICAgICAgICBpZiAoIWVsZW0gJiYgcHJldmlvdXNJZCkge1xuICAgICAgICAgIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlvdXNJZCkpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlbGVtKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW0pIHtcbiAgICAgICAgICBlbGVtID0gYW5ndWxhci5lbGVtZW50KGVsZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcyhhbGVydFZpc2libGUpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRvbignQUxFUlQ6RklSRScsIGZ1bmN0aW9uKGUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLnRpdGxlKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBjbGVhckVsKCk7XG5cbiAgICAgICAgaWYgKGRhdGEuZHVyKSB7XG4gICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1ciAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TWVzc2FnZShkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogZmFkZUluXG4gKiBBIGRpcmVjdGl2ZSBmb3IgYW5pbWF0aW5nIGluIGVsZW1lbnRzXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ2ZhZGVJbicsIFsgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludChhdHRycy5mYWRlSW4pIHx8IDEwO1xuICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZmFkZS1pbicpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmNzcyhcIm9wYWNpdHlcIiwgXCIxXCIpO1xuICAgICAgICAgICAgfSwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iLCIvKipcbiAqIE1vZGFsXG4gKiBCdWlsZHMgYSBtb2RhbCBmb3IgaW1hZ2Ugdmlld2luZyBhbmQgY29tcGFyaW5nXG4gKlxuICogQHVzYWdlXG4gKiA8bW9kYWw+PC9tb2RhbD5cbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbW9kYWwnLFxuWyckdGltZW91dCcsICckY29tcGlsZScsICckcm9vdFNjb3BlJywgJ0NvbXBhcmUnLFxuZnVuY3Rpb24oJHRpbWVvdXQsICRjb21waWxlLCAkcm9vdFNjb3BlLCBDb21wYXJlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgbW9kYWxBY3RpdmUgPSAnbW9kYWwtb3Blbic7XG4gICAgICB2YXIgbW9kYWxWaXNpYmxlID0gJ21vZGFsLXZpc2libGUnO1xuXG4gICAgICAvLyAkc2NvcGUuYWN0aXZlT3B0aW9uID0gJ292ZXJsYXknO1xuICAgICAgJHNjb3BlLnByb2plY3QgPSBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0KTtcbiAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSAnc2lkZXMnO1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHt9O1xuICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IHt9O1xuICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtID0ge1xuICAgICAgICBiOiB7fSxcbiAgICAgICAgYzoge31cbiAgICAgIH07XG4gICAgICAkc2NvcGUudmlld2VyID0ge1xuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge1xuICAgICAgICBhbW91bnQ6IDAuOCxcbiAgICAgICAgaW52ZXJzZTogMC4yLFxuICAgICAgICBwZXJjZW50OiAnODAlJ1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLiR3YXRjaCgnb3BhY2l0eVJhbmdlLmFtb3VudCcsIGZ1bmN0aW9uKG52LCBvdikge1xuICAgICAgICBpZiAobnYgPT09IG92KSB7cmV0dXJuO31cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIG90aGVyIHZhbHVlc1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLmludmVyc2UgPSAoMSAtIG52KS50b0ZpeGVkKDIpO1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLnBlcmNlbnQgPSBNYXRoLnJvdW5kKG52ICogMTAwKSArICclJztcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBjb21wYXJlU2luZ2xlKGEpIHtcbiAgICAgICAgLy9UT0RPOnJlbW92ZXRoaXNcbiAgICAgICAgdmFyIGIgPSAnc2NyZWVucy9jb21wYXJlL2JvZHlfdGFibGV0X3Byb2plY3RJZFJhbmR1bV8wLnBuZyc7XG5cbiAgICAgICAgLy8gdmFyIGIgPSAnc2NyZWVucy9jb21wYXJlL2JvZHlfcGhvbmVfcHJvamVjdElkUmFuZHVtXzAucG5nJztcblxuICAgICAgICBDb21wYXJlLnJ1blNpbmdsZShhLCBiKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpO1xuXG4gICAgICAgICAgLy8gdXBkYXRlIHZpZXcgd2l0aCBwcm9jZXNzZWQgaW1hZ2VcbiAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYi5zcmMgPSBiO1xuICAgICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5jID0gcmVzO1xuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBhY3RpdmVJdGVtIHdpdGggdGhlIHByb2Nlc3NlZCB2YWx1ZXNcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbS5hbmFseXNpcyA9IHJlcy5yZXBvcnQuYW5hbHlzaXNUaW1lO1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtLnN0YXR1cyA9IENvbXBhcmUuZ2V0U3RhdHVzKHJlcy5yZXBvcnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hvb3NlIHRoZSB2aWV3ZXIgbGF5b3V0XG4gICAgICAkc2NvcGUub3B0aW9uTW9kZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9IHR5cGU7XG4gICAgICB9O1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6Q0xPU0UnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgICAgICRzY29wZS5jbG9zZSgpO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNT0RBTDpPUEVOJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MudHlwZSkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgdG8gcmVzZXQgY3VycmVudCBJbmRleFxuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcblxuICAgICAgICAvLyBTaG93IGEgc2luZ2xlIGl0ZW1cbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgbXVsdGlwbGUgaXRlbXNcbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ2JhdGNoJyAmJiBhcmdzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IGFyZ3MuaXRlbXNbJHNjb3BlLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gYXJncy5pdGVtcztcblxuICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSFcbiAgICAgICAgICBjb21wYXJlU2luZ2xlKCRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIVxuICAgICAgICBjb21wYXJlU2luZ2xlKCRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBHbyBkaXJlY3RseSB0byBhbiBpdGVtXG4gICAgICAkc2NvcGUuZ29Ub0luZGV4ID0gZnVuY3Rpb24oaWR4KSB7XG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudEluZGV4ID09PSBpZHgpIHtyZXR1cm47fVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tpZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaWR4O1xuXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSFcbiAgICAgICAgY29tcGFyZVNpbmdsZSgkc2NvcGUuYWN0aXZlSXRlbS5zb3VyY2UpO1xuICAgICAgfTtcblxuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogbXNnQ2VudGVyXG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIG1lc3NhZ2UgcmVsYXkgZm9yIGEgdXNlclxuICpcbiAqIFVTRTpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnTVNHQ0VOVEVSOkZJUkUnLCB7IG1zZzogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBERUZBVUxULCBzaG93cyBncmVlbiBtZXNzYWdlLCB1c2VkIGZvciBzdWNjZXNzXG4gKiAtIFdhcm5pbmc6IFwid2FyblwiIC0gc2hvd3Mgb3JhbmdlIG1lc3NhZ2UsIHVzZWQgZm9yIGVycm9ycyBvciB3YXJuaW5nc1xuICogLSBJbmZvOiBcImluZm9cIiAtIHNob3dzIGRhcmsgYmx1ZSBtZXNzYWdlLCB1c2VkIGZvciBnZW5lcmFsIHRoaW5nc1xuICpcbiAqIE9QVElPTlM6XG4gKiAtIG1zZzogdGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLCAoVE9ETzogY2FuIGJlIGh0bWwgb3Igc2ltcGxlIHRleHQpXG4gKiAtIGNhbGxiYWNrOiBhIGZ1bmN0aW9uIHRvIGZpcmUgb24gYWN0aW9uIHRha2VuIG9uIG1lc3NhZ2VcbiAqIC0gZHVyOiB0aGUgdGltZW91dCBvZiB0aGUgbWVzc2FnZVxuICogLSB0eXBlOiBzZWUgYWJvdmUgdHlwZXNcbiAqIC0gaWNvbjogZGVmYXVsdCBpcyBnbG9iZSwgY2FuIGJlIHNldCB0byBBTlkgaS1zcHJpdGVzIChzcHJpdGVzLmxlc3MpXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ21zZ0NlbnRlcicsXG5bIFwiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJGNvbXBpbGVcIixcbmZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkdGltZW91dCwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBtc2dUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwibXNnXCIgbmctY2xpY2s9XCJhY3Rpb24oKVwiPicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctaWNuXCI+PGkgY2xhc3M9XCJpdyBpLUlDT05cIj48L2k+PC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1jb250XCI+Qk9EWTwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctYWN0aW9uXCI+PGkgY2xhc3M9XCJpYiBpLXItYXJyb3dcIj48L2k+PC9kaXY+JytcbiAgICAgICAgJzwvZGl2Pic7XG5cbiAgICAgIHZhciBfZWwgPSBhbmd1bGFyLmVsZW1lbnQoZWwpO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBwcmV2aW91c0lkID0gXCJcIjtcbiAgICAgIHZhciBkZWZhdWx0SWNvbiA9IFwiaW5mb1wiO1xuXG4gICAgICBzY29wZS5ib2R5ID0gXCJcIjtcbiAgICAgIHNjb3BlLmNhbGxiYWNrID0gbnVsbDtcbiAgICAgIHNjb3BlLmljb24gPSBkZWZhdWx0SWNvbjtcbiAgICAgIHNjb3BlLmFjdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBhY3Rpb25FbCA9IF9lbC5maW5kKFwiI1wiICsgdGhpcy5pZCk7XG4gICAgICAgIHNjb3BlLmNhbGxiYWNrKCk7XG4gICAgICAgIGNsZWFyRWwoIGFjdGlvbkVsICk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBzaG93TWVzc2FnZSAoIGRhdGEgKXtcbiAgICAgICAgdmFyIF9pZCA9ICgrbmV3IERhdGUoKSk7XG4gICAgICAgIHZhciBuZXdCb2R5ID0gZGF0YS5tc2c7XG4gICAgICAgIHZhciBuZXdJY24gPSAoZGF0YS5pY29uKT8gZGF0YS5pY29uIDogZGVmYXVsdEljb247XG5cbiAgICAgICAgdmFyIHRlbXBsYXRlID0gbXNnVGVtcGxhdGUucmVwbGFjZShcIkJPRFlcIiwgbmV3Qm9keSkucmVwbGFjZShcIklDT05cIiwgbmV3SWNuKTtcbiAgICAgICAgdmFyIG5ld01lc3NhZ2UgPSAkY29tcGlsZSh0ZW1wbGF0ZSkoc2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBuZXdNZXNzYWdlWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZCggbmV3TWVzc2FnZSApO1xuXG4gICAgICAgIC8vIHJlbWVtYmVyIHRoZSBuZXcgZWwgZm9yIGxhdGVyXG4gICAgICAgIHZhciBtc2dFbCA9IF9lbC5maW5kKFwiI1wiICsgX2lkKTtcbiAgICAgICAgY2hhbmdlVHlwZSggbXNnRWwsIGRhdGEudHlwZSApO1xuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIG1zZ0VsLmZpbmQoXCIubXNnLWFjdGlvblwiKS5hZGRDbGFzcyhcInNob3dcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG93XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1zZ0VsLmFkZENsYXNzKCdhZGQnKTtcbiAgICAgICAgfSwgMjApO1xuXG4gICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGVhckVsKCBtc2dFbCApO1xuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRWwgKCBlbGVtICkge1xuICAgICAgICBpZighZWxlbSAmJiBwcmV2aW91c0lkKXtcbiAgICAgICAgICBlbGVtID0gX2VsLmZpbmQoXCIjXCIgKyBwcmV2aW91c0lkKTtcbiAgICAgICAgfSBlbHNlIGlmKCFlbGVtKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2FkZCcpO1xuICAgICAgICBlbGVtLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbSkucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCB0aGUgdHlwZSBieSBhIGNsYXNzXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VUeXBlICggZWxlbSwgdHlwZSApIHtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLWluZm8nKTtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLXdhcm4nKTtcblxuICAgICAgICBpZih0eXBlKXtcbiAgICAgICAgICBlbGVtLmFkZENsYXNzKCdtc2ctJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNU0dDRU5URVI6RklSRScsIGZ1bmN0aW9uKGUsIGRhdGEpe1xuICAgICAgICBpZighZGF0YS5tc2cpeyByZXR1cm47IH1cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZihkYXRhLmR1cil7XG4gICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1ciAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBzY29wZS5jYWxsYmFjayA9IGRhdGEuY2FsbGJhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TWVzc2FnZSggZGF0YSApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ3RpbWVBZ28nLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZXJ2aWNlID0ge307XG5cbiAgc2VydmljZS5zZXR0aW5ncyA9IHtcbiAgICByZWZyZXNoTWlsbGlzOiA2MDAwMCxcbiAgICBhbGxvd0Z1dHVyZTogZmFsc2UsXG4gICAgc3RyaW5nczoge1xuICAgICAgcHJlZml4QWdvOiBudWxsLFxuICAgICAgcHJlZml4RnJvbU5vdzogbnVsbCxcbiAgICAgIHN1ZmZpeEFnbzogJ2FnbycsXG4gICAgICBzdWZmaXhGcm9tTm93OiAnZnJvbSBub3cnLFxuICAgICAgc2Vjb25kczogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsXG4gICAgICBtaW51dGU6ICdhYm91dCBhIG1pbnV0ZScsXG4gICAgICBtaW51dGVzOiAnJWQgbWludXRlcycsXG4gICAgICBob3VyOiAnYWJvdXQgYW4gaG91cicsXG4gICAgICBob3VyczogJyVkIGhvdXJzJyxcbiAgICAgIGRheTogJ2EgZGF5JyxcbiAgICAgIGRheXM6ICclZCBkYXlzJyxcbiAgICAgIG1vbnRoOiAnYWJvdXQgYSBtb250aCcsXG4gICAgICBtb250aHM6ICclZCBtb250aHMnLFxuICAgICAgeWVhcjogJ2Fib3V0IGEgeWVhcicsXG4gICAgICB5ZWFyczogJyVkIHllYXJzJyxcbiAgICAgIG51bWJlcnM6IFtdXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHRyaW1EaWdpdHMgKCBudW0gKSB7XG4gICAgICB2YXIgbSA9IG51bS50b1N0cmluZygpLnNsaWNlKDAsMTMpO1xuICAgICAgcmV0dXJuIChtLmxlbmd0aCA9PSAxMyk/IHBhcnNlSW50KG0pIDogbnVtO1xuICB9XG5cbiAgc2VydmljZS5pbldvcmRzID0gZnVuY3Rpb24gKGRpc3RhbmNlTWlsbGlzKSB7XG4gICAgdmFyICRsID0gc2VydmljZS5zZXR0aW5ncy5zdHJpbmdzO1xuICAgIHZhciBwcmVmaXggPSAkbC5wcmVmaXhBZ287XG4gICAgdmFyIHN1ZmZpeCA9ICRsLnN1ZmZpeEFnbztcbiAgICBpZiAoc2VydmljZS5zZXR0aW5ncy5hbGxvd0Z1dHVyZSkge1xuICAgICAgaWYgKGRpc3RhbmNlTWlsbGlzIDwgMCkge1xuICAgICAgICBwcmVmaXggPSAkbC5wcmVmaXhGcm9tTm93O1xuICAgICAgICBzdWZmaXggPSAkbC5zdWZmaXhGcm9tTm93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5hYnMoZGlzdGFuY2VNaWxsaXMpIC8gMTAwMDtcbiAgICB2YXIgbWludXRlcyA9IHNlY29uZHMgLyA2MDtcbiAgICB2YXIgaG91cnMgPSBtaW51dGVzIC8gNjA7XG4gICAgdmFyIGRheXMgPSBob3VycyAvIDI0O1xuICAgIHZhciB5ZWFycyA9IGRheXMgLyAzNjU7XG5cbiAgICBmdW5jdGlvbiBzdWJzdGl0dXRlKHN0cmluZ09yRnVuY3Rpb24sIG51bWJlcikge1xuICAgICAgdmFyIHN0cmluZyA9IGFuZ3VsYXIuaXNGdW5jdGlvbihzdHJpbmdPckZ1bmN0aW9uKSA/XG4gICAgICBzdHJpbmdPckZ1bmN0aW9uKG51bWJlciwgZGlzdGFuY2VNaWxsaXMpIDogc3RyaW5nT3JGdW5jdGlvbjtcbiAgICAgIHZhciB2YWx1ZSA9ICgkbC5udW1iZXJzICYmICRsLm51bWJlcnNbbnVtYmVyXSkgfHwgbnVtYmVyO1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8lZC9pLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgdmFyIHdvcmRzID0gc2Vjb25kcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwuc2Vjb25kcywgTWF0aC5yb3VuZChzZWNvbmRzKSkgfHxcbiAgICAgICAgc2Vjb25kcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwubWludXRlLCAxKSB8fFxuICAgICAgICBtaW51dGVzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGVzLCBNYXRoLnJvdW5kKG1pbnV0ZXMpKSB8fFxuICAgICAgICBtaW51dGVzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5ob3VyLCAxKSB8fFxuICAgICAgICBob3VycyA8IDI0ICYmIHN1YnN0aXR1dGUoJGwuaG91cnMsIE1hdGgucm91bmQoaG91cnMpKSB8fFxuICAgICAgICBob3VycyA8IDQyICYmIHN1YnN0aXR1dGUoJGwuZGF5LCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzAgJiYgc3Vic3RpdHV0ZSgkbC5kYXlzLCBNYXRoLnJvdW5kKGRheXMpKSB8fFxuICAgICAgICBkYXlzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aCwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDM2NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRocywgTWF0aC5yb3VuZChkYXlzIC8gMzApKSB8fFxuICAgICAgICB5ZWFycyA8IDEuNSAmJiBzdWJzdGl0dXRlKCRsLnllYXIsIDEpIHx8XG4gICAgICAgIHN1YnN0aXR1dGUoJGwueWVhcnMsIE1hdGgucm91bmQoeWVhcnMpKTtcblxuICAgIHZhciBzZXBhcmF0b3IgPSAkbC53b3JkU2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnICcgOiAkbC53b3JkU2VwYXJhdG9yO1xuICAgIHJldHVybiBbcHJlZml4LCB3b3Jkcywgc3VmZml4XS5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICB9O1xuXG4gIHNlcnZpY2UucGFyc2UgPSBmdW5jdGlvbiAoaXNvODYwMSkge1xuICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGlzbzg2MDEpKSB7XG4gICAgICBpc284NjAxID0gaXNvODYwMSArIFwiXCI7XG4gICAgICAvLyBmb3JtYXQgZm9yIGNvcnJlY3QgbGVuZ3RoXG4gICAgICB2YXIgb3JpZ2luYWxUaW1lc3RhbXAgPSB0cmltRGlnaXRzKCBpc284NjAxICk7XG4gICAgICByZXR1cm4gcGFyc2VJbnQob3JpZ2luYWxUaW1lc3RhbXAsIDEwKTtcbiAgICB9XG4gICAgdmFyIHMgPSAoaXNvODYwMSB8fCAnJykudHJpbSgpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1xcLlxcZCsvLCAnJyk7IC8vIHJlbW92ZSBtaWxsaXNlY29uZHNcbiAgICBzID0gcy5yZXBsYWNlKC8tLywgJy8nKS5yZXBsYWNlKC8tLywgJy8nKTtcbiAgICBzID0gcy5yZXBsYWNlKC9ULywgJyAnKS5yZXBsYWNlKC9aLywgJyBVVEMnKTtcbiAgICBzID0gcy5yZXBsYWNlKC8oW1xcK1xcLV1cXGRcXGQpXFw6PyhcXGRcXGQpLywgJyAkMSQyJyk7IC8vIC0wNDowMCAtPiAtMDQwMFxuICAgIHJldHVybiBuZXcgRGF0ZShzKTtcbiAgfTtcblxuICByZXR1cm4gc2VydmljZTtcbn0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBhc3luYyA9IHJlcXVpcmUoJ2FzeW5jJyk7XG5cbk1VRy5mYWN0b3J5KCdDb21wYXJlJyxcblsnJHEnLCAnQ29uZmlnJyxcbmZ1bmN0aW9uKCRxLCBDb25maWcpIHtcbiAgLy8gQ29uZmlnIHZhcnNcbiAgdmFyIGZpbGVEaXJQcmVmaXggPSBfX2Rpcm5hbWUgKyAnLyc7XG4gIHZhciBpbWFnZVByZWZpeCA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJztcbiAgdmFyIHN0YXR1c1R5cGVzID0gWydwYXNzZWQnLCAnd2FybmluZycsICdmYWlsZWQnXTtcblxuICAvLyBhc3luYyBoZWxwZXJcbiAgZnVuY3Rpb24gcmVhZEFzeW5jKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgZnMucmVhZEZpbGUoZmlsZURpclByZWZpeCArIGZpbGUsICdiYXNlNjQnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvLyBUT0RPOiBsZXQgdGhlIGJhY2tlbmQgcHJvY2VzcyBoYW5kbGUgdGhpcyFcbiAgZnVuY3Rpb24gY29tcGFyZVNpbmdsZShhLCBiKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIG91dHB1dCA9IHt9O1xuXG4gICAgLy8gQXBwbHkgTWFpbiBDb21wYXJlIENvbmZpZ1xuICAgIHJlc2VtYmxlLm91dHB1dFNldHRpbmdzKENvbmZpZy5Db21wYXJlKTtcblxuICAgIC8vIE9wZW4gYm90aCBmaWxlcywgYmVmb3JlIHdlIGFyZSByZWFkeSB0byBwcm9jZXNzXG4gICAgYXN5bmMubWFwKFthLCBiXSwgcmVhZEFzeW5jLCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHtcbiAgICAgIHZhciBhRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1swXTtcbiAgICAgIHZhciBiRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1sxXTtcblxuICAgICAgLy8gSGFuZGxlcyBlcnJvcnNcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgfVxuXG4gICAgICAvLyBSdW4gdGhlIGNvbXBhcmUgZnVuY3Rpb24sIHJldHVybiB0aGUgZGlmZiBkYXRhXG4gICAgICByZXNlbWJsZShhRGF0YSlcbiAgICAgICAgLmNvbXBhcmVUbyhiRGF0YSlcbiAgICAgICAgLmlnbm9yZUNvbG9ycygpXG4gICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKGRpZmZEYXRhKSB7XG4gICAgICAgICAgb3V0cHV0LnJlcG9ydCA9IGRpZmZEYXRhO1xuICAgICAgICAgIG91dHB1dC5zcmMgPSBkaWZmRGF0YS5nZXRJbWFnZURhdGFVcmwoKTtcblxuICAgICAgICAgIGRmZC5yZXNvbHZlKG91dHB1dCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0d28gaW1hZ2VzIGFuZCByZXR1cm5zIGFsbCBkYXRhIHdpdGggYW4gaW1hZ2Ugb2YgY2hhbmdlc1xuICAgICAqL1xuICAgIHJ1blNpbmdsZTogY29tcGFyZVNpbmdsZSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHR5cGUgb2YgcGFzcy93YXJuL2ZhaWwgc3RhdHVzXG4gICAgICovXG4gICAgZ2V0U3RhdHVzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgbWlzTWF0Y2hWYWx1ZSA9IHBhcnNlRmxvYXQoZGF0YS5taXNNYXRjaFBlcmNlbnRhZ2UpO1xuXG4gICAgICAvLyBsb3dlc3QgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA8IDAuMSkge1xuXG4gICAgICAgIC8vIFdhcm4gdGhhdCBkaW1lbnNpb25zIGFyZSBkaWZmZXJlbmNlXG4gICAgICAgIGlmIChkYXRhLmlzU2FtZURpbWVuc2lvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1swXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3YXJuaW5nIHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPiAwLjEgJiYgbWlzTWF0Y2hWYWx1ZSA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgfVxuXG4gICAgICAvLyBlcnJvciB0b2xlcmFuY2UgcmVhY2hlZFxuICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzJdO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ25vd1RpbWUnLFxuWyckdGltZW91dCcsXG5mdW5jdGlvbigkdGltZW91dCkge1xuICB2YXIgbm93VGltZSA9IERhdGUubm93KCk7XG4gIHZhciB1cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcblxuICB1cGRhdGVUaW1lKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0VGltZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbm93VGltZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuZmFjdG9yeSgnUHJvamVjdHMnLFxuWyckcScsXG5mdW5jdGlvbigkcSkge1xuICAvLyBDb25maWcgdGhlIG1haW4gcGF0aHNcbiAgdmFyIHByb2plY3RzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMuanNvbic7XG4gIHZhciBwcm9qZWN0RmlsZXNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy8nO1xuXG4gIC8vIENyZWF0ZXMgYSBVVUlEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoXG4gIGZ1bmN0aW9uIGNyZWF0ZVVVSUQocykge1xuICAgIHZhciBuO1xuICAgIGlmICh0eXBlb2YgcyA9PSAnbnVtYmVyJyAmJiBzID09PSBwYXJzZUludChzLCAxMCkpIHtcbiAgICAgIHMgPSBBcnJheShzICsgMSkuam9pbigneCcpO1xuICAgIH1cblxuICAgIHJldHVybiBzLnJlcGxhY2UoL3gvZywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDYxKSArIDQ4O1xuICAgICAgbiA9IG4gPiA1NyA/IChuICsgNyA+IDkwID8gbiArIDEzIDogbiArIDcpIDogbjtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ3JlYXRlcyBhIEpTT04gb2JqZWN0IGZvciBhIGJhc2VsaW5lIG5ldyBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdCh0b3RhbCkge1xuICAgIHRvdGFsID0gdG90YWwgfHwgMDtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBwcm9qZWN0SWQsXG4gICAgICB0aXRsZTogJ1Byb2plY3QgJyArIChwYXJzZUludCh0b3RhbCwgMTApICsgMSksXG4gICAgICB0aW1lc3RhbXA6ICgrbmV3IERhdGUpLFxuICAgICAgdG90YWxzOiB7XG4gICAgICAgIHN1Y2Nlc3M6IG51bGwsXG4gICAgICAgIHdhcm5pbmc6IG51bGwsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB2aWV3czogMFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBTZXRzIHVwIHRoZSBuZWVkZWQgYmFzZSBkYXRhIGZvciBzdG9yaW5nIGFuIGluZGl2aWR1YWwgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3RGaWxlKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICB0aW1lc3RhbXA6IG9wdGlvbnMudGltZXN0YW1wLFxuICAgICAgdmlld3BvcnRzOiBbXSxcbiAgICAgIHNlbGVjdG9yczogW10sXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICByZWFkeUV2ZW50OiBudWxsLFxuICAgICAgICBkZWxheTogbnVsbCxcbiAgICAgICAgbWlzTWF0Y2hUaHJlc2hvbGQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhYnMgSlNPTiBmaWxlIGFuZCBhcHByb3ByaWF0ZWx5IGhhbmRsZXMgZXJyb3JzXG4gIGZ1bmN0aW9uIGdldEpzb25GaWxlKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgZmlsZTtcblxuICAgIHRyeSB7XG4gICAgICBmaWxlID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gY291bGRuJ3QgZmluZCBmaWxlXG4gICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICByZXR1cm4gdHlwZSB8fCB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG4gIH1cblxuICByZXR1cm4ge1xuXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcbiAgICB9LFxuXG4gICAgZ2V0QnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICB9LFxuXG4gICAgZ2V0VHlwZUJ5SWQ6IGZ1bmN0aW9uKGlkLCB0eXBlKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ18nICsgdHlwZSArICcuanNvbicsIFtdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlcyBhIG5ldyBwcm9qZWN0LCBhbmQgcmV0dXJucyB0aGUgZGF0YSBpbiBhIHByb21pc2VcbiAgICAgKi9cbiAgICBjcmVhdGVOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuICAgICAgdmFyIG5ld1Byb2plY3REYXRhID0gY3JlYXRlRHVtbXlQcm9qZWN0KGFsbFByb2plY3RzLmxlbmd0aCk7XG4gICAgICB2YXIgbmV3UHJvamVjdEZpbGUgPSBjcmVhdGVEdW1teVByb2plY3RGaWxlKG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgYWxsUHJvamVjdHMudW5zaGlmdChuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBuZXdQcm9qZWN0RGF0YS5pZCArICcuanNvbicsIEpTT04uc3RyaW5naWZ5KG5ld1Byb2plY3RGaWxlKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlZGlyZWN0IHVzZXIgdG8gdGhlIHNldHRpbmdzIHBhZ2VcbiAgICAgICAgICBkZmQucmVzb2x2ZShuZXdQcm9qZWN0RGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gc2F2ZSB0byBmaWxlIGFuZCBsaXN0cywgcmV0dXJuIGxpc3QgZGF0YVxuICAgIHNhdmU6IGZ1bmN0aW9uKHByb2plY3REYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICBhbGxQcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gcHJvamVjdERhdGEuaWQpIHtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpdGxlID0gcHJvamVjdERhdGEudGl0bGU7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aW1lc3RhbXAgPSAoK25ldyBEYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHNhdmUgYXMgYW4gaW5kaXZpZHVhbCBmaWxlXG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdERhdGEpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXR1cm4gdGhlIGxpc3RpbmcgZGF0YSwgc28gd2UgY2FuIHVwZGF0ZSB0aGUgc2lkZXBhbmVsXG4gICAgICAgICAgZGZkLnJlc29sdmUocHJvamVjdERhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZXMgYSBzaW5nbGUgcHJvamVjdCBieSBJRFxuICAgIHJlbW92ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBpZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9qZWN0IGZpbGVcbiAgICAgIGZzLnVubGluayhwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXR1cm5cbiAgICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZpbHRlcigndGltZUFnbycsXG5bJ25vd1RpbWUnLCAndGltZUFnbycsXG5mdW5jdGlvbiAobm93VGltZSwgdGltZUFnbykge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGZyb21UaW1lID0gdGltZUFnby5wYXJzZSh2YWx1ZSk7XG4gICAgdmFyIGRpZmYgPSBub3dUaW1lLmdldFRpbWUoKSAtIGZyb21UaW1lO1xuICAgIHJldHVybiB0aW1lQWdvLmluV29yZHMoZGlmZik7XG4gIH07XG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignTWFpbkN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnQ29uZmlnJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBDb25maWcsIFByb2plY3RzKSB7XG4gICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9ICcnO1xuXG4gICRzY29wZS5jcmVhdGVOZXdQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY3JlYXRlTmV3KCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnU0lERVBBTkVMOk5FV1BST0pFQ1QnLCByZXMpO1xuICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cy5zZXR0aW5ncycsIHsgaWQ6IHJlcy5pZCB9KTtcbiAgICB9LFxuXG4gICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyAkcm9vdFNjb3BlLiRlbWl0KCdBTEVSVDpGSVJFJywgeyAgdGl0bGU6ICdIZXkgdGhlcmUsIEltIGFuIGFsZXJ0ISEnLCBkdXI6IDUsIHR5cGU6ICdzdWNjZXNzJyB9KTtcbiAgLy9cbiAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgLy8gICAkcm9vdFNjb3BlLiRlbWl0KCdBTEVSVDpGSVJFJywgeyAgdGl0bGU6ICdIZXkgdGhlcmUsIEltIGFuIGVycm9yISEnLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wJyB9KTtcbiAgLy8gfSwgMzAwMCk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcblxuICAvLyBBbGxvdyB0aGUgY2hpbGQgdmlld3MgdG8gYmluZCB0byBzYW1lIHNjb3BlXG4gICRyb290U2NvcGUucHJvamVjdCA9IFByb2plY3RzLmdldEJ5SWQoJHN0YXRlUGFyYW1zLmlkKTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RIaXN0b3J5Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICdBbGwnO1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAnJztcblxuICAvLyBncmFiIGFsbCB0aGUgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5oaXN0b3J5SXRlbXMgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAodHlwZSA9PSAnQWxsJykgPyAnJyA6IHR5cGU7XG4gIH07XG5cbiAgJHNjb3BlLnByZXZpZXdJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdwcmV2aWV3JywgaXRlbTogaXRlbSwgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdFJ1bm5lckN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckdGltZW91dCcsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkdGltZW91dCwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzU2V0dGluZ3MgPSB0cnVlOyAvLyBUT0RPOiBtYWtlIHRoaXMgcmVhbFxuICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gdHJ1ZTsgLy8gVE9ETzogbWFrZSB0aGlzIHJlYWxcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICdBbGwnO1xuICAkc2NvcGUuYmF0Y2hJdGVtcyA9IFtdO1xuICAkc2NvcGUuYWN0aXZlRGF0YSA9IHt9O1xuICAkc2NvcGUuY3VycmVudEJhdGNoID0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCB8fCAwO1xuICAkc2NvcGUucHJvZ3Jlc3MgPSB7XG4gICAgcGVyY2VudDogMFxuICB9O1xuXG4gIC8vIFNldCB0aGUgYWN0aXZlIGRhdGEgYmFzZWQgb24gY3VycmVudEJhdGNoXG4gICRzY29wZS5hY3RpdmVEYXRhID0gKCRyb290U2NvcGUucHJvamVjdCAmJiAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5KSA/ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF0gOiBudWxsO1xuXG4gIC8vIFB1dHMgZGF0YSBpbnRvIHNvcnRlZCBzZWN0aW9uc1xuICBmdW5jdGlvbiBwcm9jZXNzQmF0Y2goYWxsRGF0YSkge1xuICAgIGlmICghYWxsRGF0YSB8fCBhbGxEYXRhLmxlbmd0aCA8IDEpIHtcbiAgICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgZm9ybWF0dGVkID0gW3sgdHlwZTogJ3N1Y2Nlc3MnLCBpdGVtczogW119LCB7IHR5cGU6ICd3YXJuaW5nJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnZXJyb3InLCBpdGVtczogW119XTtcblxuICAgIGZ1bmN0aW9uIHBsYWNlSXRlbShpdGVtKSB7XG5cbiAgICAgIC8vIEtlZXAgdGhpbmdzIG9yZ2FuaXplcyB3aXRoIHByZXNldCBwcmlvcml0eVxuICAgICAgaWYgKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAwO1xuXG4gICAgICAgIHN3aXRjaCAoaXRlbS5zdGF0dXMpIHtcbiAgICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0dGVkW3RhcmdldF0uaXRlbXMudW5zaGlmdChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxEYXRhLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5iYXRjaCA9PT0gJHNjb3BlLmN1cnJlbnRCYXRjaCkge1xuICAgICAgICBwbGFjZUl0ZW0ob2JqKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICAvLyBUT0RPOlxuICAvLyAqIFByb2dyZXNzIEJhclxuICAvLyAgICogTGlzdGVuIHRvIFByb2dyZXNzIGV2ZW50XG4gIC8vICogSW50cm9cbiAgLy8gICAqIHNlZSBsYXN0IHJ1biAoaWYgYW55KVxuICAvLyAgICogc3RhcnQgbmV3IHJ1blxuICAvLyAgICogc3RhcnQgcmVmZXJlbmNlXG4gIC8vICogU3RhdHMgKHBhc3MvZmFpbClcblxuICAkc2NvcGUuY2hhbmdlRmlsdGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXIgPSB0eXBlO1xuICB9O1xuXG4gIC8vIGdyYWIgYWxsIHRoZSBydW5uZXIgdGVzdCBkYXRhXG4gIHZhciBoaXN0b3J5RGF0YSA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAvLyBTdG9yZSB0aGUgcHJvY2Vzc2VkIGRhdGEgaW50byB0aGUgYmF0Y2ggZGF0YVxuICAkc2NvcGUuYmF0Y2hJdGVtcyA9IHByb2Nlc3NCYXRjaChoaXN0b3J5RGF0YSk7XG5cbiAgLy8gRmlyZSBvZmYgdGhlIHZpZXdlclxuICAkc2NvcGUucHJldmlld0JhdGNoID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAnYmF0Y2gnLCBpdGVtczogaXRlbXMsIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxuICAvLyBUT0RPOiBmaW5pc2hcbiAgLy8gRmlyZSBvZmYgYSBuZXcgdGVzdCEhXG4gICRzY29wZS5ydW5OZXdUZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IDEyO1xuICAgIH0sIDIwMCk7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gNTY7XG4gICAgfSwgNzAwKTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSA5MztcbiAgICB9LCAxODAwKTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICB9LCAyMDAwKTtcbiAgfTtcblxuICAkcm9vdFNjb3BlLiRvbignUlVOTkVSOlBST0dSRVNTOlVQREFURScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MpIHtyZXR1cm47fVxuXG4gICAgLy8gdXBkYXRlIHRoZSBwcm9ncmVzcyFcbiAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IHBhcnNlSW50KGFyZ3MucGVyY2VudCwgMTApO1xuICB9KTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RTZXR0aW5nc0N0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gIHZhciBzYXZlVGltZXI7XG5cbiAgJHNjb3BlLnNlbGVjdG9yVHlwZXMgPSBbJ2NvbnRhaW5lcicsICdoaWRlJywgJ3JlbW92ZSddO1xuICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAkc2NvcGUubWFzdGVyID0ge307XG4gIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuXG4gIGZ1bmN0aW9uIGFkZE5ld1R5cGUodHlwZSwgZGF0YSkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5wdXNoKGRhdGEpO1xuICB9XG5cbiAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMsIHNvIHdlIGNhbiBzYXZlXG4gICRzY29wZS4kd2F0Y2goJ3Byb2plY3QnLCBmdW5jdGlvbihuViwgb1YpIHtcbiAgICBpZiAoblYgIT0gb1YpIHtcbiAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gdHJ1ZTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAgICRzY29wZS5zYXZlKCk7XG4gICAgfVxuICB9LCB0cnVlKTtcblxuICAvLyBUT0RPOiBzZXR1cCB2YWxpZGF0aW9uc1xuICAvLyBzYXZlIHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2F2ZVRpbWVyKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHNhdmVUaW1lcik7XG4gICAgfVxuXG4gICAgLy8gdGhyb3R0bGUgdGhlIHNhdmVzLCBzaW5jZSB3ZSBzYXZlIG9uIGFueSBjaGFuZ2VzXG4gICAgc2F2ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuICAgICAgLy8gU2F2ZSB0ZWggcHJvamVjdG9pZFxuICAgICAgUHJvamVjdHMuc2F2ZSgkcm9vdFNjb3BlLnByb2plY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2lkZWJhciB3aXRoIGNoYW5nZXNcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6VVBEQVRFJywgcmVzKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmV2ZXJ0IG1vZGVsXG4gICAgICAgICAgYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCwgJHNjb3BlLm1hc3Rlcik7XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICAvLyByZXZlcnQgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuY2FuY2VsU2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdXJlID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNsZWFyIGFsbCB5b3VyIGNoYW5nZXM/Jyk7XG4gICAgaWYgKHN1cmUpIHtcbiAgICAgIC8vIHB1dCByZXZlcnQgbW9kZWwgaW50byB0aGUgcHJvamVjdCBtb2RlbFxuICAgICAgYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIsICRyb290U2NvcGUucHJvamVjdCk7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvLyBkZWxldGUgdGhlIHByb2plY3QsIGFuZCByZW1vdmUgZnJvbSBwcm9qZWN0IGxpc3RzLCB0aGVuIHJlZGlyZWN0IHRvIG1haW5cbiAgJHNjb3BlLmRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0PycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICB2YXIgcHJvamVjdElEID0gJHJvb3RTY29wZS5wcm9qZWN0LmlkO1xuXG4gICAgICBQcm9qZWN0cy5yZW1vdmUocHJvamVjdElEKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6UkVNT1ZFJywgeyBpZDogcHJvamVjdElEIH0pO1xuICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xuICAgICAgICAgICRyb290U2NvcGUucHJvamVjdCA9IHt9O1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZHMgYSBuZXcgdmlld3BvcnQgaXRlbVxuICAkc2NvcGUuYWRkVmlld3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3Vmlld3BvcnQgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgd2lkdGg6IG51bGwsXG4gICAgICBoZWlnaHQ6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgndmlld3BvcnRzJywgbmV3Vmlld3BvcnQpO1xuICB9O1xuXG4gIC8vIEFkZHMgYSBuZXcgc2VsZWN0b3IgaXRlbVxuICAkc2NvcGUuYWRkU2VsZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3U2VsZWN0b3IgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB0eXBlOiAnY29udGFpbmVyJyxcbiAgICAgIHF1ZXJ5OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3NlbGVjdG9ycycsIG5ld1NlbGVjdG9yKTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IGNvb2tpZSBpdGVtXG4gICRzY29wZS5hZGRDb29raWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3Q29va2llID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgcGF0aDogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdjb29raWVzJywgbmV3Q29va2llKTtcbiAgfTtcblxuICAvLyBhY3RpdmF0ZSBhIGNvb2tpZS92aWV3L3NlbGVjdFxuICAkc2NvcGUuYWN0aXZhdGVUeXBlID0gZnVuY3Rpb24odHlwZSwgaWQpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9ICgkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9PT0gdHJ1ZSB8fCAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9PT0gJ3RydWUnKSA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgJHNjb3BlLnNhdmUoKTtcbiAgfTtcblxuICAvLyBSZW1vdmUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmRlbGV0ZVR5cGVJdGVtID0gZnVuY3Rpb24odHlwZSwgaWQpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0uc3BsaWNlKGlkLCAxKTtcblxuICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgJHNjb3BlLnNhdmUoKTtcbiAgfTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1NpZGVQYW5lbEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gICRzY29wZS5wcm9qZWN0cyA9IFtdO1xuXG4gIC8vIGdyYWIgYWxsIHByb2plY3RzIGxpc3RcbiAgJHNjb3BlLnByb2plY3RzID0gUHJvamVjdHMuZ2V0QWxsKCk7XG5cbiAgLy8gYWRkIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6TkVXUFJPSkVDVCcsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMudW5zaGlmdChhcmdzKTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6VVBEQVRFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0gPSBhcmdzO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpSRU1PVkUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gICRzY29wZS5nb1RvUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgLy8gVE9ETzogZml4IHRoaXNcbiAgICAvLyB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG4gICAgdmFyIHR5cGUgPSAncnVubmVyJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMjU1LFxuICAgICAgZ3JlZW46IDAsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ2ZsYXQnLFxuICAgIHRyYW5zcGFyZW5jeTogMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAwXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufV0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJGh0dHApIHtcblxuICAvLyBoZWFkZXJzXG4gIHZhciAkY29tbW9uID0gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb247XG4gICRjb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCckc3RhdGVDaGFuZ2VFcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==