var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope","Compare",function(e,t,r,n){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,o){function i(t){var r="screens/compare/body_tablet_projectIdRandum_0.png";n.runSingle(t,r).then(function(t){console.log("res",t),e.compareItem.b.src=r,e.compareItem.c=t,e.activeItem.analysis=t.report.analysisTime,e.activeItem.status=n.getStatus(t.report)},function(e){console.log("err",e)})}var c="modal-open",a="modal-visible";e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={b:{},c:{}},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(r,n){n&&n.type&&(e.currentIndex=0,"preview"===n.type&&(e.activeItem=n.item,e.viewer=n.project||{},e.viewer.items=null),"batch"===n.type&&n.items.length>0&&(e.activeItem=n.items[e.currentIndex],e.viewer=n.project||{},e.viewer.items=n.items,i(e.activeItem.source)),t.addClass(c),setTimeout(function(){t.addClass(a)},30))}),e.close=function(){t.removeClass(a),setTimeout(function(){t.removeClass(c)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,i(e.activeItem.source))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=f.replace("BODY",i).replace("ICON",c),g=r(a)(n);g[0].id=o,d=o,p.append(g);var h=p.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},m)}function s(e){if(!e&&d)e=p.find("#"+d);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,f='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',p=angular.element(o),m=5e3,d="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=p.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(m=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var c=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&c.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),c.resolve(a)})}),c.promise}var o=__dirname+"/",i="data:image/png;base64,",c=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?c[1]:c[0]:t>.1&&2>t?c[1]:c[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",c=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(c+e+".json")},getTypeById:function(e,t){return o(c+e+"_"+t+".json",[])},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),a=r(o.length),s=n(a);return o.unshift(a),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void t.resolve(a)})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(c+t+".json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})}),r.promise}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,f=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),p=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,f,i].join(p).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]),MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var t=0;switch(e.status){case"warning":t=1;break;case"failed":t=2}n[t].items.unshift(e)}}var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),n}t.processing=!1,t.hasSettings=!0,t.hasReference=!0,t.activeFilter="All",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0},t.activeData=e.project.batchHistory[t.currentBatch],t.changeFilter=function(e){t.activeFilter=e};var c=o.getTypeById(n.id,"history");t.batchItems=i(c),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.runNewTest=function(){t.processing=!0,r(function(){t.progress.percent=12},200),r(function(){t.progress.percent=56},700),r(function(){t.progress.percent=93},1800),r(function(){t.processing=!1},2e3)},e.$on("RUNNER:PROGRESS:UPDATE",function(e,r){r&&(t.progress.percent=parseInt(r.percent,10))})}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1},function(e){console.log("err",e)})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n]=r)})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="settings";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZhZGVpbi5qcyIsIm1vZGFsLmpzIiwibXNnY2VudGVyLmpzIiwidGltZWFnby5qcyIsImNvbXBhcmUuanMiLCJub3d0aW1lLmpzIiwicHJvamVjdHMuanMiLCJ0aW1lLWFnby5qcyIsIm1haW5jdHJsLmpzIiwicHJvamVjdGN0cmwuanMiLCJwcm9qZWN0aGlzdG9yeWN0cmwuanMiLCJwcm9qZWN0cnVubmVyY3RybC5qcyIsInByb2plY3RzZXR0aW5nc2N0cmwuanMiLCJzaWRlcGFuZWxjdHJsLmpzIiwiY29uZmlnLmpzIiwicm91dGVzLmpzIiwiaW5pdC5qcyJdLCJuYW1lcyI6WyJNVUciLCJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImNzcyIsIiR0aW1lb3V0IiwiJGNvbXBpbGUiLCIkcm9vdFNjb3BlIiwiQ29tcGFyZSIsInJlcGxhY2UiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJjb21wYXJlU2luZ2xlIiwiYSIsImIiLCJydW5TaW5nbGUiLCJ0aGVuIiwicmVzIiwiY29uc29sZSIsImxvZyIsImNvbXBhcmVJdGVtIiwic3JjIiwiYyIsImFjdGl2ZUl0ZW0iLCJhbmFseXNpcyIsInJlcG9ydCIsImFuYWx5c2lzVGltZSIsInN0YXR1cyIsImdldFN0YXR1cyIsImVyciIsIm1vZGFsQWN0aXZlIiwibW9kYWxWaXNpYmxlIiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4Iiwidmlld2VyIiwiaXRlbXMiLCJhbW91bnQiLCJpbnZlcnNlIiwicGVyY2VudCIsIiR3YXRjaCIsIm52Iiwib3YiLCJ0b0ZpeGVkIiwiTWF0aCIsInJvdW5kIiwib3B0aW9uTW9kZSIsInR5cGUiLCIkb24iLCJlIiwiYXJncyIsImNsb3NlIiwiaXRlbSIsInByb2plY3QiLCJsZW5ndGgiLCJzb3VyY2UiLCJyZW1vdmVDbGFzcyIsIm1vZGFsQWN0aW9uTmF2IiwibmV4dElkeCIsInRvdGFsIiwiZ29Ub0luZGV4IiwiaWR4IiwiZWwiLCJjdHJsIiwic2hvd01lc3NhZ2UiLCJkYXRhIiwiX2lkIiwiRGF0ZSIsIm5ld0JvZHkiLCJtc2ciLCJuZXdJY24iLCJpY29uIiwiZGVmYXVsdEljb24iLCJ0ZW1wbGF0ZSIsIm1zZ1RlbXBsYXRlIiwibmV3TWVzc2FnZSIsImlkIiwicHJldmlvdXNJZCIsIl9lbCIsImFwcGVuZCIsIm1zZ0VsIiwiZmluZCIsImNoYW5nZVR5cGUiLCJjYWxsYmFjayIsInRpbWVyIiwiY2xlYXJFbCIsImR1cmF0aW9uIiwiZWxlbWVudCIsInJlbW92ZSIsImJvZHkiLCJhY3Rpb24iLCJhY3Rpb25FbCIsInRoaXMiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJ0aW1lQWdvIiwibm93VGltZSIsImZyb21UaW1lIiwiJG9ic2VydmUiLCJ2YWx1ZSIsInBhcnNlIiwiZ2V0VGltZSIsInRleHQiLCJpbldvcmRzIiwiZnMiLCJyZXF1aXJlIiwiYXN5bmMiLCJmYWN0b3J5IiwiJHEiLCJDb25maWciLCJyZWFkQXN5bmMiLCJmaWxlIiwicmVhZEZpbGUiLCJmaWxlRGlyUHJlZml4IiwiZGZkIiwiZGVmZXIiLCJvdXRwdXQiLCJyZXNlbWJsZSIsIm91dHB1dFNldHRpbmdzIiwibWFwIiwicmVzdWx0cyIsImFEYXRhIiwiaW1hZ2VQcmVmaXgiLCJiRGF0YSIsInJlamVjdCIsImNvbXBhcmVUbyIsImlnbm9yZUNvbG9ycyIsIm9uQ29tcGxldGUiLCJkaWZmRGF0YSIsImdldEltYWdlRGF0YVVybCIsInJlc29sdmUiLCJwcm9taXNlIiwiX19kaXJuYW1lIiwic3RhdHVzVHlwZXMiLCJtaXNNYXRjaFZhbHVlIiwicGFyc2VGbG9hdCIsIm1pc01hdGNoUGVyY2VudGFnZSIsImlzU2FtZURpbWVuc2lvbnMiLCJub3ciLCJ1cGRhdGVUaW1lIiwiY3JlYXRlVVVJRCIsInMiLCJBcnJheSIsImpvaW4iLCJuIiwicmFuZG9tIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY3JlYXRlRHVtbXlQcm9qZWN0IiwicHJvamVjdElkIiwidGl0bGUiLCJ0aW1lc3RhbXAiLCJ0b3RhbHMiLCJzdWNjZXNzIiwid2FybmluZyIsImVycm9yIiwidmlld3MiLCJjcmVhdGVEdW1teVByb2plY3RGaWxlIiwib3B0aW9ucyIsInZpZXdwb3J0cyIsInNlbGVjdG9ycyIsImNvb2tpZXMiLCJtZXRhIiwidXJsIiwicmVhZHlFdmVudCIsImRlbGF5IiwibWlzTWF0Y2hUaHJlc2hvbGQiLCJnZXRKc29uRmlsZSIsInBhdGgiLCJyZWFkRmlsZVN5bmMiLCJjb2RlIiwiSlNPTiIsInByb2plY3RzUGF0aCIsInByb2plY3RGaWxlc1BhdGgiLCJnZXRBbGwiLCJnZXRCeUlkIiwiZ2V0VHlwZUJ5SWQiLCJjcmVhdGVOZXciLCJhbGxQcm9qZWN0cyIsIm5ld1Byb2plY3REYXRhIiwibmV3UHJvamVjdEZpbGUiLCJ1bnNoaWZ0Iiwid3JpdGVGaWxlIiwic3RyaW5naWZ5Iiwic2F2ZSIsInByb2plY3REYXRhIiwib2JqIiwic3BsaWNlIiwidW5saW5rIiwidHJpbURpZ2l0cyIsIm51bSIsIm0iLCJ0b1N0cmluZyIsInNsaWNlIiwic2VydmljZSIsInNldHRpbmdzIiwicmVmcmVzaE1pbGxpcyIsImFsbG93RnV0dXJlIiwic3RyaW5ncyIsInByZWZpeEFnbyIsInByZWZpeEZyb21Ob3ciLCJzdWZmaXhBZ28iLCJzdWZmaXhGcm9tTm93Iiwic2Vjb25kcyIsIm1pbnV0ZSIsIm1pbnV0ZXMiLCJob3VyIiwiaG91cnMiLCJkYXkiLCJkYXlzIiwibW9udGgiLCJtb250aHMiLCJ5ZWFyIiwieWVhcnMiLCJudW1iZXJzIiwiZGlzdGFuY2VNaWxsaXMiLCJzdWJzdGl0dXRlIiwic3RyaW5nT3JGdW5jdGlvbiIsIm51bWJlciIsInN0cmluZyIsImlzRnVuY3Rpb24iLCIkbCIsInByZWZpeCIsInN1ZmZpeCIsImFicyIsIndvcmRzIiwic2VwYXJhdG9yIiwidW5kZWZpbmVkIiwid29yZFNlcGFyYXRvciIsInRyaW0iLCJpc284NjAxIiwiaXNOdW1iZXIiLCJvcmlnaW5hbFRpbWVzdGFtcCIsImZpbHRlciIsImRpZmYiLCJjb250cm9sbGVyIiwiJHN0YXRlIiwiUHJvamVjdHMiLCJjdXJyZW50UHJvamVjdElkIiwiY3JlYXRlTmV3UHJvamVjdCIsIiRicm9hZGNhc3QiLCJnbyIsIiRzdGF0ZVBhcmFtcyIsImFjdGl2ZUZpbHRlciIsImFjdGl2ZUZpbHRlclF1ZXJ5IiwiaGlzdG9yeUl0ZW1zIiwiY2hhbmdlRmlsdGVyIiwicHJldmlld0l0ZW0iLCIkZW1pdCIsInByb2Nlc3NCYXRjaCIsImFsbERhdGEiLCJwbGFjZUl0ZW0iLCJ0YXJnZXQiLCJmb3JtYXR0ZWQiLCJiYXRjaCIsImN1cnJlbnRCYXRjaCIsInByb2Nlc3NpbmciLCJoYXNTZXR0aW5ncyIsImhhc1JlZmVyZW5jZSIsImJhdGNoSXRlbXMiLCJhY3RpdmVEYXRhIiwicHJvZ3Jlc3MiLCJiYXRjaEhpc3RvcnkiLCJoaXN0b3J5RGF0YSIsInByZXZpZXdCYXRjaCIsInJ1bk5ld1Rlc3QiLCJhZGROZXdUeXBlIiwicHVzaCIsInNhdmVUaW1lciIsInNlbGVjdG9yVHlwZXMiLCJoYXNDaGFuZ2VzIiwibWFzdGVyIiwiY29weSIsIm5WIiwib1YiLCJjYW5jZWxTYXZlIiwic3VyZSIsImNvbmZpcm0iLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElEIiwiYWRkVmlld3BvcnQiLCJuZXdWaWV3cG9ydCIsImFjdGl2ZSIsIm5hbWUiLCJ3aWR0aCIsImhlaWdodCIsImFkZFNlbGVjdG9yIiwibmV3U2VsZWN0b3IiLCJxdWVyeSIsImFkZENvb2tpZSIsIm5ld0Nvb2tpZSIsImFjdGl2YXRlVHlwZSIsImRlbGV0ZVR5cGVJdGVtIiwicHJvamVjdHMiLCJnb1RvUHJvamVjdCIsImNvbnN0YW50IiwiRU5WIiwiU1RBR0UiLCJQUk9EIiwiZXJyb3JDb2xvciIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImVycm9yVHlwZSIsInRyYW5zcGFyZW5jeSIsImxhcmdlSW1hZ2VUaHJlc2hvbGQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwib3RoZXJ3aXNlIiwicnVuIiwiJGh0dHAiLCIkY29tbW9uIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLFdBQUEsWUFBQSxnQkNJQUYsS0FBQUcsVUFBQSxVQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsU0FBQUYsRUFBQUcsU0FBQSxFQUNBSixHQUFBSyxTQUFBLFdBRUFDLFdBQUEsV0FDQU4sRUFBQU8sSUFBQSxVQUFBLE1BQ0FMLFFDTkFULElBQUFHLFVBQUEsU0FDQSxXQUFBLFdBQUEsYUFBQSxVQUNBLFNBQUFZLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsT0FDQWQsU0FBQSxJQUNBZSxTQUFBLEVBQ0FDLFlBQUEsYUFDQWQsU0FDQUQsS0FBQSxTQUFBZ0IsRUFBQUMsRUFBQUMsR0E4QkEsUUFBQUMsR0FBQUMsR0FFQSxHQUFBQyxHQUFBLG1EQUlBUixHQUFBUyxVQUFBRixFQUFBQyxHQUFBRSxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUEsTUFBQUYsR0FHQVIsRUFBQVcsWUFBQU4sRUFBQU8sSUFBQVAsRUFDQUwsRUFBQVcsWUFBQUUsRUFBQUwsRUFHQVIsRUFBQWMsV0FBQUMsU0FBQVAsRUFBQVEsT0FBQUMsYUFDQWpCLEVBQUFjLFdBQUFJLE9BQUFyQixFQUFBc0IsVUFBQVgsRUFBQVEsU0FHQSxTQUFBSSxHQUNBWCxRQUFBQyxJQUFBLE1BQUFVLEtBaERBLEdBQUFDLEdBQUEsYUFDQUMs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Z0JBQ0FvTyxXQUFBLGdCQUVBMEUsTUFBQSxxQkFDQWxKLElBQUEsWUFDQTVKLFlBQUEseUJBQ0FvTyxXQUFBLHdCQUVBMEUsTUFBQSxtQkFDQWxKLElBQUEsVUFDQTVKLFlBQUEsdUJBQ0FvTyxXQUFBLHNCQUVBMEUsTUFBQSxvQkFDQWxKLElBQUEsV0FDQTVKLFlBQUEsd0JBQ0FvTyxXQUFBLHVCQXNCQXlFLEVBQUFFLFVBQUEsUUNoRUFuVSxJQUFBb1UsS0FBQSxhQUFBLFFBQ0EsU0FBQW5ULEVBQUFvVCxHQUdBLEdBQUFDLEdBQUFELEVBQUFFLFNBQUFDLFFBQUFDLE1BQ0FILEdBQUEsZ0JBQUEsbUJBRUFyVCxFQUFBMkMsSUFBQSxvQkFBQSxTQUFBOFEsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQXRLLEdBQ0ExSSxRQUFBQyxJQUFBLG9CQUFBeUkiLCJmaWxlIjoibXVnLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1VRyA9IGFuZ3VsYXIubW9kdWxlKCdtdWdzaG90JywgWyd1aS5yb3V0ZXInLCAnbXVndGVtcGxhdGVzJ10pO1xuIiwiLyoqXG4gKiBmYWRlSW5cbiAqIEEgZGlyZWN0aXZlIGZvciBhbmltYXRpbmcgaW4gZWxlbWVudHNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnZmFkZUluJywgWyBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KGF0dHJzLmZhZGVJbikgfHwgMTA7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdmYWRlLWluJyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVsZW0uY3NzKFwib3BhY2l0eVwiLCBcIjFcIik7XG4gICAgICAgICAgICB9LCBvZmZzZXQpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogTW9kYWxcbiAqIEJ1aWxkcyBhIG1vZGFsIGZvciBpbWFnZSB2aWV3aW5nIGFuZCBjb21wYXJpbmdcbiAqXG4gKiBAdXNhZ2VcbiAqIDxtb2RhbD48L21vZGFsPlxuICovXG5NVUcuZGlyZWN0aXZlKCdtb2RhbCcsXG5bJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLCAnQ29tcGFyZScsXG5mdW5jdGlvbigkdGltZW91dCwgJGNvbXBpbGUsICRyb290U2NvcGUsIENvbXBhcmUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICdtb2RhbC5odG1sJyxcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIHZhciBtb2RhbEFjdGl2ZSA9ICdtb2RhbC1vcGVuJztcbiAgICAgIHZhciBtb2RhbFZpc2libGUgPSAnbW9kYWwtdmlzaWJsZSc7XG5cbiAgICAgIC8vICRzY29wZS5hY3RpdmVPcHRpb24gPSAnb3ZlcmxheSc7XG4gICAgICAkc2NvcGUuYWN0aXZlT3B0aW9uID0gJ3NpZGVzJztcbiAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UgPSB7fTtcbiAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSB7fTtcbiAgICAgICRzY29wZS5jb21wYXJlSXRlbSA9IHtcbiAgICAgICAgYjoge30sXG4gICAgICAgIGM6IHt9XG4gICAgICB9O1xuICAgICAgJHNjb3BlLnZpZXdlciA9IHtcbiAgICAgICAgaXRlbXM6IFtdXG4gICAgICB9O1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHtcbiAgICAgICAgYW1vdW50OiAwLjgsXG4gICAgICAgIGludmVyc2U6IDAuMixcbiAgICAgICAgcGVyY2VudDogJzgwJSdcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ29wYWNpdHlSYW5nZS5hbW91bnQnLCBmdW5jdGlvbihudiwgb3YpIHtcbiAgICAgICAgaWYgKG52ID09PSBvdikge3JldHVybjt9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBvdGhlciB2YWx1ZXNcbiAgICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZS5pbnZlcnNlID0gKDEgLSBudikudG9GaXhlZCgyKTtcbiAgICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZS5wZXJjZW50ID0gTWF0aC5yb3VuZChudiAqIDEwMCkgKyAnJSc7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gY29tcGFyZVNpbmdsZShhKSB7XG4gICAgICAgIC8vVE9ETzpyZW1vdmV0aGlzXG4gICAgICAgIHZhciBiID0gJ3NjcmVlbnMvY29tcGFyZS9ib2R5X3RhYmxldF9wcm9qZWN0SWRSYW5kdW1fMC5wbmcnO1xuXG4gICAgICAgIC8vIHZhciBiID0gJ3NjcmVlbnMvY29tcGFyZS9ib2R5X3Bob25lX3Byb2plY3RJZFJhbmR1bV8wLnBuZyc7XG5cbiAgICAgICAgQ29tcGFyZS5ydW5TaW5nbGUoYSwgYikudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTtcblxuICAgICAgICAgIC8vIHVwZGF0ZSB2aWV3IHdpdGggcHJvY2Vzc2VkIGltYWdlXG4gICAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmIuc3JjID0gYjtcbiAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYyA9IHJlcztcblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYWN0aXZlSXRlbSB3aXRoIHRoZSBwcm9jZXNzZWQgdmFsdWVzXG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0uYW5hbHlzaXMgPSByZXMucmVwb3J0LmFuYWx5c2lzVGltZTtcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbS5zdGF0dXMgPSBDb21wYXJlLmdldFN0YXR1cyhyZXMucmVwb3J0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENob29zZSB0aGUgdmlld2VyIGxheW91dFxuICAgICAgJHNjb3BlLm9wdGlvbk1vZGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSB0eXBlO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlc2V0IGN1cnJlbnQgSW5kZXhcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IG11bHRpcGxlIGl0ZW1zXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdiYXRjaCcgJiYgYXJncy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW1zWyRzY29wZS5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IGFyZ3MuaXRlbXM7XG5cbiAgICAgICAgICBjb21wYXJlU2luZ2xlKCRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG4gICAgICB9O1xuXG4gICAgICAvLyBHbyBkaXJlY3RseSB0byBhbiBpdGVtXG4gICAgICAkc2NvcGUuZ29Ub0luZGV4ID0gZnVuY3Rpb24oaWR4KSB7XG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudEluZGV4ID09PSBpZHgpIHtyZXR1cm47fVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tpZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaWR4O1xuXG4gICAgICAgIGNvbXBhcmVTaW5nbGUoJHNjb3BlLmFjdGl2ZUl0ZW0uc291cmNlKTtcbiAgICAgIH07XG5cbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIG1zZ0NlbnRlclxuICogYSBkaXJlY3RpdmUgZm9yIGhhbmRsaW5nIGFsbCBtZXNzYWdlIHJlbGF5IGZvciBhIHVzZXJcbiAqXG4gKiBVU0U6XG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ01TR0NFTlRFUjpGSVJFJywgeyBtc2c6IFwiSGV5IHRoZXJlLCBJbSBhIG1lc3NhZ2UhIVwiLCBkdXI6IDUsIHR5cGU6IFwiaW5mb1wiLCBpY29uOiBcImluZm9cIiwgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSB9KTtcbiAqXG4gKiBUWVBFUzpcbiAqIC0gREVGQVVMVCwgc2hvd3MgZ3JlZW4gbWVzc2FnZSwgdXNlZCBmb3Igc3VjY2Vzc1xuICogLSBXYXJuaW5nOiBcIndhcm5cIiAtIHNob3dzIG9yYW5nZSBtZXNzYWdlLCB1c2VkIGZvciBlcnJvcnMgb3Igd2FybmluZ3NcbiAqIC0gSW5mbzogXCJpbmZvXCIgLSBzaG93cyBkYXJrIGJsdWUgbWVzc2FnZSwgdXNlZCBmb3IgZ2VuZXJhbCB0aGluZ3NcbiAqXG4gKiBPUFRJT05TOlxuICogLSBtc2c6IHRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSwgKFRPRE86IGNhbiBiZSBodG1sIG9yIHNpbXBsZSB0ZXh0KVxuICogLSBjYWxsYmFjazogYSBmdW5jdGlvbiB0byBmaXJlIG9uIGFjdGlvbiB0YWtlbiBvbiBtZXNzYWdlXG4gKiAtIGR1cjogdGhlIHRpbWVvdXQgb2YgdGhlIG1lc3NhZ2VcbiAqIC0gdHlwZTogc2VlIGFib3ZlIHR5cGVzXG4gKiAtIGljb246IGRlZmF1bHQgaXMgZ2xvYmUsIGNhbiBiZSBzZXQgdG8gQU5ZIGktc3ByaXRlcyAoc3ByaXRlcy5sZXNzKVxuICovXG5NVUcuZGlyZWN0aXZlKCdtc2dDZW50ZXInLFxuWyBcIiRyb290U2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIiRjb21waWxlXCIsXG5mdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgbXNnVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1zZ1wiIG5nLWNsaWNrPVwiYWN0aW9uKClcIj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWljblwiPjxpIGNsYXNzPVwiaXcgaS1JQ09OXCI+PC9pPjwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctY29udFwiPkJPRFk8L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWFjdGlvblwiPjxpIGNsYXNzPVwiaWIgaS1yLWFycm93XCI+PC9pPjwvZGl2PicrXG4gICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICB2YXIgX2VsID0gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgcHJldmlvdXNJZCA9IFwiXCI7XG4gICAgICB2YXIgZGVmYXVsdEljb24gPSBcImluZm9cIjtcblxuICAgICAgc2NvcGUuYm9keSA9IFwiXCI7XG4gICAgICBzY29wZS5jYWxsYmFjayA9IG51bGw7XG4gICAgICBzY29wZS5pY29uID0gZGVmYXVsdEljb247XG4gICAgICBzY29wZS5hY3Rpb24gPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYWN0aW9uRWwgPSBfZWwuZmluZChcIiNcIiArIHRoaXMuaWQpO1xuICAgICAgICBzY29wZS5jYWxsYmFjaygpO1xuICAgICAgICBjbGVhckVsKCBhY3Rpb25FbCApO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UgKCBkYXRhICl7XG4gICAgICAgIHZhciBfaWQgPSAoK25ldyBEYXRlKCkpO1xuICAgICAgICB2YXIgbmV3Qm9keSA9IGRhdGEubXNnO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbik/IGRhdGEuaWNvbiA6IGRlZmF1bHRJY29uO1xuXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IG1zZ1RlbXBsYXRlLnJlcGxhY2UoXCJCT0RZXCIsIG5ld0JvZHkpLnJlcGxhY2UoXCJJQ09OXCIsIG5ld0ljbik7XG4gICAgICAgIHZhciBuZXdNZXNzYWdlID0gJGNvbXBpbGUodGVtcGxhdGUpKHNjb3BlKTtcblxuICAgICAgICAvLyBzZXQgYSB1bmlxdWUgaWRcbiAgICAgICAgbmV3TWVzc2FnZVswXS5pZCA9IF9pZDtcbiAgICAgICAgcHJldmlvdXNJZCA9IF9pZDtcblxuICAgICAgICAvLyB0aHJvdyBpbnRvIGRvbSwgdGhlbiBzaG93IGluIHZpZXcsIHN0YXJ0IHRpbWVyXG4gICAgICAgIF9lbC5hcHBlbmQoIG5ld01lc3NhZ2UgKTtcblxuICAgICAgICAvLyByZW1lbWJlciB0aGUgbmV3IGVsIGZvciBsYXRlclxuICAgICAgICB2YXIgbXNnRWwgPSBfZWwuZmluZChcIiNcIiArIF9pZCk7XG4gICAgICAgIGNoYW5nZVR5cGUoIG1zZ0VsLCBkYXRhLnR5cGUgKTtcblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBtc2dFbC5maW5kKFwiLm1zZy1hY3Rpb25cIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBtc2dFbC5hZGRDbGFzcygnYWRkJyk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2xlYXJFbCggbXNnRWwgKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhckVsICggZWxlbSApIHtcbiAgICAgICAgaWYoIWVsZW0gJiYgcHJldmlvdXNJZCl7XG4gICAgICAgICAgZWxlbSA9IF9lbC5maW5kKFwiI1wiICsgcHJldmlvdXNJZCk7XG4gICAgICAgIH0gZWxzZSBpZighZWxlbSkgeyByZXR1cm47IH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdhZGQnKTtcbiAgICAgICAgZWxlbS5hZGRDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW0pLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgdGhlIHR5cGUgYnkgYSBjbGFzc1xuICAgICAgZnVuY3Rpb24gY2hhbmdlVHlwZSAoIGVsZW0sIHR5cGUgKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy1pbmZvJyk7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy13YXJuJyk7XG5cbiAgICAgICAgaWYodHlwZSl7XG4gICAgICAgICAgZWxlbS5hZGRDbGFzcygnbXNnLScgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTVNHQ0VOVEVSOkZJUkUnLCBmdW5jdGlvbihlLCBkYXRhKXtcbiAgICAgICAgaWYoIWRhdGEubXNnKXsgcmV0dXJuOyB9XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBjbGVhckVsKCk7XG5cbiAgICAgICAgaWYoZGF0YS5kdXIpe1xuICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXIgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgc2NvcGUuY2FsbGJhY2sgPSBkYXRhLmNhbGxiYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd01lc3NhZ2UoIGRhdGEgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIk1VRy5mYWN0b3J5KCd0aW1lQWdvJywgZnVuY3Rpb24gKCkge1xuICB2YXIgc2VydmljZSA9IHt9O1xuXG4gIHNlcnZpY2Uuc2V0dGluZ3MgPSB7XG4gICAgcmVmcmVzaE1pbGxpczogNjAwMDAsXG4gICAgYWxsb3dGdXR1cmU6IGZhbHNlLFxuICAgIHN0cmluZ3M6IHtcbiAgICAgIHByZWZpeEFnbzogbnVsbCxcbiAgICAgIHByZWZpeEZyb21Ob3c6IG51bGwsXG4gICAgICBzdWZmaXhBZ286ICdhZ28nLFxuICAgICAgc3VmZml4RnJvbU5vdzogJ2Zyb20gbm93JyxcbiAgICAgIHNlY29uZHM6ICdsZXNzIHRoYW4gYSBtaW51dGUnLFxuICAgICAgbWludXRlOiAnYWJvdXQgYSBtaW51dGUnLFxuICAgICAgbWludXRlczogJyVkIG1pbnV0ZXMnLFxuICAgICAgaG91cjogJ2Fib3V0IGFuIGhvdXInLFxuICAgICAgaG91cnM6ICclZCBob3VycycsXG4gICAgICBkYXk6ICdhIGRheScsXG4gICAgICBkYXlzOiAnJWQgZGF5cycsXG4gICAgICBtb250aDogJ2Fib3V0IGEgbW9udGgnLFxuICAgICAgbW9udGhzOiAnJWQgbW9udGhzJyxcbiAgICAgIHllYXI6ICdhYm91dCBhIHllYXInLFxuICAgICAgeWVhcnM6ICclZCB5ZWFycycsXG4gICAgICBudW1iZXJzOiBbXVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB0cmltRGlnaXRzICggbnVtICkge1xuICAgICAgdmFyIG0gPSBudW0udG9TdHJpbmcoKS5zbGljZSgwLDEzKTtcbiAgICAgIHJldHVybiAobS5sZW5ndGggPT0gMTMpPyBwYXJzZUludChtKSA6IG51bTtcbiAgfVxuXG4gIHNlcnZpY2UuaW5Xb3JkcyA9IGZ1bmN0aW9uIChkaXN0YW5jZU1pbGxpcykge1xuICAgIHZhciAkbCA9IHNlcnZpY2Uuc2V0dGluZ3Muc3RyaW5ncztcbiAgICB2YXIgcHJlZml4ID0gJGwucHJlZml4QWdvO1xuICAgIHZhciBzdWZmaXggPSAkbC5zdWZmaXhBZ287XG4gICAgaWYgKHNlcnZpY2Uuc2V0dGluZ3MuYWxsb3dGdXR1cmUpIHtcbiAgICAgIGlmIChkaXN0YW5jZU1pbGxpcyA8IDApIHtcbiAgICAgICAgcHJlZml4ID0gJGwucHJlZml4RnJvbU5vdztcbiAgICAgICAgc3VmZml4ID0gJGwuc3VmZml4RnJvbU5vdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2Vjb25kcyA9IE1hdGguYWJzKGRpc3RhbmNlTWlsbGlzKSAvIDEwMDA7XG4gICAgdmFyIG1pbnV0ZXMgPSBzZWNvbmRzIC8gNjA7XG4gICAgdmFyIGhvdXJzID0gbWludXRlcyAvIDYwO1xuICAgIHZhciBkYXlzID0gaG91cnMgLyAyNDtcbiAgICB2YXIgeWVhcnMgPSBkYXlzIC8gMzY1O1xuXG4gICAgZnVuY3Rpb24gc3Vic3RpdHV0ZShzdHJpbmdPckZ1bmN0aW9uLCBudW1iZXIpIHtcbiAgICAgIHZhciBzdHJpbmcgPSBhbmd1bGFyLmlzRnVuY3Rpb24oc3RyaW5nT3JGdW5jdGlvbikgP1xuICAgICAgc3RyaW5nT3JGdW5jdGlvbihudW1iZXIsIGRpc3RhbmNlTWlsbGlzKSA6IHN0cmluZ09yRnVuY3Rpb247XG4gICAgICB2YXIgdmFsdWUgPSAoJGwubnVtYmVycyAmJiAkbC5udW1iZXJzW251bWJlcl0pIHx8IG51bWJlcjtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvJWQvaSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHZhciB3b3JkcyA9IHNlY29uZHMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLnNlY29uZHMsIE1hdGgucm91bmQoc2Vjb25kcykpIHx8XG4gICAgICAgIHNlY29uZHMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZSwgMSkgfHxcbiAgICAgICAgbWludXRlcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubWludXRlcywgTWF0aC5yb3VuZChtaW51dGVzKSkgfHxcbiAgICAgICAgbWludXRlcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwuaG91ciwgMSkgfHxcbiAgICAgICAgaG91cnMgPCAyNCAmJiBzdWJzdGl0dXRlKCRsLmhvdXJzLCBNYXRoLnJvdW5kKGhvdXJzKSkgfHxcbiAgICAgICAgaG91cnMgPCA0MiAmJiBzdWJzdGl0dXRlKCRsLmRheSwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDMwICYmIHN1YnN0aXR1dGUoJGwuZGF5cywgTWF0aC5yb3VuZChkYXlzKSkgfHxcbiAgICAgICAgZGF5cyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubW9udGgsIDEpIHx8XG4gICAgICAgIGRheXMgPCAzNjUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aHMsIE1hdGgucm91bmQoZGF5cyAvIDMwKSkgfHxcbiAgICAgICAgeWVhcnMgPCAxLjUgJiYgc3Vic3RpdHV0ZSgkbC55ZWFyLCAxKSB8fFxuICAgICAgICBzdWJzdGl0dXRlKCRsLnllYXJzLCBNYXRoLnJvdW5kKHllYXJzKSk7XG5cbiAgICB2YXIgc2VwYXJhdG9yID0gJGwud29yZFNlcGFyYXRvciA9PT0gdW5kZWZpbmVkID8gJyAnIDogJGwud29yZFNlcGFyYXRvcjtcbiAgICByZXR1cm4gW3ByZWZpeCwgd29yZHMsIHN1ZmZpeF0uam9pbihzZXBhcmF0b3IpLnRyaW0oKTtcbiAgfTtcblxuICBzZXJ2aWNlLnBhcnNlID0gZnVuY3Rpb24gKGlzbzg2MDEpIHtcbiAgICBpZiAoYW5ndWxhci5pc051bWJlcihpc284NjAxKSkge1xuICAgICAgaXNvODYwMSA9IGlzbzg2MDEgKyBcIlwiO1xuICAgICAgLy8gZm9ybWF0IGZvciBjb3JyZWN0IGxlbmd0aFxuICAgICAgdmFyIG9yaWdpbmFsVGltZXN0YW1wID0gdHJpbURpZ2l0cyggaXNvODYwMSApO1xuICAgICAgcmV0dXJuIHBhcnNlSW50KG9yaWdpbmFsVGltZXN0YW1wLCAxMCk7XG4gICAgfVxuICAgIHZhciBzID0gKGlzbzg2MDEgfHwgJycpLnRyaW0oKTtcbiAgICBzID0gcy5yZXBsYWNlKC9cXC5cXGQrLywgJycpOyAvLyByZW1vdmUgbWlsbGlzZWNvbmRzXG4gICAgcyA9IHMucmVwbGFjZSgvLS8sICcvJykucmVwbGFjZSgvLS8sICcvJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvVC8sICcgJykucmVwbGFjZSgvWi8sICcgVVRDJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvKFtcXCtcXC1dXFxkXFxkKVxcOj8oXFxkXFxkKS8sICcgJDEkMicpOyAvLyAtMDQ6MDAgLT4gLTA0MDBcbiAgICByZXR1cm4gbmV3IERhdGUocyk7XG4gIH07XG5cbiAgcmV0dXJuIHNlcnZpY2U7XG59KTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgYXN5bmMgPSByZXF1aXJlKCdhc3luYycpO1xuXG5NVUcuZmFjdG9yeSgnQ29tcGFyZScsXG5bJyRxJywgJ0NvbmZpZycsXG5mdW5jdGlvbigkcSwgQ29uZmlnKSB7XG4gIC8vIENvbmZpZyB2YXJzXG4gIHZhciBmaWxlRGlyUHJlZml4ID0gX19kaXJuYW1lICsgJy8nO1xuICB2YXIgaW1hZ2VQcmVmaXggPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCc7XG4gIHZhciBzdGF0dXNUeXBlcyA9IFsncGFzc2VkJywgJ3dhcm5pbmcnLCAnZmFpbGVkJ107XG5cbiAgLy8gYXN5bmMgaGVscGVyXG4gIGZ1bmN0aW9uIHJlYWRBc3luYyhmaWxlLCBjYWxsYmFjaykge1xuICAgIGZzLnJlYWRGaWxlKGZpbGVEaXJQcmVmaXggKyBmaWxlLCAnYmFzZTY0JywgY2FsbGJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGFyZVNpbmdsZShhLCBiKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIG91dHB1dCA9IHt9O1xuXG4gICAgLy8gQXBwbHkgTWFpbiBDb21wYXJlIENvbmZpZ1xuICAgIHJlc2VtYmxlLm91dHB1dFNldHRpbmdzKENvbmZpZy5Db21wYXJlKTtcblxuICAgIC8vIE9wZW4gYm90aCBmaWxlcywgYmVmb3JlIHdlIGFyZSByZWFkeSB0byBwcm9jZXNzXG4gICAgYXN5bmMubWFwKFthLCBiXSwgcmVhZEFzeW5jLCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHtcbiAgICAgIHZhciBhRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1swXTtcbiAgICAgIHZhciBiRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1sxXTtcblxuICAgICAgLy8gSGFuZGxlcyBlcnJvcnNcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgfVxuXG4gICAgICAvLyBSdW4gdGhlIGNvbXBhcmUgZnVuY3Rpb24sIHJldHVybiB0aGUgZGlmZiBkYXRhXG4gICAgICByZXNlbWJsZShhRGF0YSlcbiAgICAgICAgLmNvbXBhcmVUbyhiRGF0YSlcbiAgICAgICAgLmlnbm9yZUNvbG9ycygpXG4gICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKGRpZmZEYXRhKSB7XG4gICAgICAgICAgb3V0cHV0LnJlcG9ydCA9IGRpZmZEYXRhO1xuICAgICAgICAgIG91dHB1dC5zcmMgPSBkaWZmRGF0YS5nZXRJbWFnZURhdGFVcmwoKTtcblxuICAgICAgICAgIGRmZC5yZXNvbHZlKG91dHB1dCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0d28gaW1hZ2VzIGFuZCByZXR1cm5zIGFsbCBkYXRhIHdpdGggYW4gaW1hZ2Ugb2YgY2hhbmdlc1xuICAgICAqL1xuICAgIHJ1blNpbmdsZTogY29tcGFyZVNpbmdsZSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHR5cGUgb2YgcGFzcy93YXJuL2ZhaWwgc3RhdHVzXG4gICAgICovXG4gICAgZ2V0U3RhdHVzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgbWlzTWF0Y2hWYWx1ZSA9IHBhcnNlRmxvYXQoZGF0YS5taXNNYXRjaFBlcmNlbnRhZ2UpO1xuXG4gICAgICAvLyBsb3dlc3QgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA8IDAuMSkge1xuXG4gICAgICAgIC8vIFdhcm4gdGhhdCBkaW1lbnNpb25zIGFyZSBkaWZmZXJlbmNlXG4gICAgICAgIGlmIChkYXRhLmlzU2FtZURpbWVuc2lvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1swXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3YXJuaW5nIHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPiAwLjEgJiYgbWlzTWF0Y2hWYWx1ZSA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgfVxuXG4gICAgICAvLyBlcnJvciB0b2xlcmFuY2UgcmVhY2hlZFxuICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzJdO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ25vd1RpbWUnLFxuWyckdGltZW91dCcsXG5mdW5jdGlvbigkdGltZW91dCkge1xuICB2YXIgbm93VGltZSA9IERhdGUubm93KCk7XG4gIHZhciB1cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcblxuICB1cGRhdGVUaW1lKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0VGltZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbm93VGltZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuZmFjdG9yeSgnUHJvamVjdHMnLFxuWyckcScsXG5mdW5jdGlvbigkcSkge1xuICAvLyBDb25maWcgdGhlIG1haW4gcGF0aHNcbiAgdmFyIHByb2plY3RzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMuanNvbic7XG4gIHZhciBwcm9qZWN0RmlsZXNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy8nO1xuXG4gIC8vIENyZWF0ZXMgYSBVVUlEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoXG4gIGZ1bmN0aW9uIGNyZWF0ZVVVSUQocykge1xuICAgIHZhciBuO1xuICAgIGlmICh0eXBlb2YgcyA9PSAnbnVtYmVyJyAmJiBzID09PSBwYXJzZUludChzLCAxMCkpIHtcbiAgICAgIHMgPSBBcnJheShzICsgMSkuam9pbigneCcpO1xuICAgIH1cblxuICAgIHJldHVybiBzLnJlcGxhY2UoL3gvZywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDYxKSArIDQ4O1xuICAgICAgbiA9IG4gPiA1NyA/IChuICsgNyA+IDkwID8gbiArIDEzIDogbiArIDcpIDogbjtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ3JlYXRlcyBhIEpTT04gb2JqZWN0IGZvciBhIGJhc2VsaW5lIG5ldyBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdCh0b3RhbCkge1xuICAgIHRvdGFsID0gdG90YWwgfHwgMDtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBwcm9qZWN0SWQsXG4gICAgICB0aXRsZTogJ1Byb2plY3QgJyArIChwYXJzZUludCh0b3RhbCwgMTApICsgMSksXG4gICAgICB0aW1lc3RhbXA6ICgrbmV3IERhdGUpLFxuICAgICAgdG90YWxzOiB7XG4gICAgICAgIHN1Y2Nlc3M6IG51bGwsXG4gICAgICAgIHdhcm5pbmc6IG51bGwsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB2aWV3czogMFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBTZXRzIHVwIHRoZSBuZWVkZWQgYmFzZSBkYXRhIGZvciBzdG9yaW5nIGFuIGluZGl2aWR1YWwgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3RGaWxlKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICB0aW1lc3RhbXA6IG9wdGlvbnMudGltZXN0YW1wLFxuICAgICAgdmlld3BvcnRzOiBbXSxcbiAgICAgIHNlbGVjdG9yczogW10sXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICByZWFkeUV2ZW50OiBudWxsLFxuICAgICAgICBkZWxheTogbnVsbCxcbiAgICAgICAgbWlzTWF0Y2hUaHJlc2hvbGQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhYnMgSlNPTiBmaWxlIGFuZCBhcHByb3ByaWF0ZWx5IGhhbmRsZXMgZXJyb3JzXG4gIGZ1bmN0aW9uIGdldEpzb25GaWxlKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgZmlsZTtcblxuICAgIHRyeSB7XG4gICAgICBmaWxlID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gY291bGRuJ3QgZmluZCBmaWxlXG4gICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICByZXR1cm4gdHlwZSB8fCB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG4gIH1cblxuICByZXR1cm4ge1xuXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcbiAgICB9LFxuXG4gICAgZ2V0QnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICB9LFxuXG4gICAgZ2V0VHlwZUJ5SWQ6IGZ1bmN0aW9uKGlkLCB0eXBlKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ18nICsgdHlwZSArICcuanNvbicsIFtdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlcyBhIG5ldyBwcm9qZWN0LCBhbmQgcmV0dXJucyB0aGUgZGF0YSBpbiBhIHByb21pc2VcbiAgICAgKi9cbiAgICBjcmVhdGVOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuICAgICAgdmFyIG5ld1Byb2plY3REYXRhID0gY3JlYXRlRHVtbXlQcm9qZWN0KGFsbFByb2plY3RzLmxlbmd0aCk7XG4gICAgICB2YXIgbmV3UHJvamVjdEZpbGUgPSBjcmVhdGVEdW1teVByb2plY3RGaWxlKG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgYWxsUHJvamVjdHMudW5zaGlmdChuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBuZXdQcm9qZWN0RGF0YS5pZCArICcuanNvbicsIEpTT04uc3RyaW5naWZ5KG5ld1Byb2plY3RGaWxlKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlZGlyZWN0IHVzZXIgdG8gdGhlIHNldHRpbmdzIHBhZ2VcbiAgICAgICAgICBkZmQucmVzb2x2ZShuZXdQcm9qZWN0RGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gc2F2ZSB0byBmaWxlIGFuZCBsaXN0cywgcmV0dXJuIGxpc3QgZGF0YVxuICAgIHNhdmU6IGZ1bmN0aW9uKHByb2plY3REYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICBhbGxQcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gcHJvamVjdERhdGEuaWQpIHtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpdGxlID0gcHJvamVjdERhdGEudGl0bGU7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aW1lc3RhbXAgPSAoK25ldyBEYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHNhdmUgYXMgYW4gaW5kaXZpZHVhbCBmaWxlXG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdERhdGEpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXR1cm4gdGhlIGxpc3RpbmcgZGF0YSwgc28gd2UgY2FuIHVwZGF0ZSB0aGUgc2lkZXBhbmVsXG4gICAgICAgICAgZGZkLnJlc29sdmUocHJvamVjdERhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZXMgYSBzaW5nbGUgcHJvamVjdCBieSBJRFxuICAgIHJlbW92ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBpZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9qZWN0IGZpbGVcbiAgICAgIGZzLnVubGluayhwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXR1cm5cbiAgICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZpbHRlcigndGltZUFnbycsXG5bJ25vd1RpbWUnLCAndGltZUFnbycsXG5mdW5jdGlvbiAobm93VGltZSwgdGltZUFnbykge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGZyb21UaW1lID0gdGltZUFnby5wYXJzZSh2YWx1ZSk7XG4gICAgdmFyIGRpZmYgPSBub3dUaW1lLmdldFRpbWUoKSAtIGZyb21UaW1lO1xuICAgIHJldHVybiB0aW1lQWdvLmluV29yZHMoZGlmZik7XG4gIH07XG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignTWFpbkN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnQ29uZmlnJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBDb25maWcsIFByb2plY3RzKSB7XG4gICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9ICcnO1xuXG4gICRzY29wZS5jcmVhdGVOZXdQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY3JlYXRlTmV3KCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnU0lERVBBTkVMOk5FV1BST0pFQ1QnLCByZXMpO1xuICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cy5zZXR0aW5ncycsIHsgaWQ6IHJlcy5pZCB9KTtcbiAgICB9LFxuXG4gICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuXG4gIC8vIEFsbG93IHRoZSBjaGlsZCB2aWV3cyB0byBiaW5kIHRvIHNhbWUgc2NvcGVcbiAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkc3RhdGVQYXJhbXMuaWQpO1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEhpc3RvcnlDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gJ0FsbCc7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICcnO1xuXG4gIC8vIGdyYWIgYWxsIHRoZSBoaXN0b3J5IGRhdGFcbiAgJHNjb3BlLmhpc3RvcnlJdGVtcyA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAkc2NvcGUuY2hhbmdlRmlsdGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXIgPSB0eXBlO1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICh0eXBlID09ICdBbGwnKSA/ICcnIDogdHlwZTtcbiAgfTtcblxuICAkc2NvcGUucHJldmlld0l0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ3ByZXZpZXcnLCBpdGVtOiBpdGVtLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0UnVubmVyQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR0aW1lb3V0JywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICRzY29wZS5oYXNTZXR0aW5ncyA9IHRydWU7IC8vIFRPRE86IG1ha2UgdGhpcyByZWFsXG4gICRzY29wZS5oYXNSZWZlcmVuY2UgPSB0cnVlOyAvLyBUT0RPOiBtYWtlIHRoaXMgcmVhbFxuICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gJ0FsbCc7XG4gICRzY29wZS5iYXRjaEl0ZW1zID0gW107XG4gICRzY29wZS5hY3RpdmVEYXRhID0ge307XG4gICRzY29wZS5jdXJyZW50QmF0Y2ggPSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoIHx8IDA7XG4gICRzY29wZS5wcm9ncmVzcyA9IHtcbiAgICBwZXJjZW50OiAwXG4gIH07XG5cbiAgLy8gU2V0IHRoZSBhY3RpdmUgZGF0YSBiYXNlZCBvbiBjdXJyZW50QmF0Y2hcbiAgJHNjb3BlLmFjdGl2ZURhdGEgPSAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5WyRzY29wZS5jdXJyZW50QmF0Y2hdO1xuXG4gIC8vIFB1dHMgZGF0YSBpbnRvIHNvcnRlZCBzZWN0aW9uc1xuICBmdW5jdGlvbiBwcm9jZXNzQmF0Y2goYWxsRGF0YSkge1xuICAgIHZhciBmb3JtYXR0ZWQgPSBbeyB0eXBlOiAnc3VjY2VzcycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ3dhcm5pbmcnLCBpdGVtczogW119LCB7IHR5cGU6ICdlcnJvcicsIGl0ZW1zOiBbXX1dO1xuXG4gICAgZnVuY3Rpb24gcGxhY2VJdGVtKGl0ZW0pIHtcblxuICAgICAgLy8gS2VlcCB0aGluZ3Mgb3JnYW5pemVzIHdpdGggcHJlc2V0IHByaW9yaXR5XG4gICAgICBpZiAoaXRlbS5zdGF0dXMpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IDA7XG5cbiAgICAgICAgc3dpdGNoIChpdGVtLnN0YXR1cykge1xuICAgICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICB0YXJnZXQgPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXR0ZWRbdGFyZ2V0XS5pdGVtcy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsbERhdGEubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmJhdGNoID09PSAkc2NvcGUuY3VycmVudEJhdGNoKSB7XG4gICAgICAgIHBsYWNlSXRlbShvYmopO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgfVxuXG4gIC8vIFRPRE86XG4gIC8vICogUHJvZ3Jlc3MgQmFyXG4gIC8vICAgKiBMaXN0ZW4gdG8gUHJvZ3Jlc3MgZXZlbnRcbiAgLy8gKiBJbnRyb1xuICAvLyAgICogc2VlIGxhc3QgcnVuIChpZiBhbnkpXG4gIC8vICAgKiBzdGFydCBuZXcgcnVuXG4gIC8vICAgKiBzdGFydCByZWZlcmVuY2VcbiAgLy8gKiBTdGF0cyAocGFzcy9mYWlsKVxuICAvLyAgICogSW1hZ2VzIHdpdGggY2xpY2sgY29tcGFyZVxuXG4gICRzY29wZS5jaGFuZ2VGaWx0ZXIgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9IHR5cGU7XG4gIH07XG5cbiAgLy8gZ3JhYiBhbGwgdGhlIHJ1bm5lciB0ZXN0IGRhdGFcbiAgdmFyIGhpc3RvcnlEYXRhID0gUHJvamVjdHMuZ2V0VHlwZUJ5SWQoJHN0YXRlUGFyYW1zLmlkLCAnaGlzdG9yeScpO1xuXG4gIC8vIFN0b3JlIHRoZSBwcm9jZXNzZWQgZGF0YSBpbnRvIHRoZSBiYXRjaCBkYXRhXG4gICRzY29wZS5iYXRjaEl0ZW1zID0gcHJvY2Vzc0JhdGNoKGhpc3RvcnlEYXRhKTtcblxuICAvLyBGaXJlIG9mZiB0aGUgdmlld2VyXG4gICRzY29wZS5wcmV2aWV3QmF0Y2ggPSBmdW5jdGlvbihpdGVtcykge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdiYXRjaCcsIGl0ZW1zOiBpdGVtcywgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG4gIC8vIFRPRE86IGZpbmlzaFxuICAvLyBGaXJlIG9mZiBhIG5ldyB0ZXN0ISFcbiAgJHNjb3BlLnJ1bk5ld1Rlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IHRydWU7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gMTI7XG4gICAgfSwgMjAwKTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSA1NjtcbiAgICB9LCA3MDApO1xuXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IDkzO1xuICAgIH0sIDE4MDApO1xuXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIH0sIDIwMDApO1xuICB9O1xuXG4gICRyb290U2NvcGUuJG9uKCdSVU5ORVI6UFJPR1JFU1M6VVBEQVRFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncykge3JldHVybjt9XG5cbiAgICAvLyB1cGRhdGUgdGhlIHByb2dyZXNzIVxuICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gcGFyc2VJbnQoYXJncy5wZXJjZW50LCAxMCk7XG4gIH0pO1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdFNldHRpbmdzQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgdmFyIHNhdmVUaW1lcjtcblxuICAkc2NvcGUuc2VsZWN0b3JUeXBlcyA9IFsnY29udGFpbmVyJywgJ2hpZGUnLCAncmVtb3ZlJ107XG4gICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICRzY29wZS5tYXN0ZXIgPSB7fTtcbiAgYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCwgJHNjb3BlLm1hc3Rlcik7XG5cbiAgZnVuY3Rpb24gYWRkTmV3VHlwZSh0eXBlLCBkYXRhKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnB1c2goZGF0YSk7XG4gIH1cblxuICAvLyBXYXRjaCBmb3IgY2hhbmdlcywgc28gd2UgY2FuIHNhdmVcbiAgJHNjb3BlLiR3YXRjaCgncHJvamVjdCcsIGZ1bmN0aW9uKG5WLCBvVikge1xuICAgIGlmIChuViAhPSBvVikge1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSB0cnVlO1xuXG4gICAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICAgJHNjb3BlLnNhdmUoKTtcbiAgICB9XG4gIH0sIHRydWUpO1xuXG4gIC8vIFRPRE86IHNldHVwIHZhbGlkYXRpb25zXG4gIC8vIHNhdmUgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzYXZlVGltZXIpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoc2F2ZVRpbWVyKTtcbiAgICB9XG5cbiAgICAvLyB0aHJvdHRsZSB0aGUgc2F2ZXMsIHNpbmNlIHdlIHNhdmUgb24gYW55IGNoYW5nZXNcbiAgICBzYXZlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAvLyBTYXZlIHRlaCBwcm9qZWN0b2lkXG4gICAgICBQcm9qZWN0cy5zYXZlKCRyb290U2NvcGUucHJvamVjdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzaWRlYmFyIHdpdGggY2hhbmdlc1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpVUERBVEUnLCByZXMpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXZlcnQgbW9kZWxcbiAgICAgICAgICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LCAyMDApO1xuICB9O1xuXG4gIC8vIHJldmVydCB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5jYW5jZWxTYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2xlYXIgYWxsIHlvdXIgY2hhbmdlcz8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgLy8gcHV0IHJldmVydCBtb2RlbCBpbnRvIHRoZSBwcm9qZWN0IG1vZGVsXG4gICAgICBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3RlciwgJHJvb3RTY29wZS5wcm9qZWN0KTtcbiAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8vIGRlbGV0ZSB0aGUgcHJvamVjdCwgYW5kIHJlbW92ZSBmcm9tIHByb2plY3QgbGlzdHMsIHRoZW4gcmVkaXJlY3QgdG8gbWFpblxuICAkc2NvcGUuZGVsZXRlUHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdXJlID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2plY3Q/Jyk7XG4gICAgaWYgKHN1cmUpIHtcbiAgICAgIHZhciBwcm9qZWN0SUQgPSAkcm9vdFNjb3BlLnByb2plY3QuaWQ7XG5cbiAgICAgIFByb2plY3RzLnJlbW92ZShwcm9qZWN0SUQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpSRU1PVkUnLCB7IGlkOiBwcm9qZWN0SUQgfSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdtYWluJyk7XG4gICAgICAgICAgJHJvb3RTY29wZS5wcm9qZWN0ID0ge307XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkcyBhIG5ldyB2aWV3cG9ydCBpdGVtXG4gICRzY29wZS5hZGRWaWV3cG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdWaWV3cG9ydCA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbCxcbiAgICAgIGhlaWdodDogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCd2aWV3cG9ydHMnLCBuZXdWaWV3cG9ydCk7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBzZWxlY3RvciBpdGVtXG4gICRzY29wZS5hZGRTZWxlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTZWxlY3RvciA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIHR5cGU6ICdjb250YWluZXInLFxuICAgICAgcXVlcnk6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnc2VsZWN0b3JzJywgbmV3U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8vIEFkZHMgYSBuZXcgY29va2llIGl0ZW1cbiAgJHNjb3BlLmFkZENvb2tpZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdDb29raWUgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBwYXRoOiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ2Nvb2tpZXMnLCBuZXdDb29raWUpO1xuICB9O1xuXG4gIC8vIGFjdGl2YXRlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5hY3RpdmF0ZVR5cGUgPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID0gKCRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSB0cnVlIHx8ICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSAndHJ1ZScpID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG4gIC8vIFJlbW92ZSBhIGNvb2tpZS92aWV3L3NlbGVjdFxuICAkc2NvcGUuZGVsZXRlVHlwZUl0ZW0gPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5zcGxpY2UoaWQsIDEpO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuY29udHJvbGxlcignU2lkZVBhbmVsQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2plY3RzID0gW107XG5cbiAgLy8gZ3JhYiBhbGwgcHJvamVjdHMgbGlzdFxuICAkc2NvcGUucHJvamVjdHMgPSBQcm9qZWN0cy5nZXRBbGwoKTtcblxuICAvLyBhZGQgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy51bnNoaWZ0KGFyZ3MpO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XSA9IGFyZ3M7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOlJFTU9WRScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmlkID09PSBhcmdzLmlkKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgJHNjb3BlLmdvVG9Qcm9qZWN0ID0gZnVuY3Rpb24oaWQpIHtcbiAgICB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG5cbiAgICAvLyBUT0RPOiBzZXR1cCB0byBmaWd1cmUgb3V0IGlmIHdlIG5lZWQgdG8gZ28gdG8gc2V0dGluZ3MsIG90aGVyd2lzZSBnbyB0byBydW5uZXJcbiAgICAkc3RhdGUuZ28oJ3Byb2plY3RzLicgKyB0eXBlLCB7IGlkOiBpZCB9KTtcbiAgICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSBpZDtcbiAgfVxuXG59XSk7XG4iLCIvKipcbiAqIENvbmZpZ1xuICovXG5NVUcuY29uc3RhbnQoJ0NvbmZpZycsIHtcbiAgRU5WOiAnU1RBR0UnLFxuICBTVEFHRToge1xuICB9LFxuICBQUk9EOiB7XG4gIH0sXG4gIENvbXBhcmU6IHtcbiAgICBlcnJvckNvbG9yOiB7XG4gICAgICByZWQ6IDI1NSxcbiAgICAgIGdyZWVuOiAwLFxuICAgICAgYmx1ZTogMjU1XG4gICAgfSxcbiAgICBlcnJvclR5cGU6ICdmbGF0JyxcbiAgICB0cmFuc3BhcmVuY3k6IDEsXG4gICAgbGFyZ2VJbWFnZVRocmVzaG9sZDogMFxuICB9XG59KTtcbiIsIk1VRy5jb25maWcoXG5bJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG5mdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgLy8gUm91dGVzXG4gIC8vIC9cbiAgLy8gL3Byb2plY3RzXG4gIC8vIC9wcm9qZWN0cy86aWQvcnVubmVyXG4gIC8vIC9wcm9qZWN0cy86aWQvaGlzdG9yeVxuICAvLyAvcHJvamVjdHMvOmlkL3NldHRpbmdzXG5cbiAgJHN0YXRlUHJvdmlkZXJcblxuICAvKipcbiAgICogQmFzZSBSb3V0ZVxuICAgKi9cbiAgLnN0YXRlKCdtYWluJywge1xuICAgIHVybDogJy8nLFxuICAgIHRlbXBsYXRlVXJsOiAnbWFpbi5odG1sJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBQcm9qZWN0IFJvdXRlc1xuICAgKi9cbiAgLnN0YXRlKCdwcm9qZWN0cycsIHtcbiAgICB1cmw6ICcvcHJvamVjdHMvOmlkJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0Q3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5zZXR0aW5ncycsIHtcbiAgICB1cmw6ICcvc2V0dGluZ3MnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuc2V0dGluZ3MuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RTZXR0aW5nc0N0cmwnXG4gIH0pXG4gIC5zdGF0ZSgncHJvamVjdHMucnVubmVyJywge1xuICAgIHVybDogJy9ydW5uZXInLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMucnVubmVyLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0UnVubmVyQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5oaXN0b3J5Jywge1xuICAgIHVybDogJy9oaXN0b3J5JyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLmhpc3RvcnkuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RIaXN0b3J5Q3RybCdcbiAgfSlcblxuICAvKipcbiAgICogU3RhdGljIFJvdXRlc1xuICAgKi9cblxuICAvLyAuc3RhdGUoJ21haW4uNDA0Jywge1xuICAvLyAgICAgdXJsOiBcIi80MDRcIixcbiAgLy8gICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy80MDQuaHRtbFwiLFxuICAvLyAgICAgaXNFeHRlcm5hbDogdHJ1ZVxuICAvLyB9KVxuXG4gIC8vIEVuZCBvZiB0aGUgd29ybGRcbiAgO1xuXG4gIC8vIHVybCByZS1yb3V0aW5nXG4gIC8vICR1cmxSb3V0ZXJQcm92aWRlclxuICAvLyAgIC53aGVuKCcvcHJvamVjdHMnLCAnLycpXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cy8nLCAnLycpO1xuXG4gIC8vIGlmIG5vbmUgb2YgdGhlIGFib3ZlIHN0YXRlcyBhcmUgbWF0Y2hlZCwgdXNlIHRoaXMgYXMgdGhlIGZhbGxiYWNrXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn1dKTtcbiIsIk1VRy5ydW4oWyckcm9vdFNjb3BlJywgJyRodHRwJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRodHRwKSB7XG5cbiAgLy8gaGVhZGVyc1xuICB2YXIgJGNvbW1vbiA9ICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uO1xuICAkY29tbW9uWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnJHN0YXRlQ2hhbmdlRXJyb3InLCBlcnJvcik7XG4gIH0pO1xuXG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=