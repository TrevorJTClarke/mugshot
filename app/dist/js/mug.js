var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){var o="modal-open",i="modal-visible";e.activeItem={},e.viewer={items:[]},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(r,n){n&&n.type&&("preview"===n.type&&(e.activeItem=n.item,e.viewer=n.project||{}),t.addClass(o),setTimeout(function(){t.addClass(i)},30))}),e.close=function(){t.removeClass(i),setTimeout(function(){t.removeClass(o)},230)}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=f.replace("BODY",i).replace("ICON",c),g=r(a)(n);g[0].id=o,m=o,p.append(g);var h=p.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},d)}function s(e){if(!e&&m)e=p.find("#"+m);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,f='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',p=angular.element(o),d=5e3,m="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=p.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(d=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",c=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(c+e+".json")},getTypeById:function(e,t){return o(c+e+"_"+t+".json",[])},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),a=r(o.length),s=n(a);return o.unshift(a),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void t.resolve(a)})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(c+t+".json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})}),r.promise}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,f=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),p=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,f,i].join(p).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]),MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var t=0;switch(e.status){case"warning":t=1;break;case"failed":t=2}n[t].items.unshift(e)}}var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),n}t.processing=!1,t.hasSettings=!0,t.hasReference=!0,t.activeFilter="All",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0},t.activeData=e.project.batchHistory[t.currentBatch],t.changeFilter=function(e){t.activeFilter=e};var c=o.getTypeById(n.id,"history");t.batchItems=i(c),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.runNewTest=function(){t.processing=!0,r(function(){t.progress.percent=12},200),r(function(){t.progress.percent=56},700),r(function(){t.progress.percent=93},1800),r(function(){t.processing=!1},2e3)},e.$on("RUNNER:PROGRESS:UPDATE",function(e,r){r&&(t.progress.percent=parseInt(r.percent,10))})}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1},function(e){console.log("err",e)})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n]=r)})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="settings";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZhZGVpbi5qcyIsIm1vZGFsLmpzIiwibXNnY2VudGVyLmpzIiwidGltZWFnby5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsIm9mZnNldCIsInBhcnNlSW50IiwiZmFkZUluIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwiY3NzIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiRyb290U2NvcGUiLCJyZXBsYWNlIiwidGVtcGxhdGVVcmwiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRyIiwibW9kYWxBY3RpdmUiLCJtb2RhbFZpc2libGUiLCJhY3RpdmVJdGVtIiwidmlld2VyIiwiaXRlbXMiLCIkb24iLCJlIiwiYXJncyIsImNsb3NlIiwidHlwZSIsIml0ZW0iLCJwcm9qZWN0IiwicmVtb3ZlQ2xhc3MiLCJlbCIsImN0cmwiLCJzaG93TWVzc2FnZSIsImRhdGEiLCJfaWQiLCJEYXRlIiwibmV3Qm9keSIsIm1zZyIsIm5ld0ljbiIsImljb24iLCJkZWZhdWx0SWNvbiIsInRlbXBsYXRlIiwibXNnVGVtcGxhdGUiLCJuZXdNZXNzYWdlIiwiaWQiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwibXNnRWwiLCJmaW5kIiwiY2hhbmdlVHlwZSIsImNhbGxiYWNrIiwidGltZXIiLCJjbGVhckVsIiwiZHVyYXRpb24iLCJlbGVtZW50IiwicmVtb3ZlIiwiYm9keSIsImFjdGlvbiIsImFjdGlvbkVsIiwidGhpcyIsIndpbmRvdyIsImNsZWFyVGltZW91dCIsImR1ciIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCIkd2F0Y2giLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmYWN0b3J5Iiwibm93IiwidXBkYXRlVGltZSIsImZzIiwicmVxdWlyZSIsIiRxIiwiY3JlYXRlVVVJRCIsInMiLCJBcnJheSIsImpvaW4iLCJuIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY3JlYXRlRHVtbXlQcm9qZWN0IiwidG90YWwiLCJwcm9qZWN0SWQiLCJ0aXRsZSIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwidmlld3BvcnRzIiwic2VsZWN0b3JzIiwiY29va2llcyIsIm1ldGEiLCJ1cmwiLCJyZWFkeUV2ZW50IiwiZGVsYXkiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicGF0aCIsImZpbGUiLCJyZWFkRmlsZVN5bmMiLCJjb2RlIiwiSlNPTiIsInByb2plY3RzUGF0aCIsIl9fZGlybmFtZSIsInByb2plY3RGaWxlc1BhdGgiLCJnZXRBbGwiLCJnZXRCeUlkIiwiZ2V0VHlwZUJ5SWQiLCJjcmVhdGVOZXciLCJkZmQiLCJkZWZlciIsImFsbFByb2plY3RzIiwibmV3UHJvamVjdERhdGEiLCJsZW5ndGgiLCJuZXdQcm9qZWN0RmlsZSIsInVuc2hpZnQiLCJ3cml0ZUZpbGUiLCJzdHJpbmdpZnkiLCJlcnIiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsInNhdmUiLCJwcm9qZWN0RGF0YSIsIm1hcCIsIm9iaiIsImlkeCIsInNwbGljZSIsInVubGluayIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiY29udHJvbGxlciIsIiRzdGF0ZSIsIkNvbmZpZyIsIlByb2plY3RzIiwiY3VycmVudFByb2plY3RJZCIsImNyZWF0ZU5ld1Byb2plY3QiLCJ0aGVuIiwicmVzIiwiJGJyb2FkY2FzdCIsImdvIiwiY29uc29sZSIsImxvZyIsIiRzdGF0ZVBhcmFtcyIsImFjdGl2ZUZpbHRlciIsImFjdGl2ZUZpbHRlclF1ZXJ5IiwiaGlzdG9yeUl0ZW1zIiwiY2hhbmdlRmlsdGVyIiwicHJldmlld0l0ZW0iLCIkZW1pdCIsInByb2Nlc3NCYXRjaCIsImFsbERhdGEiLCJwbGFjZUl0ZW0iLCJzdGF0dXMiLCJ0YXJnZXQiLCJmb3JtYXR0ZWQiLCJiYXRjaCIsImN1cnJlbnRCYXRjaCIsInByb2Nlc3NpbmciLCJoYXNTZXR0aW5ncyIsImhhc1JlZmVyZW5jZSIsImJhdGNoSXRlbXMiLCJhY3RpdmVEYXRhIiwicHJvZ3Jlc3MiLCJwZXJjZW50IiwiYmF0Y2hIaXN0b3J5IiwiaGlzdG9yeURhdGEiLCJwcmV2aWV3QmF0Y2giLCJydW5OZXdUZXN0IiwiYWRkTmV3VHlwZSIsInB1c2giLCJzYXZlVGltZXIiLCJzZWxlY3RvclR5cGVzIiwiaGFzQ2hhbmdlcyIsIm1hc3RlciIsImNvcHkiLCJuViIsIm9WIiwiY2FuY2VsU2F2ZSIsInN1cmUiLCJjb25maXJtIiwiZGVsZXRlUHJvamVjdCIsInByb2plY3RJRCIsImFkZFZpZXdwb3J0IiwibmV3Vmlld3BvcnQiLCJhY3RpdmUiLCJuYW1lIiwid2lkdGgiLCJoZWlnaHQiLCJhZGRTZWxlY3RvciIsIm5ld1NlbGVjdG9yIiwicXVlcnkiLCJhZGRDb29raWUiLCJuZXdDb29raWUiLCJhY3RpdmF0ZVR5cGUiLCJkZWxldGVUeXBlSXRlbSIsInByb2plY3RzIiwiZ29Ub1Byb2plY3QiLCJjb25zdGFudCIsIkVOViIsIlNUQUdFIiwiUFJPRCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJvdGhlcndpc2UiLCJydW4iLCIkaHR0cCIsIiRjb21tb24iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsV0FBQSxZQUFBLGdCQ0lBRixLQUFBRyxVQUFBLFVBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxTQUFBRixFQUFBRyxTQUFBLEVBQ0FKLEdBQUFLLFNBQUEsV0FFQUMsV0FBQSxXQUNBTixFQUFBTyxJQUFBLFVBQUEsTUFDQUwsUUNOQVQsSUFBQUcsVUFBQSxTQUNBLFdBQUEsV0FBQSxhQUNBLFNBQUFZLEVBQUFDLEVBQUFDLEdBQ0EsT0FDQWIsU0FBQSxJQUNBYyxTQUFBLEVBQ0FDLFlBQUEsYUFDQWIsU0FDQUQsS0FBQSxTQUFBZSxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsYUFDQUMsRUFBQSxlQUVBSixHQUFB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QWdMLFdBQUEsd0JBRUEwRSxNQUFBLG1CQUNBN0osSUFBQSxVQUNBN0YsWUFBQSx1QkFDQWdMLFdBQUEsc0JBRUEwRSxNQUFBLG9CQUNBN0osSUFBQSxXQUNBN0YsWUFBQSx3QkFDQWdMLFdBQUEsdUJBc0JBeUUsRUFBQUUsVUFBQSxRQ2hFQTlRLElBQUErUSxLQUFBLGFBQUEsUUFDQSxTQUFBOVAsRUFBQStQLEdBR0EsR0FBQUMsR0FBQUQsRUFBQUUsU0FBQUMsUUFBQUMsTUFDQUgsR0FBQSxnQkFBQSxtQkFFQWhRLEVBQUFXLElBQUEsb0JBQUEsU0FBQXlQLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFqTCxHQUNBcUcsUUFBQUMsSUFBQSxvQkFBQXRHIiwiZmlsZSI6Im11Zy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNVUcgPSBhbmd1bGFyLm1vZHVsZSgnbXVnc2hvdCcsIFsndWkucm91dGVyJywgJ211Z3RlbXBsYXRlcyddKTtcbiIsIi8qKlxuICogZmFkZUluXG4gKiBBIGRpcmVjdGl2ZSBmb3IgYW5pbWF0aW5nIGluIGVsZW1lbnRzXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ2ZhZGVJbicsIFsgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludChhdHRycy5mYWRlSW4pIHx8IDEwO1xuICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZmFkZS1pbicpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbGVtLmNzcyhcIm9wYWNpdHlcIiwgXCIxXCIpO1xuICAgICAgICAgICAgfSwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iLCIvKipcbiAqIE1vZGFsXG4gKiBCdWlsZHMgYSBtb2RhbCBmb3IgaW1hZ2Ugdmlld2luZyBhbmQgY29tcGFyaW5nXG4gKlxuICogQHVzYWdlXG4gKiA8bW9kYWw+PC9tb2RhbD5cbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbW9kYWwnLFxuWyckdGltZW91dCcsICckY29tcGlsZScsICckcm9vdFNjb3BlJyxcbmZ1bmN0aW9uKCR0aW1lb3V0LCAkY29tcGlsZSwgJHJvb3RTY29wZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ21vZGFsLmh0bWwnLFxuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cikge1xuICAgICAgdmFyIG1vZGFsQWN0aXZlID0gJ21vZGFsLW9wZW4nO1xuICAgICAgdmFyIG1vZGFsVmlzaWJsZSA9ICdtb2RhbC12aXNpYmxlJztcblxuICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSB7fTtcbiAgICAgICRzY29wZS52aWV3ZXIgPSB7XG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBtc2dDZW50ZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgbWVzc2FnZSByZWxheSBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdNU0dDRU5URVI6RklSRScsIHsgbXNnOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIERFRkFVTFQsIHNob3dzIGdyZWVuIG1lc3NhZ2UsIHVzZWQgZm9yIHN1Y2Nlc3NcbiAqIC0gV2FybmluZzogXCJ3YXJuXCIgLSBzaG93cyBvcmFuZ2UgbWVzc2FnZSwgdXNlZCBmb3IgZXJyb3JzIG9yIHdhcm5pbmdzXG4gKiAtIEluZm86IFwiaW5mb1wiIC0gc2hvd3MgZGFyayBibHVlIG1lc3NhZ2UsIHVzZWQgZm9yIGdlbmVyYWwgdGhpbmdzXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gbXNnOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBkZWZhdWx0IGlzIGdsb2JlLCBjYW4gYmUgc2V0IHRvIEFOWSBpLXNwcml0ZXMgKHNwcml0ZXMubGVzcylcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbXNnQ2VudGVyJyxcblsgXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkY29tcGlsZVwiLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIG1zZ1RlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtc2dcIiBuZy1jbGljaz1cImFjdGlvbigpXCI+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1pY25cIj48aSBjbGFzcz1cIml3IGktSUNPTlwiPjwvaT48L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWNvbnRcIj5CT0RZPC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1hY3Rpb25cIj48aSBjbGFzcz1cImliIGktci1hcnJvd1wiPjwvaT48L2Rpdj4nK1xuICAgICAgICAnPC9kaXY+JztcblxuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSBcIlwiO1xuICAgICAgdmFyIGRlZmF1bHRJY29uID0gXCJpbmZvXCI7XG5cbiAgICAgIHNjb3BlLmJvZHkgPSBcIlwiO1xuICAgICAgc2NvcGUuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgc2NvcGUuaWNvbiA9IGRlZmF1bHRJY29uO1xuICAgICAgc2NvcGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFjdGlvbkVsID0gX2VsLmZpbmQoXCIjXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgc2NvcGUuY2FsbGJhY2soKTtcbiAgICAgICAgY2xlYXJFbCggYWN0aW9uRWwgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlICggZGF0YSApe1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLm1zZztcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pPyBkYXRhLmljb24gOiBkZWZhdWx0SWNvbjtcblxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBtc2dUZW1wbGF0ZS5yZXBsYWNlKFwiQk9EWVwiLCBuZXdCb2R5KS5yZXBsYWNlKFwiSUNPTlwiLCBuZXdJY24pO1xuICAgICAgICB2YXIgbmV3TWVzc2FnZSA9ICRjb21waWxlKHRlbXBsYXRlKShzY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIG5ld01lc3NhZ2VbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKCBuZXdNZXNzYWdlICk7XG5cbiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIG5ldyBlbCBmb3IgbGF0ZXJcbiAgICAgICAgdmFyIG1zZ0VsID0gX2VsLmZpbmQoXCIjXCIgKyBfaWQpO1xuICAgICAgICBjaGFuZ2VUeXBlKCBtc2dFbCwgZGF0YS50eXBlICk7XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgbXNnRWwuZmluZChcIi5tc2ctYWN0aW9uXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbXNnRWwuYWRkQ2xhc3MoJ2FkZCcpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsZWFyRWwoIG1zZ0VsICk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbCAoIGVsZW0gKSB7XG4gICAgICAgIGlmKCFlbGVtICYmIHByZXZpb3VzSWQpe1xuICAgICAgICAgIGVsZW0gPSBfZWwuZmluZChcIiNcIiArIHByZXZpb3VzSWQpO1xuICAgICAgICB9IGVsc2UgaWYoIWVsZW0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnYWRkJyk7XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHRoZSB0eXBlIGJ5IGEgY2xhc3NcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVR5cGUgKCBlbGVtLCB0eXBlICkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctaW5mbycpO1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctd2FybicpO1xuXG4gICAgICAgIGlmKHR5cGUpe1xuICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21zZy0nICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01TR0NFTlRFUjpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLm1zZyl7IHJldHVybjsgfVxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmKGRhdGEuZHVyKXtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIHNjb3BlLmNhbGxiYWNrID0gZGF0YS5jYWxsYmFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKCBkYXRhICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgndGltZUFnbycsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlcnZpY2UgPSB7fTtcblxuICBzZXJ2aWNlLnNldHRpbmdzID0ge1xuICAgIHJlZnJlc2hNaWxsaXM6IDYwMDAwLFxuICAgIGFsbG93RnV0dXJlOiBmYWxzZSxcbiAgICBzdHJpbmdzOiB7XG4gICAgICBwcmVmaXhBZ286IG51bGwsXG4gICAgICBwcmVmaXhGcm9tTm93OiBudWxsLFxuICAgICAgc3VmZml4QWdvOiAnYWdvJyxcbiAgICAgIHN1ZmZpeEZyb21Ob3c6ICdmcm9tIG5vdycsXG4gICAgICBzZWNvbmRzOiAnbGVzcyB0aGFuIGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZTogJ2Fib3V0IGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZXM6ICclZCBtaW51dGVzJyxcbiAgICAgIGhvdXI6ICdhYm91dCBhbiBob3VyJyxcbiAgICAgIGhvdXJzOiAnJWQgaG91cnMnLFxuICAgICAgZGF5OiAnYSBkYXknLFxuICAgICAgZGF5czogJyVkIGRheXMnLFxuICAgICAgbW9udGg6ICdhYm91dCBhIG1vbnRoJyxcbiAgICAgIG1vbnRoczogJyVkIG1vbnRocycsXG4gICAgICB5ZWFyOiAnYWJvdXQgYSB5ZWFyJyxcbiAgICAgIHllYXJzOiAnJWQgeWVhcnMnLFxuICAgICAgbnVtYmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdHJpbURpZ2l0cyAoIG51bSApIHtcbiAgICAgIHZhciBtID0gbnVtLnRvU3RyaW5nKCkuc2xpY2UoMCwxMyk7XG4gICAgICByZXR1cm4gKG0ubGVuZ3RoID09IDEzKT8gcGFyc2VJbnQobSkgOiBudW07XG4gIH1cblxuICBzZXJ2aWNlLmluV29yZHMgPSBmdW5jdGlvbiAoZGlzdGFuY2VNaWxsaXMpIHtcbiAgICB2YXIgJGwgPSBzZXJ2aWNlLnNldHRpbmdzLnN0cmluZ3M7XG4gICAgdmFyIHByZWZpeCA9ICRsLnByZWZpeEFnbztcbiAgICB2YXIgc3VmZml4ID0gJGwuc3VmZml4QWdvO1xuICAgIGlmIChzZXJ2aWNlLnNldHRpbmdzLmFsbG93RnV0dXJlKSB7XG4gICAgICBpZiAoZGlzdGFuY2VNaWxsaXMgPCAwKSB7XG4gICAgICAgIHByZWZpeCA9ICRsLnByZWZpeEZyb21Ob3c7XG4gICAgICAgIHN1ZmZpeCA9ICRsLnN1ZmZpeEZyb21Ob3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBNYXRoLmFicyhkaXN0YW5jZU1pbGxpcykgLyAxMDAwO1xuICAgIHZhciBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xuICAgIHZhciBob3VycyA9IG1pbnV0ZXMgLyA2MDtcbiAgICB2YXIgZGF5cyA9IGhvdXJzIC8gMjQ7XG4gICAgdmFyIHllYXJzID0gZGF5cyAvIDM2NTtcblxuICAgIGZ1bmN0aW9uIHN1YnN0aXR1dGUoc3RyaW5nT3JGdW5jdGlvbiwgbnVtYmVyKSB7XG4gICAgICB2YXIgc3RyaW5nID0gYW5ndWxhci5pc0Z1bmN0aW9uKHN0cmluZ09yRnVuY3Rpb24pID9cbiAgICAgIHN0cmluZ09yRnVuY3Rpb24obnVtYmVyLCBkaXN0YW5jZU1pbGxpcykgOiBzdHJpbmdPckZ1bmN0aW9uO1xuICAgICAgdmFyIHZhbHVlID0gKCRsLm51bWJlcnMgJiYgJGwubnVtYmVyc1tudW1iZXJdKSB8fCBudW1iZXI7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyVkL2ksIHZhbHVlKTtcbiAgICB9XG5cbiAgICB2YXIgd29yZHMgPSBzZWNvbmRzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5zZWNvbmRzLCBNYXRoLnJvdW5kKHNlY29uZHMpKSB8fFxuICAgICAgICBzZWNvbmRzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGUsIDEpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZXMsIE1hdGgucm91bmQobWludXRlcykpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLmhvdXIsIDEpIHx8XG4gICAgICAgIGhvdXJzIDwgMjQgJiYgc3Vic3RpdHV0ZSgkbC5ob3VycywgTWF0aC5yb3VuZChob3VycykpIHx8XG4gICAgICAgIGhvdXJzIDwgNDIgJiYgc3Vic3RpdHV0ZSgkbC5kYXksIDEpIHx8XG4gICAgICAgIGRheXMgPCAzMCAmJiBzdWJzdGl0dXRlKCRsLmRheXMsIE1hdGgucm91bmQoZGF5cykpIHx8XG4gICAgICAgIGRheXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRoLCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzY1ICYmIHN1YnN0aXR1dGUoJGwubW9udGhzLCBNYXRoLnJvdW5kKGRheXMgLyAzMCkpIHx8XG4gICAgICAgIHllYXJzIDwgMS41ICYmIHN1YnN0aXR1dGUoJGwueWVhciwgMSkgfHxcbiAgICAgICAgc3Vic3RpdHV0ZSgkbC55ZWFycywgTWF0aC5yb3VuZCh5ZWFycykpO1xuXG4gICAgdmFyIHNlcGFyYXRvciA9ICRsLndvcmRTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCA/ICcgJyA6ICRsLndvcmRTZXBhcmF0b3I7XG4gICAgcmV0dXJuIFtwcmVmaXgsIHdvcmRzLCBzdWZmaXhdLmpvaW4oc2VwYXJhdG9yKS50cmltKCk7XG4gIH07XG5cbiAgc2VydmljZS5wYXJzZSA9IGZ1bmN0aW9uIChpc284NjAxKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoaXNvODYwMSkpIHtcbiAgICAgIGlzbzg2MDEgPSBpc284NjAxICsgXCJcIjtcbiAgICAgIC8vIGZvcm1hdCBmb3IgY29ycmVjdCBsZW5ndGhcbiAgICAgIHZhciBvcmlnaW5hbFRpbWVzdGFtcCA9IHRyaW1EaWdpdHMoIGlzbzg2MDEgKTtcbiAgICAgIHJldHVybiBwYXJzZUludChvcmlnaW5hbFRpbWVzdGFtcCwgMTApO1xuICAgIH1cbiAgICB2YXIgcyA9IChpc284NjAxIHx8ICcnKS50cmltKCk7XG4gICAgcyA9IHMucmVwbGFjZSgvXFwuXFxkKy8sICcnKTsgLy8gcmVtb3ZlIG1pbGxpc2Vjb25kc1xuICAgIHMgPSBzLnJlcGxhY2UoLy0vLCAnLycpLnJlcGxhY2UoLy0vLCAnLycpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1QvLCAnICcpLnJlcGxhY2UoL1ovLCAnIFVUQycpO1xuICAgIHMgPSBzLnJlcGxhY2UoLyhbXFwrXFwtXVxcZFxcZClcXDo/KFxcZFxcZCkvLCAnICQxJDInKTsgLy8gLTA0OjAwIC0+IC0wNDAwXG4gICAgcmV0dXJuIG5ldyBEYXRlKHMpO1xuICB9O1xuXG4gIHJldHVybiBzZXJ2aWNlO1xufSk7XG4iLCJNVUcuZmFjdG9yeSgnbm93VGltZScsXG5bJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gIHZhciBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgdmFyIHVwZGF0ZVRpbWUgPSBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdXBkYXRlVGltZSgpO1xuICAgIH0sIDEwMDApO1xuICB9O1xuXG4gIHVwZGF0ZVRpbWUoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRUaW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBub3dUaW1lO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5mYWN0b3J5KCdQcm9qZWN0cycsXG5bJyRxJyxcbmZ1bmN0aW9uKCRxKSB7XG4gIC8vIENvbmZpZyB0aGUgbWFpbiBwYXRoc1xuICB2YXIgcHJvamVjdHNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy5qc29uJztcbiAgdmFyIHByb2plY3RGaWxlc1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLyc7XG5cbiAgLy8gQ3JlYXRlcyBhIFVVSUQgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGhcbiAgZnVuY3Rpb24gY3JlYXRlVVVJRChzKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKHR5cGVvZiBzID09ICdudW1iZXInICYmIHMgPT09IHBhcnNlSW50KHMsIDEwKSkge1xuICAgICAgcyA9IEFycmF5KHMgKyAxKS5qb2luKCd4Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMucmVwbGFjZSgveC9nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNjEpICsgNDg7XG4gICAgICBuID0gbiA+IDU3ID8gKG4gKyA3ID4gOTAgPyBuICsgMTMgOiBuICsgNykgOiBuO1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDcmVhdGVzIGEgSlNPTiBvYmplY3QgZm9yIGEgYmFzZWxpbmUgbmV3IHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0KHRvdGFsKSB7XG4gICAgdG90YWwgPSB0b3RhbCB8fCAwO1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgIHRpdGxlOiAnUHJvamVjdCAnICsgKHBhcnNlSW50KHRvdGFsLCAxMCkgKyAxKSxcbiAgICAgIHRpbWVzdGFtcDogKCtuZXcgRGF0ZSksXG4gICAgICB0b3RhbHM6IHtcbiAgICAgICAgc3VjY2VzczogbnVsbCxcbiAgICAgICAgd2FybmluZzogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHZpZXdzOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIG5lZWRlZCBiYXNlIGRhdGEgZm9yIHN0b3JpbmcgYW4gaW5kaXZpZHVhbCBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdEZpbGUob3B0aW9ucykge1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSxcbiAgICAgIHRpbWVzdGFtcDogb3B0aW9ucy50aW1lc3RhbXAsXG4gICAgICB2aWV3cG9ydHM6IFtdLFxuICAgICAgc2VsZWN0b3JzOiBbXSxcbiAgICAgIGNvb2tpZXM6IFtdLFxuICAgICAgbWV0YToge1xuICAgICAgICB1cmw6IG51bGwsXG4gICAgICAgIHJlYWR5RXZlbnQ6IG51bGwsXG4gICAgICAgIGRlbGF5OiBudWxsLFxuICAgICAgICBtaXNNYXRjaFRocmVzaG9sZDogbnVsbFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBHcmFicyBKU09OIGZpbGUgYW5kIGFwcHJvcHJpYXRlbHkgaGFuZGxlcyBlcnJvcnNcbiAgZnVuY3Rpb24gZ2V0SnNvbkZpbGUocGF0aCwgdHlwZSkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGUgPSBmcy5yZWFkRmlsZVN5bmMocGF0aCwgJ3V0ZjgnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBjb3VsZG4ndCBmaW5kIGZpbGVcbiAgICAgIGlmIChlLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICAgIHJldHVybiB0eXBlIHx8IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5wYXJzZShmaWxlKTtcbiAgfVxuXG4gIHJldHVybiB7XG5cbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuICAgIH0sXG5cbiAgICBnZXRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicpO1xuICAgIH0sXG5cbiAgICBnZXRUeXBlQnlJZDogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnXycgKyB0eXBlICsgJy5qc29uJywgW10pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgbmV3IHByb2plY3QsIGFuZCByZXR1cm5zIHRoZSBkYXRhIGluIGEgcHJvbWlzZVxuICAgICAqL1xuICAgIGNyZWF0ZU5ldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG4gICAgICB2YXIgbmV3UHJvamVjdERhdGEgPSBjcmVhdGVEdW1teVByb2plY3QoYWxsUHJvamVjdHMubGVuZ3RoKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RmlsZSA9IGNyZWF0ZUR1bW15UHJvamVjdEZpbGUobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICBhbGxQcm9qZWN0cy51bnNoaWZ0KG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkobmV3UHJvamVjdEZpbGUpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgIGRmZC5yZXNvbHZlKG5ld1Byb2plY3REYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlIHRvIGZpbGUgYW5kIGxpc3RzLCByZXR1cm4gbGlzdCBkYXRhXG4gICAgc2F2ZTogZnVuY3Rpb24ocHJvamVjdERhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0RGF0YS5pZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGl0bGUgPSBwcm9qZWN0RGF0YS50aXRsZTtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9ICgrbmV3IERhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0RGF0YSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJldHVybiB0aGUgbGlzdGluZyBkYXRhLCBzbyB3ZSBjYW4gdXBkYXRlIHRoZSBzaWRlcGFuZWxcbiAgICAgICAgICBkZmQucmVzb2x2ZShwcm9qZWN0RGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlcyBhIHNpbmdsZSBwcm9qZWN0IGJ5IElEXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IGlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIHByb2plY3QgZmlsZVxuICAgICAgZnMudW5saW5rKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJldHVyblxuICAgICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmlsdGVyKCd0aW1lQWdvJyxcblsnbm93VGltZScsICd0aW1lQWdvJyxcbmZ1bmN0aW9uIChub3dUaW1lLCB0aW1lQWdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZnJvbVRpbWUgPSB0aW1lQWdvLnBhcnNlKHZhbHVlKTtcbiAgICB2YXIgZGlmZiA9IG5vd1RpbWUuZ2V0VGltZSgpIC0gZnJvbVRpbWU7XG4gICAgcmV0dXJuIHRpbWVBZ28uaW5Xb3JkcyhkaWZmKTtcbiAgfTtcbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdNYWluQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdDb25maWcnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIENvbmZpZywgUHJvamVjdHMpIHtcbiAgJHJvb3RTY29wZS5jdXJyZW50UHJvamVjdElkID0gJyc7XG5cbiAgJHNjb3BlLmNyZWF0ZU5ld1Byb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICBQcm9qZWN0cy5jcmVhdGVOZXcoKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdTSURFUEFORUw6TkVXUFJPSkVDVCcsIHJlcyk7XG4gICAgICAkc3RhdGUuZ28oJ3Byb2plY3RzLnNldHRpbmdzJywgeyBpZDogcmVzLmlkIH0pO1xuICAgIH0sXG5cbiAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG5cbiAgLy8gQWxsb3cgdGhlIGNoaWxkIHZpZXdzIHRvIGJpbmQgdG8gc2FtZSBzY29wZVxuICAkcm9vdFNjb3BlLnByb2plY3QgPSBQcm9qZWN0cy5nZXRCeUlkKCRzdGF0ZVBhcmFtcy5pZCk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0SGlzdG9yeUN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAnQWxsJztcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gJyc7XG5cbiAgLy8gZ3JhYiBhbGwgdGhlIGhpc3RvcnkgZGF0YVxuICAkc2NvcGUuaGlzdG9yeUl0ZW1zID0gUHJvamVjdHMuZ2V0VHlwZUJ5SWQoJHN0YXRlUGFyYW1zLmlkLCAnaGlzdG9yeScpO1xuXG4gICRzY29wZS5jaGFuZ2VGaWx0ZXIgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9IHR5cGU7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gKHR5cGUgPT0gJ0FsbCcpID8gJycgOiB0eXBlO1xuICB9O1xuXG4gICRzY29wZS5wcmV2aWV3SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAncHJldmlldycsIGl0ZW06IGl0ZW0sIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RSdW5uZXJDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1NldHRpbmdzID0gdHJ1ZTsgLy8gVE9ETzogbWFrZSB0aGlzIHJlYWxcbiAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IHRydWU7IC8vIFRPRE86IG1ha2UgdGhpcyByZWFsXG4gICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAnQWxsJztcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBbXTtcbiAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggfHwgMDtcbiAgJHNjb3BlLnByb2dyZXNzID0ge1xuICAgIHBlcmNlbnQ6IDBcbiAgfTtcblxuICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAkc2NvcGUuYWN0aXZlRGF0YSA9ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF07XG5cbiAgLy8gUHV0cyBkYXRhIGludG8gc29ydGVkIHNlY3Rpb25zXG4gIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaChhbGxEYXRhKSB7XG4gICAgdmFyIGZvcm1hdHRlZCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgICBmdW5jdGlvbiBwbGFjZUl0ZW0oaXRlbSkge1xuXG4gICAgICAvLyBLZWVwIHRoaW5ncyBvcmdhbml6ZXMgd2l0aCBwcmVzZXQgcHJpb3JpdHlcbiAgICAgIGlmIChpdGVtLnN0YXR1cykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICB0YXJnZXQgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZFt0YXJnZXRdLml0ZW1zLnVuc2hpZnQoaXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxsRGF0YS5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouYmF0Y2ggPT09ICRzY29wZS5jdXJyZW50QmF0Y2gpIHtcbiAgICAgICAgcGxhY2VJdGVtKG9iaik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkO1xuICB9XG5cbiAgLy8gVE9ETzpcbiAgLy8gKiBQcm9ncmVzcyBCYXJcbiAgLy8gICAqIExpc3RlbiB0byBQcm9ncmVzcyBldmVudFxuICAvLyAqIEludHJvXG4gIC8vICAgKiBzZWUgbGFzdCBydW4gKGlmIGFueSlcbiAgLy8gICAqIHN0YXJ0IG5ldyBydW5cbiAgLy8gICAqIHN0YXJ0IHJlZmVyZW5jZVxuICAvLyAqIFN0YXRzIChwYXNzL2ZhaWwpXG4gIC8vICAgKiBJbWFnZXMgd2l0aCBjbGljayBjb21wYXJlXG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgfTtcblxuICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICB2YXIgaGlzdG9yeURhdGEgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgLy8gU3RvcmUgdGhlIHByb2Nlc3NlZCBkYXRhIGludG8gdGhlIGJhdGNoIGRhdGFcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuXG4gIC8vIEZpcmUgb2ZmIHRoZSB2aWV3ZXJcbiAgJHNjb3BlLnByZXZpZXdCYXRjaCA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ2JhdGNoJywgaXRlbXM6IGl0ZW1zLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbiAgLy8gVE9ETzogZmluaXNoXG4gIC8vIEZpcmUgb2ZmIGEgbmV3IHRlc3QhIVxuICAkc2NvcGUucnVuTmV3VGVzdCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gdHJ1ZTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSAxMjtcbiAgICB9LCAyMDApO1xuXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IDU2O1xuICAgIH0sIDcwMCk7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gOTM7XG4gICAgfSwgMTgwMCk7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgfSwgMjAwMCk7XG4gIH07XG5cbiAgJHJvb3RTY29wZS4kb24oJ1JVTk5FUjpQUk9HUkVTUzpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzKSB7cmV0dXJuO31cblxuICAgIC8vIHVwZGF0ZSB0aGUgcHJvZ3Jlc3MhXG4gICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSBwYXJzZUludChhcmdzLnBlcmNlbnQsIDEwKTtcbiAgfSk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0U2V0dGluZ3NDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICB2YXIgc2F2ZVRpbWVyO1xuXG4gICRzY29wZS5zZWxlY3RvclR5cGVzID0gWydjb250YWluZXInLCAnaGlkZScsICdyZW1vdmUnXTtcbiAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcblxuICBmdW5jdGlvbiBhZGROZXdUeXBlKHR5cGUsIGRhdGEpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0ucHVzaChkYXRhKTtcbiAgfVxuXG4gIC8vIFdhdGNoIGZvciBjaGFuZ2VzLCBzbyB3ZSBjYW4gc2F2ZVxuICAkc2NvcGUuJHdhdGNoKCdwcm9qZWN0JywgZnVuY3Rpb24oblYsIG9WKSB7XG4gICAgaWYgKG5WICE9IG9WKSB7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgICAkc2NvcGUuc2F2ZSgpO1xuICAgIH1cbiAgfSwgdHJ1ZSk7XG5cbiAgLy8gVE9ETzogc2V0dXAgdmFsaWRhdGlvbnNcbiAgLy8gc2F2ZSB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNhdmVUaW1lcikge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChzYXZlVGltZXIpO1xuICAgIH1cblxuICAgIC8vIHRocm90dGxlIHRoZSBzYXZlcywgc2luY2Ugd2Ugc2F2ZSBvbiBhbnkgY2hhbmdlc1xuICAgIHNhdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8vIFNhdmUgdGVoIHByb2plY3RvaWRcbiAgICAgIFByb2plY3RzLnNhdmUoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNpZGViYXIgd2l0aCBjaGFuZ2VzXG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsIHJlcyk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJldmVydCBtb2RlbFxuICAgICAgICAgIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sIDIwMCk7XG4gIH07XG5cbiAgLy8gcmV2ZXJ0IHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLmNhbmNlbFNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciBhbGwgeW91ciBjaGFuZ2VzPycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICAvLyBwdXQgcmV2ZXJ0IG1vZGVsIGludG8gdGhlIHByb2plY3QgbW9kZWxcbiAgICAgIGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGVsZXRlIHRoZSBwcm9qZWN0LCBhbmQgcmVtb3ZlIGZyb20gcHJvamVjdCBsaXN0cywgdGhlbiByZWRpcmVjdCB0byBtYWluXG4gICRzY29wZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdD8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgdmFyIHByb2plY3RJRCA9ICRyb290U2NvcGUucHJvamVjdC5pZDtcblxuICAgICAgUHJvamVjdHMucmVtb3ZlKHByb2plY3RJRClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IHZpZXdwb3J0IGl0ZW1cbiAgJHNjb3BlLmFkZFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1ZpZXdwb3J0ID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3ZpZXdwb3J0cycsIG5ld1ZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IHNlbGVjdG9yIGl0ZW1cbiAgJHNjb3BlLmFkZFNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1NlbGVjdG9yID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgdHlwZTogJ2NvbnRhaW5lcicsXG4gICAgICBxdWVyeTogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdzZWxlY3RvcnMnLCBuZXdTZWxlY3Rvcik7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBjb29raWUgaXRlbVxuICAkc2NvcGUuYWRkQ29va2llID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0Nvb2tpZSA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHBhdGg6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnY29va2llcycsIG5ld0Nvb2tpZSk7XG4gIH07XG5cbiAgLy8gYWN0aXZhdGUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmFjdGl2YXRlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09IHRydWUgfHwgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09ICd0cnVlJykgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5kZWxldGVUeXBlSXRlbSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnNwbGljZShpZCwgMSk7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5jb250cm9sbGVyKCdTaWRlUGFuZWxDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICAkc2NvcGUucHJvamVjdHMgPSBbXTtcblxuICAvLyBncmFiIGFsbCBwcm9qZWN0cyBsaXN0XG4gICRzY29wZS5wcm9qZWN0cyA9IFByb2plY3RzLmdldEFsbCgpO1xuXG4gIC8vIGFkZCBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOk5FV1BST0pFQ1QnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLnVuc2hpZnQoYXJncyk7XG4gIH0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOlVQREFURScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmlkID09PSBhcmdzLmlkKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdID0gYXJncztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6UkVNT1ZFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAkc2NvcGUuZ29Ub1Byb2plY3QgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciB0eXBlID0gJ3NldHRpbmdzJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudChcIkNvbmZpZ1wiLCB7XG4gIFwiRU5WXCI6IFwiU1RBR0VcIixcbiAgXCJTVEFHRVwiOiB7XG4gIH0sXG4gIFwiUFJPRFwiOiB7XG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufV0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJGh0dHApIHtcblxuICAvLyBoZWFkZXJzXG4gIHZhciAkY29tbW9uID0gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb247XG4gICRjb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCckc3RhdGVDaGFuZ2VFcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==