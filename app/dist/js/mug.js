var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,i,c,a){function s(n){var o=+new Date,i=(n.title,n.icon?n.icon:null,e.$new(!0));i.alert={},i.alert.id=o,i.alert.icon=n.icon?n.icon:null,i.alert.type=n.type?n.type:"info",i.alert.title=n.title,i.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var c=r(p)(i);c[0].id=o,m=o,f.append(c),c.addClass(v),t(function(){c.addClass(g)},20),l=t(function(){u(c)},d)}function u(e){if(!e&&m)e=angular.element(document.getElementById(m));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(g),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(i),d=5e3,m="",v="alert-active",g="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(d=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){e.compareItem.a="screens/reference/"+r.project.id+"/"+t.source.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b="screens/compare/"+r.project.id+"/"+t.source,e.compareItem.c="screens/compare/"+r.project.id+"/"+t.source.replace(".png","_diff.png")}var i="modal-open",c="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.compareItem.a="screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(i),setTimeout(function(){t.addClass(c)},30))}),e.close=function(){t.removeClass(c),setTimeout(function(){t.removeClass(i)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=p.replace("BODY",i).replace("ICON",c),g=r(a)(n);g[0].id=o,m=o,f.append(g);var h=f.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},d)}function s(e){if(!e&&m)e=f.find("#"+m);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),d=5e3,m="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(d=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var c=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&c.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),c.resolve(a)})}),c.promise}var o=__dirname+"/",i="data:image/png;base64,",c=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?c[1]:c[0]:t>.1&&2>t?c[1]:c[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",c=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(c+e+".json")},getTypeById:function(e,t){return o(c+e+"_"+t+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,i=e.meta.url,c=!0;return!r||!n||!o||!i||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(c=!1)}),n&&n.map(function(e,t){e.query&&e.type||(c=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(c=!1)}),c)},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),a=r(o.length),s=n(a);return o.unshift(a),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+"_history.json",JSON.stringify([]),function(e){return e?void t.reject(e):void t.resolve(a)})})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(c+t+".json",function(e){return e?void r.reject(e):void fs.unlink(c+t+"_history.json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},clearHistory:function(t){var r=e.defer(),n=o(i,[]);return t.currentBatch=null,t.currentReference=null,t.batchHistory={},n.map(function(e,r){e.id===t.id&&(n[r].totals.success=0,n[r].totals.warning=0,n[r].totals.error=0,n[r].totals.views=0)}),fs.writeFile(c+t.id+"_history.json",JSON.stringify([]),function(e){return e?void r.reject(e):void fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,p=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,i].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("ipc");MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,t.hasCompare=n.length>0,n}function c(){if(null!==e.project.currentBatch){var r=(void 0!==typeof e.project.currentBatch?e.project.currentBatch:0,o.getTypeById(n.id,"history"));t.batchItems=i(r)}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,t.hasCompare=null!==e.project.currentBatch&&0!==e.project.currentBatch,t.currentBatch=e.project.currentBatch}function u(){e.project=o.getById(e.project.id,"history"),t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null}function l(e){e&&e.msg&&e.percent&&(t.progress.percent=parseInt(e.percent,10),t.progress.title=e.msg?e.msg:t.progress.title)}function p(){u(),s(),c(),t.processing=!1}function f(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"},u(),s(),c(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",l),ipc.on("RUNNER:COMPLETE",p),ipc.on("RUNNER:FAILED",f)}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(t.projects[n].totals=r.batchHistory[r.currentBatch]))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiY29tcGFyZUl0ZW0iLCJhIiwicHJvamVjdCIsInNvdXJjZSIsImN1cnJlbnRCYXRjaCIsImN1cnJlbnRSZWZlcmVuY2UiLCJiIiwiYyIsIm1vZGFsQWN0aXZlIiwibW9kYWxWaXNpYmxlIiwiY29weSIsImFjdGl2ZU9wdGlvbiIsIm9wYWNpdHlSYW5nZSIsImN1cnJlbnRJbmRleCIsImFjdGl2ZUl0ZW0iLCJ2aWV3ZXIiLCJpdGVtcyIsImFtb3VudCIsImludmVyc2UiLCJwZXJjZW50IiwiJHdhdGNoIiwibnYiLCJvdiIsInRvRml4ZWQiLCJNYXRoIiwicm91bmQiLCJvcHRpb25Nb2RlIiwiYXJncyIsImNsb3NlIiwiaXRlbSIsImxlbmd0aCIsIm1vZGFsQWN0aW9uTmF2IiwibmV4dElkeCIsInRvdGFsIiwiZ29Ub0luZGV4IiwiaWR4IiwibmV3Qm9keSIsIm1zZyIsIm5ld0ljbiIsImRlZmF1bHRJY29uIiwibXNnVGVtcGxhdGUiLCJuZXdNZXNzYWdlIiwibXNnRWwiLCJmaW5kIiwiY2hhbmdlVHlwZSIsImJvZHkiLCJhY3Rpb25FbCIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmcyIsInJlcXVpcmUiLCJhc3luYyIsImZhY3RvcnkiLCIkcSIsIkNvbmZpZyIsInJlYWRBc3luYyIsImZpbGUiLCJyZWFkRmlsZSIsImZpbGVEaXJQcmVmaXgiLCJjb21wYXJlU2luZ2xlIiwiZGZkIiwiZGVmZXIiLCJvdXRwdXQiLCJyZXNlbWJsZSIsIm91dHB1dFNldHRpbmdzIiwiQ29tcGFyZSIsIm1hcCIsImVyciIsInJlc3VsdHMiLCJhRGF0YSIsImltYWdlUHJlZml4IiwiYkRhdGEiLCJyZWplY3QiLCJjb21wYXJlVG8iLCJpZ25vcmVDb2xvcnMiLCJvbkNvbXBsZXRlIiwiZGlmZkRhdGEiLCJyZXBvcnQiLCJzcmMiLCJnZXRJbWFnZURhdGFVcmwiLCJyZXNvbHZlIiwicHJvbWlzZSIsIl9fZGlybmFtZSIsInN0YXR1c1R5cGVzIiwicnVuU2luZ2xlIiwiZ2V0U3RhdHVzIiwibWlzTWF0Y2hWYWx1ZSIsInBhcnNlRmxvYXQiLCJtaXNNYXRjaFBlcmNlbnRhZ2UiLCJpc1NhbWVEaW1lbnNpb25zIiwibm93IiwidXBkYXRlVGltZSIsImNyZWF0ZVVVSUQiLCJzIiwiQXJyYXkiLCJqb2luIiwibiIsInJhbmRvbSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZUR1bW15UHJvamVjdCIsInByb2plY3RJZCIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwiYmF0Y2hIaXN0b3J5Iiwidmlld3BvcnRzIiwic2VsZWN0b3JzIiwiY29va2llcyIsIm1ldGEiLCJ1cmwiLCJyZWFkeUV2ZW50IiwiZGVsYXkiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicGF0aCIsInJlYWRGaWxlU3luYyIsImNvZGUiLCJKU09OIiwicHJvamVjdHNQYXRoIiwicHJvamVjdEZpbGVzUGF0aCIsImdldEFsbCIsImdldEJ5SWQiLCJnZXRUeXBlQnlJZCIsInZhbGlkYXRlIiwiYm9vbCIsIm9iaiIsIndpZHRoIiwiaGVpZ2h0IiwibmFtZSIsInF1ZXJ5IiwiY3JlYXRlTmV3IiwiYWxsUHJvamVjdHMiLCJuZXdQcm9qZWN0RGF0YSIsIm5ld1Byb2plY3RGaWxlIiwidW5zaGlmdCIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsInNhdmUiLCJwcm9qZWN0RGF0YSIsInNwbGljZSIsInVubGluayIsImNsZWFySGlzdG9yeSIsIm1haW5Qcm9qZWN0cyIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiY29udHJvbGxlciIsIiRzdGF0ZSIsIlByb2plY3RzIiwiY3VycmVudFByb2plY3RJZCIsImNyZWF0ZU5ld1Byb2plY3QiLCJ0aGVuIiwicmVzIiwiJGJyb2FkY2FzdCIsImdvIiwiY29uc29sZSIsImxvZyIsIiRzdGF0ZVBhcmFtcyIsImFjdGl2ZUZpbHRlciIsImFjdGl2ZUZpbHRlclF1ZXJ5IiwiaGlzdG9yeUl0ZW1zIiwiY2hhbmdlRmlsdGVyIiwicHJldmlld0l0ZW0iLCIkZW1pdCIsImlwYyIsInByb2Nlc3NCYXRjaCIsImFsbERhdGEiLCJwbGFjZUl0ZW0iLCJzdGF0dXMiLCJ0YXJnZXQiLCJmb3JtYXR0ZWQiLCJhY3RpdmVEYXRhIiwiaGFzUmVmZXJlbmNlIiwiYmF0Y2giLCJoYXNDb21wYXJlIiwic2V0dXBDdXJyZW50QmF0Y2giLCJoaXN0b3J5RGF0YSIsImJhdGNoSXRlbXMiLCJ2YWxpZGF0ZVByb2plY3QiLCJpc1ZhbGlkIiwiY2hlY2tTdGF0ZSIsImhhc1NldHRpbmdzIiwiZ3JhYkxhdGVzdERhdGEiLCJydW5uZXJFdmVudHMiLCJwcm9ncmVzcyIsInJ1bm5lckNvbXBsZXRlIiwicHJvY2Vzc2luZyIsInJ1bm5lckZhaWxlZCIsInJlYXNvbiIsInJ1bm5pbmdUeXBlIiwicHJldmlld0JhdGNoIiwibmV3Q29tcGFyZSIsInZhbGlkIiwic2VuZCIsIm5ld1JlZmVyZW5jZSIsIm9uIiwiYWRkTmV3VHlwZSIsInB1c2giLCJzYXZlVGltZXIiLCJzZWxlY3RvclR5cGVzIiwiaGFzQ2hhbmdlcyIsIm1hc3RlciIsIm5WIiwib1YiLCJjYW5jZWxTYXZlIiwic3VyZSIsImNvbmZpcm0iLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElEIiwiYWRkVmlld3BvcnQiLCJuZXdWaWV3cG9ydCIsImFjdGl2ZSIsImFkZFNlbGVjdG9yIiwibmV3U2VsZWN0b3IiLCJhZGRDb29raWUiLCJuZXdDb29raWUiLCJhY3RpdmF0ZVR5cGUiLCJkZWxldGVUeXBlSXRlbSIsInByb2plY3RzIiwiZ29Ub1Byb2plY3QiLCJjb25zdGFudCIsIkVOViIsIlNUQUdFIiwiUFJPRCIsImVycm9yQ29sb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJlcnJvclR5cGUiLCJ0cmFuc3BhcmVuY3kiLCJsYXJnZUltYWdlVGhyZXNob2xkIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsIm90aGVyd2lzZSIsInJ1biIsIiRodHRwIiwiJGNvbW1vbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxXQUFBLFlBQUEsZ0JDbUJBRixLQUFBRyxVQUFBLFNBQ0EsYUFBQSxXQUFBLFdBQUEsaUJBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxPQUNBQyxTQUFBLElBQ0FDLFNBQUEsRUFDQUMsU0FBQSxtQ0FDQUMsU0FDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxFQUFBQyxHQVNBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsSUFBQSxHQUFB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LFVBQUEsT0FDQUMsYUFBQSxFQUNBQyxvQkFBQSxLQ2pCQTdWLElBQUE4VixRQUNBLGlCQUFBLHFCQUNBLFNBQUFDLEVBQUFDLEdBU0FELEVBS0FFLE1BQUEsUUFDQXhLLElBQUEsSUFDQS9ILFlBQUEsY0FNQXVTLE1BQUEsWUFDQXhLLElBQUEsZ0JBQ0EvSCxZQUFBLGdCQUNBK00sV0FBQSxnQkFFQXdGLE1BQUEscUJBQ0F4SyxJQUFBLFlBQ0EvSCxZQUFBLHlCQUNBK00sV0FBQSx3QkFFQXdGLE1BQUEsbUJBQ0F4SyxJQUFBLFVBQ0EvSCxZQUFBLHVCQUNBK00sV0FBQSxzQkFFQXdGLE1BQUEsb0JBQ0F4SyxJQUFBLFdBQ0EvSCxZQUFBLHdCQUNBK00sV0FBQSx1QkFzQkF1RixFQUFBRSxVQUFBLFFDaEVBbFcsSUFBQW1XLEtBQUEsYUFBQSxRQUNBLFNBQUEvVixFQUFBZ1csR0FHQSxHQUFBQyxHQUFBRCxFQUFBRSxTQUFBQyxRQUFBQyxNQUNBSCxHQUFBLGdCQUFBLG1CQUVBalcsRUFBQTRDLElBQUEsb0JBQUEsU0FBQXlULEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUE3TCxHQUNBa0csUUFBQUMsSUFBQSxvQkFBQW5HIiwiZmlsZSI6Im11Zy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNVUcgPSBhbmd1bGFyLm1vZHVsZSgnbXVnc2hvdCcsIFsndWkucm91dGVyJywgJ211Z3RlbXBsYXRlcyddKTtcbiIsIi8qKlxuICogYWxlcnRcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgYWxlcnRzIGFuZCBub3RpY2VzIGZvciBhIHVzZXJcbiAqXG4gKiBVU0U6XG4gKiA8YWxlcnQ+PC9hbGVydD5cbiAqXG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIGluZm8sIHN1Y2Nlc3MsIHdhcm5pbmcsIGVycm9yXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gdGl0bGU6IHRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSwgKFRPRE86IGNhbiBiZSBodG1sIG9yIHNpbXBsZSB0ZXh0KVxuICogLSBjYWxsYmFjazogYSBmdW5jdGlvbiB0byBmaXJlIG9uIGFjdGlvbiB0YWtlbiBvbiBtZXNzYWdlXG4gKiAtIGR1cjogdGhlIHRpbWVvdXQgb2YgdGhlIG1lc3NhZ2UsIGluIHNlY29uZHNcbiAqIC0gdHlwZTogc2VlIGFib3ZlIHR5cGVzXG4gKiAtIGljb246IG5vIGRlZmF1bHQsIHNlZSBodHRwczovL29jdGljb25zLmdpdGh1Yi5jb20vIGZvciBvcHRpb25zXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ2FsZXJ0JyxcblsnJHJvb3RTY29wZScsICckdGltZW91dCcsICckY29tcGlsZScsICckdGVtcGxhdGVDYWNoZScsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkdGltZW91dCwgJGNvbXBpbGUsICR0ZW1wbGF0ZUNhY2hlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImFsZXJ0LXBhcmVudFwiPjwvZGl2PicsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBhbGVydFRlbXBsYXRlID0gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhbGVydC5odG1sJyk7XG4gICAgICB2YXIgX2VsID0gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgcHJldmlvdXNJZCA9ICcnO1xuICAgICAgdmFyIGFsZXJ0QWN0aXZlID0gJ2FsZXJ0LWFjdGl2ZSc7XG4gICAgICB2YXIgYWxlcnRWaXNpYmxlID0gJ2FsZXJ0LXZpc2libGUnO1xuXG4gICAgICBmdW5jdGlvbiBzaG93TWVzc2FnZShkYXRhKSB7XG4gICAgICAgIHZhciBfaWQgPSAoK25ldyBEYXRlKCkpO1xuICAgICAgICB2YXIgbmV3Qm9keSA9IGRhdGEudGl0bGU7XG4gICAgICAgIHZhciBuZXdJY24gPSAoZGF0YS5pY29uKSA/IGRhdGEuaWNvbiA6IG51bGw7XG4gICAgICAgIHZhciAkdG1wU2NvcGUgPSAkcm9vdFNjb3BlLiRuZXcodHJ1ZSk7XG5cbiAgICAgICAgLy8gc2V0dXAgc2ltcGxlIHNjb3BlIGZvciBvbmx5IHRoaXMgYWxlcnQgaXRlbVxuICAgICAgICAkdG1wU2NvcGUuYWxlcnQgPSB7fTtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LmlkID0gX2lkO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuaWNvbiA9IChkYXRhLmljb24pID8gZGF0YS5pY29uIDogbnVsbDtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LnR5cGUgPSAoZGF0YS50eXBlKSA/IGRhdGEudHlwZSA6ICdpbmZvJztcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LnRpdGxlID0gZGF0YS50aXRsZTtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LmFjdGlvbiA9ICghZGF0YS5jYWxsYmFjaykgPyBudWxsIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFjdGlvbkVsID0gdGhpcy5pZDtcbiAgICAgICAgICBkYXRhLmNhbGxiYWNrKCk7XG4gICAgICAgICAgY2xlYXJFbCh0aGlzKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYWxlcnRFbCA9ICRjb21waWxlKGFsZXJ0VGVtcGxhdGUpKCR0bXBTY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIGFsZXJ0RWxbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKGFsZXJ0RWwpO1xuICAgICAgICBhbGVydEVsLmFkZENsYXNzKGFsZXJ0QWN0aXZlKTtcblxuICAgICAgICAvLyBzaG93XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsZXJ0RWwuYWRkQ2xhc3MoYWxlcnRWaXNpYmxlKTtcbiAgICAgICAgfSwgMjApO1xuXG4gICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xlYXJFbChhbGVydEVsKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhckVsKGVsZW0pIHtcbiAgICAgICAgaWYgKCFlbGVtICYmIHByZXZpb3VzSWQpIHtcbiAgICAgICAgICBlbGVtID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpb3VzSWQpKTtcbiAgICAgICAgfSBlbHNlIGlmICghZWxlbSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtKSB7XG4gICAgICAgICAgZWxlbSA9IGFuZ3VsYXIuZWxlbWVudChlbGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoYWxlcnRWaXNpYmxlKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ0FMRVJUOkZJUkUnLCBmdW5jdGlvbihlLCBkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YS50aXRsZSkgeyByZXR1cm47IH1cblxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmIChkYXRhLmR1cikge1xuICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXIgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd01lc3NhZ2UoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIGZhZGVJblxuICogQSBkaXJlY3RpdmUgZm9yIGFuaW1hdGluZyBpbiBlbGVtZW50c1xuICovXG5NVUcuZGlyZWN0aXZlKCdmYWRlSW4nLCBbIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoYXR0cnMuZmFkZUluKSB8fCAxMDtcbiAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2ZhZGUtaW4nKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jc3MoXCJvcGFjaXR5XCIsIFwiMVwiKTtcbiAgICAgICAgICAgIH0sIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiLyoqXG4gKiBNb2RhbFxuICogQnVpbGRzIGEgbW9kYWwgZm9yIGltYWdlIHZpZXdpbmcgYW5kIGNvbXBhcmluZ1xuICpcbiAqIEB1c2FnZVxuICogPG1vZGFsPjwvbW9kYWw+XG4gKi9cbk1VRy5kaXJlY3RpdmUoJ21vZGFsJyxcblsnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsXG5mdW5jdGlvbigkdGltZW91dCwgJGNvbXBpbGUsICRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICdtb2RhbC5odG1sJyxcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIHZhciBtb2RhbEFjdGl2ZSA9ICdtb2RhbC1vcGVuJztcbiAgICAgIHZhciBtb2RhbFZpc2libGUgPSAnbW9kYWwtdmlzaWJsZSc7XG5cbiAgICAgICRzY29wZS5wcm9qZWN0ID0gYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCk7XG4gICAgICAkc2NvcGUuYWN0aXZlT3B0aW9uID0gJ3NpZGVzJztcbiAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UgPSB7fTtcbiAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSB7fTtcbiAgICAgICRzY29wZS5jb21wYXJlSXRlbSA9IHtcbiAgICAgICAgYTogJycsXG4gICAgICAgIGI6ICcnLFxuICAgICAgICBjOiAnJ1xuICAgICAgfTtcbiAgICAgICRzY29wZS52aWV3ZXIgPSB7XG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UgPSB7XG4gICAgICAgIGFtb3VudDogMC44LFxuICAgICAgICBpbnZlcnNlOiAwLjIsXG4gICAgICAgIHBlcmNlbnQ6ICc4MCUnXG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuJHdhdGNoKCdvcGFjaXR5UmFuZ2UuYW1vdW50JywgZnVuY3Rpb24obnYsIG92KSB7XG4gICAgICAgIGlmIChudiA9PT0gb3YpIHtyZXR1cm47fVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgb3RoZXIgdmFsdWVzXG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UuaW52ZXJzZSA9ICgxIC0gbnYpLnRvRml4ZWQoMik7XG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UucGVyY2VudCA9IE1hdGgucm91bmQobnYgKiAxMDApICsgJyUnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHNldCB0aGUgYWN0aXZlIGl0ZW0gd2l0aCBjb3JyZWN0IHBhdGhzXG4gICAgICBmdW5jdGlvbiBzZXRBY3RpdmVJdGVtKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAnc2NyZWVucy9yZWZlcmVuY2UvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGRhdGEuc291cmNlLnJlcGxhY2UoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCArICcucG5nJywgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgKyAnLnBuZycpO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYiA9ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGRhdGEuc291cmNlO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYyA9ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGRhdGEuc291cmNlLnJlcGxhY2UoJy5wbmcnLCAnX2RpZmYucG5nJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENob29zZSB0aGUgdmlld2VyIGxheW91dFxuICAgICAgJHNjb3BlLm9wdGlvbk1vZGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSB0eXBlO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlc2V0IGN1cnJlbnQgSW5kZXhcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICRzY29wZS5wcm9qZWN0ID0gYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCk7XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAnc2NyZWVucy8nICsgJHNjb3BlLmFjdGl2ZUl0ZW0udHlwZSArICcvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArICRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgbXVsdGlwbGUgaXRlbXNcbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ2JhdGNoJyAmJiBhcmdzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IGFyZ3MuaXRlbXNbJHNjb3BlLmN1cnJlbnRJbmRleF07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gYXJncy5pdGVtcztcbiAgICAgICAgICBzZXRBY3RpdmVJdGVtKCRzY29wZS5hY3RpdmVJdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1ha2UgdGhlIG1vZGFsIGFjdGl2ZSB3aXRoIGRhdGFcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MobW9kYWxBY3RpdmUpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MobW9kYWxWaXNpYmxlKTtcbiAgICAgICAgfSwgMzApO1xuICAgICAgfSk7XG5cbiAgICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhtb2RhbFZpc2libGUpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxBY3RpdmUpO1xuICAgICAgICB9LCAyMzApO1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgb2YgbGVmdC9yaWdodCBuYXZpZ2F0aW9uXG4gICAgICAkc2NvcGUubW9kYWxBY3Rpb25OYXYgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIGlmICgkc2NvcGUudmlld2VyLml0ZW1zLmxlbmd0aCA8IDEpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdmFyIHRvdGFsID0gJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgbmV4dElkeDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIG5leHRJZHggPSAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gdG90YWwpID8gMCA6ICRzY29wZS5jdXJyZW50SW5kZXggKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRJZHggPSAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gMCkgPyB0b3RhbCA6ICRzY29wZS5jdXJyZW50SW5kZXggLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSAkc2NvcGUudmlld2VyLml0ZW1zW25leHRJZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gbmV4dElkeDtcbiAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBHbyBkaXJlY3RseSB0byBhbiBpdGVtXG4gICAgICAkc2NvcGUuZ29Ub0luZGV4ID0gZnVuY3Rpb24oaWR4KSB7XG4gICAgICAgIGlmICgkc2NvcGUuY3VycmVudEluZGV4ID09PSBpZHgpIHtyZXR1cm47fVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tpZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaWR4O1xuICAgICAgICBzZXRBY3RpdmVJdGVtKCRzY29wZS5hY3RpdmVJdGVtKTtcbiAgICAgIH07XG5cbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIG1zZ0NlbnRlclxuICogYSBkaXJlY3RpdmUgZm9yIGhhbmRsaW5nIGFsbCBtZXNzYWdlIHJlbGF5IGZvciBhIHVzZXJcbiAqXG4gKiBVU0U6XG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ01TR0NFTlRFUjpGSVJFJywgeyBtc2c6IFwiSGV5IHRoZXJlLCBJbSBhIG1lc3NhZ2UhIVwiLCBkdXI6IDUsIHR5cGU6IFwiaW5mb1wiLCBpY29uOiBcImluZm9cIiwgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSB9KTtcbiAqXG4gKiBUWVBFUzpcbiAqIC0gREVGQVVMVCwgc2hvd3MgZ3JlZW4gbWVzc2FnZSwgdXNlZCBmb3Igc3VjY2Vzc1xuICogLSBXYXJuaW5nOiBcIndhcm5cIiAtIHNob3dzIG9yYW5nZSBtZXNzYWdlLCB1c2VkIGZvciBlcnJvcnMgb3Igd2FybmluZ3NcbiAqIC0gSW5mbzogXCJpbmZvXCIgLSBzaG93cyBkYXJrIGJsdWUgbWVzc2FnZSwgdXNlZCBmb3IgZ2VuZXJhbCB0aGluZ3NcbiAqXG4gKiBPUFRJT05TOlxuICogLSBtc2c6IHRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSwgKFRPRE86IGNhbiBiZSBodG1sIG9yIHNpbXBsZSB0ZXh0KVxuICogLSBjYWxsYmFjazogYSBmdW5jdGlvbiB0byBmaXJlIG9uIGFjdGlvbiB0YWtlbiBvbiBtZXNzYWdlXG4gKiAtIGR1cjogdGhlIHRpbWVvdXQgb2YgdGhlIG1lc3NhZ2VcbiAqIC0gdHlwZTogc2VlIGFib3ZlIHR5cGVzXG4gKiAtIGljb246IGRlZmF1bHQgaXMgZ2xvYmUsIGNhbiBiZSBzZXQgdG8gQU5ZIGktc3ByaXRlcyAoc3ByaXRlcy5sZXNzKVxuICovXG5NVUcuZGlyZWN0aXZlKCdtc2dDZW50ZXInLFxuWyBcIiRyb290U2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIiRjb21waWxlXCIsXG5mdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlKSB7XG4gIHJldHVybiB7XG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgbXNnVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1zZ1wiIG5nLWNsaWNrPVwiYWN0aW9uKClcIj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWljblwiPjxpIGNsYXNzPVwiaXcgaS1JQ09OXCI+PC9pPjwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctY29udFwiPkJPRFk8L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWFjdGlvblwiPjxpIGNsYXNzPVwiaWIgaS1yLWFycm93XCI+PC9pPjwvZGl2PicrXG4gICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICB2YXIgX2VsID0gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgcHJldmlvdXNJZCA9IFwiXCI7XG4gICAgICB2YXIgZGVmYXVsdEljb24gPSBcImluZm9cIjtcblxuICAgICAgc2NvcGUuYm9keSA9IFwiXCI7XG4gICAgICBzY29wZS5jYWxsYmFjayA9IG51bGw7XG4gICAgICBzY29wZS5pY29uID0gZGVmYXVsdEljb247XG4gICAgICBzY29wZS5hY3Rpb24gPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYWN0aW9uRWwgPSBfZWwuZmluZChcIiNcIiArIHRoaXMuaWQpO1xuICAgICAgICBzY29wZS5jYWxsYmFjaygpO1xuICAgICAgICBjbGVhckVsKCBhY3Rpb25FbCApO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UgKCBkYXRhICl7XG4gICAgICAgIHZhciBfaWQgPSAoK25ldyBEYXRlKCkpO1xuICAgICAgICB2YXIgbmV3Qm9keSA9IGRhdGEubXNnO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbik/IGRhdGEuaWNvbiA6IGRlZmF1bHRJY29uO1xuXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IG1zZ1RlbXBsYXRlLnJlcGxhY2UoXCJCT0RZXCIsIG5ld0JvZHkpLnJlcGxhY2UoXCJJQ09OXCIsIG5ld0ljbik7XG4gICAgICAgIHZhciBuZXdNZXNzYWdlID0gJGNvbXBpbGUodGVtcGxhdGUpKHNjb3BlKTtcblxuICAgICAgICAvLyBzZXQgYSB1bmlxdWUgaWRcbiAgICAgICAgbmV3TWVzc2FnZVswXS5pZCA9IF9pZDtcbiAgICAgICAgcHJldmlvdXNJZCA9IF9pZDtcblxuICAgICAgICAvLyB0aHJvdyBpbnRvIGRvbSwgdGhlbiBzaG93IGluIHZpZXcsIHN0YXJ0IHRpbWVyXG4gICAgICAgIF9lbC5hcHBlbmQoIG5ld01lc3NhZ2UgKTtcblxuICAgICAgICAvLyByZW1lbWJlciB0aGUgbmV3IGVsIGZvciBsYXRlclxuICAgICAgICB2YXIgbXNnRWwgPSBfZWwuZmluZChcIiNcIiArIF9pZCk7XG4gICAgICAgIGNoYW5nZVR5cGUoIG1zZ0VsLCBkYXRhLnR5cGUgKTtcblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBtc2dFbC5maW5kKFwiLm1zZy1hY3Rpb25cIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBtc2dFbC5hZGRDbGFzcygnYWRkJyk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2xlYXJFbCggbXNnRWwgKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhckVsICggZWxlbSApIHtcbiAgICAgICAgaWYoIWVsZW0gJiYgcHJldmlvdXNJZCl7XG4gICAgICAgICAgZWxlbSA9IF9lbC5maW5kKFwiI1wiICsgcHJldmlvdXNJZCk7XG4gICAgICAgIH0gZWxzZSBpZighZWxlbSkgeyByZXR1cm47IH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdhZGQnKTtcbiAgICAgICAgZWxlbS5hZGRDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW0pLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgdGhlIHR5cGUgYnkgYSBjbGFzc1xuICAgICAgZnVuY3Rpb24gY2hhbmdlVHlwZSAoIGVsZW0sIHR5cGUgKSB7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy1pbmZvJyk7XG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ21zZy13YXJuJyk7XG5cbiAgICAgICAgaWYodHlwZSl7XG4gICAgICAgICAgZWxlbS5hZGRDbGFzcygnbXNnLScgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTVNHQ0VOVEVSOkZJUkUnLCBmdW5jdGlvbihlLCBkYXRhKXtcbiAgICAgICAgaWYoIWRhdGEubXNnKXsgcmV0dXJuOyB9XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBjbGVhckVsKCk7XG5cbiAgICAgICAgaWYoZGF0YS5kdXIpe1xuICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXIgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgc2NvcGUuY2FsbGJhY2sgPSBkYXRhLmNhbGxiYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd01lc3NhZ2UoIGRhdGEgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIk1VRy5mYWN0b3J5KCd0aW1lQWdvJywgZnVuY3Rpb24gKCkge1xuICB2YXIgc2VydmljZSA9IHt9O1xuXG4gIHNlcnZpY2Uuc2V0dGluZ3MgPSB7XG4gICAgcmVmcmVzaE1pbGxpczogNjAwMDAsXG4gICAgYWxsb3dGdXR1cmU6IGZhbHNlLFxuICAgIHN0cmluZ3M6IHtcbiAgICAgIHByZWZpeEFnbzogbnVsbCxcbiAgICAgIHByZWZpeEZyb21Ob3c6IG51bGwsXG4gICAgICBzdWZmaXhBZ286ICdhZ28nLFxuICAgICAgc3VmZml4RnJvbU5vdzogJ2Zyb20gbm93JyxcbiAgICAgIHNlY29uZHM6ICdsZXNzIHRoYW4gYSBtaW51dGUnLFxuICAgICAgbWludXRlOiAnYWJvdXQgYSBtaW51dGUnLFxuICAgICAgbWludXRlczogJyVkIG1pbnV0ZXMnLFxuICAgICAgaG91cjogJ2Fib3V0IGFuIGhvdXInLFxuICAgICAgaG91cnM6ICclZCBob3VycycsXG4gICAgICBkYXk6ICdhIGRheScsXG4gICAgICBkYXlzOiAnJWQgZGF5cycsXG4gICAgICBtb250aDogJ2Fib3V0IGEgbW9udGgnLFxuICAgICAgbW9udGhzOiAnJWQgbW9udGhzJyxcbiAgICAgIHllYXI6ICdhYm91dCBhIHllYXInLFxuICAgICAgeWVhcnM6ICclZCB5ZWFycycsXG4gICAgICBudW1iZXJzOiBbXVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiB0cmltRGlnaXRzICggbnVtICkge1xuICAgICAgdmFyIG0gPSBudW0udG9TdHJpbmcoKS5zbGljZSgwLDEzKTtcbiAgICAgIHJldHVybiAobS5sZW5ndGggPT0gMTMpPyBwYXJzZUludChtKSA6IG51bTtcbiAgfVxuXG4gIHNlcnZpY2UuaW5Xb3JkcyA9IGZ1bmN0aW9uIChkaXN0YW5jZU1pbGxpcykge1xuICAgIHZhciAkbCA9IHNlcnZpY2Uuc2V0dGluZ3Muc3RyaW5ncztcbiAgICB2YXIgcHJlZml4ID0gJGwucHJlZml4QWdvO1xuICAgIHZhciBzdWZmaXggPSAkbC5zdWZmaXhBZ287XG4gICAgaWYgKHNlcnZpY2Uuc2V0dGluZ3MuYWxsb3dGdXR1cmUpIHtcbiAgICAgIGlmIChkaXN0YW5jZU1pbGxpcyA8IDApIHtcbiAgICAgICAgcHJlZml4ID0gJGwucHJlZml4RnJvbU5vdztcbiAgICAgICAgc3VmZml4ID0gJGwuc3VmZml4RnJvbU5vdztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2Vjb25kcyA9IE1hdGguYWJzKGRpc3RhbmNlTWlsbGlzKSAvIDEwMDA7XG4gICAgdmFyIG1pbnV0ZXMgPSBzZWNvbmRzIC8gNjA7XG4gICAgdmFyIGhvdXJzID0gbWludXRlcyAvIDYwO1xuICAgIHZhciBkYXlzID0gaG91cnMgLyAyNDtcbiAgICB2YXIgeWVhcnMgPSBkYXlzIC8gMzY1O1xuXG4gICAgZnVuY3Rpb24gc3Vic3RpdHV0ZShzdHJpbmdPckZ1bmN0aW9uLCBudW1iZXIpIHtcbiAgICAgIHZhciBzdHJpbmcgPSBhbmd1bGFyLmlzRnVuY3Rpb24oc3RyaW5nT3JGdW5jdGlvbikgP1xuICAgICAgc3RyaW5nT3JGdW5jdGlvbihudW1iZXIsIGRpc3RhbmNlTWlsbGlzKSA6IHN0cmluZ09yRnVuY3Rpb247XG4gICAgICB2YXIgdmFsdWUgPSAoJGwubnVtYmVycyAmJiAkbC5udW1iZXJzW251bWJlcl0pIHx8IG51bWJlcjtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvJWQvaSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHZhciB3b3JkcyA9IHNlY29uZHMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLnNlY29uZHMsIE1hdGgucm91bmQoc2Vjb25kcykpIHx8XG4gICAgICAgIHNlY29uZHMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZSwgMSkgfHxcbiAgICAgICAgbWludXRlcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubWludXRlcywgTWF0aC5yb3VuZChtaW51dGVzKSkgfHxcbiAgICAgICAgbWludXRlcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwuaG91ciwgMSkgfHxcbiAgICAgICAgaG91cnMgPCAyNCAmJiBzdWJzdGl0dXRlKCRsLmhvdXJzLCBNYXRoLnJvdW5kKGhvdXJzKSkgfHxcbiAgICAgICAgaG91cnMgPCA0MiAmJiBzdWJzdGl0dXRlKCRsLmRheSwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDMwICYmIHN1YnN0aXR1dGUoJGwuZGF5cywgTWF0aC5yb3VuZChkYXlzKSkgfHxcbiAgICAgICAgZGF5cyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwubW9udGgsIDEpIHx8XG4gICAgICAgIGRheXMgPCAzNjUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aHMsIE1hdGgucm91bmQoZGF5cyAvIDMwKSkgfHxcbiAgICAgICAgeWVhcnMgPCAxLjUgJiYgc3Vic3RpdHV0ZSgkbC55ZWFyLCAxKSB8fFxuICAgICAgICBzdWJzdGl0dXRlKCRsLnllYXJzLCBNYXRoLnJvdW5kKHllYXJzKSk7XG5cbiAgICB2YXIgc2VwYXJhdG9yID0gJGwud29yZFNlcGFyYXRvciA9PT0gdW5kZWZpbmVkID8gJyAnIDogJGwud29yZFNlcGFyYXRvcjtcbiAgICByZXR1cm4gW3ByZWZpeCwgd29yZHMsIHN1ZmZpeF0uam9pbihzZXBhcmF0b3IpLnRyaW0oKTtcbiAgfTtcblxuICBzZXJ2aWNlLnBhcnNlID0gZnVuY3Rpb24gKGlzbzg2MDEpIHtcbiAgICBpZiAoYW5ndWxhci5pc051bWJlcihpc284NjAxKSkge1xuICAgICAgaXNvODYwMSA9IGlzbzg2MDEgKyBcIlwiO1xuICAgICAgLy8gZm9ybWF0IGZvciBjb3JyZWN0IGxlbmd0aFxuICAgICAgdmFyIG9yaWdpbmFsVGltZXN0YW1wID0gdHJpbURpZ2l0cyggaXNvODYwMSApO1xuICAgICAgcmV0dXJuIHBhcnNlSW50KG9yaWdpbmFsVGltZXN0YW1wLCAxMCk7XG4gICAgfVxuICAgIHZhciBzID0gKGlzbzg2MDEgfHwgJycpLnRyaW0oKTtcbiAgICBzID0gcy5yZXBsYWNlKC9cXC5cXGQrLywgJycpOyAvLyByZW1vdmUgbWlsbGlzZWNvbmRzXG4gICAgcyA9IHMucmVwbGFjZSgvLS8sICcvJykucmVwbGFjZSgvLS8sICcvJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvVC8sICcgJykucmVwbGFjZSgvWi8sICcgVVRDJyk7XG4gICAgcyA9IHMucmVwbGFjZSgvKFtcXCtcXC1dXFxkXFxkKVxcOj8oXFxkXFxkKS8sICcgJDEkMicpOyAvLyAtMDQ6MDAgLT4gLTA0MDBcbiAgICByZXR1cm4gbmV3IERhdGUocyk7XG4gIH07XG5cbiAgcmV0dXJuIHNlcnZpY2U7XG59KTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgYXN5bmMgPSByZXF1aXJlKCdhc3luYycpO1xuXG5NVUcuZmFjdG9yeSgnQ29tcGFyZScsXG5bJyRxJywgJ0NvbmZpZycsXG5mdW5jdGlvbigkcSwgQ29uZmlnKSB7XG4gIC8vIENvbmZpZyB2YXJzXG4gIHZhciBmaWxlRGlyUHJlZml4ID0gX19kaXJuYW1lICsgJy8nO1xuICB2YXIgaW1hZ2VQcmVmaXggPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCc7XG4gIHZhciBzdGF0dXNUeXBlcyA9IFsncGFzc2VkJywgJ3dhcm5pbmcnLCAnZmFpbGVkJ107XG5cbiAgLy8gYXN5bmMgaGVscGVyXG4gIGZ1bmN0aW9uIHJlYWRBc3luYyhmaWxlLCBjYWxsYmFjaykge1xuICAgIGZzLnJlYWRGaWxlKGZpbGVEaXJQcmVmaXggKyBmaWxlLCAnYmFzZTY0JywgY2FsbGJhY2spO1xuICB9XG5cbiAgLy8gVE9ETzogbGV0IHRoZSBiYWNrZW5kIHByb2Nlc3MgaGFuZGxlIHRoaXMhXG4gIGZ1bmN0aW9uIGNvbXBhcmVTaW5nbGUoYSwgYikge1xuICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBvdXRwdXQgPSB7fTtcblxuICAgIC8vIEFwcGx5IE1haW4gQ29tcGFyZSBDb25maWdcbiAgICByZXNlbWJsZS5vdXRwdXRTZXR0aW5ncyhDb25maWcuQ29tcGFyZSk7XG5cbiAgICAvLyBPcGVuIGJvdGggZmlsZXMsIGJlZm9yZSB3ZSBhcmUgcmVhZHkgdG8gcHJvY2Vzc1xuICAgIGFzeW5jLm1hcChbYSwgYl0sIHJlYWRBc3luYywgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7XG4gICAgICB2YXIgYURhdGEgPSBpbWFnZVByZWZpeCArIHJlc3VsdHNbMF07XG4gICAgICB2YXIgYkRhdGEgPSBpbWFnZVByZWZpeCArIHJlc3VsdHNbMV07XG5cbiAgICAgIC8vIEhhbmRsZXMgZXJyb3JzXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgIH1cblxuICAgICAgLy8gUnVuIHRoZSBjb21wYXJlIGZ1bmN0aW9uLCByZXR1cm4gdGhlIGRpZmYgZGF0YVxuICAgICAgcmVzZW1ibGUoYURhdGEpXG4gICAgICAgIC5jb21wYXJlVG8oYkRhdGEpXG4gICAgICAgIC5pZ25vcmVDb2xvcnMoKVxuICAgICAgICAub25Db21wbGV0ZShmdW5jdGlvbihkaWZmRGF0YSkge1xuICAgICAgICAgIG91dHB1dC5yZXBvcnQgPSBkaWZmRGF0YTtcbiAgICAgICAgICBvdXRwdXQuc3JjID0gZGlmZkRhdGEuZ2V0SW1hZ2VEYXRhVXJsKCk7XG5cbiAgICAgICAgICBkZmQucmVzb2x2ZShvdXRwdXQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgfTtcblxuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdHdvIGltYWdlcyBhbmQgcmV0dXJucyBhbGwgZGF0YSB3aXRoIGFuIGltYWdlIG9mIGNoYW5nZXNcbiAgICAgKi9cbiAgICBydW5TaW5nbGU6IGNvbXBhcmVTaW5nbGUsXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSB0eXBlIG9mIHBhc3Mvd2Fybi9mYWlsIHN0YXR1c1xuICAgICAqL1xuICAgIGdldFN0YXR1czogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIG1pc01hdGNoVmFsdWUgPSBwYXJzZUZsb2F0KGRhdGEubWlzTWF0Y2hQZXJjZW50YWdlKTtcblxuICAgICAgLy8gbG93ZXN0IHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPCAwLjEpIHtcblxuICAgICAgICAvLyBXYXJuIHRoYXQgZGltZW5zaW9ucyBhcmUgZGlmZmVyZW5jZVxuICAgICAgICBpZiAoZGF0YS5pc1NhbWVEaW1lbnNpb25zID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1sxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2FybmluZyB0b2xlcmFuY2VcbiAgICAgIGlmIChtaXNNYXRjaFZhbHVlID4gMC4xICYmIG1pc01hdGNoVmFsdWUgPCAyKSB7XG4gICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1sxXTtcbiAgICAgIH1cblxuICAgICAgLy8gZXJyb3IgdG9sZXJhbmNlIHJlYWNoZWRcbiAgICAgIHJldHVybiBzdGF0dXNUeXBlc1syXTtcbiAgICB9XG5cbiAgfTtcbn1dKTtcbiIsIk1VRy5mYWN0b3J5KCdub3dUaW1lJyxcblsnJHRpbWVvdXQnLFxuZnVuY3Rpb24oJHRpbWVvdXQpIHtcbiAgdmFyIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICB2YXIgdXBkYXRlVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgbm93VGltZSA9IERhdGUubm93KCk7XG4gICAgICB1cGRhdGVUaW1lKCk7XG4gICAgfSwgMTAwMCk7XG4gIH07XG5cbiAgdXBkYXRlVGltZSgpO1xuICByZXR1cm4ge1xuICAgIGdldFRpbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5vd1RpbWU7XG4gICAgfVxuICB9O1xufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmZhY3RvcnkoJ1Byb2plY3RzJyxcblsnJHEnLFxuZnVuY3Rpb24oJHEpIHtcbiAgLy8gQ29uZmlnIHRoZSBtYWluIHBhdGhzXG4gIHZhciBwcm9qZWN0c1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLmpzb24nO1xuICB2YXIgcHJvamVjdEZpbGVzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMvJztcblxuICAvLyBDcmVhdGVzIGEgVVVJRCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aFxuICBmdW5jdGlvbiBjcmVhdGVVVUlEKHMpIHtcbiAgICB2YXIgbjtcbiAgICBpZiAodHlwZW9mIHMgPT0gJ251bWJlcicgJiYgcyA9PT0gcGFyc2VJbnQocywgMTApKSB7XG4gICAgICBzID0gQXJyYXkocyArIDEpLmpvaW4oJ3gnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcy5yZXBsYWNlKC94L2csIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA2MSkgKyA0ODtcbiAgICAgIG4gPSBuID4gNTcgPyAobiArIDcgPiA5MCA/IG4gKyAxMyA6IG4gKyA3KSA6IG47XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENyZWF0ZXMgYSBKU09OIG9iamVjdCBmb3IgYSBiYXNlbGluZSBuZXcgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3QodG90YWwpIHtcbiAgICB0b3RhbCA9IHRvdGFsIHx8IDA7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcHJvamVjdElkLFxuICAgICAgdGl0bGU6ICdQcm9qZWN0ICcgKyAocGFyc2VJbnQodG90YWwsIDEwKSArIDEpLFxuICAgICAgdGltZXN0YW1wOiAoK25ldyBEYXRlKSxcbiAgICAgIHRvdGFsczoge1xuICAgICAgICBzdWNjZXNzOiBudWxsLFxuICAgICAgICB3YXJuaW5nOiBudWxsLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgdmlld3M6IDBcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gU2V0cyB1cCB0aGUgbmVlZGVkIGJhc2UgZGF0YSBmb3Igc3RvcmluZyBhbiBpbmRpdmlkdWFsIHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0RmlsZShvcHRpb25zKSB7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBiYXRjaEhpc3Rvcnk6IHt9LFxuICAgICAgY3VycmVudEJhdGNoOiBudWxsLFxuICAgICAgY3VycmVudFJlZmVyZW5jZTogbnVsbCxcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICB0aW1lc3RhbXA6IG9wdGlvbnMudGltZXN0YW1wLFxuICAgICAgdmlld3BvcnRzOiBbXSxcbiAgICAgIHNlbGVjdG9yczogW10sXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICByZWFkeUV2ZW50OiBudWxsLFxuICAgICAgICBkZWxheTogbnVsbCxcbiAgICAgICAgbWlzTWF0Y2hUaHJlc2hvbGQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhYnMgSlNPTiBmaWxlIGFuZCBhcHByb3ByaWF0ZWx5IGhhbmRsZXMgZXJyb3JzXG4gIGZ1bmN0aW9uIGdldEpzb25GaWxlKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgZmlsZTtcblxuICAgIHRyeSB7XG4gICAgICBmaWxlID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gY291bGRuJ3QgZmluZCBmaWxlXG4gICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICByZXR1cm4gdHlwZSB8fCB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG4gIH1cblxuICByZXR1cm4ge1xuXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcbiAgICB9LFxuXG4gICAgZ2V0QnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICB9LFxuXG4gICAgZ2V0VHlwZUJ5SWQ6IGZ1bmN0aW9uKGlkLCB0eXBlKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ18nICsgdHlwZSArICcuanNvbicsIFtdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdmFsaWRhdGVzIHRoZSBwcm9qZWN0LCBtYWtlcyBzdXJlIGFsbCBzZXR0aW5ncyBhcmUgc2V0dXAgYW5kIHZhbGlkXG4gICAgICovXG4gICAgdmFsaWRhdGU6IGZ1bmN0aW9uKHByb2plY3QpIHtcbiAgICAgIHZhciBjb29raWVzID0gcHJvamVjdC5jb29raWVzO1xuICAgICAgdmFyIHZpZXdwb3J0cyA9IHByb2plY3Qudmlld3BvcnRzO1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IHByb2plY3Quc2VsZWN0b3JzO1xuICAgICAgdmFyIHRpdGxlID0gcHJvamVjdC50aXRsZTtcbiAgICAgIHZhciB1cmwgPSBwcm9qZWN0Lm1ldGEudXJsO1xuICAgICAgdmFyIGJvb2wgPSB0cnVlO1xuXG4gICAgICAvLyB2ZXJpZnkgYWxsIGRlZmF1bHRzIGFyZSBzZXR1cFxuICAgICAgaWYgKCF2aWV3cG9ydHMgfHwgIXNlbGVjdG9ycyB8fCAhdGl0bGUgfHwgIXVybCB8fCB2aWV3cG9ydHMubGVuZ3RoIDwgMSB8fCBzZWxlY3RvcnMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgdmlld3BvcnRzLCB2ZXJpZnkgdGhleSdyZSBzZXR1cCByaWdodFxuICAgICAgaWYgKHZpZXdwb3J0cykge1xuICAgICAgICB2aWV3cG9ydHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoud2lkdGggfHwgIW9iai5oZWlnaHQgfHwgIW9iai5uYW1lKSB7XG4gICAgICAgICAgICBib29sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSBzZWxlY3RvcnMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoc2VsZWN0b3JzKSB7XG4gICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai5xdWVyeSB8fCAhb2JqLnR5cGUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIGNvb2tpZXMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoY29va2llcykge1xuICAgICAgICBjb29raWVzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLm5hbWUgfHwgIW9iai5wYXRoIHx8ICFvYmoudmFsdWUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWZhdWx0IHRvIHRydWVcbiAgICAgIHJldHVybiBib29sO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgbmV3IHByb2plY3QsIGFuZCByZXR1cm5zIHRoZSBkYXRhIGluIGEgcHJvbWlzZVxuICAgICAqL1xuICAgIGNyZWF0ZU5ldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG4gICAgICB2YXIgbmV3UHJvamVjdERhdGEgPSBjcmVhdGVEdW1teVByb2plY3QoYWxsUHJvamVjdHMubGVuZ3RoKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RmlsZSA9IGNyZWF0ZUR1bW15UHJvamVjdEZpbGUobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICBhbGxQcm9qZWN0cy51bnNoaWZ0KG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkobmV3UHJvamVjdEZpbGUpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJ19oaXN0b3J5Lmpzb24nLCBKU09OLnN0cmluZ2lmeShbXSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgICAgZGZkLnJlc29sdmUobmV3UHJvamVjdERhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIHNhdmUgdG8gZmlsZSBhbmQgbGlzdHMsIHJldHVybiBsaXN0IGRhdGFcbiAgICBzYXZlOiBmdW5jdGlvbihwcm9qZWN0RGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IHByb2plY3REYXRhLmlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aXRsZSA9IHByb2plY3REYXRhLnRpdGxlO1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGltZXN0YW1wID0gKCtuZXcgRGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0RGF0YS5pZCArICcuanNvbicsIEpTT04uc3RyaW5naWZ5KHByb2plY3REYXRhKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmV0dXJuIHRoZSBsaXN0aW5nIGRhdGEsIHNvIHdlIGNhbiB1cGRhdGUgdGhlIHNpZGVwYW5lbFxuICAgICAgICAgIGRmZC5yZXNvbHZlKHByb2plY3REYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPOiBzaG91bGQgcmVtb3ZlIGltYWdlcyB1cG9uIGRlbGV0ZT9cbiAgICAvLyBSZW1vdmVzIGEgc2luZ2xlIHByb2plY3QgYnkgSURcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICBhbGxQcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gaWQpIHtcbiAgICAgICAgICBhbGxQcm9qZWN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgcHJvamVjdCBmaWxlXG4gICAgICBmcy51bmxpbmsocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJy5qc29uJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9qZWN0IGhpc3RvcnkgZmlsZVxuICAgICAgICBmcy51bmxpbmsocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ19oaXN0b3J5Lmpzb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmV0dXJuXG4gICAgICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZXMgYWxsIHN0b3JlZCBoaXN0b3J5IGZvciBhIHByb2plY3RcbiAgICAgKi9cbiAgICBjbGVhckhpc3Rvcnk6IGZ1bmN0aW9uKHByb2plY3QpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIG1haW5Qcm9qZWN0cyA9IGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb2plY3QgZGF0YSB0byByZWZsZWN0IG5vIGhpc3RvcnlcbiAgICAgIHByb2plY3QuY3VycmVudEJhdGNoID0gbnVsbDtcbiAgICAgIHByb2plY3QuY3VycmVudFJlZmVyZW5jZSA9IG51bGw7XG4gICAgICBwcm9qZWN0LmJhdGNoSGlzdG9yeSA9IHt9O1xuXG4gICAgICAvLyB1cGRhdGUgdGhlIGN1cnJlbnQgcHJvamVjdCB0byBoYXZlIG5vIGJhdGNoSGlzdG9yeVxuICAgICAgbWFpblByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0LmlkKSB7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLnN1Y2Nlc3MgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy53YXJuaW5nID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy52aWV3cyA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIEpTT04uc3RyaW5naWZ5KFtdKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgaWQgcHJvamVjdFxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGF0YSBvbiB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KG1haW5Qcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIk1VRy5maWx0ZXIoJ3RpbWVBZ28nLFxuWydub3dUaW1lJywgJ3RpbWVBZ28nLFxuZnVuY3Rpb24gKG5vd1RpbWUsIHRpbWVBZ28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBmcm9tVGltZSA9IHRpbWVBZ28ucGFyc2UodmFsdWUpO1xuICAgIHZhciBkaWZmID0gbm93VGltZS5nZXRUaW1lKCkgLSBmcm9tVGltZTtcbiAgICByZXR1cm4gdGltZUFnby5pbldvcmRzKGRpZmYpO1xuICB9O1xufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ01haW5DdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ0NvbmZpZycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgQ29uZmlnLCBQcm9qZWN0cykge1xuICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSAnJztcblxuICAkc2NvcGUuY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIFByb2plY3RzLmNyZWF0ZU5ldygpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgcmVzKTtcbiAgICAgICRzdGF0ZS5nbygncHJvamVjdHMuc2V0dGluZ3MnLCB7IGlkOiByZXMuaWQgfSk7XG4gICAgfSxcblxuICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gJHJvb3RTY29wZS4kZW1pdCgnQUxFUlQ6RklSRScsIHsgIHRpdGxlOiAnSGV5IHRoZXJlLCBJbSBhbiBhbGVydCEhJywgZHVyOiA1LCB0eXBlOiAnc3VjY2VzcycgfSk7XG4gIC8vXG4gIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gIC8vICAgJHJvb3RTY29wZS4kZW1pdCgnQUxFUlQ6RklSRScsIHsgIHRpdGxlOiAnSGV5IHRoZXJlLCBJbSBhbiBlcnJvciEhJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcCcgfSk7XG4gIC8vIH0sIDMwMDApO1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG5cbiAgLy8gQWxsb3cgdGhlIGNoaWxkIHZpZXdzIHRvIGJpbmQgdG8gc2FtZSBzY29wZVxuICAkcm9vdFNjb3BlLnByb2plY3QgPSBQcm9qZWN0cy5nZXRCeUlkKCRzdGF0ZVBhcmFtcy5pZCk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0SGlzdG9yeUN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAnQWxsJztcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gJyc7XG5cbiAgLy8gZ3JhYiBhbGwgdGhlIGhpc3RvcnkgZGF0YVxuICAkc2NvcGUuaGlzdG9yeUl0ZW1zID0gUHJvamVjdHMuZ2V0VHlwZUJ5SWQoJHN0YXRlUGFyYW1zLmlkLCAnaGlzdG9yeScpO1xuXG4gICRzY29wZS5jaGFuZ2VGaWx0ZXIgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9IHR5cGU7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gKHR5cGUgPT0gJ0FsbCcpID8gJycgOiB0eXBlO1xuICB9O1xuXG4gICRzY29wZS5wcmV2aWV3SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAncHJldmlldycsIGl0ZW06IGl0ZW0sIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxufV0pO1xuIiwidmFyIGlwYyA9IHJlcXVpcmUoJ2lwYycpO1xuXG5NVUcuY29udHJvbGxlcignUHJvamVjdFJ1bm5lckN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckdGltZW91dCcsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkdGltZW91dCwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzU2V0dGluZ3MgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IGZhbHNlO1xuICAkc2NvcGUuaGFzQ29tcGFyZSA9IGZhbHNlO1xuICAkc2NvcGUucnVubmluZ1R5cGUgPSAncmVmZXJlbmNlJztcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBbXTtcbiAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggfHwgMDtcbiAgJHNjb3BlLnByb2dyZXNzID0ge1xuICAgIHBlcmNlbnQ6IDAsXG4gICAgdGl0bGU6ICdTdGFydGluZycsXG4gIH07XG5cbiAgLy8gUHV0cyBkYXRhIGludG8gc29ydGVkIHNlY3Rpb25zXG4gIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaChhbGxEYXRhKSB7XG4gICAgaWYgKCFhbGxEYXRhIHx8IGFsbERhdGEubGVuZ3RoIDwgMSkge1xuICAgICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIHJlc2V0IGp1c3QgdGhlIHN0YXRzXG4gICAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5zdWNjZXNzID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS53YXJuaW5nID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5lcnJvciA9IDA7XG4gICAgdmFyIGZvcm1hdHRlZCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgICBmdW5jdGlvbiBwbGFjZUl0ZW0oaXRlbSkge1xuXG4gICAgICAvLyBLZWVwIHRoaW5ncyBvcmdhbml6ZXMgd2l0aCBwcmVzZXQgcHJpb3JpdHlcbiAgICAgIGlmIChpdGVtLnN0YXR1cykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICB0YXJnZXQgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZFt0YXJnZXRdLml0ZW1zLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICRzY29wZS5hY3RpdmVEYXRhW2Zvcm1hdHRlZFt0YXJnZXRdLnR5cGVdID0gJHNjb3BlLmFjdGl2ZURhdGFbZm9ybWF0dGVkW3RhcmdldF0udHlwZV0gKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsbERhdGEubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmJhdGNoID09PSAkc2NvcGUuY3VycmVudEJhdGNoKSB7XG4gICAgICAgIHBsYWNlSXRlbShvYmopO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IHRydWU7XG4gICAgJHNjb3BlLmhhc0NvbXBhcmUgPSAoZm9ybWF0dGVkLmxlbmd0aCA+IDApO1xuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cEN1cnJlbnRCYXRjaCgpIHtcbiAgICBpZiAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCA9PT0gbnVsbCkge3JldHVybjt9XG5cbiAgICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICAgIHZhciBpZCA9ICh0eXBlb2YgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gdW5kZWZpbmVkKSA/ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggOiAwO1xuICAgIHZhciBoaXN0b3J5RGF0YSA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAgIC8vIFN0b3JlIHRoZSBwcm9jZXNzZWQgZGF0YSBpbnRvIHRoZSBiYXRjaCBkYXRhXG4gICAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuICB9XG5cbiAgLy8gdmFsaWRhdGlvbiBvZiBwcm9qZWN0XG4gIGZ1bmN0aW9uIHZhbGlkYXRlUHJvamVjdCgpIHtcbiAgICAvLyB2ZXJpZnkgaWYgaXRzIHZhbGlkXG4gICAgdmFyIGlzVmFsaWQgPSBQcm9qZWN0cy52YWxpZGF0ZSgkcm9vdFNjb3BlLnByb2plY3QpO1xuXG4gICAgLy8gYWxlcnQgb2YgaW52YWxpZGl0eVxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1BsZWFzZSBmaW5pc2ggY29uZmlndXJpbmcgc2V0dGluZ3MhJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcCcgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH1cblxuICAvLyBUT0RPOlxuICAvLyAtIHVwZGF0ZSBVSSBhZnRlciBydW5uZXIgcHJvZ3Jlc3NcbiAgLy8gY2hlY2tzIGZvciBjaGFuZ2VzIGFuZCB1cGRhdGVzIFVJIGFjY291cmRpbmdseVxuICBmdW5jdGlvbiBjaGVja1N0YXRlKCkge1xuICAgICRzY29wZS5oYXNTZXR0aW5ncyA9IHZhbGlkYXRlUHJvamVjdCgpO1xuICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgIT09IG51bGwpO1xuICAgICRzY29wZS5oYXNDb21wYXJlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggIT09IG51bGwgJiYgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gMCk7XG4gICAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2g7XG4gIH1cblxuICAvLyBncmFiIHRoZSBsYXRlc3QgZGF0YSBmb3IgdGhlIHByb2plY3RcbiAgZnVuY3Rpb24gZ3JhYkxhdGVzdERhdGEoKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkcm9vdFNjb3BlLnByb2plY3QuaWQsICdoaXN0b3J5Jyk7XG5cbiAgICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAgICRzY29wZS5hY3RpdmVEYXRhID0gKCRyb290U2NvcGUucHJvamVjdCAmJiAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5KSA/ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF0gOiBudWxsO1xuICB9XG5cbiAgZ3JhYkxhdGVzdERhdGEoKTtcbiAgY2hlY2tTdGF0ZSgpO1xuICBzZXR1cEN1cnJlbnRCYXRjaCgpO1xuXG4gIC8vIEZpcmUgb2ZmIHRoZSB2aWV3ZXJcbiAgJHNjb3BlLnByZXZpZXdCYXRjaCA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ2JhdGNoJywgaXRlbXM6IGl0ZW1zLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbiAgLy8gRmlyZSBvZmYgYSBuZXcgdGVzdCEhXG4gICRzY29wZS5uZXdDb21wYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbGlkID0gdmFsaWRhdGVQcm9qZWN0KCk7XG5cbiAgICAvLyB2YWxpZGF0aW9uIHBhdXNlXG4gICAgaWYgKCF2YWxpZCkge3JldHVybjt9XG5cbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAnY29tcGFyZSc7XG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuICAgIGlwYy5zZW5kKCdSVU5ORVI6RklSRScsIHsgdHlwZTogJ2NvbXBhcmUnLCBwcm9qZWN0SWQ6ICRyb290U2NvcGUucHJvamVjdC5pZCB9KTtcbiAgfTtcblxuICAvLyBzZXR1cCBuZXcgcmVmZXJlbmNlXG4gICRzY29wZS5uZXdSZWZlcmVuY2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsaWQgPSB2YWxpZGF0ZVByb2plY3QoKTtcblxuICAgIC8vIHZhbGlkYXRpb24gcGF1c2VcbiAgICBpZiAoIXZhbGlkKSB7cmV0dXJuO31cblxuICAgICRzY29wZS5wcm9jZXNzaW5nID0gdHJ1ZTtcbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAncmVmZXJlbmNlJztcbiAgICAkc2NvcGUuaGFzQ29tcGFyZSA9IGZhbHNlO1xuICAgIGlwYy5zZW5kKCdSVU5ORVI6RklSRScsIHsgdHlwZTogJ3JlZmVyZW5jZScsIHByb2plY3RJZDogJHJvb3RTY29wZS5wcm9qZWN0LmlkIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJ1bm5lckV2ZW50cyhhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLm1zZyB8fCAhYXJncy5wZXJjZW50KSB7cmV0dXJuO31cblxuICAgIC8vIFdyaXRlIHRoZSBwcm9ncmVzcyB0byBVSVxuICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gcGFyc2VJbnQoYXJncy5wZXJjZW50LCAxMCk7XG4gICAgJHNjb3BlLnByb2dyZXNzLnRpdGxlID0gKGFyZ3MubXNnKSA/IGFyZ3MubXNnIDogJHNjb3BlLnByb2dyZXNzLnRpdGxlO1xuICB9XG5cbiAgLy8gVE9ETzogc2lnbmFsIFVJIG9mIGNoYW5nZXNcbiAgZnVuY3Rpb24gcnVubmVyQ29tcGxldGUoKSB7XG4gICAgZ3JhYkxhdGVzdERhdGEoKTtcbiAgICBjaGVja1N0YXRlKCk7XG4gICAgc2V0dXBDdXJyZW50QmF0Y2goKTtcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gcnVubmVyRmFpbGVkKHJlYXNvbikge1xuICAgIGNvbnNvbGUubG9nKCdSVU5ORVI6RkFJTEVEIHJlYXNvbicsIHJlYXNvbik7XG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGlwYy5vbignUlVOTkVSOlBST0dSRVNTJywgcnVubmVyRXZlbnRzKTtcbiAgaXBjLm9uKCdSVU5ORVI6Q09NUExFVEUnLCBydW5uZXJDb21wbGV0ZSk7XG4gIGlwYy5vbignUlVOTkVSOkZBSUxFRCcsIHJ1bm5lckZhaWxlZCk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0U2V0dGluZ3NDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICB2YXIgc2F2ZVRpbWVyO1xuXG4gICRzY29wZS5zZWxlY3RvclR5cGVzID0gWydjb250YWluZXInLCAnaGlkZScsICdyZW1vdmUnXTtcbiAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcblxuICBmdW5jdGlvbiBhZGROZXdUeXBlKHR5cGUsIGRhdGEpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0ucHVzaChkYXRhKTtcbiAgfVxuXG4gIC8vIFdhdGNoIGZvciBjaGFuZ2VzLCBzbyB3ZSBjYW4gc2F2ZVxuICAkc2NvcGUuJHdhdGNoKCdwcm9qZWN0JywgZnVuY3Rpb24oblYsIG9WKSB7XG4gICAgaWYgKG5WICE9IG9WKSB7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgICAkc2NvcGUuc2F2ZSgpO1xuICAgIH1cbiAgfSwgdHJ1ZSk7XG5cbiAgLy8gVE9ETzogc2V0dXAgdmFsaWRhdGlvbnNcbiAgLy8gc2F2ZSB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNhdmVUaW1lcikge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChzYXZlVGltZXIpO1xuICAgIH1cblxuICAgIC8vIHRocm90dGxlIHRoZSBzYXZlcywgc2luY2Ugd2Ugc2F2ZSBvbiBhbnkgY2hhbmdlc1xuICAgIHNhdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8vIFNhdmUgdGVoIHByb2plY3RvaWRcbiAgICAgIFByb2plY3RzLnNhdmUoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNpZGViYXIgd2l0aCBjaGFuZ2VzXG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsIHJlcyk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJldmVydCBtb2RlbFxuICAgICAgICAgIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sIDIwMCk7XG4gIH07XG5cbiAgLy8gcmV2ZXJ0IHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLmNhbmNlbFNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciBhbGwgeW91ciBjaGFuZ2VzPycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICAvLyBwdXQgcmV2ZXJ0IG1vZGVsIGludG8gdGhlIHByb2plY3QgbW9kZWxcbiAgICAgIGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGVsZXRlIHRoZSBwcm9qZWN0LCBhbmQgcmVtb3ZlIGZyb20gcHJvamVjdCBsaXN0cywgdGhlbiByZWRpcmVjdCB0byBtYWluXG4gICRzY29wZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdD8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgdmFyIHByb2plY3RJRCA9ICRyb290U2NvcGUucHJvamVjdC5pZDtcblxuICAgICAgUHJvamVjdHMucmVtb3ZlKHByb2plY3RJRClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6IFwiUHJvamVjdCBSZW1vdmVkIFN1Y2Nlc3NmdWxseVwiLCBkdXI6IDUsIHR5cGU6IFwic3VjY2Vzc1wiIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpSRU1PVkUnLCB7IGlkOiBwcm9qZWN0SUQgfSk7XG4gICAgICAgICAgJHN0YXRlLmdvKCdtYWluJyk7XG4gICAgICAgICAgJHJvb3RTY29wZS5wcm9qZWN0ID0ge307XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkcyBhIG5ldyB2aWV3cG9ydCBpdGVtXG4gICRzY29wZS5hZGRWaWV3cG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdWaWV3cG9ydCA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbCxcbiAgICAgIGhlaWdodDogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCd2aWV3cG9ydHMnLCBuZXdWaWV3cG9ydCk7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBzZWxlY3RvciBpdGVtXG4gICRzY29wZS5hZGRTZWxlY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTZWxlY3RvciA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIHR5cGU6ICdjb250YWluZXInLFxuICAgICAgcXVlcnk6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnc2VsZWN0b3JzJywgbmV3U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8vIEFkZHMgYSBuZXcgY29va2llIGl0ZW1cbiAgJHNjb3BlLmFkZENvb2tpZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdDb29raWUgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBwYXRoOiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ2Nvb2tpZXMnLCBuZXdDb29raWUpO1xuICB9O1xuXG4gIC8vIGFjdGl2YXRlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5hY3RpdmF0ZVR5cGUgPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID0gKCRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSB0cnVlIHx8ICRyb290U2NvcGUucHJvamVjdFt0eXBlXVtpZF0uYWN0aXZlID09PSAndHJ1ZScpID8gZmFsc2UgOiB0cnVlO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG4gIC8vIFJlbW92ZSBhIGNvb2tpZS92aWV3L3NlbGVjdFxuICAkc2NvcGUuZGVsZXRlVHlwZUl0ZW0gPSBmdW5jdGlvbih0eXBlLCBpZCkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5zcGxpY2UoaWQsIDEpO1xuXG4gICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAkc2NvcGUuc2F2ZSgpO1xuICB9O1xuXG4gIC8vIFJlbW92ZXMgYWxsIGhpc3RvcnkgZGF0YVxuICAkc2NvcGUuY2xlYXJIaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY2xlYXJIaXN0b3J5KCRyb290U2NvcGUucHJvamVjdClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiBcIkNsZWFyZWQgQWxsIEhpc3RvcnkhXCIsIGR1cjogNSwgdHlwZTogXCJzdWNjZXNzXCIsIGljb246IFwiaGlzdG9yeVwiIH0pO1xuICAgICAgfVxuXG4gICAgICAsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiBcIkVycm9yIE9jY3VycmVkISBQbGVhc2UgdHJ5IGFnYWluLlwiLCBkdXI6IDUsIHR5cGU6IFwiZXJyb3JcIiwgaWNvbjogXCJzdG9wXCIgfSk7XG4gICAgICB9KTtcbiAgfTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1NpZGVQYW5lbEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gICRzY29wZS5wcm9qZWN0cyA9IFtdO1xuXG4gIC8vIGdyYWIgYWxsIHByb2plY3RzIGxpc3RcbiAgJHNjb3BlLnByb2plY3RzID0gUHJvamVjdHMuZ2V0QWxsKCk7XG5cbiAgLy8gYWRkIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6TkVXUFJPSkVDVCcsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMudW5zaGlmdChhcmdzKTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6VVBEQVRFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udGl0bGUgPSBhcmdzLnRpdGxlO1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50aW1lc3RhbXAgPSBhcmdzLnRpbWVzdGFtcDtcblxuICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdKSB7XG4gICAgICAgICAgLy8gb25seSB1cGRhdGUgdG90YWxzIGlmIHdlIGhhdmUgdGhlbVxuICAgICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRvdGFscyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpSRU1PVkUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gICRzY29wZS5nb1RvUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgLy8gVE9ETzogZml4IHRoaXNcbiAgICAvLyB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG4gICAgdmFyIHR5cGUgPSAncnVubmVyJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMjU1LFxuICAgICAgZ3JlZW46IDAsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ2ZsYXQnLFxuICAgIHRyYW5zcGFyZW5jeTogMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAwXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufV0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJGh0dHApIHtcblxuICAvLyBoZWFkZXJzXG4gIHZhciAkY29tbW9uID0gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb247XG4gICRjb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCckc3RhdGVDaGFuZ2VFcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==