var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,i,c,a){function s(n){var o=+new Date,i=(n.title,n.icon?n.icon:null,e.$new(!0));i.alert={},i.alert.id=o,i.alert.icon=n.icon?n.icon:null,i.alert.type=n.type?n.type:"info",i.alert.title=n.title,i.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var c=r(p)(i);c[0].id=o,m=o,f.append(c),c.addClass(v),t(function(){c.addClass(h)},20),l=t(function(){u(c)},d)}function u(e){if(!e&&m)e=angular.element(document.getElementById(m));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(h),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(i),d=5e3,m="",v="alert-active",h="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(d=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){var n=t.remoteSource?t.remoteSource:t.source;e.compareItem.a=t.remoteSource?n:"screens/reference/"+r.project.id+"/"+n.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n,e.compareItem.c=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n.replace(".png","_diff.png")}var i="modal-open",c="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.compareItem.a="screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(i),setTimeout(function(){t.addClass(c)},30))}),e.close=function(){t.removeClass(c),setTimeout(function(){t.removeClass(i)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=p.replace("BODY",i).replace("ICON",c),h=r(a)(n);h[0].id=o,m=o,f.append(h);var g=f.find("#"+o);u(g,e.type),e.callback&&g.find(".msg-action").addClass("show"),t(function(){g.addClass("add")},20),l=t(function(){s(g)},d)}function s(e){if(!e&&m)e=f.find("#"+m);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),d=5e3,m="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(d=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]);var P=require("./vendor/core/preloader");MUG.directive("preloader",["$rootScope","$timeout",function(e,t){return{replace:!0,restrict:"E",scope:{},template:'<div class="preloader"></div>',link:function(r,n,o,i){function c(e,t){if(t&&t.msg){l=t.msg;var r;switch(l){case"Opening Browser Session":r=0;break;case"Capturing Screens":r=1}l!==p&&s&&s.animate&&s.animate(r,30,function(){p=l})}}function a(){u.addClass(f)}var s,u,l,p,f="loading";t(function(){s=new P.Browser,s.init(),u=document.querySelector(".preloader"),u.appendChild(s.instance),s.drawBrowser()},30),e.$on("PRELOADER:UPDATE",c),e.$on("PRELOADER:OFF",a)}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var c=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&c.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),c.resolve(a)})}),c.promise}var o=__dirname+"/",i="data:image/png;base64,",c=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?c[1]:c[0]:t>.1&&2>t?c[1]:c[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs"),path=require("path"),AWS=require("./vendor/core/aws");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}function i(e){try{var t=fs.readdirSync(e)}catch(r){return}if(t.length>0)for(var n=0;n<t.length;n++){var o=path.join(e,t[n]);fs.statSync(o).isFile()?fs.unlinkSync(o):rmDir(o)}}function c(t,r){var n=e.defer();return fs.writeFile(t,JSON.stringify(r),function(e){return e?void n.reject(e):void n.resolve()}),n.promise}function a(t){var r=e.defer();return fs.unlink(t,function(e){return e?void r.reject(e):void r.resolve()}),r.promise}var s=__dirname+"/projects.json",u=__dirname+"/projects/";return{get:function(e,t){return o(__dirname+e,t)},getAll:function(){return o(s,[])},getById:function(e){return o(u+e+".json")},getTypeById:function(e,t){return o(u+e+"_"+t+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,i=e.meta.url,c=!0;return!r||!n||!o||!i||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(c=!1)}),n&&n.map(function(e,t){e.query&&e.type||(c=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(c=!1)}),c)},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(s,"utf8")),i=r(o.length),c=n(i);return o.unshift(i),fs.writeFile(s,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(u+i.id+".json",JSON.stringify(c),function(e){return e?void t.reject(e):void fs.writeFile(u+i.id+"_history.json",JSON.stringify([]),function(e){return e?void t.reject(e):void t.resolve(i)})})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(s,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(u+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(s,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(u+t+".json",function(e){return e?void r.reject(e):void fs.unlink(u+t+"_history.json",function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},clearHistory:function(t){var r=e.defer(),n=o(s,[]);return t.currentBatch=null,t.currentReference=null,t.batchHistory={},n.map(function(e,r){e.id===t.id&&(n[r].totals.success=0,n[r].totals.warning=0,n[r].totals.error=0,n[r].totals.views=0)}),this.cleanImageFiles(t),fs.writeFile(u+t.id+"_history.json",JSON.stringify([]),function(e){return e?void r.reject(e):void fs.writeFile(u+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(s,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},sync:function(t){if(t){for(var r=this,n=e.defer(),o=this.getById(t),i=this.getTypeById(t,"history"),c=[],a=0;a<i.length;a++){var s=i[a];if(-1===s.source.search("amazon")){var u=s.source,l=s.type,p=__dirname+"/screens/"+l+"/"+o.id+"/"+u;c.push({key:l+"/"+u,path:p})}}return AWS.init().upload(c,o.id).then(function(e){r.cleanAfterSync(o,e).then(n.resolve,n.reject)},function(e){n.reject(e)}),n.promise}},cleanAfterSync:function(t,r){var n=e.defer(),i=o(u+t.id+"_history.json",[]),s=[],l=[];t.updatedAt=+new Date;for(var p=0;p<r.length;p++){var f=r[p],d=f.split("/"),m=d[d.length-2],v=d[d.length-1];i.map(function(e,n){if(e.source===v){delete i[n].source,i[n].remoteSource=r[p];var o=__dirname+"/screens/"+m+"/"+t.id+"/"+v,c=a(o);if(l.push(c),"compare"===m){var s=a(o.replace(".","_diff."));l.push(s)}}})}var h=__dirname+"/projects/"+t.id+".json",g=h.replace(".json","_history.json"),y=c(h,t),j=c(g,i);l.unshift(y),l.unshift(j),s.push({key:t.id,path:h}),s.push({key:t.id+"_history",path:g});var w=AWS.init().upload(s,t.id);return l.unshift(w),e.all(l).then(n.resolve,n.reject),n.promise},cleanImageFiles:function(e){var t=__dirname+"/screens/BASE/"+e.id,r=t.replace("BASE","compare"),n=t.replace("BASE","reference");i(r),i(n)}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,p=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,i].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]);var ipc=require("ipc");MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})},ipc.on("NAVIGATE:TO",function(e){e&&e.location&&(console.log("NAVIGATE:TO",e),r.go(e.location))})}]);var fs=require("fs"),AWS=require("./vendor/core/aws");MUG.controller("PreferencesCtrl",["$rootScope","$scope","$state",function(e,t,r){t.awsConfig={bucket:"",accessKeyId:"",secretAccessKey:""},t.awsConfig=AWS.getConfig(),t.save=function(){AWS.setConfig(t.awsConfig)}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("ipc");MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,n}function c(){if(null!==e.project.currentBatch){var r=(void 0!==typeof e.project.currentBatch?e.project.currentBatch:0,o.getTypeById(n.id,"history"));t.batchItems=i(r),t.runningType=e.project.currentReference>=e.project.currentBatch?"reference":"compare"}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,t.currentBatch=e.project.currentBatch,"reference"===t.runningType?t.hasCompare=!1:(t.hasCompare=null!==e.project.currentBatch&&0!==e.project.currentBatch,t.hasCompare=e.project.currentReference<=e.project.currentBatch)}function u(){e.project=o.getById(e.project.id,"history"),t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,e.$emit("SIDEPANEL:UPDATE",e.project)}function l(r){r&&r.msg&&r.percent&&(t.progress.percent=parseInt(r.percent,10),t.progress.title=r.msg?r.msg:t.progress.title,e.$emit("PRELOADER:UPDATE",r))}function p(){u(),c(),s(),t.processing=!1}function f(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"},u(),c(),s(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",l),ipc.on("RUNNER:COMPLETE",p),ipc.on("RUNNER:FAILED",f)}]);var fs=require("fs");MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}function i(){var e=n.get("/config/aws.json",{});return e&&e.bucket&&e.accessKeyId&&e.secretAccessKey?!0:!1}var c;t.syncing=!1,t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.hasAwsSettings=!1,t.master={},angular.copy(e.project,t.master),t.hasAwsSettings=i(),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){c&&window.clearTimeout(c),c=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.syncNow=function(){t.syncing=!0,e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:5,type:"info"}),n.sync(e.project.id).then(function(r){t.syncing=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:5,type:"success",icon:"check"})},function(r){t.syncing=!1,console.log("syncNow err",r),e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})})},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(r.batchHistory[r.currentBatch].success&&(t.projects[n].totals.success=r.batchHistory[r.currentBatch].success),r.batchHistory[r.currentBatch].warning&&(t.projects[n].totals.warning=r.batchHistory[r.currentBatch].warning),r.batchHistory[r.currentBatch].error&&(t.projects[n].totals.error=r.batchHistory[r.currentBatch].error),r.batchHistory[r.currentBatch].views&&(t.projects[n].totals.views=r.batchHistory[r.currentBatch].views)))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("preferences",{url:"/preferences",templateUrl:"preferences.html",controller:"PreferencesCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJwcmVsb2FkZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcmVmZXJlbmNlc2N0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiaW1hZ2VTcmMiLCJyZW1vdGVTb3VyY2UiLCJzb3VyY2UiLCJjb21wYXJlSXRlbSIsImEiLCJwcm9qZWN0IiwiY3VycmVudEJhdGNoIiwiY3VycmVudFJlZmVyZW5jZSIsImIiLCJjIiwibW9kYWxBY3RpdmUiLCJtb2RhbFZpc2libGUiLCJjb3B5IiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4IiwiYWN0aXZlSXRlbSIsInZpZXdlciIsIml0ZW1zIiwiYW1vdW50IiwiaW52ZXJzZSIsInBlcmNlbnQiLCIkd2F0Y2giLCJudiIsIm92IiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsIm9wdGlvbk1vZGUiLCJhcmdzIiwiY2xvc2UiLCJpdGVtIiwibGVuZ3RoIiwibW9kYWxBY3Rpb25OYXYiLCJuZXh0SWR4IiwidG90YWwiLCJnb1RvSW5kZXgiLCJpZHgiLCJuZXdCb2R5IiwibXNnIiwibmV3SWNuIiwiZGVmYXVsdEljb24iLCJtc2dUZW1wbGF0ZSIsIm5ld01lc3NhZ2UiLCJtc2dFbCIsImZpbmQiLCJjaGFuZ2VUeXBlIiwiYm9keSIsImFjdGlvbkVsIiwiUCIsInJlcXVpcmUiLCJ1cGRhdGVQcmVsb2FkZXIiLCJwcmV2aW91c1RpdGxlIiwiQiIsImFuaW1hdGUiLCJyZXNldFByZWxvYWRlciIsImxvYWRpbmciLCJCcm93c2VyIiwiaW5pdCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsImluc3RhbmNlIiwiZHJhd0Jyb3dzZXIiLCJ0aW1lQWdvIiwibm93VGltZSIsImZyb21UaW1lIiwiJG9ic2VydmUiLCJ2YWx1ZSIsInBhcnNlIiwiZ2V0VGltZSIsInRleHQiLCJpbldvcmRzIiwiZnMiLCJhc3luYyIsImZhY3RvcnkiLCIkcSIsIkNvbmZpZyIsInJlYWRBc3luYyIsImZpbGUiLCJyZWFkRmlsZSIsImZpbGVEaXJQcmVmaXgiLCJjb21wYXJlU2luZ2xlIiwiZGZkIiwiZGVmZXIiLCJvdXRwdXQiLCJyZXNlbWJsZSIsIm91dHB1dFNldHRpbmdzIiwiQ29tcGFyZSIsIm1hcCIsImVyciIsInJlc3VsdHMiLCJhRGF0YSIsImltYWdlUHJlZml4IiwiYkRhdGEiLCJyZWplY3QiLCJjb21wYXJlVG8iLCJpZ25vcmVDb2xvcnMiLCJvbkNvbXBsZXRlIiwiZGlmZkRhdGEiLCJyZXBvcnQiLCJzcmMiLCJnZXRJbWFnZURhdGFVcmwiLCJyZXNvbHZlIiwicHJvbWlzZSIsIl9fZGlybmFtZSIsInN0YXR1c1R5cGVzIiwicnVuU2luZ2xlIiwiZ2V0U3RhdHVzIiwibWlzTWF0Y2hWYWx1ZSIsInBhcnNlRmxvYXQiLCJtaXNNYXRjaFBlcmNlbnRhZ2UiLCJpc1NhbWVEaW1lbnNpb25zIiwibm93IiwidXBkYXRlVGltZSIsInBhdGgiLCJBV1MiLCJjcmVhdGVVVUlEIiwicyIsIkFycmF5Iiwiam9pbiIsIm4iLCJyYW5kb20iLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjcmVhdGVEdW1teVByb2plY3QiLCJwcm9qZWN0SWQiLCJ0aW1lc3RhbXAiLCJ0b3RhbHMiLCJzdWNjZXNzIiwid2FybmluZyIsImVycm9yIiwidmlld3MiLCJjcmVhdGVEdW1teVByb2plY3RGaWxlIiwib3B0aW9ucyIsImJhdGNoSGlzdG9yeSIsInZpZXdwb3J0cyIsInNlbGVjdG9ycyIsImNvb2tpZXMiLCJtZXRhIiwidXJsIiwicmVhZHlFdmVudCIsImRlbGF5IiwibWlzTWF0Y2hUaHJlc2hvbGQiLCJnZXRKc29uRmlsZSIsInJlYWRGaWxlU3luYyIsImNvZGUiLCJKU09OIiwicmVtb3ZlQWxsSW5EaXJlY3RvcnkiLCJkaXJQYXRoIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsImkiLCJmaWxlUGF0aCIsInN0YXRTeW5jIiwiaXNGaWxlIiwidW5saW5rU3luYyIsInJtRGlyIiwicHJvbWlzZVdyaXRlIiwiX3EiLCJ3cml0ZUZpbGUiLCJzdHJpbmdpZnkiLCJwcm9taXNlUmVtb3ZlIiwiX3oiLCJ1bmxpbmsiLCJwcm9qZWN0c1BhdGgiLCJwcm9qZWN0RmlsZXNQYXRoIiwiZ2V0QWxsIiwiZ2V0QnlJZCIsImdldFR5cGVCeUlkIiwidmFsaWRhdGUiLCJib29sIiwib2JqIiwid2lkdGgiLCJoZWlnaHQiLCJuYW1lIiwicXVlcnkiLCJjcmVhdGVOZXciLCJhbGxQcm9qZWN0cyIsIm5ld1Byb2plY3REYXRhIiwibmV3UHJvamVjdEZpbGUiLCJ1bnNoaWZ0Iiwic2F2ZSIsInByb2plY3REYXRhIiwic3BsaWNlIiwiY2xlYXJIaXN0b3J5IiwibWFpblByb2plY3RzIiwiY2xlYW5JbWFnZUZpbGVzIiwic3luYyIsIl90aGlzIiwiZCIsInByb2plY3RGaWxlcyIsInJlYWR5RmlsZXMiLCJ0bXBGaWxlIiwic2VhcmNoIiwicHVzaCIsImtleSIsInVwbG9hZCIsInRoZW4iLCJyZXMiLCJjbGVhbkFmdGVyU3luYyIsIm5ld1JlZnMiLCJkZmRkIiwiaGlzdG9yeURhdGEiLCJ1cGRhdGVkUmVtb3RlRmlsZXMiLCJxdWV1ZVByb21pc2VzIiwidXBkYXRlZEF0IiwidG1wU3JjIiwidG1wUmVmIiwic3BsaXQiLCJ0bXBUeXBlIiwidG1wQWxpYXMiLCJyZW1SZWZQYXRoIiwicmVtUmVmIiwicmVtUmVmRGlmZiIsInByb2plY3RGaWxlIiwicHJvamVjdEhpc3RvcnlGaWxlIiwicHJvamVjdFdyaXRlIiwicHJvamVjdEhpc3RvcnlXcml0ZSIsImF3c1VwbG9hZCIsImFsbCIsImJhc2UiLCJjb21wcyIsInJlZnMiLCJ0cmltRGlnaXRzIiwibnVtIiwibSIsInRvU3RyaW5nIiwic2xpY2UiLCJzZXJ2aWNlIiwic2V0dGluZ3MiLCJyZWZyZXNoTWlsbGlzIiwiYWxsb3dGdXR1cmUiLCJzdHJpbmdzIiwicHJlZml4QWdvIiwicHJlZml4RnJvbU5vdyIsInN1ZmZpeEFnbyIsInN1ZmZpeEZyb21Ob3ciLCJzZWNvbmRzIiwibWludXRlIiwibWludXRlcyIsImhvdXIiLCJob3VycyIsImRheSIsImRheXMiLCJtb250aCIsIm1vbnRocyIsInllYXIiLCJ5ZWFycyIsIm51bWJlcnMiLCJkaXN0YW5jZU1pbGxpcyIsInN1YnN0aXR1dGUiLCJzdHJpbmdPckZ1bmN0aW9uIiwibnVtYmVyIiwic3RyaW5nIiwiaXNGdW5jdGlvbiIsIiRsIiwicHJlZml4Iiwic3VmZml4IiwiYWJzIiwid29yZHMiLCJzZXBhcmF0b3IiLCJ1bmRlZmluZWQiLCJ3b3JkU2VwYXJhdG9yIiwidHJpbSIsImlzbzg2MDEiLCJpc051bWJlciIsIm9yaWdpbmFsVGltZXN0YW1wIiwiZmlsdGVyIiwiZGlmZiIsImlwYyIsImNvbnRyb2xsZXIiLCIkc3RhdGUiLCJQcm9qZWN0cyIsImN1cnJlbnRQcm9qZWN0SWQiLCJjcmVhdGVOZXdQcm9qZWN0IiwiJGJyb2FkY2FzdCIsImdvIiwiY29uc29sZSIsImxvZyIsIm9uIiwibG9jYXRpb24iLCJhd3NDb25maWciLCJidWNrZXQiLCJhY2Nlc3NLZXlJZCIsInNlY3JldEFjY2Vzc0tleSIsImdldENvbmZpZyIsInNldENvbmZpZyIsIiRzdGF0ZVBhcmFtcyIsImFjdGl2ZUZpbHRlciIsImFjdGl2ZUZpbHRlclF1ZXJ5IiwiaGlzdG9yeUl0ZW1zIiwiY2hhbmdlRmlsdGVyIiwicHJldmlld0l0ZW0iLCIkZW1pdCIsInByb2Nlc3NCYXRjaCIsImFsbERhdGEiLCJwbGFjZUl0ZW0iLCJzdGF0dXMiLCJ0YXJnZXQiLCJmb3JtYXR0ZWQiLCJhY3RpdmVEYXRhIiwiaGFzUmVmZXJlbmNlIiwiYmF0Y2giLCJzZXR1cEN1cnJlbnRCYXRjaCIsImJhdGNoSXRlbXMiLCJydW5uaW5nVHlwZSIsInZhbGlkYXRlUHJvamVjdCIsImlzVmFsaWQiLCJjaGVja1N0YXRlIiwiaGFzU2V0dGluZ3MiLCJoYXNDb21wYXJlIiwiZ3JhYkxhdGVzdERhdGEiLCJydW5uZXJFdmVudHMiLCJwcm9ncmVzcyIsInJ1bm5lckNvbXBsZXRlIiwicHJvY2Vzc2luZyIsInJ1bm5lckZhaWxlZCIsInJlYXNvbiIsInByZXZpZXdCYXRjaCIsIm5ld0NvbXBhcmUiLCJ2YWxpZCIsInNlbmQiLCJuZXdSZWZlcmVuY2UiLCJhZGROZXdUeXBlIiwiY2hlY2tBd3NTZXR0aW5ncyIsInNhdmVUaW1lciIsInN5bmNpbmciLCJzZWxlY3RvclR5cGVzIiwiaGFzQ2hhbmdlcyIsImhhc0F3c1NldHRpbmdzIiwibWFzdGVyIiwiblYiLCJvViIsInN5bmNOb3ciLCJjYW5jZWxTYXZlIiwic3VyZSIsImNvbmZpcm0iLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdElEIiwiYWRkVmlld3BvcnQiLCJuZXdWaWV3cG9ydCIsImFjdGl2ZSIsImFkZFNlbGVjdG9yIiwibmV3U2VsZWN0b3IiLCJhZGRDb29raWUiLCJuZXdDb29raWUiLCJhY3RpdmF0ZVR5cGUiLCJkZWxldGVUeXBlSXRlbSIsInByb2plY3RzIiwiZ29Ub1Byb2plY3QiLCJjb25zdGFudCIsIkVOViIsIlNUQUdFIiwiUFJPRCIsImVycm9yQ29sb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJlcnJvclR5cGUiLCJ0cmFuc3BhcmVuY3kiLCJsYXJnZUltYWdlVGhyZXNob2xkIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsIm90aGVyd2lzZSIsInJ1biIsIiRodHRwIiwiJGNvbW1vbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxXQUFBLFlBQUEsZ0JDbUJBRixLQUFBRyxVQUFBLFNBQ0EsYUFBQSxXQUFBLFdBQUEsaUJBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxPQUNBQyxTQUFBLElBQ0FDLFNBQUEsRUFDQUMsU0FBQSxtQ0FDQUMsU0FDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxFQUFBQyxHQVNBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsSUFBQSxHQUFBQyxNQUdBQyxHQUZBSCxFQUFBSSxNQUNBSixFQUFBLEtBQUFBLEVBQUFLLEtBQUEsS0FDQWxCLEVBQUFtQixNQUFBLEdBR0FILEdBQUFJLFNBQ0FKLEVBQUFJLE1BQUFDLEdBQUFQLEVBQ0FFLEVBQUFJLE1BQUFGLEtBQUFMLEVBQUEsS0FBQUEsRUFBQUssS0FBQSxLQUNBRixFQUFBSSxNQUFBRSxLQUFBVCxFQUFBLEtBQUFBLEVBQUFTLEtBQUEsT0FDQU4sRUFBQUksTUFBQUgsTUFBQUosRUFBQUksTUFDQUQsRUFBQUksTUFBQUcsT0FBQVYsRUFBQVcsU0FBQSxXQUNBQyxLQUFBSixFQUNBUixHQUFBVyxXQUNBRSxFQUFBRCxPQUhBLElBTUEsSUFBQUUsR0FBQXpCLEVBQUEwQixHQUFBWixFQUdBVyxHQUFBLEdBQUFOLEdBQUFQLEVBQ0FlLEVBQUFmLEVBR0FnQixFQUFBQyxPQUFBSixHQUNBQSxFQUFBSyxTQUFBQyxHQUdBaEMsRUFBQSxXQUNBMEIsRUFBQUssU0FBQUUsSUFDQSxJQUVBQyxFQUFBbEMsRUFBQSxXQUNBeUIsRUFBQUMsSUFDQVMsR0FHQSxRQUFBVixHQUFBVyxHQUNBLElBQUFBLEdBQUFSLEVBQ0FRLEVBQUF4QyxRQUFBeUMsUUFBQUMsU0FBQUMsZUFBQVgsUUFDQSxDQUFBLElBQUFRLEVBQ0EsTUFDQUEsS0FDQUEsRUFBQXhDLFFBQUF5QyxRQUFBRCxJQUdBQSxFQUFBSSxZQUFBUCxHQUNBakMsRUFBQSxXQUNBb0MsRUFBQUssVUFDQSxLQTFEQSxHQUVBUCxHQUZBUCxFQUFBekIsRUFBQXdDLElBQUEsY0FDQWIsRUFBQWpDLFFBQUF5QyxRQUFBN0IsR0FFQTJCLEVBQUEsSUFDQVAsRUFBQSxHQUNBSSxFQUFBLGVBQ0FDLEVBQUEsZUF1REFsQyxHQUFBNEMsSUFBQSxhQUFBLFNBQUFDLEVBQUFoQyxHQUNBQSxFQUFBSSxRQUVBNkIsT0FBQUMsYUFBQVosR0FDQVQsSUFFQWIsRUFBQW1DLE1BQ0FaLEVBQUEsSUFBQXZCLEVBQUFtQyxLQUdBcEMsRUFBQUMsV0MvRkFqQixJQUFBRyxVQUFBLFVBQUEsV0FDQSxPQUNBSyxTQUFBLElBQ0FJLEtBQUEsU0FBQUQsRUFBQThCLEVBQUEzQixHQUNBLEdBQUF1QyxHQUFBQyxTQUFBeEMsRUFBQXlDLFNBQUEsRUFDQWQsR0FBQUwsU0FBQSxXQUVBb0IsV0FBQSxXQUNBZixFQUFBZ0IsSUFBQSxVQUFBLE1BQ0FKLFFDTkFyRCxJQUFBRyxVQUFBLFNBQ0EsV0FBQSxXQUFBLGFBQ0EsU0FBQUUsRUFBQUMsRUFBQUYsR0FDQSxPQUNBSSxTQUFBLElBQ0FDLFNBQUEsRUFDQWlELFlBQUEsYUFDQS9DLFNBQ0FDLEtBQUEsU0FBQStDLEVBQUFDLEVBQUFDLEdBZ0NBLFFBQUFDLEdBQUE3QyxHQUNBLEdBQUE4QyxHQUFBOUMsRUFBQStDLGFBQUEvQyxFQUFBK0MsYUFBQS9DLEVBQUFnRCxNQUNBTixHQUFBTyxZQUFBQyxFQUFBbEQsRUFBQStDLGFBQUFELEVBQUEscUJBQUEzRCxFQUFBZ0UsUUFBQTNDLEdBQUEsSUFBQXNDLEVBQUF0RCxRQUFBTCxFQUFBZ0UsUUFBQUMsYUFBQSxPQUFBakUsRUFBQWdFLFFBQUFFLGlCQUFBLFFBQ0FYLEVBQUFPLFlBQUFLLEVBQUF0RCxFQUFBK0MsYUFBQUQsRUFBQSxtQkFBQTNELEVBQUFnRSxRQUFBM0MsR0FBQSxJQUFBc0MsRUFDQUosRUFBQU8sWUFBQU0sRUFBQXZELEVBQUErQyxhQUFBRCxFQUFBLG1CQUFBM0QsRUFBQWdFLFFBQUEzQyxHQUFBLElBQUFzQyxFQUFBdEQsUUFBQSxPQUFBLGFBbkNBLEdBQUFnRSxHQUFBLGFBQ0FDLEVBQUEsZUFFQWYsR0FBQVMsUUFBQW5FLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFNBQ0FULEVBQUFpQixhQUFBLFFBQ0FqQixFQUFBa0IsZ0JBQ0FsQixFQUFBbUIsYUFBQSxFQUNBbkIsRUFBQW9CLGNBQ0FwQixFQUFBTyxhQUNBQyxFQUFBLEdBQ0FJLEVBQUEsR0FDQUMsRUFBQSxJQUVBYixFQUFBcUIsUUFDQUMsVUFFQXRCLEVBQUFrQixjQUNBSyxPQUFBLEdBQ0FDLFFBQUEsR0FDQUMsUUFBQSxPQUdBekIsRUFBQTBCLE9BQUEsc0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsSUFBQUMsSUFHQTVCLEVBQUFrQixhQUFBTSxTQUFBLEVBQUFHLEdBQUFFLFFBQUEsR0FDQTdCLEVBQUFrQixhQUFBTyxRQUFBSyxLQUFBQyxNQUFBLElBQUFKLEdBQUEsT0FZQTNCLEVBQUFnQyxXQUFBLFNBQUFqRSxHQUNBaUMsRUFBQWlCLGFBQUFsRCxHQUdBdEIsRUFBQTRDLElBQUEsY0FBQSxTQUFBQyxFQUFBMkMsR0FDQWpDLEVBQUFrQyxVQUdBekYsRUFBQTRDLElBQUEsYUFBQSxTQUFBQyxFQUFBMkMsR0FDQUEsR0FBQUEsRUFBQWxFLE9BR0FpQyxFQUFBbUIsYUFBQSxFQUNBbkIsRUFBQVMsUUFBQW5FLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFNBR0EsWUFBQXdCLEVBQUFsRSxPQUNBaUMsRUFBQW9CLFdBQUFhLEVBQUFFLEtBQ0FuQyxFQUFBcUIsT0FBQVksRUFBQXhCLFlBQ0FULEVBQUFxQixPQUFBQyxNQUFBLEtBQ0F0QixFQUFBTyxZQUFBQyxFQUFBLFdBQUFSLEVBQUFvQixXQUFBckQsS0FBQSxJQUFBdEIsRUFBQWdFLFFBQUEzQyxHQUFBLElBQUFrQyxFQUFBb0IsV0FBQWQsUUFJQSxVQUFBMkIsRUFBQWxFLE1BQUFrRSxFQUFBWCxNQUFBYyxPQUFBLElBQ0FwQyxFQUFBb0IsV0FBQWEsRUFBQVgsTUFBQXRCLEVBQUFtQixjQUNBbkIsRUFBQXFCLE9BQUFZLEVBQUF4QixZQUNBVCxFQUFBcUIsT0FBQUMsTUFBQVcsRUFBQVgsTUFDQW5CLEVBQUFILEVBQUFvQixhQUlBbkIsRUFBQXhCLFNBQUFxQyxHQUVBakIsV0FBQSxXQUNBSSxFQUFBeEIsU0FBQXNDLElBQ0EsT0FHQWYsRUFBQWtDLE1BQUEsV0FDQWpDLEVBQUFmLFlBQUE2QixHQUVBbEIsV0FBQSxXQUNBSSxFQUFBZixZQUFBNEIsSUFDQSxNQUlBZCxFQUFBcUMsZUFBQSxTQUFBdEUsR0FDQSxLQUFBaUMsRUFBQXFCLE9BQUFDLE1BQUFjLE9BQUEsR0FBQSxDQUVBLEdBQ0FFLEdBREFDLEVBQUF2QyxFQUFBcUIsT0FBQUMsTUFBQWMsT0FBQSxDQUlBRSxHQURBLFVBQUF2RSxFQUNBaUMsRUFBQW1CLGVBQUFvQixFQUFBLEVBQUF2QyxFQUFBbUIsYUFBQSxFQUVBLElBQUFuQixFQUFBbUIsYUFBQW9CLEVBQUF2QyxFQUFBbUIsYUFBQSxFQUdBbkIsRUFBQW9CLFdBQUFwQixFQUFBcUIsT0FBQUMsTUFBQWdCLEdBQ0F0QyxFQUFBbUIsYUFBQW1CLEVBQ0FuQyxFQUFBSCxFQUFBb0IsY0FJQXBCLEVBQUF3QyxVQUFBLFNBQUFDLEdBQ0F6QyxFQUFBbUIsZUFBQXNCLElBRUF6QyxFQUFBb0IsV0FBQXBCLEVBQUFxQixPQUFBQyxNQUFBbUIsR0FDQXpDLEVBQUFtQixhQUFBc0IsRUFDQXRDLEVBQUFILEVBQUFvQixtQkMzR0EvRSxJQUFBRyxVQUFBLGFBQ0EsYUFBQSxXQUFBLFdBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxPQUNBSyxTQUNBQyxLQUFBLFNBQUFELEVBQUFFLEVBQUFDLEVBQUFDLEdBc0JBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsSUFBQSxHQUFBQyxNQUNBa0YsRUFBQXBGLEVBQUFxRixJQUNBQyxFQUFBdEYsRUFBQSxLQUFBQSxFQUFBSyxLQUFBa0YsRUFFQTlGLEVBQUErRixFQUFBaEcsUUFBQSxPQUFBNEYsR0FBQTVGLFFBQUEsT0FBQThGLEdBQ0FHLEVBQUFwRyxFQUFBSSxHQUFBQyxFQUdBK0YsR0FBQSxHQUFBakYsR0FBQVAsRUFDQWUsRUFBQWYsRUFHQWdCLEVBQUFDLE9BQUF1RSxFQUdBLElBQUFDLEdBQUF6RSxFQUFBMEUsS0FBQSxJQUFBMUYsRUFDQTJGLEdBQUFGLEVBQUExRixFQUFBUyxNQUVBVCxFQUFBVyxVQUNBK0UsRUFBQUMsS0FBQSxlQUFBeEUsU0FBQSxRQUlBL0IsRUFBQSxXQUNBc0csRUFBQXZFLFNBQUEsUUFDQSxJQUVBRyxFQUFBbEMsRUFBQSxXQUNBeUIsRUFBQTZFLElBQ0FuRSxHQUdBLFFBQUFWLEdBQUFXLEdBQ0EsSUFBQUEsR0FBQVIsRUFDQVEsRUFBQVAsRUFBQTBFLEtBQUEsSUFBQTNFLE9BQ0EsS0FBQVEsRUFBQSxNQUVBQSxHQUFBSSxZQUFBLE9BQ0FKLEVBQUFMLFNBQUEsVUFDQS9CLEVBQUEsV0FDQUosUUFBQXlDLFFBQUFELEdBQUFLLFVBQ0EsS0FJQSxRQUFBK0QsR0FBQXBFLEVBQUFmLEdBQ0FlLEVBQUFJLFlBQUEsWUFDQUosRUFBQUksWUFBQSxZQUVBbkIsR0FDQWUsRUFBQUwsU0FBQSxPQUFBVixHQXhFQSxHQU9BYSxHQVBBa0UsRUFBQSw0TEFNQXZFLEVBQUFqQyxRQUFBeUMsUUFBQTdCLEdBRUEyQixFQUFBLElBQ0FQLEVBQUEsR0FDQXVFLEVBQUEsTUFFQTdGLEdBQUFtRyxLQUFBLEdBQ0FuRyxFQUFBaUIsU0FBQSxLQUNBakIsRUFBQVcsS0FBQWtGLEVBQ0E3RixFQUFBZ0IsT0FBQSxXQUNBLEdBQUFvRixHQUFBN0UsRUFBQTBFLEtBQUEsSUFBQS9FLEtBQUFKLEdBQ0FkLEdBQUFpQixXQUNBRSxFQUFBaUYsSUEwREEzRyxFQUFBNEMsSUFBQSxpQkFBQSxTQUFBQyxFQUFBaEMsR0FDQUEsRUFBQXFGLE1BQ0FwRCxPQUFBQyxhQUFBWixHQUNBVCxJQUVBYixFQUFBbUMsTUFDQVosRUFBQSxJQUFBdkIsRUFBQW1DLEtBR0FuQyxFQUFBVyxXQUNBakIsRUFBQWlCLFNBQUFYLEVBQUFXLFVBR0FaLEVBQUFDLFVDdkdBLElBQUErRixHQUFBQyxRQUFBLDBCQUVBakgsS0FBQUcsVUFBQSxhQUNBLGFBQUEsV0FDQSxTQUFBQyxFQUFBQyxHQUNBLE9BQ0FJLFNBQUEsRUFDQUQsU0FBQSxJQUNBRyxTQUNBRCxTQUFBLGdDQUNBRSxLQUFBLFNBQUFELEVBQUE4QixFQUFBM0IsRUFBQUMsR0E0Q0EsUUFBQW1HLEdBQUFqRSxFQUFBMkMsR0FDQSxHQUFBQSxHQUFBQSxFQUFBVSxJQUFBLENBRUFqRixFQUFBdUUsRUFBQVUsR0FFQSxJQUFBNUUsRUFFQSxRQUFBTCxHQUlBLElBQUEsMEJBQ0FLLEVBQUEsQ0FDQSxNQUNBLEtBQUEsb0JBQ0FBLEVBQUEsRUFXQUwsSUFBQThGLEdBQUFDLEdBQUFBLEVBQUFDLFNBR0FELEVBQUFDLFFBQUEzRixFQUFBLEdBQUEsV0FDQXlGLEVBQUE5RixLQUtBLFFBQUFpRyxLQUNBekcsRUFBQXVCLFNBQUFtRixHQS9FQSxHQUFBSCxHQUNBdkcsRUFFQVEsRUFDQThGLEVBRUFJLEVBQUEsU0FJQWxILEdBQUEsV0FDQStHLEVBQUEsR0FBQUosR0FBQVEsUUFDQUosRUFBQUssT0FHQTVHLEVBQUE4QixTQUFBK0UsY0FBQSxjQUNBN0csRUFBQThHLFlBQUFQLEVBQUFRLFVBR0FSLEVBQUFTLGVBQ0EsSUErREF6SCxFQUFBNEMsSUFBQSxtQkFBQWtFLEdBQ0E5RyxFQUFBNEMsSUFBQSxnQkFBQXNFLFFDMUdBdEgsSUFBQUcsVUFBQSxXQUNBLGlCQUFBLGlCQUNBLFNBQUEySCxFQUFBQyxHQUNBLE9BQ0F2SCxTQUFBLEtBQ0FJLEtBQUEsU0FBQUQsRUFBQThCLEVBQUEzQixHQUNBLEdBQUFrSCxFQUdBbEgsR0FBQW1ILFNBQUEsV0FBQSxTQUFBQyxHQUNBRixFQUFBRixFQUFBSyxNQUFBRCxLQUlBdkgsRUFBQTBFLE9BQUEsV0FDQSxNQUFBMEMsR0FBQUssVUFBQUosR0FDQSxTQUFBRSxHQUNBakksUUFBQXlDLFFBQUFELEdBQUE0RixLQUFBUCxFQUFBUSxRQUFBSixVQ2pCQSxJQUFBSyxJQUFBdEIsUUFBQSxNQUNBdUIsTUFBQXZCLFFBQUEsUUFFQWpILEtBQUF5SSxRQUFBLFdBQ0EsS0FBQSxTQUNBLFNBQUFDLEVBQUFDLEdBT0EsUUFBQUMsR0FBQUMsRUFBQWpILEdBQ0EyRyxHQUFBTyxTQUFBQyxFQUFBRixFQUFBLFNBQUFqSCxHQUlBLFFBQUFvSCxHQUFBN0UsRUFBQUksR0FDQSxHQUFBMEUsR0FBQVAsRUFBQVEsUUFDQUMsSUEyQkEsT0F4QkFDLFVBQUFDLGVBQUFWLEVBQUFXLFNBR0FkLE1BQUFlLEtBQUFwRixFQUFBSSxHQUFBcUUsRUFBQSxTQUFBWSxFQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEVBQUFGLEVBQUEsR0FDQUcsRUFBQUQsRUFBQUYsRUFBQSxFQUdBRCxJQUNBUCxFQUFBWSxPQUFBTCxHQUlBSixTQUFBTSxHQUNBSSxVQUFBRixHQUNBRyxlQUNBQyxXQUFBLFNBQUFDLEdBQ0FkLEVBQUFlLE9BQUFELEVBQ0FkLEVBQUFnQixJQUFBRixFQUFBRyxrQkFFQW5CLEVBQUFvQixRQUFBbEIsT0FJQUYsRUFBQXFCLFFBdkNBLEdBQUF2QixHQUFBd0IsVUFBQSxJQUNBWixFQUFBLHlCQUNBYSxHQUFBLFNBQUEsVUFBQSxTQXdDQSxRQUtBQyxVQUFBekIsRUFLQTBCLFVBQUEsU0FBQXpKLEdBQ0EsR0FBQTBKLEdBQUFDLFdBQUEzSixFQUFBNEosbUJBR0EsT0FBQSxHQUFBRixFQUdBMUosRUFBQTZKLG9CQUFBLEVBQ0FOLEVBQUEsR0FFQUEsRUFBQSxHQUtBRyxFQUFBLElBQUEsRUFBQUEsRUFDQUgsRUFBQSxHQUlBQSxFQUFBLFFDL0VBeEssSUFBQXlJLFFBQUEsV0FDQSxXQUNBLFNBQUFwSSxHQUNBLEdBQUEwSCxHQUFBNUcsS0FBQTRKLE1BQ0FDLEVBQUEsV0FDQTNLLEVBQUEsV0FDQTBILEVBQUE1RyxLQUFBNEosTUFDQUMsS0FDQSxLQUlBLE9BREFBLE1BRUE1QyxRQUFBLFdBQ0EsTUFBQUwsT0NkQSxJQUFBUSxJQUFBdEIsUUFBQSxNQUNBZ0UsS0FBQWhFLFFBQUEsUUFDQWlFLElBQUFqRSxRQUFBLG9CQUVBakgsS0FBQXlJLFFBQUEsWUFDQSxLQUNBLFNBQUFDLEdBTUEsUUFBQXlDLEdBQUFDLEdBTUEsTUFKQSxnQkFBQUEsSUFBQUEsSUFBQTlILFNBQUE4SCxFQUFBLE1BQ0FBLEVBQUFDLE1BQUFELEVBQUEsR0FBQUUsS0FBQSxNQUdBRixFQUFBM0ssUUFBQSxLQUFBLFdBQ0EsR0FBQThLLEdBQUE5RixLQUFBQyxNQUFBLEdBQUFELEtBQUErRixVQUFBLEVBRUEsT0FEQUQsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEVBQUFBLEVBQ0FFLE9BQUFDLGFBQUFILEtBS0EsUUFBQUksR0FBQXpGLEdBQ0FBLEVBQUFBLEdBQUEsQ0FDQSxJQUFBMEYsR0FBQVQsRUFBQSxHQUNBLFFBQ0ExSixHQUFBbUssRUFDQXZLLE1BQUEsWUFBQWlDLFNBQUE0QyxFQUFBLElBQUEsR0FDQTJGLFdBQUEsR0FBQTFLLE1BQ0EySyxRQUNBQyxRQUFBLEtBQ0FDLFFBQUEsS0FDQUMsTUFBQSxLQUNBQyxNQUFBLElBTUEsUUFBQUMsR0FBQUMsR0FDQWpCLEVBQUEsR0FDQSxRQUNBa0IsZ0JBQ0FoSSxhQUFBLEtBQ0FDLGlCQUFBLEtBQ0E3QyxHQUFBMkssRUFBQTNLLEdBQ0FKLE1BQUErSyxFQUFBL0ssTUFDQXdLLFVBQUFPLEVBQUFQLFVBQ0FTLGFBQ0FDLGFBQ0FDLFdBQ0FDLE1BQ0FDLElBQUEsS0FDQUMsV0FBQSxLQUNBQyxNQUFBLEtBQ0FDLGtCQUFBLE9BTUEsUUFBQUMsR0FBQTdCLEVBQUF2SixHQUNBLEdBQUFtSCxFQUVBLEtBQ0FBLEVBQUFOLEdBQUF3RSxhQUFBOUIsRUFBQSxRQUNBLE1BQUFoSSxHQUVBLEdBQUEsV0FBQUEsRUFBQStKLEtBQ0EsTUFBQXRMLE1BRUEsTUFBQXVCLEdBSUEsTUFBQWdLLE1BQUE5RSxNQUFBVSxHQUlBLFFBQUFxRSxHQUFBQyxHQUNBLElBQ0EsR0FBQUMsR0FBQTdFLEdBQUE4RSxZQUFBRixHQUNBLE1BQUFsSyxHQUFBLE9BRUEsR0FBQW1LLEVBQUFySCxPQUFBLEVBQ0EsSUFBQSxHQUFBdUgsR0FBQSxFQUFBQSxFQUFBRixFQUFBckgsT0FBQXVILElBQUEsQ0FDQSxHQUFBQyxHQUFBdEMsS0FBQUssS0FBQTZCLEVBQUFDLEVBQUFFLEdBRUEvRSxJQUFBaUYsU0FBQUQsR0FBQUUsU0FDQWxGLEdBQUFtRixXQUFBSCxHQUVBSSxNQUFBSixJQU1BLFFBQUFLLEdBQUFMLEVBQUF0TSxHQUNBLEdBQUE0TSxHQUFBbkYsRUFBQVEsT0FVQSxPQVJBWCxJQUFBdUYsVUFBQVAsRUFBQU4sS0FBQWMsVUFBQTlNLEdBQUEsU0FBQXVJLEdBQ0EsTUFBQUEsT0FDQXFFLEdBQUFoRSxPQUFBTCxPQUdBcUUsR0FBQXhELFlBR0F3RCxFQUFBdkQsUUFJQSxRQUFBMEQsR0FBQS9DLEdBQ0EsR0FBQWdELEdBQUF2RixFQUFBUSxPQVdBLE9BUkFYLElBQUEyRixPQUFBakQsRUFBQSxTQUFBekIsR0FDQSxNQUFBQSxPQUNBeUUsR0FBQXBFLE9BQUFMLE9BR0F5RSxHQUFBNUQsWUFHQTRELEVBQUEzRCxRQXhIQSxHQUFBNkQsR0FBQTVELFVBQUEsaUJBQ0E2RCxFQUFBN0QsVUFBQSxZQTBIQSxRQUVBeEgsSUFBQSxTQUFBa0ksRUFBQXZKLEdBQ0EsTUFBQW9MLEdBQUF2QyxVQUFBVSxFQUFBdkosSUFHQTJNLE9BQUEsV0FDQSxNQUFBdkIsR0FBQXFCLE9BR0FHLFFBQUEsU0FBQTdNLEdBQ0EsTUFBQXFMLEdBQUFzQixFQUFBM00sRUFBQSxVQUdBOE0sWUFBQSxTQUFBOU0sRUFBQUMsR0FDQSxNQUFBb0wsR0FBQXNCLEVBQUEzTSxFQUFBLElBQUFDLEVBQUEsYUFNQThNLFNBQUEsU0FBQXBLLEdBQ0EsR0FBQW9JLEdBQUFwSSxFQUFBb0ksUUFDQUYsRUFBQWxJLEVBQUFrSSxVQUNBQyxFQUFBbkksRUFBQW1JLFVBQ0FsTCxFQUFBK0MsRUFBQS9DLE1BQ0FxTCxFQUFBdEksRUFBQXFJLEtBQUFDLElBQ0ErQixHQUFBLENBR0EsUUFBQW5DLElBQUFDLElBQUFsTCxJQUFBcUwsR0FBQUosRUFBQXZHLE9BQUEsR0FBQXdHLEVBQUF4RyxPQUFBLEdBQ0EsR0FJQXVHLEdBQ0FBLEVBQUEvQyxJQUFBLFNBQUFtRixFQUFBdEksR0FDQXNJLEVBQUFDLE9BQUFELEVBQUFFLFFBQUFGLEVBQUFHLE9BQ0FKLEdBQUEsS0FNQWxDLEdBQ0FBLEVBQUFoRCxJQUFBLFNBQUFtRixFQUFBdEksR0FDQXNJLEVBQUFJLE9BQUFKLEVBQUFoTixPQUNBK00sR0FBQSxLQU1BakMsR0FDQUEsRUFBQWpELElBQUEsU0FBQW1GLEVBQUF0SSxHQUNBc0ksRUFBQUcsTUFBQUgsRUFBQXpELE1BQUF5RCxFQUFBeEcsUUFDQXVHLEdBQUEsS0FNQUEsSUFNQU0sVUFBQSxXQUNBLEdBQUE5RixHQUFBUCxFQUFBUSxRQUNBOEYsRUFBQS9CLEtBQUE5RSxNQUFBSSxHQUFBd0UsYUFBQW9CLEVBQUEsU0FDQWMsRUFBQXRELEVBQUFxRCxFQUFBakosUUFDQW1KLEVBQUEvQyxFQUFBOEMsRUErQkEsT0E3QkFELEdBQUFHLFFBQUFGLEdBR0ExRyxHQUFBdUYsVUFBQUssRUFBQWxCLEtBQUFjLFVBQUFpQixHQUFBLFNBQUF4RixHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FqQixJQUFBdUYsVUFBQU0sRUFBQWEsRUFBQXhOLEdBQUEsUUFBQXdMLEtBQUFjLFVBQUFtQixHQUFBLFNBQUExRixHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FqQixJQUFBdUYsVUFBQU0sRUFBQWEsRUFBQXhOLEdBQUEsZ0JBQUF3TCxLQUFBYyxjQUFBLFNBQUF2RSxHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FQLEdBQUFvQixRQUFBNEUsU0FLQWhHLEVBQUFxQixTQUlBOEUsS0FBQSxTQUFBQyxHQUNBLEdBQUFwRyxHQUFBUCxFQUFBUSxRQUNBOEYsRUFBQS9CLEtBQUE5RSxNQUFBSSxHQUFBd0UsYUFBQW9CLEVBQUEsUUE2QkEsT0ExQkFhLEdBQUF6RixJQUFBLFNBQUFtRixFQUFBdEksR0FDQXNJLEVBQUFqTixLQUFBNE4sRUFBQTVOLEtBQ0F1TixFQUFBNUksR0FBQS9FLE1BQUFnTyxFQUFBaE8sTUFDQTJOLEVBQUE1SSxHQUFBeUYsV0FBQSxHQUFBMUssU0FLQW9ILEdBQUF1RixVQUFBTSxFQUFBaUIsRUFBQTVOLEdBQUEsUUFBQXdMLEtBQUFjLFVBQUFzQixHQUFBLFNBQUE3RixHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FqQixJQUFBdUYsVUFBQUssRUFBQWxCLEtBQUFjLFVBQUFpQixHQUFBLFNBQUF4RixHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FQLEdBQUFvQixRQUFBZ0YsT0FJQXBHLEVBQUFxQixTQUtBeEgsT0FBQSxTQUFBckIsR0FDQSxHQUFBd0gsR0FBQVAsRUFBQVEsUUFDQThGLEVBQUEvQixLQUFBOUUsTUFBQUksR0FBQXdFLGFBQUFvQixFQUFBLFFBb0NBLE9BakNBYSxHQUFBekYsSUFBQSxTQUFBbUYsRUFBQXRJLEdBQ0FzSSxFQUFBak4sS0FBQUEsR0FDQXVOLEVBQUFNLE9BQUFsSixFQUFBLEtBS0FtQyxHQUFBMkYsT0FBQUUsRUFBQTNNLEVBQUEsUUFBQSxTQUFBK0gsR0FDQSxNQUFBQSxPQUNBUCxHQUFBWSxPQUFBTCxPQUtBakIsSUFBQTJGLE9BQUFFLEVBQUEzTSxFQUFBLGdCQUFBLFNBQUErSCxHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FqQixJQUFBdUYsVUFBQUssRUFBQWxCLEtBQUFjLFVBQUFpQixHQUFBLFNBQUF4RixHQUNBLE1BQUFBLE9BQ0FQLEdBQUFZLE9BQUFMLE9BS0FQLEdBQUFvQixnQkFLQXBCLEVBQUFxQixTQU1BaUYsYUFBQSxTQUFBbkwsR0FDQSxHQUFBNkUsR0FBQVAsRUFBQVEsUUFDQXNHLEVBQUExQyxFQUFBcUIsS0ErQ0EsT0E1Q0EvSixHQUFBQyxhQUFBLEtBQ0FELEVBQUFFLGlCQUFBLEtBQ0FGLEVBQUFpSSxnQkFHQW1ELEVBQUFqRyxJQUFBLFNBQUFtRixFQUFBdEksR0FDQXNJLEVBQUFqTixLQUFBMkMsRUFBQTNDLEtBQ0ErTixFQUFBcEosR0FBQTBGLE9BQUFDLFFBQUEsRUFDQXlELEVBQUFwSixHQUFBMEYsT0FBQUUsUUFBQSxFQUNBd0QsRUFBQXBKLEdBQUEwRixPQUFBRyxNQUFBLEVBQ0F1RCxFQUFBcEosR0FBQTBGLE9BQUFJLE1BQUEsS0FLQXJLLEtBQUE0TixnQkFBQXJMLEdBR0FtRSxHQUFBdUYsVUFBQU0sRUFBQWhLLEVBQUEzQyxHQUFBLGdCQUFBd0wsS0FBQWMsY0FBQSxTQUFBdkUsR0FDQSxNQUFBQSxPQUNBUCxHQUFBWSxPQUFBTCxPQUtBakIsSUFBQXVGLFVBQUFNLEVBQUFoSyxFQUFBM0MsR0FBQSxRQUFBd0wsS0FBQWMsVUFBQTNKLEdBQUEsU0FBQW9GLEdBQ0EsTUFBQUEsT0FDQVAsR0FBQVksT0FBQUwsT0FLQWpCLElBQUF1RixVQUFBSyxFQUFBbEIsS0FBQWMsVUFBQXlCLEdBQUEsU0FBQWhHLEdBQ0EsTUFBQUEsT0FDQVAsR0FBQVksT0FBQUwsT0FLQVAsR0FBQW9CLGdCQUtBcEIsRUFBQXFCLFNBT0FvRixLQUFBLFNBQUFqTyxHQUNBLEdBQUFBLEVBQUEsQ0FTQSxJQUFBLEdBUEFrTyxHQUFBOU4sS0FDQStOLEVBQUFsSCxFQUFBUSxRQUNBOUUsRUFBQXZDLEtBQUF5TSxRQUFBN00sR0FDQW9PLEVBQUFoTyxLQUFBME0sWUFBQTlNLEVBQUEsV0FDQXFPLEtBR0F4QyxFQUFBLEVBQUFBLEVBQUF1QyxFQUFBOUosT0FBQXVILElBQUEsQ0FDQSxHQUFBeUMsR0FBQUYsRUFBQXZDLEVBQ0EsSUFBQSxLQUFBeUMsRUFBQTlMLE9BQUErTCxPQUFBLFVBQUEsQ0FDQSxHQUFBN0YsR0FBQTRGLEVBQUE5TCxPQUNBdkMsRUFBQXFPLEVBQUFyTyxLQUNBdUosRUFBQVYsVUFBQSxZQUFBN0ksRUFBQSxJQUFBMEMsRUFBQTNDLEdBQUEsSUFBQTBJLENBQ0EyRixHQUFBRyxNQUFBQyxJQUFBeE8sRUFBQSxJQUFBeUksRUFBQWMsS0FBQUEsS0FlQSxNQVZBQyxLQUFBekQsT0FDQTBJLE9BQUFMLEVBQUExTCxFQUFBM0MsSUFDQTJPLEtBQUEsU0FBQUMsR0FHQVYsRUFBQVcsZUFBQWxNLEVBQUFpTSxHQUFBRCxLQUFBUixFQUFBdkYsUUFBQXVGLEVBQUEvRixTQUNBLFNBQUFMLEdBQ0FvRyxFQUFBL0YsT0FBQUwsS0FHQW9HLEVBQUF0RixVQU1BZ0csZUFBQSxTQUFBbE0sRUFBQW1NLEdBQ0EsR0FBQUMsR0FBQTlILEVBQUFRLFFBQ0F1SCxFQUFBM0QsRUFBQXNCLEVBQUFoSyxFQUFBM0MsR0FBQSxvQkFDQWlQLEtBQ0FDLElBQ0F2TSxHQUFBd00sV0FBQSxHQUFBelAsS0FHQSxLQUFBLEdBQUFtTSxHQUFBLEVBQUFBLEVBQUFpRCxFQUFBeEssT0FBQXVILElBQUEsQ0FDQSxHQUFBdUQsR0FBQU4sRUFBQWpELEdBQ0F3RCxFQUFBRCxFQUFBRSxNQUFBLEtBQ0FDLEVBQUFGLEVBQUFBLEVBQUEvSyxPQUFBLEdBQ0FrTCxFQUFBSCxFQUFBQSxFQUFBL0ssT0FBQSxFQUVBMEssR0FBQWxILElBQUEsU0FBQXpELEVBQUFNLEdBR0EsR0FBQU4sRUFBQTdCLFNBQUFnTixFQUFBLE9BQ0FSLEdBQUFySyxHQUFBbkMsT0FDQXdNLEVBQUFySyxHQUFBcEMsYUFBQXVNLEVBQUFqRCxFQUVBLElBQUE0RCxHQUFBM0csVUFBQSxZQUFBeUcsRUFBQSxJQUFBNU0sRUFBQTNDLEdBQUEsSUFBQXdQLEVBQ0FFLEVBQUFuRCxFQUFBa0QsRUFJQSxJQUhBUCxFQUFBVixLQUFBa0IsR0FHQSxZQUFBSCxFQUFBLENBQ0EsR0FBQUksR0FBQXBELEVBQUFrRCxFQUFBelEsUUFBQSxJQUFBLFVBQ0FrUSxHQUFBVixLQUFBbUIsT0FPQSxHQUFBQyxHQUFBOUcsVUFBQSxhQUFBbkcsRUFBQTNDLEdBQUEsUUFDQTZQLEVBQUFELEVBQUE1USxRQUFBLFFBQUEsaUJBQ0E4USxFQUFBM0QsRUFBQXlELEVBQUFqTixHQUNBb04sRUFBQTVELEVBQUEwRCxFQUFBYixFQUNBRSxHQUFBeEIsUUFBQW9DLEdBQ0FaLEVBQUF4QixRQUFBcUMsR0FHQWQsRUFBQVQsTUFBQUMsSUFBQTlMLEVBQUEzQyxHQUFBd0osS0FBQW9HLElBQ0FYLEVBQUFULE1BQUFDLElBQUE5TCxFQUFBM0MsR0FBQSxXQUFBd0osS0FBQXFHLEdBR0EsSUFBQUcsR0FBQXZHLElBQUF6RCxPQUFBMEksT0FBQU8sRUFBQXRNLEVBQUEzQyxHQU1BLE9BTEFrUCxHQUFBeEIsUUFBQXNDLEdBR0EvSSxFQUFBZ0osSUFBQWYsR0FBQVAsS0FBQUksRUFBQW5HLFFBQUFtRyxFQUFBM0csUUFFQTJHLEVBQUFsRyxTQU1BbUYsZ0JBQUEsU0FBQXJMLEdBQ0EsR0FBQXVOLEdBQUFwSCxVQUFBLGlCQUFBbkcsRUFBQTNDLEdBQ0FtUSxFQUFBRCxFQUFBbFIsUUFBQSxPQUFBLFdBQ0FvUixFQUFBRixFQUFBbFIsUUFBQSxPQUFBLFlBRUF5TSxHQUFBMEUsR0FDQTFFLEVBQUEyRSxRSDVkQTdSLElBQUF5SSxRQUFBLFVBQUEsV0EwQkEsUUFBQXFKLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsV0FBQUMsTUFBQSxFQUFBLEdBQ0EsT0FBQSxLQUFBRixFQUFBak0sT0FBQXpDLFNBQUEwTyxHQUFBRCxFQTNCQSxHQUFBSSxLQXFGQSxPQW5GQUEsR0FBQUMsVUFDQUMsY0FBQSxJQUNBQyxhQUFBLEVBQ0FDLFNBQ0FDLFVBQUEsS0FDQUMsY0FBQSxLQUNBQyxVQUFBLE1BQ0FDLGNBQUEsV0FDQUMsUUFBQSxxQkFDQUMsT0FBQSxpQkFDQUMsUUFBQSxhQUNBQyxLQUFBLGdCQUNBQyxNQUFBLFdBQ0FDLElBQUEsUUFDQUMsS0FBQSxVQUNBQyxNQUFBLGdCQUNBQyxPQUFBLFlBQ0FDLEtBQUEsZUFDQUMsTUFBQSxXQUNBQyxhQVNBcEIsRUFBQTdKLFFBQUEsU0FBQWtMLEdBaUJBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQTNULFFBQUE0VCxXQUFBSCxHQUNBQSxFQUFBQyxFQUFBSCxHQUFBRSxFQUNBeEwsRUFBQTRMLEVBQUFQLFNBQUFPLEVBQUFQLFFBQUFJLElBQUFBLENBQ0EsT0FBQUMsR0FBQW5ULFFBQUEsTUFBQXlILEdBcEJBLEdBQUE0TCxHQUFBM0IsRUFBQUMsU0FBQUcsUUFDQXdCLEVBQUFELEVBQUF0QixVQUNBd0IsRUFBQUYsRUFBQXBCLFNBQ0FQLEdBQUFDLFNBQUFFLGFBQ0EsRUFBQWtCLElBQ0FPLEVBQUFELEVBQUFyQixjQUNBdUIsRUFBQUYsRUFBQW5CLGNBSUEsSUFBQUMsR0FBQW5OLEtBQUF3TyxJQUFBVCxHQUFBLElBQ0FWLEVBQUFGLEVBQUEsR0FDQUksRUFBQUYsRUFBQSxHQUNBSSxFQUFBRixFQUFBLEdBQ0FNLEVBQUFKLEVBQUEsSUFTQWdCLEVBQUEsR0FBQXRCLEdBQUFhLEVBQUFLLEVBQUFsQixRQUFBbk4sS0FBQUMsTUFBQWtOLEtBQ0EsR0FBQUEsR0FBQWEsRUFBQUssRUFBQWpCLE9BQUEsSUFDQSxHQUFBQyxHQUFBVyxFQUFBSyxFQUFBaEIsUUFBQXJOLEtBQUFDLE1BQUFvTixLQUNBLEdBQUFBLEdBQUFXLEVBQUFLLEVBQUFmLEtBQUEsSUFDQSxHQUFBQyxHQUFBUyxFQUFBSyxFQUFBZCxNQUFBdk4sS0FBQUMsTUFBQXNOLEtBQ0EsR0FBQUEsR0FBQVMsRUFBQUssRUFBQWIsSUFBQSxJQUNBLEdBQUFDLEdBQUFPLEVBQUFLLEVBQUFaLEtBQUF6TixLQUFBQyxNQUFBd04sS0FDQSxHQUFBQSxHQUFBTyxFQUFBSyxFQUFBWCxNQUFBLElBQ0EsSUFBQUQsR0FBQU8sRUFBQUssRUFBQVYsT0FBQTNOLEtBQUFDLE1BQUF3TixFQUFBLE1BQ0EsSUFBQUksR0FBQUcsRUFBQUssRUFBQVQsS0FBQSxJQUNBSSxFQUFBSyxFQUFBUixNQUFBN04sS0FBQUMsTUFBQTROLElBRUFhLEVBQUFDLFNBQUFOLEVBQUFPLGNBQUEsSUFBQVAsRUFBQU8sYUFDQSxRQUFBTixFQUFBRyxFQUFBRixHQUFBMUksS0FBQTZJLEdBQUFHLFFBR0FuQyxFQUFBaEssTUFBQSxTQUFBb00sR0FDQSxHQUFBdFUsUUFBQXVVLFNBQUFELEdBQUEsQ0FDQUEsR0FBQSxFQUVBLElBQUFFLEdBQUEzQyxFQUFBeUMsRUFDQSxPQUFBalIsVUFBQW1SLEVBQUEsSUFFQSxHQUFBckosSUFBQW1KLEdBQUEsSUFBQUQsTUFLQSxPQUpBbEosR0FBQUEsRUFBQTNLLFFBQUEsUUFBQSxJQUNBMkssRUFBQUEsRUFBQTNLLFFBQUEsSUFBQSxLQUFBQSxRQUFBLElBQUEsS0FDQTJLLEVBQUFBLEVBQUEzSyxRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLFFBQ0EySyxFQUFBQSxFQUFBM0ssUUFBQSx3QkFBQSxTQUNBLEdBQUFVLE1BQUFpSyxJQUdBK0csSUl0RkFuUyxJQUFBMFUsT0FBQSxXQUNBLFVBQUEsVUFDQSxTQUFBM00sRUFBQUQsR0FDQSxNQUFBLFVBQUFJLEdBQ0EsR0FBQUYsR0FBQUYsRUFBQUssTUFBQUQsR0FDQXlNLEVBQUE1TSxFQUFBSyxVQUFBSixDQUNBLE9BQUFGLEdBQUFRLFFBQUFxTSxNQ05BLElBQUFDLEtBQUEzTixRQUFBLE1BRUFqSCxLQUFBNlUsV0FBQSxZQUNBLGFBQUEsU0FBQSxTQUFBLFNBQUEsV0FDQSxTQUFBelUsRUFBQXVELEVBQUFtUixFQUFBbk0sRUFBQW9NLEdBQ0EzVSxFQUFBNFUsaUJBQUEsR0FFQXJSLEVBQUFzUixpQkFBQSxXQUNBRixFQUFBaEcsWUFBQXFCLEtBQUEsU0FBQUMsR0FDQWpRLEVBQUE4VSxXQUFBLHVCQUFBN0UsR0FDQXlFLEVBQUFLLEdBQUEscUJBQUExVCxHQUFBNE8sRUFBQTVPLE1BR0EsU0FBQStILEdBQ0E0TCxRQUFBQyxJQUFBLE1BQUE3TCxNQUlBb0wsSUFBQVUsR0FBQSxjQUFBLFNBQUExUCxHQUNBQSxHQUFBQSxFQUFBMlAsV0FFQUgsUUFBQUMsSUFBQSxjQUFBelAsR0FDQWtQLEVBQUFLLEdBQUF2UCxFQUFBMlAsZUN0QkEsSUFBQWhOLElBQUF0QixRQUFBLE1BQ0FpRSxJQUFBakUsUUFBQSxvQkFFQWpILEtBQUE2VSxXQUFBLG1CQUNBLGFBQUEsU0FBQSxTQUNBLFNBQUF6VSxFQUFBdUQsRUFBQW1SLEdBQ0FuUixFQUFBNlIsV0FDQUMsT0FBQSxHQUNBQyxZQUFBLEdBQ0FDLGdCQUFBLElBSUFoUyxFQUFBNlIsVUFBQXRLLElBQUEwSyxZQUVBalMsRUFBQXlMLEtBQUEsV0FFQWxFLElBQUEySyxVQUFBbFMsRUFBQTZSLGVDakJBeFYsSUFBQTZVLFdBQUEsZUFDQSxhQUFBLFNBQUEsZUFBQSxXQUNBLFNBQUF6VSxFQUFBdUQsRUFBQW1TLEVBQUFmLEdBR0EzVSxFQUFBZ0UsUUFBQTJRLEVBQUF6RyxRQUFBd0gsRUFBQXJVLE9DTEF6QixJQUFBNlUsV0FBQSxzQkFDQSxhQUFBLFNBQUEsZUFBQSxXQUNBLFNBQUF6VSxFQUFBdUQsRUFBQW1TLEVBQUFmLEdBQ0FwUixFQUFBb1MsYUFBQSxNQUNBcFMsRUFBQXFTLGtCQUFBLEdBR0FyUyxFQUFBc1MsYUFBQWxCLEVBQUF4RyxZQUFBdUgsRUFBQXJVLEdBQUEsV0FFQWtDLEVBQUF1UyxhQUFBLFNBQUF4VSxHQUNBaUMsRUFBQW9TLGFBQUFyVSxFQUNBaUMsRUFBQXFTLGtCQUFBLE9BQUF0VSxFQUFBLEdBQUFBLEdBR0FpQyxFQUFBd1MsWUFBQSxTQUFBclEsR0FDQTFGLEVBQUFnVyxNQUFBLGNBQUExVSxLQUFBLFVBQUFvRSxLQUFBQSxFQUFBMUIsUUFBQWhFLEVBQUFnRSxhQ2ZBLElBQUF3USxLQUFBM04sUUFBQSxNQUVBakgsS0FBQTZVLFdBQUEscUJBQ0EsYUFBQSxTQUFBLFdBQUEsZUFBQSxXQUNBLFNBQUF6VSxFQUFBdUQsRUFBQXRELEVBQUF5VixFQUFBZixHQWVBLFFBQUFzQixHQUFBQyxHQWFBLFFBQUFDLEdBQUF6USxHQUdBLEdBQUFBLEVBQUEwUSxPQUFBLENBQ0EsR0FBQUMsR0FBQSxDQUVBLFFBQUEzUSxFQUFBMFEsUUFDQSxJQUFBLFVBQ0FDLEVBQUEsQ0FDQSxNQUNBLEtBQUEsU0FDQUEsRUFBQSxFQUlBQyxFQUFBRCxHQUFBeFIsTUFBQWtLLFFBQUFySixHQUNBbkMsRUFBQWdULFdBQUFELEVBQUFELEdBQUEvVSxNQUFBaUMsRUFBQWdULFdBQUFELEVBQUFELEdBQUEvVSxNQUFBLEdBNUJBLElBQUE0VSxHQUFBQSxFQUFBdlEsT0FBQSxFQUVBLE1BREFwQyxHQUFBaVQsY0FBQSxJQUtBalQsR0FBQWdULGNBQ0FoVCxFQUFBZ1QsV0FBQTVLLFFBQUEsRUFDQXBJLEVBQUFnVCxXQUFBM0ssUUFBQSxFQUNBckksRUFBQWdULFdBQUExSyxNQUFBLENBQ0EsSUFBQXlLLEtBQUFoVixLQUFBLFVBQUF1RCxXQUFBdkQsS0FBQSxVQUFBdUQsV0FBQXZELEtBQUEsUUFBQXVELFVBNkJBLE9BUEFxUixHQUFBL00sSUFBQSxTQUFBbUYsRUFBQXRJLEdBQ0FzSSxFQUFBbUksUUFBQWxULEVBQUFVLGNBQ0FrUyxFQUFBN0gsS0FJQS9LLEVBQUFpVCxjQUFBLEVBQ0FGLEVBR0EsUUFBQUksS0FDQSxHQUFBLE9BQUExVyxFQUFBZ0UsUUFBQUMsYUFBQSxDQUdBLEdBQ0FvTSxJQURBMkQsZUFBQWhVLEdBQUFnRSxRQUFBQyxhQUFBakUsRUFBQWdFLFFBQUFDLGFBQUEsRUFDQTBRLEVBQUF4RyxZQUFBdUgsRUFBQXJVLEdBQUEsV0FHQWtDLEdBQUFvVCxXQUFBVixFQUFBNUYsR0FHQTlNLEVBQUFxVCxZQUFBNVcsRUFBQWdFLFFBQUFFLGtCQUFBbEUsRUFBQWdFLFFBQUFDLGFBQUEsWUFBQSxXQUlBLFFBQUE0UyxLQUVBLEdBQUFDLEdBQUFuQyxFQUFBdkcsU0FBQXBPLEVBQUFnRSxRQU9BLE9BSkE4UyxJQUNBOVcsRUFBQThVLFdBQUEsY0FBQTdULE1BQUEsc0NBQUErQixJQUFBLEVBQUExQixLQUFBLFFBQUFKLEtBQUEsU0FHQTRWLEVBSUEsUUFBQUMsS0FDQXhULEVBQUF5VCxZQUFBSCxJQUNBdFQsRUFBQWlULGFBQUEsT0FBQXhXLEVBQUFnRSxRQUFBRSxpQkFDQVgsRUFBQVUsYUFBQWpFLEVBQUFnRSxRQUFBQyxhQUVBLGNBQUFWLEVBQUFxVCxZQUNBclQsRUFBQTBULFlBQUEsR0FFQTFULEVBQUEwVCxXQUFBLE9BQUFqWCxFQUFBZ0UsUUFBQUMsY0FBQSxJQUFBakUsRUFBQWdFLFFBQUFDLGFBQ0FWLEVBQUEwVCxXQUFBalgsRUFBQWdFLFFBQUFFLGtCQUFBbEUsRUFBQWdFLFFBQUFDLGNBS0EsUUFBQWlULEtBQ0FsWCxFQUFBZ0UsUUFBQTJRLEVBQUF6RyxRQUFBbE8sRUFBQWdFLFFBQUEzQyxHQUFBLFdBR0FrQyxFQUFBZ1QsV0FBQXZXLEVBQUFnRSxTQUFBaEUsRUFBQWdFLFFBQUFpSSxhQUFBak0sRUFBQWdFLFFBQUFpSSxhQUFBMUksRUFBQVUsY0FBQSxLQUVBakUsRUFBQWdXLE1BQUEsbUJBQUFoVyxFQUFBZ0UsU0ErQ0EsUUFBQW1ULEdBQUEzUixHQUNBQSxHQUFBQSxFQUFBVSxLQUFBVixFQUFBUixVQUdBekIsRUFBQTZULFNBQUFwUyxRQUFBOUIsU0FBQXNDLEVBQUFSLFFBQUEsSUFDQXpCLEVBQUE2VCxTQUFBblcsTUFBQXVFLEVBQUEsSUFBQUEsRUFBQVUsSUFBQTNDLEVBQUE2VCxTQUFBblcsTUFFQWpCLEVBQUFnVyxNQUFBLG1CQUFBeFEsSUFJQSxRQUFBNlIsS0FDQUgsSUFDQVIsSUFDQUssSUFDQXhULEVBQUErVCxZQUFBLEVBR0EsUUFBQUMsR0FBQUMsR0FDQXhDLFFBQUFDLElBQUEsdUJBQUF1QyxHQUNBalUsRUFBQStULFlBQUEsRUE1S0EvVCxFQUFBK1QsWUFBQSxFQUNBL1QsRUFBQXlULGFBQUEsRUFDQXpULEVBQUFpVCxjQUFBLEVBQ0FqVCxFQUFBMFQsWUFBQSxFQUNBMVQsRUFBQXFULFlBQUEsWUFDQXJULEVBQUFvVCxjQUNBcFQsRUFBQWdULGNBQ0FoVCxFQUFBVSxhQUFBakUsRUFBQWdFLFFBQUFDLGNBQUEsRUFDQVYsRUFBQTZULFVBQ0FwUyxRQUFBLEVBQ0EvRCxNQUFBLFlBa0dBaVcsSUFDQVIsSUFDQUssSUFHQXhULEVBQUFrVSxhQUFBLFNBQUE1UyxHQUNBN0UsRUFBQWdXLE1BQUEsY0FBQTFVLEtBQUEsUUFBQXVELE1BQUFBLEVBQUFiLFFBQUFoRSxFQUFBZ0UsV0FJQVQsRUFBQW1VLFdBQUEsV0FDQSxHQUFBQyxHQUFBZCxHQUdBYyxLQUVBcFUsRUFBQXFULFlBQUEsVUFDQXJULEVBQUErVCxZQUFBLEVBRUFsVSxXQUFBLFdBQ0FwRCxFQUFBZ1csTUFBQSxpQkFDQSxJQUVBeEIsSUFBQW9ELEtBQUEsZUFBQXRXLEtBQUEsVUFBQWtLLFVBQUF4TCxFQUFBZ0UsUUFBQTNDLE9BSUFrQyxFQUFBc1UsYUFBQSxXQUNBLEdBQUFGLEdBQUFkLEdBR0FjLEtBRUFwVSxFQUFBK1QsWUFBQSxFQUNBL1QsRUFBQXFULFlBQUEsWUFDQXJULEVBQUEwVCxZQUFBLEVBRUE3VCxXQUFBLFdBQ0FwRCxFQUFBZ1csTUFBQSxpQkFDQSxJQUVBeEIsSUFBQW9ELEtBQUEsZUFBQXRXLEtBQUEsWUFBQWtLLFVBQUF4TCxFQUFBZ0UsUUFBQTNDLE9BMEJBbVQsSUFBQVUsR0FBQSxrQkFBQWlDLEdBQ0EzQyxJQUFBVSxHQUFBLGtCQUFBbUMsR0FDQTdDLElBQUFVLEdBQUEsZ0JBQUFxQyxLQ3RMQSxJQUFBcFAsSUFBQXRCLFFBQUEsS0FFQWpILEtBQUE2VSxXQUFBLHVCQUNBLGFBQUEsU0FBQSxTQUFBLFdBQ0EsU0FBQXpVLEVBQUF1RCxFQUFBbVIsRUFBQUMsR0FVQSxRQUFBbUQsR0FBQXhXLEVBQUFULEdBQ0FiLEVBQUFnRSxRQUFBMUMsR0FBQXVPLEtBQUFoUCxHQUdBLFFBQUFrWCxLQUVBLEdBQUF0UCxHQUFBa00sRUFBQWhTLElBQUEsc0JBRUEsT0FBQThGLElBQUFBLEVBQUE0TSxRQUFBNU0sRUFBQTZNLGFBQUE3TSxFQUFBOE0saUJBSUEsR0FIQSxFQWxCQSxHQUFBeUMsRUFFQXpVLEdBQUEwVSxTQUFBLEVBQ0ExVSxFQUFBMlUsZUFBQSxZQUFBLE9BQUEsVUFDQTNVLEVBQUE0VSxZQUFBLEVBQ0E1VSxFQUFBNlUsZ0JBQUEsRUFDQTdVLEVBQUE4VSxVQUNBeFksUUFBQTBFLEtBQUF2RSxFQUFBZ0UsUUFBQVQsRUFBQThVLFFBa0JBOVUsRUFBQTZVLGVBQUFMLElBR0F4VSxFQUFBMEIsT0FBQSxVQUFBLFNBQUFxVCxFQUFBQyxHQUNBRCxHQUFBQyxJQUNBaFYsRUFBQTRVLFlBQUEsRUFHQTVVLEVBQUF5TCxVQUVBLEdBSUF6TCxFQUFBeUwsS0FBQSxXQUNBZ0osR0FDQWxWLE9BQUFDLGFBQUFpVixHQUlBQSxFQUFBNVUsV0FBQSxXQUdBdVIsRUFBQTNGLEtBQUFoUCxFQUFBZ0UsU0FDQWdNLEtBQUEsU0FBQUMsR0FFQWpRLEVBQUFnVyxNQUFBLG1CQUFBL0YsR0FHQXBRLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFFBQUFULEVBQUE4VSxRQUNBOVUsRUFBQTRVLFlBQUEsR0FHQSxTQUFBL08sR0FDQTRMLFFBQUFDLElBQUEsTUFBQTdMLE1BRUEsTUFJQTdGLEVBQUFpVixRQUFBLFdBQ0FqVixFQUFBMFUsU0FBQSxFQUNBalksRUFBQThVLFdBQUEsY0FBQTdULE1BQUEsZ0JBQUErQixJQUFBLEVBQUExQixLQUFBLFNBRUFxVCxFQUFBckYsS0FBQXRQLEVBQUFnRSxRQUFBM0MsSUFDQTJPLEtBQUEsU0FBQUMsR0FDQTFNLEVBQUEwVSxTQUFBLEVBQ0FqWSxFQUFBOFUsV0FBQSxjQUFBN1QsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsVUFBQUosS0FBQSxXQUdBLFNBQUFrSSxHQUNBN0YsRUFBQTBVLFNBQUEsRUFDQWpELFFBQUFDLElBQUEsY0FBQTdMLEdBQ0FwSixFQUFBOFUsV0FBQSxjQUFBN1QsTUFBQSxjQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxRQUFBSixLQUFBLGFBS0FxQyxFQUFBa1YsV0FBQSxXQUNBLEdBQUFDLEdBQUFDLFFBQUEsbURBQ0FELEtBRUE3WSxRQUFBMEUsS0FBQWhCLEVBQUE4VSxPQUFBclksRUFBQWdFLFNBQ0FULEVBQUE0VSxZQUFBLElBS0E1VSxFQUFBcVYsY0FBQSxXQUNBLEdBQUFGLEdBQUFDLFFBQUEsZ0RBQ0EsSUFBQUQsRUFBQSxDQUNBLEdBQUFHLEdBQUE3WSxFQUFBZ0UsUUFBQTNDLEVBRUFzVCxHQUFBalMsT0FBQW1XLEdBQ0E3SSxLQUFBLFNBQUFDLEdBQ0FqUSxFQUFBZ1csTUFBQSxvQkFBQTNVLEdBQUF3WCxJQUNBbkUsRUFBQUssR0FBQSxRQUNBL1UsRUFBQWdFLFdBQ0FULEVBQUE0VSxZQUFBLEVBQ0FuWSxFQUFBOFUsV0FBQSxjQUFBN1QsTUFBQSwrQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsYUFHQSxTQUFBOEgsR0FDQTRMLFFBQUFDLElBQUEsTUFBQTdMLEdBQ0FwSixFQUFBZ1csTUFBQSxvQkFBQTNVLEdBQUF3WCxJQUNBbkUsRUFBQUssR0FBQSxRQUNBL1UsRUFBQWdFLFdBQ0FULEVBQUE0VSxZQUFBLE1BTUE1VSxFQUFBdVYsWUFBQSxXQUNBLEdBQUFDLElBQ0FDLFFBQUEsRUFDQXZLLEtBQUEsS0FDQUYsTUFBQSxLQUNBQyxPQUFBLEtBR0FzSixHQUFBLFlBQUFpQixJQUlBeFYsRUFBQTBWLFlBQUEsV0FDQSxHQUFBQyxJQUNBRixRQUFBLEVBQ0ExWCxLQUFBLFlBQ0FvTixNQUFBLEtBR0FvSixHQUFBLFlBQUFvQixJQUlBM1YsRUFBQTRWLFVBQUEsV0FDQSxHQUFBQyxJQUNBSixRQUFBLEVBQ0F2SyxLQUFBLEtBQ0EzRyxNQUFBLEtBQ0ErQyxLQUFBLEtBR0FpTixHQUFBLFVBQUFzQixJQUlBN1YsRUFBQThWLGFBQUEsU0FBQS9YLEVBQUFELEdBQ0FyQixFQUFBZ0UsUUFBQTFDLEdBQUFELEdBQUEyWCxPQUFBaFosRUFBQWdFLFFBQUExQyxHQUFBRCxHQUFBMlgsVUFBQSxHQUFBLFNBQUFoWixFQUFBZ0UsUUFBQTFDLEdBQUFELEdBQUEyWCxRQUFBLEdBQUEsRUFHQXpWLEVBQUF5TCxRQUlBekwsRUFBQStWLGVBQUEsU0FBQWhZLEVBQUFELEdBQ0FyQixFQUFBZ0UsUUFBQTFDLEdBQUE0TixPQUFBN04sRUFBQSxHQUdBa0MsRUFBQXlMLFFBSUF6TCxFQUFBNEwsYUFBQSxXQUNBd0YsRUFBQXhGLGFBQUFuUCxFQUFBZ0UsU0FDQWdNLEtBQUEsU0FBQUMsR0FDQWpRLEVBQUE4VSxXQUFBLGNBQUE3VCxNQUFBLHVCQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxVQUFBSixLQUFBLGFBR0EsU0FBQWtJLEdBQ0FwSixFQUFBOFUsV0FBQSxjQUFBN1QsTUFBQSxvQ0FBQStCLElBQUEsRUFBQTFCLEtBQUEsUUFBQUosS0FBQSxjQ3JMQSxJQUFBaUgsSUFBQXRCLFFBQUEsS0FFQWpILEtBQUE2VSxXQUFBLGlCQUNBLGFBQUEsU0FBQSxTQUFBLFdBQ0EsU0FBQXpVLEVBQUF1RCxFQUFBbVIsRUFBQUMsR0FDQXBSLEVBQUFnVyxZQUdBaFcsRUFBQWdXLFNBQUE1RSxFQUFBMUcsU0FHQWpPLEVBQUE0QyxJQUFBLHVCQUFBLFNBQUFDLEVBQUEyQyxHQUNBQSxHQUFBQSxFQUFBbkUsSUFFQWtDLEVBQUFnVyxTQUFBeEssUUFBQXZKLEtBSUF4RixFQUFBNEMsSUFBQSxtQkFBQSxTQUFBQyxFQUFBMkMsR0FDQUEsR0FBQUEsRUFBQW5FLElBRUFrQyxFQUFBZ1csU0FBQXBRLElBQUEsU0FBQW1GLEVBQUF0SSxHQUNBc0ksRUFBQWpOLEtBQUFtRSxFQUFBbkUsS0FDQWtDLEVBQUFnVyxTQUFBdlQsR0FBQS9FLE1BQUF1RSxFQUFBdkUsTUFDQXNDLEVBQUFnVyxTQUFBdlQsR0FBQXlGLFVBQUFqRyxFQUFBaUcsVUFFQWpHLEVBQUF5RyxhQUFBekcsRUFBQXZCLGdCQUVBdUIsRUFBQXlHLGFBQUF6RyxFQUFBdkIsY0FBQTBILFVBQ0FwSSxFQUFBZ1csU0FBQXZULEdBQUEwRixPQUFBQyxRQUFBbkcsRUFBQXlHLGFBQUF6RyxFQUFBdkIsY0FBQTBILFNBR0FuRyxFQUFBeUcsYUFBQXpHLEVBQUF2QixjQUFBMkgsVUFDQXJJLEVBQUFnVyxTQUFBdlQsR0FBQTBGLE9BQUFFLFFBQUFwRyxFQUFBeUcsYUFBQXpHLEVBQUF2QixjQUFBMkgsU0FHQXBHLEVBQUF5RyxhQUFBekcsRUFBQXZCLGNBQUE0SCxRQUNBdEksRUFBQWdXLFNBQUF2VCxHQUFBMEYsT0FBQUcsTUFBQXJHLEVBQUF5RyxhQUFBekcsRUFBQXZCLGNBQUE0SCxPQUdBckcsRUFBQXlHLGFBQUF6RyxFQUFBdkIsY0FBQTZILFFBQ0F2SSxFQUFBZ1csU0FBQXZULEdBQUEwRixPQUFBSSxNQUFBdEcsRUFBQXlHLGFBQUF6RyxFQUFBdkIsY0FBQTZILGFBUUE5TCxFQUFBNEMsSUFBQSxtQkFBQSxTQUFBQyxFQUFBMkMsR0FDQUEsR0FBQUEsRUFBQW5FLElBRUFrQyxFQUFBZ1csU0FBQXBRLElBQUEsU0FBQW1GLEVBQUF0SSxHQUNBc0ksRUFBQWpOLEtBQUFtRSxFQUFBbkUsSUFDQWtDLEVBQUFnVyxTQUFBckssT0FBQWxKLEVBQUEsT0FLQXpDLEVBQUFpVyxZQUFBLFNBQUFuWSxHQUdBLEdBQUFDLEdBQUEsUUFHQW9ULEdBQUFLLEdBQUEsWUFBQXpULEdBQUFELEdBQUFBLElBQ0FyQixFQUFBNFUsaUJBQUF2VCxNQy9EQXpCLElBQUE2WixTQUFBLFVBQ0FDLElBQUEsUUFDQUMsU0FFQUMsUUFFQTFRLFNBQ0EyUSxZQUNBQyxJQUFBLElBQ0FDLE1BQUEsRUFDQUMsS0FBQSxLQUVBQyxVQUFBLE9BQ0FDLGFBQUEsRUFDQUMsb0JBQUEsS0NqQkF2YSxJQUFBd2EsUUFDQSxpQkFBQSxxQkFDQSxTQUFBQyxFQUFBQyxHQVNBRCxFQUtBRSxNQUFBLFFBQ0FqTyxJQUFBLElBQ0FoSixZQUFBLGNBRUFpWCxNQUFBLGVBQ0FqTyxJQUFBLGVBQ0FoSixZQUFBLG1CQUNBbVIsV0FBQSxvQkFNQThGLE1BQUEsWUFDQWpPLElBQUEsZ0JBQ0FoSixZQUFBLGdCQUNBbVIsV0FBQSxnQkFFQThGLE1BQUEscUJBQ0FqTyxJQUFBLFlBQ0FoSixZQUFBLHlCQUNBbVIsV0FBQSx3QkFFQThGLE1BQUEsbUJBQ0FqTyxJQUFBLFVBQ0FoSixZQUFBLHVCQUNBbVIsV0FBQSxzQkFFQThGLE1BQUEsb0JBQ0FqTyxJQUFBLFdBQ0FoSixZQUFBLHdCQUNBbVIsV0FBQSx1QkFzQkE2RixFQUFBRSxVQUFBLFFDckVBNWEsSUFBQTZhLEtBQUEsYUFBQSxRQUNBLFNBQUF6YSxFQUFBMGEsR0FHQSxHQUFBQyxHQUFBRCxFQUFBRSxTQUFBQyxRQUFBQyxNQUNBSCxHQUFBLGdCQUFBLG1CQUVBM2EsRUFBQTRDLElBQUEsb0JBQUEsU0FBQW1ZLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUF0UCxHQUNBbUosUUFBQUMsSUFBQSxvQkFBQXBKIiwiZmlsZSI6Im11Zy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNVUcgPSBhbmd1bGFyLm1vZHVsZSgnbXVnc2hvdCcsIFsndWkucm91dGVyJywgJ211Z3RlbXBsYXRlcyddKTtcbiIsIi8qKlxuICogYWxlcnRcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgYWxlcnRzIGFuZCBub3RpY2VzIGZvciBhIHVzZXJcbiAqXG4gKiBVU0U6XG4gKiA8YWxlcnQ+PC9hbGVydD5cbiAqXG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIGluZm8sIHN1Y2Nlc3MsIHdhcm5pbmcsIGVycm9yXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gdGl0bGU6IHRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSwgKFRPRE86IGNhbiBiZSBodG1sIG9yIHNpbXBsZSB0ZXh0KVxuICogLSBjYWxsYmFjazogYSBmdW5jdGlvbiB0byBmaXJlIG9uIGFjdGlvbiB0YWtlbiBvbiBtZXNzYWdlXG4gKiAtIGR1cjogdGhlIHRpbWVvdXQgb2YgdGhlIG1lc3NhZ2UsIGluIHNlY29uZHNcbiAqIC0gdHlwZTogc2VlIGFib3ZlIHR5cGVzXG4gKiAtIGljb246IG5vIGRlZmF1bHQsIHNlZSBodHRwczovL29jdGljb25zLmdpdGh1Yi5jb20vIGZvciBvcHRpb25zXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ2FsZXJ0JyxcblsnJHJvb3RTY29wZScsICckdGltZW91dCcsICckY29tcGlsZScsICckdGVtcGxhdGVDYWNoZScsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkdGltZW91dCwgJGNvbXBpbGUsICR0ZW1wbGF0ZUNhY2hlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImFsZXJ0LXBhcmVudFwiPjwvZGl2PicsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBhbGVydFRlbXBsYXRlID0gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhbGVydC5odG1sJyk7XG4gICAgICB2YXIgX2VsID0gYW5ndWxhci5lbGVtZW50KGVsKTtcbiAgICAgIHZhciB0aW1lcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgcHJldmlvdXNJZCA9ICcnO1xuICAgICAgdmFyIGFsZXJ0QWN0aXZlID0gJ2FsZXJ0LWFjdGl2ZSc7XG4gICAgICB2YXIgYWxlcnRWaXNpYmxlID0gJ2FsZXJ0LXZpc2libGUnO1xuXG4gICAgICBmdW5jdGlvbiBzaG93TWVzc2FnZShkYXRhKSB7XG4gICAgICAgIHZhciBfaWQgPSAoK25ldyBEYXRlKCkpO1xuICAgICAgICB2YXIgbmV3Qm9keSA9IGRhdGEudGl0bGU7XG4gICAgICAgIHZhciBuZXdJY24gPSAoZGF0YS5pY29uKSA/IGRhdGEuaWNvbiA6IG51bGw7XG4gICAgICAgIHZhciAkdG1wU2NvcGUgPSAkcm9vdFNjb3BlLiRuZXcodHJ1ZSk7XG5cbiAgICAgICAgLy8gc2V0dXAgc2ltcGxlIHNjb3BlIGZvciBvbmx5IHRoaXMgYWxlcnQgaXRlbVxuICAgICAgICAkdG1wU2NvcGUuYWxlcnQgPSB7fTtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LmlkID0gX2lkO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuaWNvbiA9IChkYXRhLmljb24pID8gZGF0YS5pY29uIDogbnVsbDtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LnR5cGUgPSAoZGF0YS50eXBlKSA/IGRhdGEudHlwZSA6ICdpbmZvJztcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LnRpdGxlID0gZGF0YS50aXRsZTtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0LmFjdGlvbiA9ICghZGF0YS5jYWxsYmFjaykgPyBudWxsIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFjdGlvbkVsID0gdGhpcy5pZDtcbiAgICAgICAgICBkYXRhLmNhbGxiYWNrKCk7XG4gICAgICAgICAgY2xlYXJFbCh0aGlzKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYWxlcnRFbCA9ICRjb21waWxlKGFsZXJ0VGVtcGxhdGUpKCR0bXBTY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIGFsZXJ0RWxbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKGFsZXJ0RWwpO1xuICAgICAgICBhbGVydEVsLmFkZENsYXNzKGFsZXJ0QWN0aXZlKTtcblxuICAgICAgICAvLyBzaG93XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsZXJ0RWwuYWRkQ2xhc3MoYWxlcnRWaXNpYmxlKTtcbiAgICAgICAgfSwgMjApO1xuXG4gICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xlYXJFbChhbGVydEVsKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhckVsKGVsZW0pIHtcbiAgICAgICAgaWYgKCFlbGVtICYmIHByZXZpb3VzSWQpIHtcbiAgICAgICAgICBlbGVtID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpb3VzSWQpKTtcbiAgICAgICAgfSBlbHNlIGlmICghZWxlbSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtKSB7XG4gICAgICAgICAgZWxlbSA9IGFuZ3VsYXIuZWxlbWVudChlbGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoYWxlcnRWaXNpYmxlKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ0FMRVJUOkZJUkUnLCBmdW5jdGlvbihlLCBkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YS50aXRsZSkgeyByZXR1cm47IH1cblxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmIChkYXRhLmR1cikge1xuICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXIgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd01lc3NhZ2UoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIGZhZGVJblxuICogQSBkaXJlY3RpdmUgZm9yIGFuaW1hdGluZyBpbiBlbGVtZW50c1xuICovXG5NVUcuZGlyZWN0aXZlKCdmYWRlSW4nLCBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBwYXJzZUludChhdHRycy5mYWRlSW4pIHx8IDEwO1xuICAgICAgZWxlbS5hZGRDbGFzcygnZmFkZS1pbicpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtLmNzcygnb3BhY2l0eScsICcxJyk7XG4gICAgICB9LCBvZmZzZXQpO1xuICAgIH1cbiAgfTtcblxufV0pO1xuIiwiLyoqXG4gKiBNb2RhbFxuICogQnVpbGRzIGEgbW9kYWwgZm9yIGltYWdlIHZpZXdpbmcgYW5kIGNvbXBhcmluZ1xuICpcbiAqIEB1c2FnZVxuICogPG1vZGFsPjwvbW9kYWw+XG4gKi9cbk1VRy5kaXJlY3RpdmUoJ21vZGFsJyxcblsnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsXG5mdW5jdGlvbigkdGltZW91dCwgJGNvbXBpbGUsICRyb290U2NvcGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICdtb2RhbC5odG1sJyxcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIHZhciBtb2RhbEFjdGl2ZSA9ICdtb2RhbC1vcGVuJztcbiAgICAgIHZhciBtb2RhbFZpc2libGUgPSAnbW9kYWwtdmlzaWJsZSc7XG5cbiAgICAgICRzY29wZS5wcm9qZWN0ID0gYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCk7XG4gICAgICAkc2NvcGUuYWN0aXZlT3B0aW9uID0gJ3NpZGVzJztcbiAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UgPSB7fTtcbiAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSB7fTtcbiAgICAgICRzY29wZS5jb21wYXJlSXRlbSA9IHtcbiAgICAgICAgYTogJycsXG4gICAgICAgIGI6ICcnLFxuICAgICAgICBjOiAnJ1xuICAgICAgfTtcbiAgICAgICRzY29wZS52aWV3ZXIgPSB7XG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UgPSB7XG4gICAgICAgIGFtb3VudDogMC44LFxuICAgICAgICBpbnZlcnNlOiAwLjIsXG4gICAgICAgIHBlcmNlbnQ6ICc4MCUnXG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuJHdhdGNoKCdvcGFjaXR5UmFuZ2UuYW1vdW50JywgZnVuY3Rpb24obnYsIG92KSB7XG4gICAgICAgIGlmIChudiA9PT0gb3YpIHtyZXR1cm47fVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgb3RoZXIgdmFsdWVzXG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UuaW52ZXJzZSA9ICgxIC0gbnYpLnRvRml4ZWQoMik7XG4gICAgICAgICRzY29wZS5vcGFjaXR5UmFuZ2UucGVyY2VudCA9IE1hdGgucm91bmQobnYgKiAxMDApICsgJyUnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHNldCB0aGUgYWN0aXZlIGl0ZW0gd2l0aCBjb3JyZWN0IHBhdGhzXG4gICAgICBmdW5jdGlvbiBzZXRBY3RpdmVJdGVtKGRhdGEpIHtcbiAgICAgICAgdmFyIGltYWdlU3JjID0gKCFkYXRhLnJlbW90ZVNvdXJjZSkgPyBkYXRhLnNvdXJjZSA6IGRhdGEucmVtb3RlU291cmNlO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gJ3NjcmVlbnMvcmVmZXJlbmNlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBpbWFnZVNyYy5yZXBsYWNlKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggKyAnLnBuZycsICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlICsgJy5wbmcnKSA6IGltYWdlU3JjO1xuICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYiA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gJ3NjcmVlbnMvY29tcGFyZS8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgaW1hZ2VTcmMgOiBpbWFnZVNyYztcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmMgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGltYWdlU3JjLnJlcGxhY2UoJy5wbmcnLCAnX2RpZmYucG5nJykgOiBpbWFnZVNyYztcbiAgICAgIH1cblxuICAgICAgLy8gQ2hvb3NlIHRoZSB2aWV3ZXIgbGF5b3V0XG4gICAgICAkc2NvcGUub3B0aW9uTW9kZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9IHR5cGU7XG4gICAgICB9O1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6Q0xPU0UnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgICAgICRzY29wZS5jbG9zZSgpO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNT0RBTDpPUEVOJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MudHlwZSkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgdG8gcmVzZXQgY3VycmVudCBJbmRleFxuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgJHNjb3BlLnByb2plY3QgPSBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0KTtcblxuICAgICAgICAvLyBTaG93IGEgc2luZ2xlIGl0ZW1cbiAgICAgICAgaWYgKGFyZ3MudHlwZSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW07XG4gICAgICAgICAgJHNjb3BlLnZpZXdlciA9IGFyZ3MucHJvamVjdCB8fCB7fTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyLml0ZW1zID0gbnVsbDtcbiAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICdzY3JlZW5zLycgKyAkc2NvcGUuYWN0aXZlSXRlbS50eXBlICsgJy8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgJHNjb3BlLmFjdGl2ZUl0ZW0uc291cmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdyBtdWx0aXBsZSBpdGVtc1xuICAgICAgICBpZiAoYXJncy50eXBlID09PSAnYmF0Y2gnICYmIGFyZ3MuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtc1skc2NvcGUuY3VycmVudEluZGV4XTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyID0gYXJncy5wcm9qZWN0IHx8IHt9O1xuICAgICAgICAgICRzY29wZS52aWV3ZXIuaXRlbXMgPSBhcmdzLml0ZW1zO1xuICAgICAgICAgIHNldEFjdGl2ZUl0ZW0oJHNjb3BlLmFjdGl2ZUl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWFrZSB0aGUgbW9kYWwgYWN0aXZlIHdpdGggZGF0YVxuICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhtb2RhbEFjdGl2ZSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhtb2RhbFZpc2libGUpO1xuICAgICAgICB9LCAzMCk7XG4gICAgICB9KTtcblxuICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsVmlzaWJsZSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcyhtb2RhbEFjdGl2ZSk7XG4gICAgICAgIH0sIDIzMCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBvZiBsZWZ0L3JpZ2h0IG5hdmlnYXRpb25cbiAgICAgICRzY29wZS5tb2RhbEFjdGlvbk5hdiA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgaWYgKCRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIDwgMSkgeyByZXR1cm47IH1cblxuICAgICAgICB2YXIgdG90YWwgPSAkc2NvcGUudmlld2VyLml0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgIHZhciBuZXh0SWR4O1xuXG4gICAgICAgIGlmICh0eXBlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgbmV4dElkeCA9ICgkc2NvcGUuY3VycmVudEluZGV4ID09PSB0b3RhbCkgPyAwIDogJHNjb3BlLmN1cnJlbnRJbmRleCArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dElkeCA9ICgkc2NvcGUuY3VycmVudEluZGV4ID09PSAwKSA/IHRvdGFsIDogJHNjb3BlLmN1cnJlbnRJbmRleCAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9ICRzY29wZS52aWV3ZXIuaXRlbXNbbmV4dElkeF07XG4gICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBuZXh0SWR4O1xuICAgICAgICBzZXRBY3RpdmVJdGVtKCRzY29wZS5hY3RpdmVJdGVtKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEdvIGRpcmVjdGx5IHRvIGFuIGl0ZW1cbiAgICAgICRzY29wZS5nb1RvSW5kZXggPSBmdW5jdGlvbihpZHgpIHtcbiAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50SW5kZXggPT09IGlkeCkge3JldHVybjt9XG5cbiAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSAkc2NvcGUudmlld2VyLml0ZW1zW2lkeF07XG4gICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpZHg7XG4gICAgICAgIHNldEFjdGl2ZUl0ZW0oJHNjb3BlLmFjdGl2ZUl0ZW0pO1xuICAgICAgfTtcblxuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogbXNnQ2VudGVyXG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIG1lc3NhZ2UgcmVsYXkgZm9yIGEgdXNlclxuICpcbiAqIFVTRTpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnTVNHQ0VOVEVSOkZJUkUnLCB7IG1zZzogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBERUZBVUxULCBzaG93cyBncmVlbiBtZXNzYWdlLCB1c2VkIGZvciBzdWNjZXNzXG4gKiAtIFdhcm5pbmc6IFwid2FyblwiIC0gc2hvd3Mgb3JhbmdlIG1lc3NhZ2UsIHVzZWQgZm9yIGVycm9ycyBvciB3YXJuaW5nc1xuICogLSBJbmZvOiBcImluZm9cIiAtIHNob3dzIGRhcmsgYmx1ZSBtZXNzYWdlLCB1c2VkIGZvciBnZW5lcmFsIHRoaW5nc1xuICpcbiAqIE9QVElPTlM6XG4gKiAtIG1zZzogdGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLCAoVE9ETzogY2FuIGJlIGh0bWwgb3Igc2ltcGxlIHRleHQpXG4gKiAtIGNhbGxiYWNrOiBhIGZ1bmN0aW9uIHRvIGZpcmUgb24gYWN0aW9uIHRha2VuIG9uIG1lc3NhZ2VcbiAqIC0gZHVyOiB0aGUgdGltZW91dCBvZiB0aGUgbWVzc2FnZVxuICogLSB0eXBlOiBzZWUgYWJvdmUgdHlwZXNcbiAqIC0gaWNvbjogZGVmYXVsdCBpcyBnbG9iZSwgY2FuIGJlIHNldCB0byBBTlkgaS1zcHJpdGVzIChzcHJpdGVzLmxlc3MpXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ21zZ0NlbnRlcicsXG5bIFwiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJGNvbXBpbGVcIixcbmZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkdGltZW91dCwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBtc2dUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwibXNnXCIgbmctY2xpY2s9XCJhY3Rpb24oKVwiPicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctaWNuXCI+PGkgY2xhc3M9XCJpdyBpLUlDT05cIj48L2k+PC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1jb250XCI+Qk9EWTwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctYWN0aW9uXCI+PGkgY2xhc3M9XCJpYiBpLXItYXJyb3dcIj48L2k+PC9kaXY+JytcbiAgICAgICAgJzwvZGl2Pic7XG5cbiAgICAgIHZhciBfZWwgPSBhbmd1bGFyLmVsZW1lbnQoZWwpO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBwcmV2aW91c0lkID0gXCJcIjtcbiAgICAgIHZhciBkZWZhdWx0SWNvbiA9IFwiaW5mb1wiO1xuXG4gICAgICBzY29wZS5ib2R5ID0gXCJcIjtcbiAgICAgIHNjb3BlLmNhbGxiYWNrID0gbnVsbDtcbiAgICAgIHNjb3BlLmljb24gPSBkZWZhdWx0SWNvbjtcbiAgICAgIHNjb3BlLmFjdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBhY3Rpb25FbCA9IF9lbC5maW5kKFwiI1wiICsgdGhpcy5pZCk7XG4gICAgICAgIHNjb3BlLmNhbGxiYWNrKCk7XG4gICAgICAgIGNsZWFyRWwoIGFjdGlvbkVsICk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBzaG93TWVzc2FnZSAoIGRhdGEgKXtcbiAgICAgICAgdmFyIF9pZCA9ICgrbmV3IERhdGUoKSk7XG4gICAgICAgIHZhciBuZXdCb2R5ID0gZGF0YS5tc2c7XG4gICAgICAgIHZhciBuZXdJY24gPSAoZGF0YS5pY29uKT8gZGF0YS5pY29uIDogZGVmYXVsdEljb247XG5cbiAgICAgICAgdmFyIHRlbXBsYXRlID0gbXNnVGVtcGxhdGUucmVwbGFjZShcIkJPRFlcIiwgbmV3Qm9keSkucmVwbGFjZShcIklDT05cIiwgbmV3SWNuKTtcbiAgICAgICAgdmFyIG5ld01lc3NhZ2UgPSAkY29tcGlsZSh0ZW1wbGF0ZSkoc2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBuZXdNZXNzYWdlWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZCggbmV3TWVzc2FnZSApO1xuXG4gICAgICAgIC8vIHJlbWVtYmVyIHRoZSBuZXcgZWwgZm9yIGxhdGVyXG4gICAgICAgIHZhciBtc2dFbCA9IF9lbC5maW5kKFwiI1wiICsgX2lkKTtcbiAgICAgICAgY2hhbmdlVHlwZSggbXNnRWwsIGRhdGEudHlwZSApO1xuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIG1zZ0VsLmZpbmQoXCIubXNnLWFjdGlvblwiKS5hZGRDbGFzcyhcInNob3dcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG93XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1zZ0VsLmFkZENsYXNzKCdhZGQnKTtcbiAgICAgICAgfSwgMjApO1xuXG4gICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGVhckVsKCBtc2dFbCApO1xuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRWwgKCBlbGVtICkge1xuICAgICAgICBpZighZWxlbSAmJiBwcmV2aW91c0lkKXtcbiAgICAgICAgICBlbGVtID0gX2VsLmZpbmQoXCIjXCIgKyBwcmV2aW91c0lkKTtcbiAgICAgICAgfSBlbHNlIGlmKCFlbGVtKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2FkZCcpO1xuICAgICAgICBlbGVtLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbSkucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCB0aGUgdHlwZSBieSBhIGNsYXNzXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VUeXBlICggZWxlbSwgdHlwZSApIHtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLWluZm8nKTtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLXdhcm4nKTtcblxuICAgICAgICBpZih0eXBlKXtcbiAgICAgICAgICBlbGVtLmFkZENsYXNzKCdtc2ctJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNU0dDRU5URVI6RklSRScsIGZ1bmN0aW9uKGUsIGRhdGEpe1xuICAgICAgICBpZighZGF0YS5tc2cpeyByZXR1cm47IH1cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZihkYXRhLmR1cil7XG4gICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1ciAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBzY29wZS5jYWxsYmFjayA9IGRhdGEuY2FsbGJhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TWVzc2FnZSggZGF0YSApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBwcmVsb2FkZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBzaG93aW5nIGEgcHJlbG9hZGVyIGFuaW1hdGlvbiBkdXJpbmcgYSBwcm9jZXNzaW5nIHBlcmlvZFxuICpcbiAqIFVTRTpcbiAqIDxwcmVsb2FkZXI+PC9wcmVsb2FkZXI+XG4gKlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdQUkVMT0FERVI6T04nKTtcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnUFJFTE9BREVSOk9GRicpO1xuICpcbiAqL1xudmFyIFAgPSByZXF1aXJlKCcuL3ZlbmRvci9jb3JlL3ByZWxvYWRlcicpO1xuXG5NVUcuZGlyZWN0aXZlKCdwcmVsb2FkZXInLFxuWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XG4gIHJldHVybiB7XG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHNjb3BlOiB7fSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwcmVsb2FkZXJcIj48L2Rpdj4nLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIEI7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgdGl0bGU7XG4gICAgICB2YXIgcHJldmlvdXNUaXRsZTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgbG9hZGluZyA9ICdsb2FkaW5nJztcblxuICAgICAgLy8gSU5JVCFcbiAgICAgIC8vIGF2b2lkIHRoZSBoaWRlL3Nob3cgdGltZWxpbmVcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBCID0gbmV3IFAuQnJvd3NlcigpO1xuICAgICAgICBCLmluaXQoKTtcblxuICAgICAgICAvLyBzZXR1cCBvbmUgaW5zdGFuY2Ugb2YgdGhlIGNhbnZhc1xuICAgICAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoQi5pbnN0YW5jZSk7XG5cbiAgICAgICAgLy8gZHJhdyBicm93c2VyXG4gICAgICAgIEIuZHJhd0Jyb3dzZXIoKTtcbiAgICAgIH0sIDMwKTtcblxuICAgICAgLy8gZnVuY3Rpb24gc2hvd1ByZWxvYWRlcigpIHtcbiAgICAgIC8vXG4gICAgICAvLyAgIC8vIGF2b2lkIHRoZSBoaWRlL3Nob3cgdGltZWxpbmVcbiAgICAgIC8vICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAvL1xuICAgICAgLy8gICAgIC8vIFN0YXJ0IGFuaW1hdGlvblxuICAgICAgLy8gICAgIEIuYW5pbWF0ZSgwLCAzMCk7XG4gICAgICAvLyAgIH0sIDMwKTtcbiAgICAgIC8vXG4gICAgICAvLyAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgLy9cbiAgICAgIC8vICAgICAvLyAvLyBkcmF3IGJyb3dzZXJcbiAgICAgIC8vICAgICAvLyBCLmRyYXdCcm93c2VyKCk7XG4gICAgICAvL1xuICAgICAgLy8gICAgIC8vIFN0YXJ0IGFuaW1hdGlvblxuICAgICAgLy8gICAgIEIuYW5pbWF0ZSgxLCAxNTApO1xuICAgICAgLy9cbiAgICAgIC8vICAgICAvLyBlbC5hZGRDbGFzcyhsb2FkaW5nKTtcbiAgICAgIC8vICAgfSwgMzAwMCk7XG4gICAgICAvLyB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByZWxvYWRlcihlLCBhcmdzKSB7XG4gICAgICAgIGlmICghYXJncyB8fCAhYXJncy5tc2cpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgdGl0bGUgPSBhcmdzLm1zZztcblxuICAgICAgICB2YXIgdHlwZTtcblxuICAgICAgICBzd2l0Y2ggKHRpdGxlKSB7XG4gICAgICAgICAgLy8gY2FzZSAnU3RhcnRpbmcgY29tcGFyZSBjYXB0dXJlJzpcbiAgICAgICAgICAvLyAgIHR5cGUgPSAwO1xuICAgICAgICAgIC8vICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnT3BlbmluZyBCcm93c2VyIFNlc3Npb24nOlxuICAgICAgICAgICAgdHlwZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdDYXB0dXJpbmcgU2NyZWVucyc6XG4gICAgICAgICAgICB0eXBlID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vIGNhc2UgJ1VwZGF0ZWQgUHJvamVjdCBIaXN0b3J5JzpcbiAgICAgICAgICAvLyAgIHR5cGUgPSAyO1xuICAgICAgICAgIC8vICAgYnJlYWs7XG4gICAgICAgICAgLy8gY2FzZSAnQ29tcGFyaW5nIENhcHR1cmUgRGF0YSc6XG4gICAgICAgICAgLy8gICB0eXBlID0gMjtcbiAgICAgICAgICAvLyAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGUgdGl0bGUgaGFzIGNoYW5nZWRcbiAgICAgICAgaWYgKHRpdGxlICE9PSBwcmV2aW91c1RpdGxlICYmIEIgJiYgQi5hbmltYXRlKSB7XG5cbiAgICAgICAgICAvLyBTdGFydCBhbmltYXRpb25cbiAgICAgICAgICBCLmFuaW1hdGUodHlwZSwgMzAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJldmlvdXNUaXRsZSA9IHRpdGxlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc2V0UHJlbG9hZGVyKCkge1xuICAgICAgICBlbC5hZGRDbGFzcyhsb2FkaW5nKTtcbiAgICAgIH1cblxuICAgICAgLy8gJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpPTicsIHNob3dQcmVsb2FkZXIpO1xuICAgICAgJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpVUERBVEUnLCB1cGRhdGVQcmVsb2FkZXIpO1xuICAgICAgJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpPRkYnLCByZXNldFByZWxvYWRlcik7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ3RpbWVBZ28nLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZXJ2aWNlID0ge307XG5cbiAgc2VydmljZS5zZXR0aW5ncyA9IHtcbiAgICByZWZyZXNoTWlsbGlzOiA2MDAwMCxcbiAgICBhbGxvd0Z1dHVyZTogZmFsc2UsXG4gICAgc3RyaW5nczoge1xuICAgICAgcHJlZml4QWdvOiBudWxsLFxuICAgICAgcHJlZml4RnJvbU5vdzogbnVsbCxcbiAgICAgIHN1ZmZpeEFnbzogJ2FnbycsXG4gICAgICBzdWZmaXhGcm9tTm93OiAnZnJvbSBub3cnLFxuICAgICAgc2Vjb25kczogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsXG4gICAgICBtaW51dGU6ICdhYm91dCBhIG1pbnV0ZScsXG4gICAgICBtaW51dGVzOiAnJWQgbWludXRlcycsXG4gICAgICBob3VyOiAnYWJvdXQgYW4gaG91cicsXG4gICAgICBob3VyczogJyVkIGhvdXJzJyxcbiAgICAgIGRheTogJ2EgZGF5JyxcbiAgICAgIGRheXM6ICclZCBkYXlzJyxcbiAgICAgIG1vbnRoOiAnYWJvdXQgYSBtb250aCcsXG4gICAgICBtb250aHM6ICclZCBtb250aHMnLFxuICAgICAgeWVhcjogJ2Fib3V0IGEgeWVhcicsXG4gICAgICB5ZWFyczogJyVkIHllYXJzJyxcbiAgICAgIG51bWJlcnM6IFtdXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHRyaW1EaWdpdHMgKCBudW0gKSB7XG4gICAgICB2YXIgbSA9IG51bS50b1N0cmluZygpLnNsaWNlKDAsMTMpO1xuICAgICAgcmV0dXJuIChtLmxlbmd0aCA9PSAxMyk/IHBhcnNlSW50KG0pIDogbnVtO1xuICB9XG5cbiAgc2VydmljZS5pbldvcmRzID0gZnVuY3Rpb24gKGRpc3RhbmNlTWlsbGlzKSB7XG4gICAgdmFyICRsID0gc2VydmljZS5zZXR0aW5ncy5zdHJpbmdzO1xuICAgIHZhciBwcmVmaXggPSAkbC5wcmVmaXhBZ287XG4gICAgdmFyIHN1ZmZpeCA9ICRsLnN1ZmZpeEFnbztcbiAgICBpZiAoc2VydmljZS5zZXR0aW5ncy5hbGxvd0Z1dHVyZSkge1xuICAgICAgaWYgKGRpc3RhbmNlTWlsbGlzIDwgMCkge1xuICAgICAgICBwcmVmaXggPSAkbC5wcmVmaXhGcm9tTm93O1xuICAgICAgICBzdWZmaXggPSAkbC5zdWZmaXhGcm9tTm93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5hYnMoZGlzdGFuY2VNaWxsaXMpIC8gMTAwMDtcbiAgICB2YXIgbWludXRlcyA9IHNlY29uZHMgLyA2MDtcbiAgICB2YXIgaG91cnMgPSBtaW51dGVzIC8gNjA7XG4gICAgdmFyIGRheXMgPSBob3VycyAvIDI0O1xuICAgIHZhciB5ZWFycyA9IGRheXMgLyAzNjU7XG5cbiAgICBmdW5jdGlvbiBzdWJzdGl0dXRlKHN0cmluZ09yRnVuY3Rpb24sIG51bWJlcikge1xuICAgICAgdmFyIHN0cmluZyA9IGFuZ3VsYXIuaXNGdW5jdGlvbihzdHJpbmdPckZ1bmN0aW9uKSA/XG4gICAgICBzdHJpbmdPckZ1bmN0aW9uKG51bWJlciwgZGlzdGFuY2VNaWxsaXMpIDogc3RyaW5nT3JGdW5jdGlvbjtcbiAgICAgIHZhciB2YWx1ZSA9ICgkbC5udW1iZXJzICYmICRsLm51bWJlcnNbbnVtYmVyXSkgfHwgbnVtYmVyO1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8lZC9pLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgdmFyIHdvcmRzID0gc2Vjb25kcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwuc2Vjb25kcywgTWF0aC5yb3VuZChzZWNvbmRzKSkgfHxcbiAgICAgICAgc2Vjb25kcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwubWludXRlLCAxKSB8fFxuICAgICAgICBtaW51dGVzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGVzLCBNYXRoLnJvdW5kKG1pbnV0ZXMpKSB8fFxuICAgICAgICBtaW51dGVzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5ob3VyLCAxKSB8fFxuICAgICAgICBob3VycyA8IDI0ICYmIHN1YnN0aXR1dGUoJGwuaG91cnMsIE1hdGgucm91bmQoaG91cnMpKSB8fFxuICAgICAgICBob3VycyA8IDQyICYmIHN1YnN0aXR1dGUoJGwuZGF5LCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzAgJiYgc3Vic3RpdHV0ZSgkbC5kYXlzLCBNYXRoLnJvdW5kKGRheXMpKSB8fFxuICAgICAgICBkYXlzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aCwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDM2NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRocywgTWF0aC5yb3VuZChkYXlzIC8gMzApKSB8fFxuICAgICAgICB5ZWFycyA8IDEuNSAmJiBzdWJzdGl0dXRlKCRsLnllYXIsIDEpIHx8XG4gICAgICAgIHN1YnN0aXR1dGUoJGwueWVhcnMsIE1hdGgucm91bmQoeWVhcnMpKTtcblxuICAgIHZhciBzZXBhcmF0b3IgPSAkbC53b3JkU2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnICcgOiAkbC53b3JkU2VwYXJhdG9yO1xuICAgIHJldHVybiBbcHJlZml4LCB3b3Jkcywgc3VmZml4XS5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICB9O1xuXG4gIHNlcnZpY2UucGFyc2UgPSBmdW5jdGlvbiAoaXNvODYwMSkge1xuICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGlzbzg2MDEpKSB7XG4gICAgICBpc284NjAxID0gaXNvODYwMSArIFwiXCI7XG4gICAgICAvLyBmb3JtYXQgZm9yIGNvcnJlY3QgbGVuZ3RoXG4gICAgICB2YXIgb3JpZ2luYWxUaW1lc3RhbXAgPSB0cmltRGlnaXRzKCBpc284NjAxICk7XG4gICAgICByZXR1cm4gcGFyc2VJbnQob3JpZ2luYWxUaW1lc3RhbXAsIDEwKTtcbiAgICB9XG4gICAgdmFyIHMgPSAoaXNvODYwMSB8fCAnJykudHJpbSgpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1xcLlxcZCsvLCAnJyk7IC8vIHJlbW92ZSBtaWxsaXNlY29uZHNcbiAgICBzID0gcy5yZXBsYWNlKC8tLywgJy8nKS5yZXBsYWNlKC8tLywgJy8nKTtcbiAgICBzID0gcy5yZXBsYWNlKC9ULywgJyAnKS5yZXBsYWNlKC9aLywgJyBVVEMnKTtcbiAgICBzID0gcy5yZXBsYWNlKC8oW1xcK1xcLV1cXGRcXGQpXFw6PyhcXGRcXGQpLywgJyAkMSQyJyk7IC8vIC0wNDowMCAtPiAtMDQwMFxuICAgIHJldHVybiBuZXcgRGF0ZShzKTtcbiAgfTtcblxuICByZXR1cm4gc2VydmljZTtcbn0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBhc3luYyA9IHJlcXVpcmUoJ2FzeW5jJyk7XG5cbk1VRy5mYWN0b3J5KCdDb21wYXJlJyxcblsnJHEnLCAnQ29uZmlnJyxcbmZ1bmN0aW9uKCRxLCBDb25maWcpIHtcbiAgLy8gQ29uZmlnIHZhcnNcbiAgdmFyIGZpbGVEaXJQcmVmaXggPSBfX2Rpcm5hbWUgKyAnLyc7XG4gIHZhciBpbWFnZVByZWZpeCA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJztcbiAgdmFyIHN0YXR1c1R5cGVzID0gWydwYXNzZWQnLCAnd2FybmluZycsICdmYWlsZWQnXTtcblxuICAvLyBhc3luYyBoZWxwZXJcbiAgZnVuY3Rpb24gcmVhZEFzeW5jKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgZnMucmVhZEZpbGUoZmlsZURpclByZWZpeCArIGZpbGUsICdiYXNlNjQnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvLyBUT0RPOiBsZXQgdGhlIGJhY2tlbmQgcHJvY2VzcyBoYW5kbGUgdGhpcyFcbiAgZnVuY3Rpb24gY29tcGFyZVNpbmdsZShhLCBiKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIG91dHB1dCA9IHt9O1xuXG4gICAgLy8gQXBwbHkgTWFpbiBDb21wYXJlIENvbmZpZ1xuICAgIHJlc2VtYmxlLm91dHB1dFNldHRpbmdzKENvbmZpZy5Db21wYXJlKTtcblxuICAgIC8vIE9wZW4gYm90aCBmaWxlcywgYmVmb3JlIHdlIGFyZSByZWFkeSB0byBwcm9jZXNzXG4gICAgYXN5bmMubWFwKFthLCBiXSwgcmVhZEFzeW5jLCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHtcbiAgICAgIHZhciBhRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1swXTtcbiAgICAgIHZhciBiRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1sxXTtcblxuICAgICAgLy8gSGFuZGxlcyBlcnJvcnNcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgfVxuXG4gICAgICAvLyBSdW4gdGhlIGNvbXBhcmUgZnVuY3Rpb24sIHJldHVybiB0aGUgZGlmZiBkYXRhXG4gICAgICByZXNlbWJsZShhRGF0YSlcbiAgICAgICAgLmNvbXBhcmVUbyhiRGF0YSlcbiAgICAgICAgLmlnbm9yZUNvbG9ycygpXG4gICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKGRpZmZEYXRhKSB7XG4gICAgICAgICAgb3V0cHV0LnJlcG9ydCA9IGRpZmZEYXRhO1xuICAgICAgICAgIG91dHB1dC5zcmMgPSBkaWZmRGF0YS5nZXRJbWFnZURhdGFVcmwoKTtcblxuICAgICAgICAgIGRmZC5yZXNvbHZlKG91dHB1dCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0d28gaW1hZ2VzIGFuZCByZXR1cm5zIGFsbCBkYXRhIHdpdGggYW4gaW1hZ2Ugb2YgY2hhbmdlc1xuICAgICAqL1xuICAgIHJ1blNpbmdsZTogY29tcGFyZVNpbmdsZSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHR5cGUgb2YgcGFzcy93YXJuL2ZhaWwgc3RhdHVzXG4gICAgICovXG4gICAgZ2V0U3RhdHVzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgbWlzTWF0Y2hWYWx1ZSA9IHBhcnNlRmxvYXQoZGF0YS5taXNNYXRjaFBlcmNlbnRhZ2UpO1xuXG4gICAgICAvLyBsb3dlc3QgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA8IDAuMSkge1xuXG4gICAgICAgIC8vIFdhcm4gdGhhdCBkaW1lbnNpb25zIGFyZSBkaWZmZXJlbmNlXG4gICAgICAgIGlmIChkYXRhLmlzU2FtZURpbWVuc2lvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1swXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3YXJuaW5nIHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPiAwLjEgJiYgbWlzTWF0Y2hWYWx1ZSA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgfVxuXG4gICAgICAvLyBlcnJvciB0b2xlcmFuY2UgcmVhY2hlZFxuICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzJdO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ25vd1RpbWUnLFxuWyckdGltZW91dCcsXG5mdW5jdGlvbigkdGltZW91dCkge1xuICB2YXIgbm93VGltZSA9IERhdGUubm93KCk7XG4gIHZhciB1cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcblxuICB1cGRhdGVUaW1lKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0VGltZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbm93VGltZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgQVdTID0gcmVxdWlyZSgnLi92ZW5kb3IvY29yZS9hd3MnKTtcblxuTVVHLmZhY3RvcnkoJ1Byb2plY3RzJyxcblsnJHEnLFxuZnVuY3Rpb24oJHEpIHtcbiAgLy8gQ29uZmlnIHRoZSBtYWluIHBhdGhzXG4gIHZhciBwcm9qZWN0c1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLmpzb24nO1xuICB2YXIgcHJvamVjdEZpbGVzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMvJztcblxuICAvLyBDcmVhdGVzIGEgVVVJRCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aFxuICBmdW5jdGlvbiBjcmVhdGVVVUlEKHMpIHtcbiAgICB2YXIgbjtcbiAgICBpZiAodHlwZW9mIHMgPT0gJ251bWJlcicgJiYgcyA9PT0gcGFyc2VJbnQocywgMTApKSB7XG4gICAgICBzID0gQXJyYXkocyArIDEpLmpvaW4oJ3gnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcy5yZXBsYWNlKC94L2csIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA2MSkgKyA0ODtcbiAgICAgIG4gPSBuID4gNTcgPyAobiArIDcgPiA5MCA/IG4gKyAxMyA6IG4gKyA3KSA6IG47XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENyZWF0ZXMgYSBKU09OIG9iamVjdCBmb3IgYSBiYXNlbGluZSBuZXcgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3QodG90YWwpIHtcbiAgICB0b3RhbCA9IHRvdGFsIHx8IDA7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcHJvamVjdElkLFxuICAgICAgdGl0bGU6ICdQcm9qZWN0ICcgKyAocGFyc2VJbnQodG90YWwsIDEwKSArIDEpLFxuICAgICAgdGltZXN0YW1wOiAoK25ldyBEYXRlKSxcbiAgICAgIHRvdGFsczoge1xuICAgICAgICBzdWNjZXNzOiBudWxsLFxuICAgICAgICB3YXJuaW5nOiBudWxsLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgdmlld3M6IDBcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gU2V0cyB1cCB0aGUgbmVlZGVkIGJhc2UgZGF0YSBmb3Igc3RvcmluZyBhbiBpbmRpdmlkdWFsIHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0RmlsZShvcHRpb25zKSB7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBiYXRjaEhpc3Rvcnk6IHt9LFxuICAgICAgY3VycmVudEJhdGNoOiBudWxsLFxuICAgICAgY3VycmVudFJlZmVyZW5jZTogbnVsbCxcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICB0aW1lc3RhbXA6IG9wdGlvbnMudGltZXN0YW1wLFxuICAgICAgdmlld3BvcnRzOiBbXSxcbiAgICAgIHNlbGVjdG9yczogW10sXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICByZWFkeUV2ZW50OiBudWxsLFxuICAgICAgICBkZWxheTogbnVsbCxcbiAgICAgICAgbWlzTWF0Y2hUaHJlc2hvbGQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhYnMgSlNPTiBmaWxlIGFuZCBhcHByb3ByaWF0ZWx5IGhhbmRsZXMgZXJyb3JzXG4gIGZ1bmN0aW9uIGdldEpzb25GaWxlKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgZmlsZTtcblxuICAgIHRyeSB7XG4gICAgICBmaWxlID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gY291bGRuJ3QgZmluZCBmaWxlXG4gICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICByZXR1cm4gdHlwZSB8fCB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG4gIH1cblxuICAvLyByZW1vdmUgYWxsIGZpbGVzIGluIGRpcmVjdG9yeVxuICBmdW5jdGlvbiByZW1vdmVBbGxJbkRpcmVjdG9yeShkaXJQYXRoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKGRpclBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuOyB9XG5cbiAgICBpZiAoZmlsZXMubGVuZ3RoID4gMClcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGZpbGVQYXRoID0gcGF0aC5qb2luKGRpclBhdGgsIGZpbGVzW2ldKTtcblxuICAgICAgICBpZiAoZnMuc3RhdFN5bmMoZmlsZVBhdGgpLmlzRmlsZSgpKSB7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm1EaXIoZmlsZVBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gIH07XG5cbiAgLy8gc2V0cyB1cCBhIHByb21pc2UgZHJpdmVuIGZpbGUgd3JpdGVcbiAgZnVuY3Rpb24gcHJvbWlzZVdyaXRlKGZpbGVQYXRoLCBkYXRhKSB7XG4gICAgdmFyIF9xID0gJHEuZGVmZXIoKTtcblxuICAgIGZzLndyaXRlRmlsZShmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBfcS5yZWplY3QoZXJyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgX3EucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF9xLnByb21pc2U7XG4gIH1cblxuICAvLyBzZXRzIHVwIGEgcHJvbWlzZSBkcml2ZW4gZmlsZSBkZWxldGVcbiAgZnVuY3Rpb24gcHJvbWlzZVJlbW92ZShwYXRoKSB7XG4gICAgdmFyIF96ID0gJHEuZGVmZXIoKTtcblxuICAgIC8vIGZzLnVubGlua1xuICAgIGZzLnVubGluayhwYXRoLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgX3oucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF96LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfei5wcm9taXNlO1xuICB9XG5cbiAgcmV0dXJuIHtcblxuICAgIGdldDogZnVuY3Rpb24ocGF0aCwgdHlwZSkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKF9fZGlybmFtZSArIHBhdGgsIHR5cGUpO1xuICAgIH0sXG5cbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuICAgIH0sXG5cbiAgICBnZXRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicpO1xuICAgIH0sXG5cbiAgICBnZXRUeXBlQnlJZDogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnXycgKyB0eXBlICsgJy5qc29uJywgW10pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB2YWxpZGF0ZXMgdGhlIHByb2plY3QsIG1ha2VzIHN1cmUgYWxsIHNldHRpbmdzIGFyZSBzZXR1cCBhbmQgdmFsaWRcbiAgICAgKi9cbiAgICB2YWxpZGF0ZTogZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgdmFyIGNvb2tpZXMgPSBwcm9qZWN0LmNvb2tpZXM7XG4gICAgICB2YXIgdmlld3BvcnRzID0gcHJvamVjdC52aWV3cG9ydHM7XG4gICAgICB2YXIgc2VsZWN0b3JzID0gcHJvamVjdC5zZWxlY3RvcnM7XG4gICAgICB2YXIgdGl0bGUgPSBwcm9qZWN0LnRpdGxlO1xuICAgICAgdmFyIHVybCA9IHByb2plY3QubWV0YS51cmw7XG4gICAgICB2YXIgYm9vbCA9IHRydWU7XG5cbiAgICAgIC8vIHZlcmlmeSBhbGwgZGVmYXVsdHMgYXJlIHNldHVwXG4gICAgICBpZiAoIXZpZXdwb3J0cyB8fCAhc2VsZWN0b3JzIHx8ICF0aXRsZSB8fCAhdXJsIHx8IHZpZXdwb3J0cy5sZW5ndGggPCAxIHx8IHNlbGVjdG9ycy5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSB2aWV3cG9ydHMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAodmlld3BvcnRzKSB7XG4gICAgICAgIHZpZXdwb3J0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai53aWR0aCB8fCAhb2JqLmhlaWdodCB8fCAhb2JqLm5hbWUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIHNlbGVjdG9ycywgdmVyaWZ5IHRoZXkncmUgc2V0dXAgcmlnaHRcbiAgICAgIGlmIChzZWxlY3RvcnMpIHtcbiAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLnF1ZXJ5IHx8ICFvYmoudHlwZSkge1xuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgY29va2llcywgdmVyaWZ5IHRoZXkncmUgc2V0dXAgcmlnaHRcbiAgICAgIGlmIChjb29raWVzKSB7XG4gICAgICAgIGNvb2tpZXMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoubmFtZSB8fCAhb2JqLnBhdGggfHwgIW9iai52YWx1ZSkge1xuICAgICAgICAgICAgYm9vbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGRlZmF1bHQgdG8gdHJ1ZVxuICAgICAgcmV0dXJuIGJvb2w7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZXMgYSBuZXcgcHJvamVjdCwgYW5kIHJldHVybnMgdGhlIGRhdGEgaW4gYSBwcm9taXNlXG4gICAgICovXG4gICAgY3JlYXRlTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RGF0YSA9IGNyZWF0ZUR1bW15UHJvamVjdChhbGxQcm9qZWN0cy5sZW5ndGgpO1xuICAgICAgdmFyIG5ld1Byb2plY3RGaWxlID0gY3JlYXRlRHVtbXlQcm9qZWN0RmlsZShuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIGFsbFByb2plY3RzLnVuc2hpZnQobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNhdmUgYXMgYW4gaW5kaXZpZHVhbCBmaWxlXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgbmV3UHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShuZXdQcm9qZWN0RmlsZSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgbmV3UHJvamVjdERhdGEuaWQgKyAnX2hpc3RvcnkuanNvbicsIEpTT04uc3RyaW5naWZ5KFtdKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZWRpcmVjdCB1c2VyIHRvIHRoZSBzZXR0aW5ncyBwYWdlXG4gICAgICAgICAgICBkZmQucmVzb2x2ZShuZXdQcm9qZWN0RGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gc2F2ZSB0byBmaWxlIGFuZCBsaXN0cywgcmV0dXJuIGxpc3QgZGF0YVxuICAgIHNhdmU6IGZ1bmN0aW9uKHByb2plY3REYXRhKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICBhbGxQcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gcHJvamVjdERhdGEuaWQpIHtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpdGxlID0gcHJvamVjdERhdGEudGl0bGU7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aW1lc3RhbXAgPSAoK25ldyBEYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHNhdmUgYXMgYW4gaW5kaXZpZHVhbCBmaWxlXG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdERhdGEpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXR1cm4gdGhlIGxpc3RpbmcgZGF0YSwgc28gd2UgY2FuIHVwZGF0ZSB0aGUgc2lkZXBhbmVsXG4gICAgICAgICAgZGZkLnJlc29sdmUocHJvamVjdERhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIFRPRE86IHNob3VsZCByZW1vdmUgaW1hZ2VzIHVwb24gZGVsZXRlP1xuICAgIC8vIFJlbW92ZXMgYSBzaW5nbGUgcHJvamVjdCBieSBJRFxuICAgIHJlbW92ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBpZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9qZWN0IGZpbGVcbiAgICAgIGZzLnVubGluayhwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHByb2plY3QgaGlzdG9yeSBmaWxlXG4gICAgICAgIGZzLnVubGluayhwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnX2hpc3RvcnkuanNvbicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZXR1cm5cbiAgICAgICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlcyBhbGwgc3RvcmVkIGhpc3RvcnkgZm9yIGEgcHJvamVjdFxuICAgICAqL1xuICAgIGNsZWFySGlzdG9yeTogZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgbWFpblByb2plY3RzID0gZ2V0SnNvbkZpbGUocHJvamVjdHNQYXRoLCBbXSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvamVjdCBkYXRhIHRvIHJlZmxlY3Qgbm8gaGlzdG9yeVxuICAgICAgcHJvamVjdC5jdXJyZW50QmF0Y2ggPSBudWxsO1xuICAgICAgcHJvamVjdC5jdXJyZW50UmVmZXJlbmNlID0gbnVsbDtcbiAgICAgIHByb2plY3QuYmF0Y2hIaXN0b3J5ID0ge307XG5cbiAgICAgIC8vIHVwZGF0ZSB0aGUgY3VycmVudCBwcm9qZWN0IHRvIGhhdmUgbm8gYmF0Y2hIaXN0b3J5XG4gICAgICBtYWluUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IHByb2plY3QuaWQpIHtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMuc3VjY2VzcyA9IDA7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLndhcm5pbmcgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy5lcnJvciA9IDA7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLnZpZXdzID0gMDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHJlbW92ZSBhbGwgbG9jYWwgaW1hZ2VzXG4gICAgICB0aGlzLmNsZWFuSW1hZ2VGaWxlcyhwcm9qZWN0KTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0LmlkICsgJ19oaXN0b3J5Lmpzb24nLCBKU09OLnN0cmluZ2lmeShbXSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNhdmUgdGhlIGRhdGEgdG8gdGhlIGlkIHByb2plY3RcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0LmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdCksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRhdGEgb24gdGhlIHByb2plY3RzIGxpc3RcbiAgICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShtYWluUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IHVzZXIgdG8gdGhlIHNldHRpbmdzIHBhZ2VcbiAgICAgICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcGFzcyBpbiBhIHByb2plY3RJZCwgdGhlbiBpdCB3aWxsIHJlYWQgdGhlIHByb2plY3QgYW5kIGl0cyBjdXJyZW50IGJhdGNoIG9mIGZpbGVzIHRvIHVwbG9hZFxuICAgICAqIG9uY2UgY29tcGxldGUsIGl0IHdpbGwgY2xlYW4gb3V0IGFueSBsb2NhbCBzY3JlZW5zIGFuZCByZXBsYWNlIHdpdGggYXdzIHJlc291cmNlc1xuICAgICAqL1xuICAgIHN5bmM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICBpZiAoIWlkKSB7cmV0dXJuO31cblxuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBwcm9qZWN0ID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgIHZhciBwcm9qZWN0RmlsZXMgPSB0aGlzLmdldFR5cGVCeUlkKGlkLCAnaGlzdG9yeScpO1xuICAgICAgdmFyIHJlYWR5RmlsZXMgPSBbXTtcblxuICAgICAgLy8gcHVsbCBvdXQgZmlsZXMgdGhhdCBhcmUgYWxyZWFkeSBpbnNpZGUgYXdzLCBwcmVwIGZvciB1cGxvYWRcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvamVjdEZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0bXBGaWxlID0gcHJvamVjdEZpbGVzW2ldO1xuICAgICAgICBpZiAodG1wRmlsZS5zb3VyY2Uuc2VhcmNoKCdhbWF6b24nKSA9PT0gLTEpIHtcbiAgICAgICAgICB2YXIgc3JjID0gdG1wRmlsZS5zb3VyY2U7XG4gICAgICAgICAgdmFyIHR5cGUgPSB0bXBGaWxlLnR5cGU7XG4gICAgICAgICAgdmFyIHBhdGggPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvJyArIHR5cGUgKyAnLycgKyBwcm9qZWN0LmlkICsgJy8nICsgc3JjO1xuICAgICAgICAgIHJlYWR5RmlsZXMucHVzaCh7IGtleTogdHlwZSArICcvJyArIHNyYywgcGF0aDogcGF0aCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB1cGxvYWQgZmlsZXNcbiAgICAgIEFXUy5pbml0KClcbiAgICAgICAgLnVwbG9hZChyZWFkeUZpbGVzLCBwcm9qZWN0LmlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgIC8vIGRvIHBvc3QtcHJvY2VzcyBhY3Rpb25cbiAgICAgICAgICBfdGhpcy5jbGVhbkFmdGVyU3luYyhwcm9qZWN0LCByZXMpLnRoZW4oZC5yZXNvbHZlLCBkLnJlamVjdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGQucmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjbGVhbiBsb2NhbCBpbWFnZXMsIHVwZGF0ZSBoaXN0b3J5IHdpdGggYXdzIHJlc291cmNlcywgcmV0dXJucyB0aGUgdXBkYXRlc1xuICAgICAqL1xuICAgIGNsZWFuQWZ0ZXJTeW5jOiBmdW5jdGlvbiAocHJvamVjdCwgbmV3UmVmcykge1xuICAgICAgdmFyIGRmZGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGhpc3RvcnlEYXRhID0gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIFtdKTtcbiAgICAgIHZhciB1cGRhdGVkUmVtb3RlRmlsZXMgPSBbXTtcbiAgICAgIHZhciBxdWV1ZVByb21pc2VzID0gW107XG4gICAgICBwcm9qZWN0LnVwZGF0ZWRBdCA9ICgrbmV3IERhdGUoKSk7XG5cbiAgICAgIC8vIGxvb3AgdGhyb3VnaCBuZXcgZmlsZXNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3UmVmcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wU3JjID0gbmV3UmVmc1tpXTtcbiAgICAgICAgdmFyIHRtcFJlZiA9IHRtcFNyYy5zcGxpdCgnLycpO1xuICAgICAgICB2YXIgdG1wVHlwZSA9IHRtcFJlZlt0bXBSZWYubGVuZ3RoIC0gMl07XG4gICAgICAgIHZhciB0bXBBbGlhcyA9IHRtcFJlZlt0bXBSZWYubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgaGlzdG9yeURhdGEubWFwKGZ1bmN0aW9uKGl0ZW0sIGlkeCkge1xuXG4gICAgICAgICAgLy8gdXBkYXRlIGhpc3RvcnkgcmVmXG4gICAgICAgICAgaWYgKGl0ZW0uc291cmNlID09PSB0bXBBbGlhcykge1xuICAgICAgICAgICAgZGVsZXRlIGhpc3RvcnlEYXRhW2lkeF0uc291cmNlO1xuICAgICAgICAgICAgaGlzdG9yeURhdGFbaWR4XS5yZW1vdGVTb3VyY2UgPSBuZXdSZWZzW2ldO1xuXG4gICAgICAgICAgICB2YXIgcmVtUmVmUGF0aCA9IF9fZGlybmFtZSArICcvc2NyZWVucy8nICsgdG1wVHlwZSArICcvJyArIHByb2plY3QuaWQgKyAnLycgKyB0bXBBbGlhcztcbiAgICAgICAgICAgIHZhciByZW1SZWYgPSBwcm9taXNlUmVtb3ZlKHJlbVJlZlBhdGgpO1xuICAgICAgICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHJlbVJlZik7XG5cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIGRpZmYgYWxzb1xuICAgICAgICAgICAgaWYgKHRtcFR5cGUgPT09ICdjb21wYXJlJykge1xuICAgICAgICAgICAgICB2YXIgcmVtUmVmRGlmZiA9IHByb21pc2VSZW1vdmUocmVtUmVmUGF0aC5yZXBsYWNlKCcuJywgJ19kaWZmLicpKTtcbiAgICAgICAgICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHJlbVJlZkRpZmYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNhdmUgaGlzdG9yeSAmIHByb2plY3RcbiAgICAgIHZhciBwcm9qZWN0RmlsZSA9IF9fZGlybmFtZSArICcvcHJvamVjdHMvJyArIHByb2plY3QuaWQgKyAnLmpzb24nO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5RmlsZSA9IHByb2plY3RGaWxlLnJlcGxhY2UoJy5qc29uJywgJ19oaXN0b3J5Lmpzb24nKTtcbiAgICAgIHZhciBwcm9qZWN0V3JpdGUgPSBwcm9taXNlV3JpdGUocHJvamVjdEZpbGUsIHByb2plY3QpO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5V3JpdGUgPSBwcm9taXNlV3JpdGUocHJvamVjdEhpc3RvcnlGaWxlLCBoaXN0b3J5RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnVuc2hpZnQocHJvamVjdFdyaXRlKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMudW5zaGlmdChwcm9qZWN0SGlzdG9yeVdyaXRlKTtcblxuICAgICAgLy8gYWRkIHByb2plY3QgZmlsZXMgdG8gdGhlIHVwbG9hZCByZWFkaW5lc3NcbiAgICAgIHVwZGF0ZWRSZW1vdGVGaWxlcy5wdXNoKHsga2V5OiBwcm9qZWN0LmlkLCBwYXRoOiBwcm9qZWN0RmlsZSB9KTtcbiAgICAgIHVwZGF0ZWRSZW1vdGVGaWxlcy5wdXNoKHsga2V5OiBwcm9qZWN0LmlkICsgJ19oaXN0b3J5JywgcGF0aDogcHJvamVjdEhpc3RvcnlGaWxlIH0pO1xuXG4gICAgICAvLyB1cGxvYWQgdXBkYXRlZCBoaXN0b3J5ICYgcHJvamVjdFxuICAgICAgdmFyIGF3c1VwbG9hZCA9IEFXUy5pbml0KCkudXBsb2FkKHVwZGF0ZWRSZW1vdGVGaWxlcywgcHJvamVjdC5pZCk7XG4gICAgICBxdWV1ZVByb21pc2VzLnVuc2hpZnQoYXdzVXBsb2FkKTtcblxuICAgICAgLy8gZG8gYWxsIHByb21pc2Ugb3BlcmF0aW9uc1xuICAgICAgJHEuYWxsKHF1ZXVlUHJvbWlzZXMpLnRoZW4oZGZkZC5yZXNvbHZlLCBkZmRkLnJlamVjdCk7XG5cbiAgICAgIHJldHVybiBkZmRkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNsZWFuIGxvY2FsIGltYWdlcywgdXBkYXRlIGhpc3Rvcnkgd2l0aCBhd3MgcmVzb3VyY2VzLCByZXR1cm5zIHRoZSB1cGRhdGVzXG4gICAgICovXG4gICAgY2xlYW5JbWFnZUZpbGVzOiBmdW5jdGlvbiAocHJvamVjdCkge1xuICAgICAgdmFyIGJhc2UgPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvQkFTRS8nICsgcHJvamVjdC5pZDtcbiAgICAgIHZhciBjb21wcyA9IGJhc2UucmVwbGFjZSgnQkFTRScsICdjb21wYXJlJyk7XG4gICAgICB2YXIgcmVmcyA9IGJhc2UucmVwbGFjZSgnQkFTRScsICdyZWZlcmVuY2UnKTtcblxuICAgICAgcmVtb3ZlQWxsSW5EaXJlY3RvcnkoY29tcHMpO1xuICAgICAgcmVtb3ZlQWxsSW5EaXJlY3RvcnkocmVmcyk7XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJNVUcuZmlsdGVyKCd0aW1lQWdvJyxcblsnbm93VGltZScsICd0aW1lQWdvJyxcbmZ1bmN0aW9uIChub3dUaW1lLCB0aW1lQWdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZnJvbVRpbWUgPSB0aW1lQWdvLnBhcnNlKHZhbHVlKTtcbiAgICB2YXIgZGlmZiA9IG5vd1RpbWUuZ2V0VGltZSgpIC0gZnJvbVRpbWU7XG4gICAgcmV0dXJuIHRpbWVBZ28uaW5Xb3JkcyhkaWZmKTtcbiAgfTtcbn1dKTtcbiIsInZhciBpcGMgPSByZXF1aXJlKCdpcGMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ01haW5DdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ0NvbmZpZycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgQ29uZmlnLCBQcm9qZWN0cykge1xuICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSAnJztcblxuICAkc2NvcGUuY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIFByb2plY3RzLmNyZWF0ZU5ldygpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgcmVzKTtcbiAgICAgICRzdGF0ZS5nbygncHJvamVjdHMuc2V0dGluZ3MnLCB7IGlkOiByZXMuaWQgfSk7XG4gICAgfSxcblxuICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgaXBjLm9uKCdOQVZJR0FURTpUTycsIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubG9jYXRpb24pIHtyZXR1cm47fVxuXG4gICAgY29uc29sZS5sb2coJ05BVklHQVRFOlRPJywgYXJncyk7XG4gICAgJHN0YXRlLmdvKGFyZ3MubG9jYXRpb24pO1xuICB9KTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBBV1MgPSByZXF1aXJlKCcuL3ZlbmRvci9jb3JlL2F3cycpO1xuXG5NVUcuY29udHJvbGxlcignUHJlZmVyZW5jZXNDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlKSB7XG4gICRzY29wZS5hd3NDb25maWcgPSB7XG4gICAgYnVja2V0OiAnJyxcbiAgICBhY2Nlc3NLZXlJZDogJycsXG4gICAgc2VjcmV0QWNjZXNzS2V5OiAnJ1xuICB9O1xuXG4gIC8vIGdyYWIgc2V0dGluZ3MgcmVhbCBxdWlja1xuICAkc2NvcGUuYXdzQ29uZmlnID0gQVdTLmdldENvbmZpZygpO1xuXG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gc2F2ZSB0aGUgQVdTIGNvbmZpZ1xuICAgIEFXUy5zZXRDb25maWcoJHNjb3BlLmF3c0NvbmZpZyk7XG4gIH07XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcblxuICAvLyBBbGxvdyB0aGUgY2hpbGQgdmlld3MgdG8gYmluZCB0byBzYW1lIHNjb3BlXG4gICRyb290U2NvcGUucHJvamVjdCA9IFByb2plY3RzLmdldEJ5SWQoJHN0YXRlUGFyYW1zLmlkKTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RIaXN0b3J5Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICdBbGwnO1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAnJztcblxuICAvLyBncmFiIGFsbCB0aGUgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5oaXN0b3J5SXRlbXMgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAodHlwZSA9PSAnQWxsJykgPyAnJyA6IHR5cGU7XG4gIH07XG5cbiAgJHNjb3BlLnByZXZpZXdJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdwcmV2aWV3JywgaXRlbTogaXRlbSwgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgaXBjID0gcmVxdWlyZSgnaXBjJyk7XG5cbk1VRy5jb250cm9sbGVyKCdQcm9qZWN0UnVubmVyQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR0aW1lb3V0JywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICRzY29wZS5oYXNTZXR0aW5ncyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzUmVmZXJlbmNlID0gZmFsc2U7XG4gICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG4gICRzY29wZS5ydW5uaW5nVHlwZSA9ICdyZWZlcmVuY2UnO1xuICAkc2NvcGUuYmF0Y2hJdGVtcyA9IFtdO1xuICAkc2NvcGUuYWN0aXZlRGF0YSA9IHt9O1xuICAkc2NvcGUuY3VycmVudEJhdGNoID0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCB8fCAwO1xuICAkc2NvcGUucHJvZ3Jlc3MgPSB7XG4gICAgcGVyY2VudDogMCxcbiAgICB0aXRsZTogJ1N0YXJ0aW5nJ1xuICB9O1xuXG4gIC8vIFB1dHMgZGF0YSBpbnRvIHNvcnRlZCBzZWN0aW9uc1xuICBmdW5jdGlvbiBwcm9jZXNzQmF0Y2goYWxsRGF0YSkge1xuICAgIGlmICghYWxsRGF0YSB8fCBhbGxEYXRhLmxlbmd0aCA8IDEpIHtcbiAgICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyByZXNldCBqdXN0IHRoZSBzdGF0c1xuICAgICRzY29wZS5hY3RpdmVEYXRhID0ge307XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEuc3VjY2VzcyA9IDA7XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEud2FybmluZyA9IDA7XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEuZXJyb3IgPSAwO1xuICAgIHZhciBmb3JtYXR0ZWQgPSBbeyB0eXBlOiAnc3VjY2VzcycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ3dhcm5pbmcnLCBpdGVtczogW119LCB7IHR5cGU6ICdlcnJvcicsIGl0ZW1zOiBbXX1dO1xuXG4gICAgZnVuY3Rpb24gcGxhY2VJdGVtKGl0ZW0pIHtcblxuICAgICAgLy8gS2VlcCB0aGluZ3Mgb3JnYW5pemVzIHdpdGggcHJlc2V0IHByaW9yaXR5XG4gICAgICBpZiAoaXRlbS5zdGF0dXMpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IDA7XG5cbiAgICAgICAgc3dpdGNoIChpdGVtLnN0YXR1cykge1xuICAgICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICB0YXJnZXQgPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXR0ZWRbdGFyZ2V0XS5pdGVtcy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAkc2NvcGUuYWN0aXZlRGF0YVtmb3JtYXR0ZWRbdGFyZ2V0XS50eXBlXSA9ICRzY29wZS5hY3RpdmVEYXRhW2Zvcm1hdHRlZFt0YXJnZXRdLnR5cGVdICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxEYXRhLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5iYXRjaCA9PT0gJHNjb3BlLmN1cnJlbnRCYXRjaCkge1xuICAgICAgICBwbGFjZUl0ZW0ob2JqKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSB0cnVlO1xuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cEN1cnJlbnRCYXRjaCgpIHtcbiAgICBpZiAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCA9PT0gbnVsbCkge3JldHVybjt9XG5cbiAgICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICAgIHZhciBpZCA9ICh0eXBlb2YgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gdW5kZWZpbmVkKSA/ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggOiAwO1xuICAgIHZhciBoaXN0b3J5RGF0YSA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAgIC8vIFN0b3JlIHRoZSBwcm9jZXNzZWQgZGF0YSBpbnRvIHRoZSBiYXRjaCBkYXRhXG4gICAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuXG4gICAgLy8gc2V0dXAgd2hpY2ggdmlldyB0byBzaG93IGJhc2VkIG9uIGhpc3RvcnlcbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgPj0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCkgPyAncmVmZXJlbmNlJyA6ICdjb21wYXJlJztcbiAgfVxuXG4gIC8vIHZhbGlkYXRpb24gb2YgcHJvamVjdFxuICBmdW5jdGlvbiB2YWxpZGF0ZVByb2plY3QoKSB7XG4gICAgLy8gdmVyaWZ5IGlmIGl0cyB2YWxpZFxuICAgIHZhciBpc1ZhbGlkID0gUHJvamVjdHMudmFsaWRhdGUoJHJvb3RTY29wZS5wcm9qZWN0KTtcblxuICAgIC8vIGFsZXJ0IG9mIGludmFsaWRpdHlcbiAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdQbGVhc2UgZmluaXNoIGNvbmZpZ3VyaW5nIHNldHRpbmdzIScsIGR1cjogNSwgdHlwZTogJ2Vycm9yJywgaWNvbjogJ3N0b3AnIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpc1ZhbGlkO1xuICB9XG5cbiAgLy8gY2hlY2tzIGZvciBjaGFuZ2VzIGFuZCB1cGRhdGVzIFVJIGFjY291cmRpbmdseVxuICBmdW5jdGlvbiBjaGVja1N0YXRlKCkge1xuICAgICRzY29wZS5oYXNTZXR0aW5ncyA9IHZhbGlkYXRlUHJvamVjdCgpO1xuICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgIT09IG51bGwpO1xuICAgICRzY29wZS5jdXJyZW50QmF0Y2ggPSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoO1xuXG4gICAgaWYgKCRzY29wZS5ydW5uaW5nVHlwZSA9PT0gJ3JlZmVyZW5jZScpIHtcbiAgICAgICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5oYXNDb21wYXJlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggIT09IG51bGwgJiYgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gMCk7XG4gICAgICAkc2NvcGUuaGFzQ29tcGFyZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSA8PSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoKTtcbiAgICB9XG4gIH1cblxuICAvLyBncmFiIHRoZSBsYXRlc3QgZGF0YSBmb3IgdGhlIHByb2plY3RcbiAgZnVuY3Rpb24gZ3JhYkxhdGVzdERhdGEoKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkcm9vdFNjb3BlLnByb2plY3QuaWQsICdoaXN0b3J5Jyk7XG5cbiAgICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAgICRzY29wZS5hY3RpdmVEYXRhID0gKCRyb290U2NvcGUucHJvamVjdCAmJiAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5KSA/ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF0gOiBudWxsO1xuXG4gICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsICRyb290U2NvcGUucHJvamVjdCk7XG4gIH1cblxuICBncmFiTGF0ZXN0RGF0YSgpO1xuICBzZXR1cEN1cnJlbnRCYXRjaCgpO1xuICBjaGVja1N0YXRlKCk7XG5cbiAgLy8gRmlyZSBvZmYgdGhlIHZpZXdlclxuICAkc2NvcGUucHJldmlld0JhdGNoID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAnYmF0Y2gnLCBpdGVtczogaXRlbXMsIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxuICAvLyBGaXJlIG9mZiBhIG5ldyB0ZXN0ISFcbiAgJHNjb3BlLm5ld0NvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsaWQgPSB2YWxpZGF0ZVByb2plY3QoKTtcblxuICAgIC8vIHZhbGlkYXRpb24gcGF1c2VcbiAgICBpZiAoIXZhbGlkKSB7cmV0dXJuO31cblxuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdjb21wYXJlJztcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IHRydWU7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHJvb3RTY29wZS4kZW1pdCgnUFJFTE9BREVSOk9OJyk7XG4gICAgfSwgMTApO1xuXG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAnY29tcGFyZScsIHByb2plY3RJZDogJHJvb3RTY29wZS5wcm9qZWN0LmlkIH0pO1xuICB9O1xuXG4gIC8vIHNldHVwIG5ldyByZWZlcmVuY2VcbiAgJHNjb3BlLm5ld1JlZmVyZW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWxpZCA9IHZhbGlkYXRlUHJvamVjdCgpO1xuXG4gICAgLy8gdmFsaWRhdGlvbiBwYXVzZVxuICAgIGlmICghdmFsaWQpIHtyZXR1cm47fVxuXG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdyZWZlcmVuY2UnO1xuICAgICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHJvb3RTY29wZS4kZW1pdCgnUFJFTE9BREVSOk9OJyk7XG4gICAgfSwgMTApO1xuXG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAncmVmZXJlbmNlJywgcHJvamVjdElkOiAkcm9vdFNjb3BlLnByb2plY3QuaWQgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcnVubmVyRXZlbnRzKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubXNnIHx8ICFhcmdzLnBlcmNlbnQpIHtyZXR1cm47fVxuXG4gICAgLy8gV3JpdGUgdGhlIHByb2dyZXNzIHRvIFVJXG4gICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSBwYXJzZUludChhcmdzLnBlcmNlbnQsIDEwKTtcbiAgICAkc2NvcGUucHJvZ3Jlc3MudGl0bGUgPSAoYXJncy5tc2cpID8gYXJncy5tc2cgOiAkc2NvcGUucHJvZ3Jlc3MudGl0bGU7XG5cbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdQUkVMT0FERVI6VVBEQVRFJywgYXJncyk7XG4gIH1cblxuICAvLyBzaWduYWwgVUkgb2YgY2hhbmdlc1xuICBmdW5jdGlvbiBydW5uZXJDb21wbGV0ZSgpIHtcbiAgICBncmFiTGF0ZXN0RGF0YSgpO1xuICAgIHNldHVwQ3VycmVudEJhdGNoKCk7XG4gICAgY2hlY2tTdGF0ZSgpO1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBydW5uZXJGYWlsZWQocmVhc29uKSB7XG4gICAgY29uc29sZS5sb2coJ1JVTk5FUjpGQUlMRUQgcmVhc29uJywgcmVhc29uKTtcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICB9XG5cbiAgaXBjLm9uKCdSVU5ORVI6UFJPR1JFU1MnLCBydW5uZXJFdmVudHMpO1xuICBpcGMub24oJ1JVTk5FUjpDT01QTEVURScsIHJ1bm5lckNvbXBsZXRlKTtcbiAgaXBjLm9uKCdSVU5ORVI6RkFJTEVEJywgcnVubmVyRmFpbGVkKTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RTZXR0aW5nc0N0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gIHZhciBzYXZlVGltZXI7XG5cbiAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLnNlbGVjdG9yVHlwZXMgPSBbJ2NvbnRhaW5lcicsICdoaWRlJywgJ3JlbW92ZSddO1xuICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzQXdzU2V0dGluZ3MgPSBmYWxzZTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcblxuICBmdW5jdGlvbiBhZGROZXdUeXBlKHR5cGUsIGRhdGEpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0ucHVzaChkYXRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQXdzU2V0dGluZ3MoKSB7XG4gICAgLy8gcmVhZCBpZiBhd3Mgc2V0dGluZ3MgYW5kIGlmIHRoZXkgYXJlIGNvcnJlY3RcbiAgICB2YXIgZmlsZSA9IFByb2plY3RzLmdldCgnL2NvbmZpZy9hd3MuanNvbicsIHt9KTtcblxuICAgIGlmICghZmlsZSB8fCAhZmlsZS5idWNrZXQgfHwgIWZpbGUuYWNjZXNzS2V5SWQgfHwgIWZpbGUuc2VjcmV0QWNjZXNzS2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBpbml0aWFsIGF3cyBjcmVkIGNoZWNrXG4gICRzY29wZS5oYXNBd3NTZXR0aW5ncyA9IGNoZWNrQXdzU2V0dGluZ3MoKTtcblxuICAvLyBXYXRjaCBmb3IgY2hhbmdlcywgc28gd2UgY2FuIHNhdmVcbiAgJHNjb3BlLiR3YXRjaCgncHJvamVjdCcsIGZ1bmN0aW9uKG5WLCBvVikge1xuICAgIGlmIChuViAhPSBvVikge1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSB0cnVlO1xuXG4gICAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICAgJHNjb3BlLnNhdmUoKTtcbiAgICB9XG4gIH0sIHRydWUpO1xuXG4gIC8vIFRPRE86IHNldHVwIHZhbGlkYXRpb25zXG4gIC8vIHNhdmUgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzYXZlVGltZXIpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoc2F2ZVRpbWVyKTtcbiAgICB9XG5cbiAgICAvLyB0aHJvdHRsZSB0aGUgc2F2ZXMsIHNpbmNlIHdlIHNhdmUgb24gYW55IGNoYW5nZXNcbiAgICBzYXZlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAvLyBTYXZlIHRlaCBwcm9qZWN0b2lkXG4gICAgICBQcm9qZWN0cy5zYXZlKCRyb290U2NvcGUucHJvamVjdClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzaWRlYmFyIHdpdGggY2hhbmdlc1xuICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpVUERBVEUnLCByZXMpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXZlcnQgbW9kZWxcbiAgICAgICAgICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LCAyMDApO1xuICB9O1xuXG4gIC8vIHN5bmMgdGhpcyBwcm9qZWN0IHRvIEFXU1xuICAkc2NvcGUuc3luY05vdyA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zeW5jaW5nID0gdHJ1ZTtcbiAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBTdGFydGluZycsIGR1cjogNSwgdHlwZTogJ2luZm8nIH0pO1xuXG4gICAgUHJvamVjdHMuc3luYygkcm9vdFNjb3BlLnByb2plY3QuaWQpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgQ29tcGxldGUnLCBkdXI6IDUsIHR5cGU6ICdzdWNjZXNzJywgaWNvbjogJ2NoZWNrJyB9KTtcbiAgICAgIH1cblxuICAgICAgLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgJHNjb3BlLnN5bmNpbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coJ3N5bmNOb3cgZXJyJywgZXJyKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgRmFpbGVkJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcGUnIH0pO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLy8gcmV2ZXJ0IHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLmNhbmNlbFNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciBhbGwgeW91ciBjaGFuZ2VzPycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICAvLyBwdXQgcmV2ZXJ0IG1vZGVsIGludG8gdGhlIHByb2plY3QgbW9kZWxcbiAgICAgIGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGVsZXRlIHRoZSBwcm9qZWN0LCBhbmQgcmVtb3ZlIGZyb20gcHJvamVjdCBsaXN0cywgdGhlbiByZWRpcmVjdCB0byBtYWluXG4gICRzY29wZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdD8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgdmFyIHByb2plY3RJRCA9ICRyb290U2NvcGUucHJvamVjdC5pZDtcblxuICAgICAgUHJvamVjdHMucmVtb3ZlKHByb2plY3RJRClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdQcm9qZWN0IFJlbW92ZWQgU3VjY2Vzc2Z1bGx5JywgZHVyOiA1LCB0eXBlOiAnc3VjY2VzcycgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IHZpZXdwb3J0IGl0ZW1cbiAgJHNjb3BlLmFkZFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1ZpZXdwb3J0ID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3ZpZXdwb3J0cycsIG5ld1ZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IHNlbGVjdG9yIGl0ZW1cbiAgJHNjb3BlLmFkZFNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1NlbGVjdG9yID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgdHlwZTogJ2NvbnRhaW5lcicsXG4gICAgICBxdWVyeTogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdzZWxlY3RvcnMnLCBuZXdTZWxlY3Rvcik7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBjb29raWUgaXRlbVxuICAkc2NvcGUuYWRkQ29va2llID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0Nvb2tpZSA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHBhdGg6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnY29va2llcycsIG5ld0Nvb2tpZSk7XG4gIH07XG5cbiAgLy8gYWN0aXZhdGUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmFjdGl2YXRlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09IHRydWUgfHwgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09ICd0cnVlJykgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5kZWxldGVUeXBlSXRlbSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnNwbGljZShpZCwgMSk7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlcyBhbGwgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5jbGVhckhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICBQcm9qZWN0cy5jbGVhckhpc3RvcnkoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdDbGVhcmVkIEFsbCBIaXN0b3J5IScsIGR1cjogNSwgdHlwZTogJ3N1Y2Nlc3MnLCBpY29uOiAnaGlzdG9yeScgfSk7XG4gICAgICB9XG5cbiAgICAgICwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdFcnJvciBPY2N1cnJlZCEgUGxlYXNlIHRyeSBhZ2Fpbi4nLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wJyB9KTtcbiAgICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuY29udHJvbGxlcignU2lkZVBhbmVsQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2plY3RzID0gW107XG5cbiAgLy8gZ3JhYiBhbGwgcHJvamVjdHMgbGlzdFxuICAkc2NvcGUucHJvamVjdHMgPSBQcm9qZWN0cy5nZXRBbGwoKTtcblxuICAvLyBhZGQgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy51bnNoaWZ0KGFyZ3MpO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50aXRsZSA9IGFyZ3MudGl0bGU7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9IGFyZ3MudGltZXN0YW1wO1xuXG4gICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0pIHtcbiAgICAgICAgICAvLyBvbmx5IHVwZGF0ZSB0b3RhbHMgaWYgd2UgaGF2ZSB0aGVtXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuc3VjY2VzcyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLndhcm5pbmcgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLmVycm9yKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uZXJyb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS52aWV3cykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLnZpZXdzID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnZpZXdzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpSRU1PVkUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gICRzY29wZS5nb1RvUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgLy8gVE9ETzogZml4IHRoaXNcbiAgICAvLyB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG4gICAgdmFyIHR5cGUgPSAncnVubmVyJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMjU1LFxuICAgICAgZ3JlZW46IDAsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ2ZsYXQnLFxuICAgIHRyYW5zcGFyZW5jeTogMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAwXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG4gIC5zdGF0ZSgncHJlZmVyZW5jZXMnLCB7XG4gICAgdXJsOiAnL3ByZWZlcmVuY2VzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3ByZWZlcmVuY2VzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcmVmZXJlbmNlc0N0cmwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG59XSk7XG4iLCJNVUcucnVuKFsnJHJvb3RTY29wZScsICckaHR0cCcsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkaHR0cCkge1xuXG4gIC8vIGhlYWRlcnNcbiAgdmFyICRjb21tb24gPSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbjtcbiAgJGNvbW1vblsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJyRzdGF0ZUNoYW5nZUVycm9yJywgZXJyb3IpO1xuICB9KTtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9