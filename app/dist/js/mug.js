var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,i,c,a){function s(n){var o=+new Date,i=(n.title,n.icon?n.icon:null,e.$new(!0));i.alert={},i.alert.id=o,i.alert.icon=n.icon?n.icon:null,i.alert.type=n.type?n.type:"info",i.alert.title=n.title,i.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var c=r(p)(i);c[0].id=o,m=o,f.append(c),c.addClass(v),t(function(){c.addClass(g)},20),l=t(function(){u(c)},d)}function u(e){if(!e&&m)e=angular.element(document.getElementById(m));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(g),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(i),d=5e3,m="",v="alert-active",g="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(d=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){e.compareItem.a="screens/reference/"+r.project.id+"/"+t.source.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b="screens/compare/"+r.project.id+"/"+t.source,e.compareItem.c="screens/compare/"+r.project.id+"/"+t.source.replace(".png","_diff.png")}var i="modal-open",c="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.compareItem.a="screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(i),setTimeout(function(){t.addClass(c)},30))}),e.close=function(){t.removeClass(c),setTimeout(function(){t.removeClass(i)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=p.replace("BODY",i).replace("ICON",c),g=r(a)(n);g[0].id=o,m=o,f.append(g);var h=f.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},d)}function s(e){if(!e&&m)e=f.find("#"+m);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),d=5e3,m="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(d=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var c=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=i+t[0],n=i+t[1];e&&c.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),c.resolve(a)})}),c.promise}var o=__dirname+"/",i="data:image/png;base64,",c=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?c[1]:c[0]:t>.1&&2>t?c[1]:c[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs"),AWS=require("./vendor/core/aws");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",c=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(c+e+".json")},getTypeById:function(e,t){return o(c+e+"_"+t+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,i=e.meta.url,c=!0;return!r||!n||!o||!i||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(c=!1)}),n&&n.map(function(e,t){e.query&&e.type||(c=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(c=!1)}),c)},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),a=r(o.length),s=n(a);return o.unshift(a),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+"_history.json",JSON.stringify([]),function(e){return e?void t.reject(e):void t.resolve(a)})})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(c+t+".json",function(e){return e?void r.reject(e):void fs.unlink(c+t+"_history.json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},clearHistory:function(t){var r=e.defer(),n=o(i,[]);return t.currentBatch=null,t.currentReference=null,t.batchHistory={},n.map(function(e,r){e.id===t.id&&(n[r].totals.success=0,n[r].totals.warning=0,n[r].totals.error=0,n[r].totals.views=0)}),fs.writeFile(c+t.id+"_history.json",JSON.stringify([]),function(e){return e?void r.reject(e):void fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})})}),r.promise},syncProject:function(e){if(e){var t=this.getById(e),r=this.getTypeById(e,"history"),n=[];console.log("starting sync",e);for(var o=0;o<r.length;o++){var i=r[o];if(-1===i.source.search("amazon")){var c=i.source,a=i.type,s=__dirname+"/screens/"+a+"/"+t.id+"/"+c;n.push({key:a+"/"+c,path:s})}}console.log("readyFiles",n),AWS.init().upload(n,t.id).then(function(e){console.log("AWS:res",e)},function(e){console.log("AWS:err",e)})}}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,p=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,i].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]);var ipc=require("ipc");MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})},ipc.on("NAVIGATE:TO",function(e){e&&e.location&&(console.log("NAVIGATE:TO",e),r.go(e.location))})}]);var fs=require("fs"),AWS=require("./vendor/core/aws");MUG.controller("PreferencesCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.awsConfig={autosync:!0,bucket:"",accessKeyId:"",secretAccessKey:""},t.awsConfig=AWS.getConfig(),t.save=function(){AWS.setConfig(t.awsConfig)},t.syncNow=function(){n.syncProject(e.project.id)}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("ipc");MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,t.hasCompare=n.length>0,n}function c(){if(null!==e.project.currentBatch){var r=(void 0!==typeof e.project.currentBatch?e.project.currentBatch:0,o.getTypeById(n.id,"history"));t.batchItems=i(r)}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,t.currentBatch=e.project.currentBatch,t.hasCompare="reference"===t.runningType?!1:null!==e.project.currentBatch&&0!==e.project.currentBatch}function u(){e.project=o.getById(e.project.id,"history"),t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,e.$emit("SIDEPANEL:UPDATE",e.project)}function l(e){e&&e.msg&&e.percent&&(t.progress.percent=parseInt(e.percent,10),t.progress.title=e.msg?e.msg:t.progress.title)}function p(){u(),s(),c(),t.processing=!1}function f(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"},u(),s(),c(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",l),ipc.on("RUNNER:COMPLETE",p),ipc.on("RUNNER:FAILED",f)}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(r.batchHistory[r.currentBatch].success&&(t.projects[n].totals.success=r.batchHistory[r.currentBatch].success),r.batchHistory[r.currentBatch].warning&&(t.projects[n].totals.warning=r.batchHistory[r.currentBatch].warning),r.batchHistory[r.currentBatch].error&&(t.projects[n].totals.error=r.batchHistory[r.currentBatch].error),r.batchHistory[r.currentBatch].views&&(t.projects[n].totals.views=r.batchHistory[r.currentBatch].views)))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("preferences",{url:"/preferences",templateUrl:"preferences.html",controller:"PreferencesCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcmVmZXJlbmNlc2N0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiY29tcGFyZUl0ZW0iLCJhIiwicHJvamVjdCIsInNvdXJjZSIsImN1cnJlbnRCYXRjaCIsImN1cnJlbnRSZWZlcmVuY2UiLCJiIiwiYyIsIm1vZGFsQWN0aXZlIiwibW9kYWxWaXNpYmxlIiwiY29weSIsImFjdGl2ZU9wdGlvbiIsIm9wYWNpdHlSYW5nZSIsImN1cnJlbnRJbmRleCIsImFjdGl2ZUl0ZW0iLCJ2aWV3ZXIiLCJpdGVtcyIsImFtb3VudCIsImludmVyc2UiLCJwZXJjZW50IiwiJHdhdGNoIiwibnYiLCJvdiIsInRvRml4ZWQiLCJNYXRoIiwicm91bmQiLCJvcHRpb25Nb2RlIiwiYXJncyIsImNsb3NlIiwiaXRlbSIsImxlbmd0aCIsIm1vZGFsQWN0aW9uTmF2IiwibmV4dElkeCIsInRvdGFsIiwiZ29Ub0luZGV4IiwiaWR4IiwibmV3Qm9keSIsIm1zZyIsIm5ld0ljbiIsImRlZmF1bHRJY29uIiwibXNnVGVtcGxhdGUiLCJuZXdNZXNzYWdlIiwibXNnRWwiLCJmaW5kIiwiY2hhbmdlVHlwZSIsImJvZHkiLCJhY3Rpb25FbCIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmcyIsInJlcXVpcmUiLCJhc3luYyIsImZhY3RvcnkiLCIkcSIsIkNvbmZpZyIsInJlYWRBc3luYyIsImZpbGUiLCJyZWFkRmlsZSIsImZpbGVEaXJQcmVmaXgiLCJjb21wYXJlU2luZ2xlIiwiZGZkIiwiZGVmZXIiLCJvdXRwdXQiLCJyZXNlbWJsZSIsIm91dHB1dFNldHRpbmdzIiwiQ29tcGFyZSIsIm1hcCIsImVyciIsInJlc3VsdHMiLCJhRGF0YSIsImltYWdlUHJlZml4IiwiYkRhdGEiLCJyZWplY3QiLCJjb21wYXJlVG8iLCJpZ25vcmVDb2xvcnMiLCJvbkNvbXBsZXRlIiwiZGlmZkRhdGEiLCJyZXBvcnQiLCJzcmMiLCJnZXRJbWFnZURhdGFVcmwiLCJyZXNvbHZlIiwicHJvbWlzZSIsIl9fZGlybmFtZSIsInN0YXR1c1R5cGVzIiwicnVuU2luZ2xlIiwiZ2V0U3RhdHVzIiwibWlzTWF0Y2hWYWx1ZSIsInBhcnNlRmxvYXQiLCJtaXNNYXRjaFBlcmNlbnRhZ2UiLCJpc1NhbWVEaW1lbnNpb25zIiwibm93IiwidXBkYXRlVGltZSIsIkFXUyIsImNyZWF0ZVVVSUQiLCJzIiwiQXJyYXkiLCJqb2luIiwibiIsInJhbmRvbSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZUR1bW15UHJvamVjdCIsInByb2plY3RJZCIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwiYmF0Y2hIaXN0b3J5Iiwidmlld3BvcnRzIiwic2VsZWN0b3JzIiwiY29va2llcyIsIm1ldGEiLCJ1cmwiLCJyZWFkeUV2ZW50IiwiZGVsYXkiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicGF0aCIsInJlYWRGaWxlU3luYyIsImNvZGUiLCJKU09OIiwicHJvamVjdHNQYXRoIiwicHJvamVjdEZpbGVzUGF0aCIsImdldEFsbCIsImdldEJ5SWQiLCJnZXRUeXBlQnlJZCIsInZhbGlkYXRlIiwiYm9vbCIsIm9iaiIsIndpZHRoIiwiaGVpZ2h0IiwibmFtZSIsInF1ZXJ5IiwiY3JlYXRlTmV3IiwiYWxsUHJvamVjdHMiLCJuZXdQcm9qZWN0RGF0YSIsIm5ld1Byb2plY3RGaWxlIiwidW5zaGlmdCIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsInNhdmUiLCJwcm9qZWN0RGF0YSIsInNwbGljZSIsInVubGluayIsImNsZWFySGlzdG9yeSIsIm1haW5Qcm9qZWN0cyIsInN5bmNQcm9qZWN0IiwicHJvamVjdEZpbGVzIiwicmVhZHlGaWxlcyIsImNvbnNvbGUiLCJsb2ciLCJpIiwidG1wRmlsZSIsInNlYXJjaCIsInB1c2giLCJrZXkiLCJpbml0IiwidXBsb2FkIiwidGhlbiIsInJlcyIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiaXBjIiwiY29udHJvbGxlciIsIiRzdGF0ZSIsIlByb2plY3RzIiwiY3VycmVudFByb2plY3RJZCIsImNyZWF0ZU5ld1Byb2plY3QiLCIkYnJvYWRjYXN0IiwiZ28iLCJvbiIsImxvY2F0aW9uIiwiYXdzQ29uZmlnIiwiYXV0b3N5bmMiLCJidWNrZXQiLCJhY2Nlc3NLZXlJZCIsInNlY3JldEFjY2Vzc0tleSIsImdldENvbmZpZyIsInNldENvbmZpZyIsInN5bmNOb3ciLCIkc3RhdGVQYXJhbXMiLCJhY3RpdmVGaWx0ZXIiLCJhY3RpdmVGaWx0ZXJRdWVyeSIsImhpc3RvcnlJdGVtcyIsImNoYW5nZUZpbHRlciIsInByZXZpZXdJdGVtIiwiJGVtaXQiLCJwcm9jZXNzQmF0Y2giLCJhbGxEYXRhIiwicGxhY2VJdGVtIiwic3RhdHVzIiwidGFyZ2V0IiwiZm9ybWF0dGVkIiwiYWN0aXZlRGF0YSIsImhhc1JlZmVyZW5jZSIsImJhdGNoIiwiaGFzQ29tcGFyZSIsInNldHVwQ3VycmVudEJhdGNoIiwiaGlzdG9yeURhdGEiLCJiYXRjaEl0ZW1zIiwidmFsaWRhdGVQcm9qZWN0IiwiaXNWYWxpZCIsImNoZWNrU3RhdGUiLCJoYXNTZXR0aW5ncyIsInJ1bm5pbmdUeXBlIiwiZ3JhYkxhdGVzdERhdGEiLCJydW5uZXJFdmVudHMiLCJwcm9ncmVzcyIsInJ1bm5lckNvbXBsZXRlIiwicHJvY2Vzc2luZyIsInJ1bm5lckZhaWxlZCIsInJlYXNvbiIsInByZXZpZXdCYXRjaCIsIm5ld0NvbXBhcmUiLCJ2YWxpZCIsInNlbmQiLCJuZXdSZWZlcmVuY2UiLCJhZGROZXdUeXBlIiwic2F2ZVRpbWVyIiwic2VsZWN0b3JUeXBlcyIsImhhc0NoYW5nZXMiLCJtYXN0ZXIiLCJuViIsIm9WIiwiY2FuY2VsU2F2ZSIsInN1cmUiLCJjb25maXJtIiwiZGVsZXRlUHJvamVjdCIsInByb2plY3RJRCIsImFkZFZpZXdwb3J0IiwibmV3Vmlld3BvcnQiLCJhY3RpdmUiLCJhZGRTZWxlY3RvciIsIm5ld1NlbGVjdG9yIiwiYWRkQ29va2llIiwibmV3Q29va2llIiwiYWN0aXZhdGVUeXBlIiwiZGVsZXRlVHlwZUl0ZW0iLCJwcm9qZWN0cyIsImdvVG9Qcm9qZWN0IiwiY29uc3RhbnQiLCJFTlYiLCJTVEFHRSIsIlBST0QiLCJlcnJvckNvbG9yIiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiZXJyb3JUeXBlIiwidHJhbnNwYXJlbmN5IiwibGFyZ2VJbWFnZVRocmVzaG9sZCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJvdGhlcndpc2UiLCJydW4iLCIkaHR0cCIsIiRjb21tb24iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiXSwibWFwcGluZ3MiOiJB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QUEsb0JBTUEyRixNQUFBLFlBQ0ExTCxJQUFBLGdCQUNBaEksWUFBQSxnQkFDQStOLFdBQUEsZ0JBRUEyRixNQUFBLHFCQUNBMUwsSUFBQSxZQUNBaEksWUFBQSx5QkFDQStOLFdBQUEsd0JBRUEyRixNQUFBLG1CQUNBMUwsSUFBQSxVQUNBaEksWUFBQSx1QkFDQStOLFdBQUEsc0JBRUEyRixNQUFBLG9CQUNBMUwsSUFBQSxXQUNBaEksWUFBQSx3QkFDQStOLFdBQUEsdUJBc0JBMEYsRUFBQUUsVUFBQSxRQ3JFQXJYLElBQUFzWCxLQUFBLGFBQUEsUUFDQSxTQUFBbFgsRUFBQW1YLEdBR0EsR0FBQUMsR0FBQUQsRUFBQUUsU0FBQUMsUUFBQUMsTUFDQUgsR0FBQSxnQkFBQSxtQkFFQXBYLEVBQUE0QyxJQUFBLG9CQUFBLFNBQUE0VSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBL00sR0FDQThDLFFBQUFDLElBQUEsb0JBQUEvQyIsImZpbGUiOiJtdWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTVVHID0gYW5ndWxhci5tb2R1bGUoJ211Z3Nob3QnLCBbJ3VpLnJvdXRlcicsICdtdWd0ZW1wbGF0ZXMnXSk7XG4iLCIvKipcbiAqIGFsZXJ0XG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIGFsZXJ0cyBhbmQgbm90aWNlcyBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogPGFsZXJ0PjwvYWxlcnQ+XG4gKlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBpbmZvLCBzdWNjZXNzLCB3YXJuaW5nLCBlcnJvclxuICpcbiAqIE9QVElPTlM6XG4gKiAtIHRpdGxlOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlLCBpbiBzZWNvbmRzXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBubyBkZWZhdWx0LCBzZWUgaHR0cHM6Ly9vY3RpY29ucy5naXRodWIuY29tLyBmb3Igb3B0aW9uc1xuICovXG5NVUcuZGlyZWN0aXZlKCdhbGVydCcsXG5bJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnJHRlbXBsYXRlQ2FjaGUnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsICRjb21waWxlLCAkdGVtcGxhdGVDYWNoZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJhbGVydC1wYXJlbnRcIj48L2Rpdj4nLFxuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XG4gICAgICB2YXIgYWxlcnRUZW1wbGF0ZSA9ICR0ZW1wbGF0ZUNhY2hlLmdldCgnYWxlcnQuaHRtbCcpO1xuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSAnJztcbiAgICAgIHZhciBhbGVydEFjdGl2ZSA9ICdhbGVydC1hY3RpdmUnO1xuICAgICAgdmFyIGFsZXJ0VmlzaWJsZSA9ICdhbGVydC12aXNpYmxlJztcblxuICAgICAgZnVuY3Rpb24gc2hvd01lc3NhZ2UoZGF0YSkge1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLnRpdGxlO1xuICAgICAgICB2YXIgbmV3SWNuID0gKGRhdGEuaWNvbikgPyBkYXRhLmljb24gOiBudWxsO1xuICAgICAgICB2YXIgJHRtcFNjb3BlID0gJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuXG4gICAgICAgIC8vIHNldHVwIHNpbXBsZSBzY29wZSBmb3Igb25seSB0aGlzIGFsZXJ0IGl0ZW1cbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0ID0ge307XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5pZCA9IF9pZDtcbiAgICAgICAgJHRtcFNjb3BlLmFsZXJ0Lmljb24gPSAoZGF0YS5pY29uKSA/IGRhdGEuaWNvbiA6IG51bGw7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50eXBlID0gKGRhdGEudHlwZSkgPyBkYXRhLnR5cGUgOiAnaW5mbyc7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC50aXRsZSA9IGRhdGEudGl0bGU7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5hY3Rpb24gPSAoIWRhdGEuY2FsbGJhY2spID8gbnVsbCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBhY3Rpb25FbCA9IHRoaXMuaWQ7XG4gICAgICAgICAgZGF0YS5jYWxsYmFjaygpO1xuICAgICAgICAgIGNsZWFyRWwodGhpcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGFsZXJ0RWwgPSAkY29tcGlsZShhbGVydFRlbXBsYXRlKSgkdG1wU2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBhbGVydEVsWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZChhbGVydEVsKTtcbiAgICAgICAgYWxlcnRFbC5hZGRDbGFzcyhhbGVydEFjdGl2ZSk7XG5cbiAgICAgICAgLy8gc2hvd1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBhbGVydEVsLmFkZENsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgIH0sIDIwKTtcblxuICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNsZWFyRWwoYWxlcnRFbCk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbChlbGVtKSB7XG4gICAgICAgIGlmICghZWxlbSAmJiBwcmV2aW91c0lkKSB7XG4gICAgICAgICAgZWxlbSA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmV2aW91c0lkKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVsZW0pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbSkge1xuICAgICAgICAgIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZWxlbSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKGFsZXJ0VmlzaWJsZSk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdBTEVSVDpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEudGl0bGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZiAoZGF0YS5kdXIpIHtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBmYWRlSW5cbiAqIEEgZGlyZWN0aXZlIGZvciBhbmltYXRpbmcgaW4gZWxlbWVudHNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnZmFkZUluJywgWyBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KGF0dHJzLmZhZGVJbikgfHwgMTA7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdmYWRlLWluJyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVsZW0uY3NzKFwib3BhY2l0eVwiLCBcIjFcIik7XG4gICAgICAgICAgICB9LCBvZmZzZXQpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogTW9kYWxcbiAqIEJ1aWxkcyBhIG1vZGFsIGZvciBpbWFnZSB2aWV3aW5nIGFuZCBjb21wYXJpbmdcbiAqXG4gKiBAdXNhZ2VcbiAqIDxtb2RhbD48L21vZGFsPlxuICovXG5NVUcuZGlyZWN0aXZlKCdtb2RhbCcsXG5bJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLFxuZnVuY3Rpb24oJHRpbWVvdXQsICRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgbW9kYWxBY3RpdmUgPSAnbW9kYWwtb3Blbic7XG4gICAgICB2YXIgbW9kYWxWaXNpYmxlID0gJ21vZGFsLXZpc2libGUnO1xuXG4gICAgICAkc2NvcGUucHJvamVjdCA9IGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9ICdzaWRlcyc7XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge307XG4gICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICRzY29wZS5hY3RpdmVJdGVtID0ge307XG4gICAgICAkc2NvcGUuY29tcGFyZUl0ZW0gPSB7XG4gICAgICAgIGE6ICcnLFxuICAgICAgICBiOiAnJyxcbiAgICAgICAgYzogJydcbiAgICAgIH07XG4gICAgICAkc2NvcGUudmlld2VyID0ge1xuICAgICAgICBpdGVtczogW11cbiAgICAgIH07XG4gICAgICAkc2NvcGUub3BhY2l0eVJhbmdlID0ge1xuICAgICAgICBhbW91bnQ6IDAuOCxcbiAgICAgICAgaW52ZXJzZTogMC4yLFxuICAgICAgICBwZXJjZW50OiAnODAlJ1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLiR3YXRjaCgnb3BhY2l0eVJhbmdlLmFtb3VudCcsIGZ1bmN0aW9uKG52LCBvdikge1xuICAgICAgICBpZiAobnYgPT09IG92KSB7cmV0dXJuO31cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIG90aGVyIHZhbHVlc1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLmludmVyc2UgPSAoMSAtIG52KS50b0ZpeGVkKDIpO1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLnBlcmNlbnQgPSBNYXRoLnJvdW5kKG52ICogMTAwKSArICclJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzZXQgdGhlIGFjdGl2ZSBpdGVtIHdpdGggY29ycmVjdCBwYXRoc1xuICAgICAgZnVuY3Rpb24gc2V0QWN0aXZlSXRlbShkYXRhKSB7XG4gICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5hID0gJ3NjcmVlbnMvcmVmZXJlbmNlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBkYXRhLnNvdXJjZS5yZXBsYWNlKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggKyAnLnBuZycsICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50UmVmZXJlbmNlICsgJy5wbmcnKTtcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmIgPSAnc2NyZWVucy9jb21wYXJlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBkYXRhLnNvdXJjZTtcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmMgPSAnc2NyZWVucy9jb21wYXJlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBkYXRhLnNvdXJjZS5yZXBsYWNlKCcucG5nJywgJ19kaWZmLnBuZycpO1xuICAgICAgfVxuXG4gICAgICAvLyBDaG9vc2UgdGhlIHZpZXdlciBsYXlvdXRcbiAgICAgICRzY29wZS5vcHRpb25Nb2RlID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAkc2NvcGUuYWN0aXZlT3B0aW9uID0gdHlwZTtcbiAgICAgIH07XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNT0RBTDpDTE9TRScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgJHNjb3BlLmNsb3NlKCk7XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOk9QRU4nLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgICAgIGlmICghYXJncyB8fCAhYXJncy50eXBlKSB7IHJldHVybjsgfVxuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byByZXNldCBjdXJyZW50IEluZGV4XG4gICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgICAkc2NvcGUucHJvamVjdCA9IGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QpO1xuXG4gICAgICAgIC8vIFNob3cgYSBzaW5nbGUgaXRlbVxuICAgICAgICBpZiAoYXJncy50eXBlID09PSAncHJldmlldycpIHtcbiAgICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IGFyZ3MuaXRlbTtcbiAgICAgICAgICAkc2NvcGUudmlld2VyID0gYXJncy5wcm9qZWN0IHx8IHt9O1xuICAgICAgICAgICRzY29wZS52aWV3ZXIuaXRlbXMgPSBudWxsO1xuICAgICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5hID0gJ3NjcmVlbnMvJyArICRzY29wZS5hY3RpdmVJdGVtLnR5cGUgKyAnLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyAkc2NvcGUuYWN0aXZlSXRlbS5zb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IG11bHRpcGxlIGl0ZW1zXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdiYXRjaCcgJiYgYXJncy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW1zWyRzY29wZS5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IGFyZ3MuaXRlbXM7XG4gICAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG4gICAgICAgIHNldEFjdGl2ZUl0ZW0oJHNjb3BlLmFjdGl2ZUl0ZW0pO1xuICAgICAgfTtcblxuICAgICAgLy8gR28gZGlyZWN0bHkgdG8gYW4gaXRlbVxuICAgICAgJHNjb3BlLmdvVG9JbmRleCA9IGZ1bmN0aW9uKGlkeCkge1xuICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gaWR4KSB7cmV0dXJuO31cblxuICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9ICRzY29wZS52aWV3ZXIuaXRlbXNbaWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGlkeDtcbiAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICB9O1xuXG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBtc2dDZW50ZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgbWVzc2FnZSByZWxheSBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdNU0dDRU5URVI6RklSRScsIHsgbXNnOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIERFRkFVTFQsIHNob3dzIGdyZWVuIG1lc3NhZ2UsIHVzZWQgZm9yIHN1Y2Nlc3NcbiAqIC0gV2FybmluZzogXCJ3YXJuXCIgLSBzaG93cyBvcmFuZ2UgbWVzc2FnZSwgdXNlZCBmb3IgZXJyb3JzIG9yIHdhcm5pbmdzXG4gKiAtIEluZm86IFwiaW5mb1wiIC0gc2hvd3MgZGFyayBibHVlIG1lc3NhZ2UsIHVzZWQgZm9yIGdlbmVyYWwgdGhpbmdzXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gbXNnOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBkZWZhdWx0IGlzIGdsb2JlLCBjYW4gYmUgc2V0IHRvIEFOWSBpLXNwcml0ZXMgKHNwcml0ZXMubGVzcylcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbXNnQ2VudGVyJyxcblsgXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkY29tcGlsZVwiLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIG1zZ1RlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtc2dcIiBuZy1jbGljaz1cImFjdGlvbigpXCI+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1pY25cIj48aSBjbGFzcz1cIml3IGktSUNPTlwiPjwvaT48L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWNvbnRcIj5CT0RZPC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1hY3Rpb25cIj48aSBjbGFzcz1cImliIGktci1hcnJvd1wiPjwvaT48L2Rpdj4nK1xuICAgICAgICAnPC9kaXY+JztcblxuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSBcIlwiO1xuICAgICAgdmFyIGRlZmF1bHRJY29uID0gXCJpbmZvXCI7XG5cbiAgICAgIHNjb3BlLmJvZHkgPSBcIlwiO1xuICAgICAgc2NvcGUuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgc2NvcGUuaWNvbiA9IGRlZmF1bHRJY29uO1xuICAgICAgc2NvcGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFjdGlvbkVsID0gX2VsLmZpbmQoXCIjXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgc2NvcGUuY2FsbGJhY2soKTtcbiAgICAgICAgY2xlYXJFbCggYWN0aW9uRWwgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlICggZGF0YSApe1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLm1zZztcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pPyBkYXRhLmljb24gOiBkZWZhdWx0SWNvbjtcblxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBtc2dUZW1wbGF0ZS5yZXBsYWNlKFwiQk9EWVwiLCBuZXdCb2R5KS5yZXBsYWNlKFwiSUNPTlwiLCBuZXdJY24pO1xuICAgICAgICB2YXIgbmV3TWVzc2FnZSA9ICRjb21waWxlKHRlbXBsYXRlKShzY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIG5ld01lc3NhZ2VbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKCBuZXdNZXNzYWdlICk7XG5cbiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIG5ldyBlbCBmb3IgbGF0ZXJcbiAgICAgICAgdmFyIG1zZ0VsID0gX2VsLmZpbmQoXCIjXCIgKyBfaWQpO1xuICAgICAgICBjaGFuZ2VUeXBlKCBtc2dFbCwgZGF0YS50eXBlICk7XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgbXNnRWwuZmluZChcIi5tc2ctYWN0aW9uXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbXNnRWwuYWRkQ2xhc3MoJ2FkZCcpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsZWFyRWwoIG1zZ0VsICk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbCAoIGVsZW0gKSB7XG4gICAgICAgIGlmKCFlbGVtICYmIHByZXZpb3VzSWQpe1xuICAgICAgICAgIGVsZW0gPSBfZWwuZmluZChcIiNcIiArIHByZXZpb3VzSWQpO1xuICAgICAgICB9IGVsc2UgaWYoIWVsZW0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnYWRkJyk7XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHRoZSB0eXBlIGJ5IGEgY2xhc3NcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVR5cGUgKCBlbGVtLCB0eXBlICkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctaW5mbycpO1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctd2FybicpO1xuXG4gICAgICAgIGlmKHR5cGUpe1xuICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21zZy0nICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01TR0NFTlRFUjpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLm1zZyl7IHJldHVybjsgfVxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmKGRhdGEuZHVyKXtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIHNjb3BlLmNhbGxiYWNrID0gZGF0YS5jYWxsYmFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKCBkYXRhICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgndGltZUFnbycsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlcnZpY2UgPSB7fTtcblxuICBzZXJ2aWNlLnNldHRpbmdzID0ge1xuICAgIHJlZnJlc2hNaWxsaXM6IDYwMDAwLFxuICAgIGFsbG93RnV0dXJlOiBmYWxzZSxcbiAgICBzdHJpbmdzOiB7XG4gICAgICBwcmVmaXhBZ286IG51bGwsXG4gICAgICBwcmVmaXhGcm9tTm93OiBudWxsLFxuICAgICAgc3VmZml4QWdvOiAnYWdvJyxcbiAgICAgIHN1ZmZpeEZyb21Ob3c6ICdmcm9tIG5vdycsXG4gICAgICBzZWNvbmRzOiAnbGVzcyB0aGFuIGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZTogJ2Fib3V0IGEgbWludXRlJyxcbiAgICAgIG1pbnV0ZXM6ICclZCBtaW51dGVzJyxcbiAgICAgIGhvdXI6ICdhYm91dCBhbiBob3VyJyxcbiAgICAgIGhvdXJzOiAnJWQgaG91cnMnLFxuICAgICAgZGF5OiAnYSBkYXknLFxuICAgICAgZGF5czogJyVkIGRheXMnLFxuICAgICAgbW9udGg6ICdhYm91dCBhIG1vbnRoJyxcbiAgICAgIG1vbnRoczogJyVkIG1vbnRocycsXG4gICAgICB5ZWFyOiAnYWJvdXQgYSB5ZWFyJyxcbiAgICAgIHllYXJzOiAnJWQgeWVhcnMnLFxuICAgICAgbnVtYmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdHJpbURpZ2l0cyAoIG51bSApIHtcbiAgICAgIHZhciBtID0gbnVtLnRvU3RyaW5nKCkuc2xpY2UoMCwxMyk7XG4gICAgICByZXR1cm4gKG0ubGVuZ3RoID09IDEzKT8gcGFyc2VJbnQobSkgOiBudW07XG4gIH1cblxuICBzZXJ2aWNlLmluV29yZHMgPSBmdW5jdGlvbiAoZGlzdGFuY2VNaWxsaXMpIHtcbiAgICB2YXIgJGwgPSBzZXJ2aWNlLnNldHRpbmdzLnN0cmluZ3M7XG4gICAgdmFyIHByZWZpeCA9ICRsLnByZWZpeEFnbztcbiAgICB2YXIgc3VmZml4ID0gJGwuc3VmZml4QWdvO1xuICAgIGlmIChzZXJ2aWNlLnNldHRpbmdzLmFsbG93RnV0dXJlKSB7XG4gICAgICBpZiAoZGlzdGFuY2VNaWxsaXMgPCAwKSB7XG4gICAgICAgIHByZWZpeCA9ICRsLnByZWZpeEZyb21Ob3c7XG4gICAgICAgIHN1ZmZpeCA9ICRsLnN1ZmZpeEZyb21Ob3c7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBNYXRoLmFicyhkaXN0YW5jZU1pbGxpcykgLyAxMDAwO1xuICAgIHZhciBtaW51dGVzID0gc2Vjb25kcyAvIDYwO1xuICAgIHZhciBob3VycyA9IG1pbnV0ZXMgLyA2MDtcbiAgICB2YXIgZGF5cyA9IGhvdXJzIC8gMjQ7XG4gICAgdmFyIHllYXJzID0gZGF5cyAvIDM2NTtcblxuICAgIGZ1bmN0aW9uIHN1YnN0aXR1dGUoc3RyaW5nT3JGdW5jdGlvbiwgbnVtYmVyKSB7XG4gICAgICB2YXIgc3RyaW5nID0gYW5ndWxhci5pc0Z1bmN0aW9uKHN0cmluZ09yRnVuY3Rpb24pID9cbiAgICAgIHN0cmluZ09yRnVuY3Rpb24obnVtYmVyLCBkaXN0YW5jZU1pbGxpcykgOiBzdHJpbmdPckZ1bmN0aW9uO1xuICAgICAgdmFyIHZhbHVlID0gKCRsLm51bWJlcnMgJiYgJGwubnVtYmVyc1tudW1iZXJdKSB8fCBudW1iZXI7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyVkL2ksIHZhbHVlKTtcbiAgICB9XG5cbiAgICB2YXIgd29yZHMgPSBzZWNvbmRzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5zZWNvbmRzLCBNYXRoLnJvdW5kKHNlY29uZHMpKSB8fFxuICAgICAgICBzZWNvbmRzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGUsIDEpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1pbnV0ZXMsIE1hdGgucm91bmQobWludXRlcykpIHx8XG4gICAgICAgIG1pbnV0ZXMgPCA5MCAmJiBzdWJzdGl0dXRlKCRsLmhvdXIsIDEpIHx8XG4gICAgICAgIGhvdXJzIDwgMjQgJiYgc3Vic3RpdHV0ZSgkbC5ob3VycywgTWF0aC5yb3VuZChob3VycykpIHx8XG4gICAgICAgIGhvdXJzIDwgNDIgJiYgc3Vic3RpdHV0ZSgkbC5kYXksIDEpIHx8XG4gICAgICAgIGRheXMgPCAzMCAmJiBzdWJzdGl0dXRlKCRsLmRheXMsIE1hdGgucm91bmQoZGF5cykpIHx8XG4gICAgICAgIGRheXMgPCA0NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRoLCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzY1ICYmIHN1YnN0aXR1dGUoJGwubW9udGhzLCBNYXRoLnJvdW5kKGRheXMgLyAzMCkpIHx8XG4gICAgICAgIHllYXJzIDwgMS41ICYmIHN1YnN0aXR1dGUoJGwueWVhciwgMSkgfHxcbiAgICAgICAgc3Vic3RpdHV0ZSgkbC55ZWFycywgTWF0aC5yb3VuZCh5ZWFycykpO1xuXG4gICAgdmFyIHNlcGFyYXRvciA9ICRsLndvcmRTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCA/ICcgJyA6ICRsLndvcmRTZXBhcmF0b3I7XG4gICAgcmV0dXJuIFtwcmVmaXgsIHdvcmRzLCBzdWZmaXhdLmpvaW4oc2VwYXJhdG9yKS50cmltKCk7XG4gIH07XG5cbiAgc2VydmljZS5wYXJzZSA9IGZ1bmN0aW9uIChpc284NjAxKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNOdW1iZXIoaXNvODYwMSkpIHtcbiAgICAgIGlzbzg2MDEgPSBpc284NjAxICsgXCJcIjtcbiAgICAgIC8vIGZvcm1hdCBmb3IgY29ycmVjdCBsZW5ndGhcbiAgICAgIHZhciBvcmlnaW5hbFRpbWVzdGFtcCA9IHRyaW1EaWdpdHMoIGlzbzg2MDEgKTtcbiAgICAgIHJldHVybiBwYXJzZUludChvcmlnaW5hbFRpbWVzdGFtcCwgMTApO1xuICAgIH1cbiAgICB2YXIgcyA9IChpc284NjAxIHx8ICcnKS50cmltKCk7XG4gICAgcyA9IHMucmVwbGFjZSgvXFwuXFxkKy8sICcnKTsgLy8gcmVtb3ZlIG1pbGxpc2Vjb25kc1xuICAgIHMgPSBzLnJlcGxhY2UoLy0vLCAnLycpLnJlcGxhY2UoLy0vLCAnLycpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1QvLCAnICcpLnJlcGxhY2UoL1ovLCAnIFVUQycpO1xuICAgIHMgPSBzLnJlcGxhY2UoLyhbXFwrXFwtXVxcZFxcZClcXDo/KFxcZFxcZCkvLCAnICQxJDInKTsgLy8gLTA0OjAwIC0+IC0wNDAwXG4gICAgcmV0dXJuIG5ldyBEYXRlKHMpO1xuICB9O1xuXG4gIHJldHVybiBzZXJ2aWNlO1xufSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIGFzeW5jID0gcmVxdWlyZSgnYXN5bmMnKTtcblxuTVVHLmZhY3RvcnkoJ0NvbXBhcmUnLFxuWyckcScsICdDb25maWcnLFxuZnVuY3Rpb24oJHEsIENvbmZpZykge1xuICAvLyBDb25maWcgdmFyc1xuICB2YXIgZmlsZURpclByZWZpeCA9IF9fZGlybmFtZSArICcvJztcbiAgdmFyIGltYWdlUHJlZml4ID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnO1xuICB2YXIgc3RhdHVzVHlwZXMgPSBbJ3Bhc3NlZCcsICd3YXJuaW5nJywgJ2ZhaWxlZCddO1xuXG4gIC8vIGFzeW5jIGhlbHBlclxuICBmdW5jdGlvbiByZWFkQXN5bmMoZmlsZSwgY2FsbGJhY2spIHtcbiAgICBmcy5yZWFkRmlsZShmaWxlRGlyUHJlZml4ICsgZmlsZSwgJ2Jhc2U2NCcsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8vIFRPRE86IGxldCB0aGUgYmFja2VuZCBwcm9jZXNzIGhhbmRsZSB0aGlzIVxuICBmdW5jdGlvbiBjb21wYXJlU2luZ2xlKGEsIGIpIHtcbiAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICB2YXIgb3V0cHV0ID0ge307XG5cbiAgICAvLyBBcHBseSBNYWluIENvbXBhcmUgQ29uZmlnXG4gICAgcmVzZW1ibGUub3V0cHV0U2V0dGluZ3MoQ29uZmlnLkNvbXBhcmUpO1xuXG4gICAgLy8gT3BlbiBib3RoIGZpbGVzLCBiZWZvcmUgd2UgYXJlIHJlYWR5IHRvIHByb2Nlc3NcbiAgICBhc3luYy5tYXAoW2EsIGJdLCByZWFkQXN5bmMsIGZ1bmN0aW9uKGVyciwgcmVzdWx0cykge1xuICAgICAgdmFyIGFEYXRhID0gaW1hZ2VQcmVmaXggKyByZXN1bHRzWzBdO1xuICAgICAgdmFyIGJEYXRhID0gaW1hZ2VQcmVmaXggKyByZXN1bHRzWzFdO1xuXG4gICAgICAvLyBIYW5kbGVzIGVycm9yc1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJ1biB0aGUgY29tcGFyZSBmdW5jdGlvbiwgcmV0dXJuIHRoZSBkaWZmIGRhdGFcbiAgICAgIHJlc2VtYmxlKGFEYXRhKVxuICAgICAgICAuY29tcGFyZVRvKGJEYXRhKVxuICAgICAgICAuaWdub3JlQ29sb3JzKClcbiAgICAgICAgLm9uQ29tcGxldGUoZnVuY3Rpb24oZGlmZkRhdGEpIHtcbiAgICAgICAgICBvdXRwdXQucmVwb3J0ID0gZGlmZkRhdGE7XG4gICAgICAgICAgb3V0cHV0LnNyYyA9IGRpZmZEYXRhLmdldEltYWdlRGF0YVVybCgpO1xuXG4gICAgICAgICAgZGZkLnJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gIH07XG5cbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHR3byBpbWFnZXMgYW5kIHJldHVybnMgYWxsIGRhdGEgd2l0aCBhbiBpbWFnZSBvZiBjaGFuZ2VzXG4gICAgICovXG4gICAgcnVuU2luZ2xlOiBjb21wYXJlU2luZ2xlLFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgdHlwZSBvZiBwYXNzL3dhcm4vZmFpbCBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBtaXNNYXRjaFZhbHVlID0gcGFyc2VGbG9hdChkYXRhLm1pc01hdGNoUGVyY2VudGFnZSk7XG5cbiAgICAgIC8vIGxvd2VzdCB0b2xlcmFuY2VcbiAgICAgIGlmIChtaXNNYXRjaFZhbHVlIDwgMC4xKSB7XG5cbiAgICAgICAgLy8gV2FybiB0aGF0IGRpbWVuc2lvbnMgYXJlIGRpZmZlcmVuY2VcbiAgICAgICAgaWYgKGRhdGEuaXNTYW1lRGltZW5zaW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzBdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdhcm5pbmcgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA+IDAuMSAmJiBtaXNNYXRjaFZhbHVlIDwgMikge1xuICAgICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMV07XG4gICAgICB9XG5cbiAgICAgIC8vIGVycm9yIHRvbGVyYW5jZSByZWFjaGVkXG4gICAgICByZXR1cm4gc3RhdHVzVHlwZXNbMl07XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgnbm93VGltZScsXG5bJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gIHZhciBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgdmFyIHVwZGF0ZVRpbWUgPSBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdXBkYXRlVGltZSgpO1xuICAgIH0sIDEwMDApO1xuICB9O1xuXG4gIHVwZGF0ZVRpbWUoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRUaW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBub3dUaW1lO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgQVdTID0gcmVxdWlyZSgnLi92ZW5kb3IvY29yZS9hd3MnKTtcblxuTVVHLmZhY3RvcnkoJ1Byb2plY3RzJyxcblsnJHEnLFxuZnVuY3Rpb24oJHEpIHtcbiAgLy8gQ29uZmlnIHRoZSBtYWluIHBhdGhzXG4gIHZhciBwcm9qZWN0c1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLmpzb24nO1xuICB2YXIgcHJvamVjdEZpbGVzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMvJztcblxuICAvLyBDcmVhdGVzIGEgVVVJRCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aFxuICBmdW5jdGlvbiBjcmVhdGVVVUlEKHMpIHtcbiAgICB2YXIgbjtcbiAgICBpZiAodHlwZW9mIHMgPT0gJ251bWJlcicgJiYgcyA9PT0gcGFyc2VJbnQocywgMTApKSB7XG4gICAgICBzID0gQXJyYXkocyArIDEpLmpvaW4oJ3gnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcy5yZXBsYWNlKC94L2csIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG4gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA2MSkgKyA0ODtcbiAgICAgIG4gPSBuID4gNTcgPyAobiArIDcgPiA5MCA/IG4gKyAxMyA6IG4gKyA3KSA6IG47XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENyZWF0ZXMgYSBKU09OIG9iamVjdCBmb3IgYSBiYXNlbGluZSBuZXcgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3QodG90YWwpIHtcbiAgICB0b3RhbCA9IHRvdGFsIHx8IDA7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcHJvamVjdElkLFxuICAgICAgdGl0bGU6ICdQcm9qZWN0ICcgKyAocGFyc2VJbnQodG90YWwsIDEwKSArIDEpLFxuICAgICAgdGltZXN0YW1wOiAoK25ldyBEYXRlKSxcbiAgICAgIHRvdGFsczoge1xuICAgICAgICBzdWNjZXNzOiBudWxsLFxuICAgICAgICB3YXJuaW5nOiBudWxsLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgdmlld3M6IDBcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gU2V0cyB1cCB0aGUgbmVlZGVkIGJhc2UgZGF0YSBmb3Igc3RvcmluZyBhbiBpbmRpdmlkdWFsIHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0RmlsZShvcHRpb25zKSB7XG4gICAgdmFyIHByb2plY3RJZCA9IGNyZWF0ZVVVSUQoMTIpO1xuICAgIHJldHVybiB7XG4gICAgICBiYXRjaEhpc3Rvcnk6IHt9LFxuICAgICAgY3VycmVudEJhdGNoOiBudWxsLFxuICAgICAgY3VycmVudFJlZmVyZW5jZTogbnVsbCxcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICB0aW1lc3RhbXA6IG9wdGlvbnMudGltZXN0YW1wLFxuICAgICAgdmlld3BvcnRzOiBbXSxcbiAgICAgIHNlbGVjdG9yczogW10sXG4gICAgICBjb29raWVzOiBbXSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICByZWFkeUV2ZW50OiBudWxsLFxuICAgICAgICBkZWxheTogbnVsbCxcbiAgICAgICAgbWlzTWF0Y2hUaHJlc2hvbGQ6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gR3JhYnMgSlNPTiBmaWxlIGFuZCBhcHByb3ByaWF0ZWx5IGhhbmRsZXMgZXJyb3JzXG4gIGZ1bmN0aW9uIGdldEpzb25GaWxlKHBhdGgsIHR5cGUpIHtcbiAgICB2YXIgZmlsZTtcblxuICAgIHRyeSB7XG4gICAgICBmaWxlID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gY291bGRuJ3QgZmluZCBmaWxlXG4gICAgICBpZiAoZS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICByZXR1cm4gdHlwZSB8fCB7fTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZmlsZSk7XG4gIH1cblxuICByZXR1cm4ge1xuXG4gICAgZ2V0QWxsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcbiAgICB9LFxuXG4gICAgZ2V0QnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICB9LFxuXG4gICAgZ2V0VHlwZUJ5SWQ6IGZ1bmN0aW9uKGlkLCB0eXBlKSB7XG4gICAgICByZXR1cm4gZ2V0SnNvbkZpbGUocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ18nICsgdHlwZSArICcuanNvbicsIFtdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdmFsaWRhdGVzIHRoZSBwcm9qZWN0LCBtYWtlcyBzdXJlIGFsbCBzZXR0aW5ncyBhcmUgc2V0dXAgYW5kIHZhbGlkXG4gICAgICovXG4gICAgdmFsaWRhdGU6IGZ1bmN0aW9uKHByb2plY3QpIHtcbiAgICAgIHZhciBjb29raWVzID0gcHJvamVjdC5jb29raWVzO1xuICAgICAgdmFyIHZpZXdwb3J0cyA9IHByb2plY3Qudmlld3BvcnRzO1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IHByb2plY3Quc2VsZWN0b3JzO1xuICAgICAgdmFyIHRpdGxlID0gcHJvamVjdC50aXRsZTtcbiAgICAgIHZhciB1cmwgPSBwcm9qZWN0Lm1ldGEudXJsO1xuICAgICAgdmFyIGJvb2wgPSB0cnVlO1xuXG4gICAgICAvLyB2ZXJpZnkgYWxsIGRlZmF1bHRzIGFyZSBzZXR1cFxuICAgICAgaWYgKCF2aWV3cG9ydHMgfHwgIXNlbGVjdG9ycyB8fCAhdGl0bGUgfHwgIXVybCB8fCB2aWV3cG9ydHMubGVuZ3RoIDwgMSB8fCBzZWxlY3RvcnMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgdmlld3BvcnRzLCB2ZXJpZnkgdGhleSdyZSBzZXR1cCByaWdodFxuICAgICAgaWYgKHZpZXdwb3J0cykge1xuICAgICAgICB2aWV3cG9ydHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoud2lkdGggfHwgIW9iai5oZWlnaHQgfHwgIW9iai5uYW1lKSB7XG4gICAgICAgICAgICBib29sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSBzZWxlY3RvcnMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoc2VsZWN0b3JzKSB7XG4gICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai5xdWVyeSB8fCAhb2JqLnR5cGUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIGNvb2tpZXMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoY29va2llcykge1xuICAgICAgICBjb29raWVzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLm5hbWUgfHwgIW9iai5wYXRoIHx8ICFvYmoudmFsdWUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWZhdWx0IHRvIHRydWVcbiAgICAgIHJldHVybiBib29sO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgbmV3IHByb2plY3QsIGFuZCByZXR1cm5zIHRoZSBkYXRhIGluIGEgcHJvbWlzZVxuICAgICAqL1xuICAgIGNyZWF0ZU5ldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG4gICAgICB2YXIgbmV3UHJvamVjdERhdGEgPSBjcmVhdGVEdW1teVByb2plY3QoYWxsUHJvamVjdHMubGVuZ3RoKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RmlsZSA9IGNyZWF0ZUR1bW15UHJvamVjdEZpbGUobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICBhbGxQcm9qZWN0cy51bnNoaWZ0KG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkobmV3UHJvamVjdEZpbGUpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJ19oaXN0b3J5Lmpzb24nLCBKU09OLnN0cmluZ2lmeShbXSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgICAgZGZkLnJlc29sdmUobmV3UHJvamVjdERhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8vIHNhdmUgdG8gZmlsZSBhbmQgbGlzdHMsIHJldHVybiBsaXN0IGRhdGFcbiAgICBzYXZlOiBmdW5jdGlvbihwcm9qZWN0RGF0YSkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IHByb2plY3REYXRhLmlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHNbaWR4XS50aXRsZSA9IHByb2plY3REYXRhLnRpdGxlO1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGltZXN0YW1wID0gKCtuZXcgRGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0RGF0YS5pZCArICcuanNvbicsIEpTT04uc3RyaW5naWZ5KHByb2plY3REYXRhKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmV0dXJuIHRoZSBsaXN0aW5nIGRhdGEsIHNvIHdlIGNhbiB1cGRhdGUgdGhlIHNpZGVwYW5lbFxuICAgICAgICAgIGRmZC5yZXNvbHZlKHByb2plY3REYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPOiBzaG91bGQgcmVtb3ZlIGltYWdlcyB1cG9uIGRlbGV0ZT9cbiAgICAvLyBSZW1vdmVzIGEgc2luZ2xlIHByb2plY3QgYnkgSURcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICBhbGxQcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gaWQpIHtcbiAgICAgICAgICBhbGxQcm9qZWN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgcHJvamVjdCBmaWxlXG4gICAgICBmcy51bmxpbmsocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJy5qc29uJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9qZWN0IGhpc3RvcnkgZmlsZVxuICAgICAgICBmcy51bmxpbmsocHJvamVjdEZpbGVzUGF0aCArIGlkICsgJ19oaXN0b3J5Lmpzb24nLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdHNQYXRoLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmV0dXJuXG4gICAgICAgICAgICBkZmQucmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZXMgYWxsIHN0b3JlZCBoaXN0b3J5IGZvciBhIHByb2plY3RcbiAgICAgKi9cbiAgICBjbGVhckhpc3Rvcnk6IGZ1bmN0aW9uKHByb2plY3QpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIG1haW5Qcm9qZWN0cyA9IGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb2plY3QgZGF0YSB0byByZWZsZWN0IG5vIGhpc3RvcnlcbiAgICAgIHByb2plY3QuY3VycmVudEJhdGNoID0gbnVsbDtcbiAgICAgIHByb2plY3QuY3VycmVudFJlZmVyZW5jZSA9IG51bGw7XG4gICAgICBwcm9qZWN0LmJhdGNoSGlzdG9yeSA9IHt9O1xuXG4gICAgICAvLyB1cGRhdGUgdGhlIGN1cnJlbnQgcHJvamVjdCB0byBoYXZlIG5vIGJhdGNoSGlzdG9yeVxuICAgICAgbWFpblByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0LmlkKSB7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLnN1Y2Nlc3MgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy53YXJuaW5nID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSAwO1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy52aWV3cyA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnX2hpc3RvcnkuanNvbicsIEpTT04uc3RyaW5naWZ5KFtdKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgaWQgcHJvamVjdFxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0KSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGF0YSBvbiB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KG1haW5Qcm9qZWN0cyksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgICAgZGZkLnJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBwYXNzIGluIGEgcHJvamVjdElkLCB0aGVuIGl0IHdpbGwgcmVhZCB0aGUgcHJvamVjdCBhbmQgaXRzIGN1cnJlbnQgYmF0Y2ggb2YgZmlsZXMgdG8gdXBsb2FkXG4gICAgICogb25jZSBjb21wbGV0ZSwgaXQgd2lsbCBjbGVhbiBvdXQgYW55IGxvY2FsIHNjcmVlbnMgYW5kIHJlcGxhY2Ugd2l0aCBhd3MgcmVzb3VyY2VzXG4gICAgICovXG4gICAgc3luY1Byb2plY3Q6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICBpZiAoIWlkKSB7cmV0dXJuO31cblxuICAgICAgdmFyIHByb2plY3QgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgICAgdmFyIHByb2plY3RGaWxlcyA9IHRoaXMuZ2V0VHlwZUJ5SWQoaWQsICdoaXN0b3J5Jyk7XG4gICAgICB2YXIgcmVhZHlGaWxlcyA9IFtdO1xuICAgICAgY29uc29sZS5sb2coJ3N0YXJ0aW5nIHN5bmMnLCBpZCk7XG5cbiAgICAgIC8vIHB1bGwgb3V0IGZpbGVzIHRoYXQgYXJlIGFscmVhZHkgaW5zaWRlIGF3cywgcHJlcCBmb3IgdXBsb2FkXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2plY3RGaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wRmlsZSA9IHByb2plY3RGaWxlc1tpXTtcbiAgICAgICAgaWYgKHRtcEZpbGUuc291cmNlLnNlYXJjaCgnYW1hem9uJykgPT09IC0xKSB7XG4gICAgICAgICAgdmFyIHNyYyA9IHRtcEZpbGUuc291cmNlO1xuICAgICAgICAgIHZhciB0eXBlID0gdG1wRmlsZS50eXBlO1xuICAgICAgICAgIHZhciBwYXRoID0gX19kaXJuYW1lICsgJy9zY3JlZW5zLycgKyB0eXBlICsgJy8nICsgcHJvamVjdC5pZCArICcvJyArIHNyYztcbiAgICAgICAgICByZWFkeUZpbGVzLnB1c2goeyBrZXk6IHR5cGUgKyAnLycgKyBzcmMsIHBhdGg6IHBhdGggfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ3JlYWR5RmlsZXMnLCByZWFkeUZpbGVzKTtcblxuICAgICAgLy8gdXBsb2FkIGZpbGVzXG4gICAgICBBV1MuaW5pdCgpXG4gICAgICAgIC51cGxvYWQocmVhZHlGaWxlcywgcHJvamVjdC5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0FXUzpyZXMnLCByZXMpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQVdTOmVycicsIGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBUT0RPOlxuICAgICAgLy8gLSB1cGxvYWQgcHJvamVjdCBmaWxlc1xuICAgICAgLy8gLSBjbGVhbiBsb2NhbCBpbWFnZXNcbiAgICAgIC8vIC0gdXBkYXRlIFVJIHdpdGggYXdzIHJlc291cmNlc1xuICAgIH1cblxuICB9O1xufV0pO1xuXG4vLyB2YXIgZmlsZSA9IF9fZGlybmFtZSArICcvc2NyZWVucy9jb21wYXJlLzFLTnNwZFB1Q2VKbS9kZXRhaWx3cmFwcGVyXzE0NDAtMTIyNF8xX2RpZmYucG5nJztcbi8vIGNvbnNvbGUubG9nKCdmaWxlc3NzcycsIGZpbGUpO1xuLy8gQVdTLmluaXQoKS51cGxvYWQoJzFLTnNwZFB1Q2VKbS9jb21wYXJlJywgZmlsZSk7XG4iLCJNVUcuZmlsdGVyKCd0aW1lQWdvJyxcblsnbm93VGltZScsICd0aW1lQWdvJyxcbmZ1bmN0aW9uIChub3dUaW1lLCB0aW1lQWdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZnJvbVRpbWUgPSB0aW1lQWdvLnBhcnNlKHZhbHVlKTtcbiAgICB2YXIgZGlmZiA9IG5vd1RpbWUuZ2V0VGltZSgpIC0gZnJvbVRpbWU7XG4gICAgcmV0dXJuIHRpbWVBZ28uaW5Xb3JkcyhkaWZmKTtcbiAgfTtcbn1dKTtcbiIsInZhciBpcGMgPSByZXF1aXJlKCdpcGMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ01haW5DdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ0NvbmZpZycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgQ29uZmlnLCBQcm9qZWN0cykge1xuICAkcm9vdFNjb3BlLmN1cnJlbnRQcm9qZWN0SWQgPSAnJztcblxuICAkc2NvcGUuY3JlYXRlTmV3UHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIFByb2plY3RzLmNyZWF0ZU5ldygpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgcmVzKTtcbiAgICAgICRzdGF0ZS5nbygncHJvamVjdHMuc2V0dGluZ3MnLCB7IGlkOiByZXMuaWQgfSk7XG4gICAgfSxcblxuICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgaXBjLm9uKCdOQVZJR0FURTpUTycsIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubG9jYXRpb24pIHtyZXR1cm47fVxuXG4gICAgY29uc29sZS5sb2coJ05BVklHQVRFOlRPJywgYXJncyk7XG4gICAgJHN0YXRlLmdvKGFyZ3MubG9jYXRpb24pO1xuICB9KTtcblxufV0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBBV1MgPSByZXF1aXJlKCcuL3ZlbmRvci9jb3JlL2F3cycpO1xuXG5NVUcuY29udHJvbGxlcignUHJlZmVyZW5jZXNDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICAkc2NvcGUuYXdzQ29uZmlnID0ge1xuICAgIGF1dG9zeW5jOiB0cnVlLFxuICAgIGJ1Y2tldDogJycsXG4gICAgYWNjZXNzS2V5SWQ6ICcnLFxuICAgIHNlY3JldEFjY2Vzc0tleTogJydcbiAgfTtcblxuICAvLyBncmFiIHNldHRpbmdzIHJlYWwgcXVpY2tcbiAgJHNjb3BlLmF3c0NvbmZpZyA9IEFXUy5nZXRDb25maWcoKTtcblxuICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHNhdmUgdGhlIEFXUyBjb25maWdcbiAgICBBV1Muc2V0Q29uZmlnKCRzY29wZS5hd3NDb25maWcpO1xuICB9O1xuXG4gICRzY29wZS5zeW5jTm93ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuc3luY1Byb2plY3QoJHJvb3RTY29wZS5wcm9qZWN0LmlkKTtcbiAgfTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuXG4gIC8vIEFsbG93IHRoZSBjaGlsZCB2aWV3cyB0byBiaW5kIHRvIHNhbWUgc2NvcGVcbiAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkc3RhdGVQYXJhbXMuaWQpO1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEhpc3RvcnlDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCBQcm9qZWN0cykge1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gJ0FsbCc7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICcnO1xuXG4gIC8vIGdyYWIgYWxsIHRoZSBoaXN0b3J5IGRhdGFcbiAgJHNjb3BlLmhpc3RvcnlJdGVtcyA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAkc2NvcGUuY2hhbmdlRmlsdGVyID0gZnVuY3Rpb24odHlwZSkge1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXIgPSB0eXBlO1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXJRdWVyeSA9ICh0eXBlID09ICdBbGwnKSA/ICcnIDogdHlwZTtcbiAgfTtcblxuICAkc2NvcGUucHJldmlld0l0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ3ByZXZpZXcnLCBpdGVtOiBpdGVtLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbn1dKTtcbiIsInZhciBpcGMgPSByZXF1aXJlKCdpcGMnKTtcblxuTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RSdW5uZXJDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1NldHRpbmdzID0gZmFsc2U7XG4gICRzY29wZS5oYXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc0NvbXBhcmUgPSBmYWxzZTtcbiAgJHNjb3BlLnJ1bm5pbmdUeXBlID0gJ3JlZmVyZW5jZSc7XG4gICRzY29wZS5iYXRjaEl0ZW1zID0gW107XG4gICRzY29wZS5hY3RpdmVEYXRhID0ge307XG4gICRzY29wZS5jdXJyZW50QmF0Y2ggPSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoIHx8IDA7XG4gICRzY29wZS5wcm9ncmVzcyA9IHtcbiAgICBwZXJjZW50OiAwLFxuICAgIHRpdGxlOiAnU3RhcnRpbmcnXG4gIH07XG5cbiAgLy8gUHV0cyBkYXRhIGludG8gc29ydGVkIHNlY3Rpb25zXG4gIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaChhbGxEYXRhKSB7XG4gICAgaWYgKCFhbGxEYXRhIHx8IGFsbERhdGEubGVuZ3RoIDwgMSkge1xuICAgICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIHJlc2V0IGp1c3QgdGhlIHN0YXRzXG4gICAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5zdWNjZXNzID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS53YXJuaW5nID0gMDtcbiAgICAkc2NvcGUuYWN0aXZlRGF0YS5lcnJvciA9IDA7XG4gICAgdmFyIGZvcm1hdHRlZCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgICBmdW5jdGlvbiBwbGFjZUl0ZW0oaXRlbSkge1xuXG4gICAgICAvLyBLZWVwIHRoaW5ncyBvcmdhbml6ZXMgd2l0aCBwcmVzZXQgcHJpb3JpdHlcbiAgICAgIGlmIChpdGVtLnN0YXR1cykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICB0YXJnZXQgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZFt0YXJnZXRdLml0ZW1zLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICRzY29wZS5hY3RpdmVEYXRhW2Zvcm1hdHRlZFt0YXJnZXRdLnR5cGVdID0gJHNjb3BlLmFjdGl2ZURhdGFbZm9ybWF0dGVkW3RhcmdldF0udHlwZV0gKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsbERhdGEubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmJhdGNoID09PSAkc2NvcGUuY3VycmVudEJhdGNoKSB7XG4gICAgICAgIHBsYWNlSXRlbShvYmopO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IHRydWU7XG4gICAgJHNjb3BlLmhhc0NvbXBhcmUgPSAoZm9ybWF0dGVkLmxlbmd0aCA+IDApO1xuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cEN1cnJlbnRCYXRjaCgpIHtcbiAgICBpZiAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCA9PT0gbnVsbCkge3JldHVybjt9XG5cbiAgICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICAgIHZhciBpZCA9ICh0eXBlb2YgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gdW5kZWZpbmVkKSA/ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggOiAwO1xuICAgIHZhciBoaXN0b3J5RGF0YSA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRzdGF0ZVBhcmFtcy5pZCwgJ2hpc3RvcnknKTtcblxuICAgIC8vIFN0b3JlIHRoZSBwcm9jZXNzZWQgZGF0YSBpbnRvIHRoZSBiYXRjaCBkYXRhXG4gICAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuICB9XG5cbiAgLy8gdmFsaWRhdGlvbiBvZiBwcm9qZWN0XG4gIGZ1bmN0aW9uIHZhbGlkYXRlUHJvamVjdCgpIHtcbiAgICAvLyB2ZXJpZnkgaWYgaXRzIHZhbGlkXG4gICAgdmFyIGlzVmFsaWQgPSBQcm9qZWN0cy52YWxpZGF0ZSgkcm9vdFNjb3BlLnByb2plY3QpO1xuXG4gICAgLy8gYWxlcnQgb2YgaW52YWxpZGl0eVxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1BsZWFzZSBmaW5pc2ggY29uZmlndXJpbmcgc2V0dGluZ3MhJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcCcgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH1cblxuICAvLyBjaGVja3MgZm9yIGNoYW5nZXMgYW5kIHVwZGF0ZXMgVUkgYWNjb3VyZGluZ2x5XG4gIGZ1bmN0aW9uIGNoZWNrU3RhdGUoKSB7XG4gICAgJHNjb3BlLmhhc1NldHRpbmdzID0gdmFsaWRhdGVQcm9qZWN0KCk7XG4gICAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSAhPT0gbnVsbCk7XG4gICAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2g7XG5cbiAgICBpZiAoJHNjb3BlLnJ1bm5pbmdUeXBlID09PSAncmVmZXJlbmNlJykge1xuICAgICAgJHNjb3BlLmhhc0NvbXBhcmUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLmhhc0NvbXBhcmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gbnVsbCAmJiAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoICE9PSAwKTtcbiAgICB9XG4gIH1cblxuICAvLyBncmFiIHRoZSBsYXRlc3QgZGF0YSBmb3IgdGhlIHByb2plY3RcbiAgZnVuY3Rpb24gZ3JhYkxhdGVzdERhdGEoKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkcm9vdFNjb3BlLnByb2plY3QuaWQsICdoaXN0b3J5Jyk7XG5cbiAgICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAgICRzY29wZS5hY3RpdmVEYXRhID0gKCRyb290U2NvcGUucHJvamVjdCAmJiAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5KSA/ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF0gOiBudWxsO1xuXG4gICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsICRyb290U2NvcGUucHJvamVjdCk7XG4gIH1cblxuICBncmFiTGF0ZXN0RGF0YSgpO1xuICBjaGVja1N0YXRlKCk7XG4gIHNldHVwQ3VycmVudEJhdGNoKCk7XG5cbiAgLy8gRmlyZSBvZmYgdGhlIHZpZXdlclxuICAkc2NvcGUucHJldmlld0JhdGNoID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAnYmF0Y2gnLCBpdGVtczogaXRlbXMsIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxuICAvLyBGaXJlIG9mZiBhIG5ldyB0ZXN0ISFcbiAgJHNjb3BlLm5ld0NvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsaWQgPSB2YWxpZGF0ZVByb2plY3QoKTtcblxuICAgIC8vIHZhbGlkYXRpb24gcGF1c2VcbiAgICBpZiAoIXZhbGlkKSB7cmV0dXJuO31cblxuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdjb21wYXJlJztcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IHRydWU7XG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAnY29tcGFyZScsIHByb2plY3RJZDogJHJvb3RTY29wZS5wcm9qZWN0LmlkIH0pO1xuICB9O1xuXG4gIC8vIHNldHVwIG5ldyByZWZlcmVuY2VcbiAgJHNjb3BlLm5ld1JlZmVyZW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWxpZCA9IHZhbGlkYXRlUHJvamVjdCgpO1xuXG4gICAgLy8gdmFsaWRhdGlvbiBwYXVzZVxuICAgIGlmICghdmFsaWQpIHtyZXR1cm47fVxuXG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdyZWZlcmVuY2UnO1xuICAgICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAncmVmZXJlbmNlJywgcHJvamVjdElkOiAkcm9vdFNjb3BlLnByb2plY3QuaWQgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcnVubmVyRXZlbnRzKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubXNnIHx8ICFhcmdzLnBlcmNlbnQpIHtyZXR1cm47fVxuXG4gICAgLy8gV3JpdGUgdGhlIHByb2dyZXNzIHRvIFVJXG4gICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSBwYXJzZUludChhcmdzLnBlcmNlbnQsIDEwKTtcbiAgICAkc2NvcGUucHJvZ3Jlc3MudGl0bGUgPSAoYXJncy5tc2cpID8gYXJncy5tc2cgOiAkc2NvcGUucHJvZ3Jlc3MudGl0bGU7XG4gIH1cblxuICAvLyBUT0RPOiBzaWduYWwgVUkgb2YgY2hhbmdlc1xuICBmdW5jdGlvbiBydW5uZXJDb21wbGV0ZSgpIHtcbiAgICBncmFiTGF0ZXN0RGF0YSgpO1xuICAgIGNoZWNrU3RhdGUoKTtcbiAgICBzZXR1cEN1cnJlbnRCYXRjaCgpO1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBydW5uZXJGYWlsZWQocmVhc29uKSB7XG4gICAgY29uc29sZS5sb2coJ1JVTk5FUjpGQUlMRUQgcmVhc29uJywgcmVhc29uKTtcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICB9XG5cbiAgaXBjLm9uKCdSVU5ORVI6UFJPR1JFU1MnLCBydW5uZXJFdmVudHMpO1xuICBpcGMub24oJ1JVTk5FUjpDT01QTEVURScsIHJ1bm5lckNvbXBsZXRlKTtcbiAgaXBjLm9uKCdSVU5ORVI6RkFJTEVEJywgcnVubmVyRmFpbGVkKTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RTZXR0aW5nc0N0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIFByb2plY3RzKSB7XG4gIHZhciBzYXZlVGltZXI7XG5cbiAgJHNjb3BlLnNlbGVjdG9yVHlwZXMgPSBbJ2NvbnRhaW5lcicsICdoaWRlJywgJ3JlbW92ZSddO1xuICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAkc2NvcGUubWFzdGVyID0ge307XG4gIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuXG4gIGZ1bmN0aW9uIGFkZE5ld1R5cGUodHlwZSwgZGF0YSkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5wdXNoKGRhdGEpO1xuICB9XG5cbiAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMsIHNvIHdlIGNhbiBzYXZlXG4gICRzY29wZS4kd2F0Y2goJ3Byb2plY3QnLCBmdW5jdGlvbihuViwgb1YpIHtcbiAgICBpZiAoblYgIT0gb1YpIHtcbiAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gdHJ1ZTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZmlsZSBmb3IgY29udmVuaWVuY2VcbiAgICAgICRzY29wZS5zYXZlKCk7XG4gICAgfVxuICB9LCB0cnVlKTtcblxuICAvLyBUT0RPOiBzZXR1cCB2YWxpZGF0aW9uc1xuICAvLyBzYXZlIHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2F2ZVRpbWVyKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHNhdmVUaW1lcik7XG4gICAgfVxuXG4gICAgLy8gdGhyb3R0bGUgdGhlIHNhdmVzLCBzaW5jZSB3ZSBzYXZlIG9uIGFueSBjaGFuZ2VzXG4gICAgc2F2ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuICAgICAgLy8gU2F2ZSB0ZWggcHJvamVjdG9pZFxuICAgICAgUHJvamVjdHMuc2F2ZSgkcm9vdFNjb3BlLnByb2plY3QpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2lkZWJhciB3aXRoIGNoYW5nZXNcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6VVBEQVRFJywgcmVzKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmV2ZXJ0IG1vZGVsXG4gICAgICAgICAgYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCwgJHNjb3BlLm1hc3Rlcik7XG4gICAgICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSwgMjAwKTtcbiAgfTtcblxuICAvLyByZXZlcnQgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuY2FuY2VsU2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdXJlID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNsZWFyIGFsbCB5b3VyIGNoYW5nZXM/Jyk7XG4gICAgaWYgKHN1cmUpIHtcbiAgICAgIC8vIHB1dCByZXZlcnQgbW9kZWwgaW50byB0aGUgcHJvamVjdCBtb2RlbFxuICAgICAgYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIsICRyb290U2NvcGUucHJvamVjdCk7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvLyBkZWxldGUgdGhlIHByb2plY3QsIGFuZCByZW1vdmUgZnJvbSBwcm9qZWN0IGxpc3RzLCB0aGVuIHJlZGlyZWN0IHRvIG1haW5cbiAgJHNjb3BlLmRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0PycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICB2YXIgcHJvamVjdElEID0gJHJvb3RTY29wZS5wcm9qZWN0LmlkO1xuXG4gICAgICBQcm9qZWN0cy5yZW1vdmUocHJvamVjdElEKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6UkVNT1ZFJywgeyBpZDogcHJvamVjdElEIH0pO1xuICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xuICAgICAgICAgICRyb290U2NvcGUucHJvamVjdCA9IHt9O1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogXCJQcm9qZWN0IFJlbW92ZWQgU3VjY2Vzc2Z1bGx5XCIsIGR1cjogNSwgdHlwZTogXCJzdWNjZXNzXCIgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IHZpZXdwb3J0IGl0ZW1cbiAgJHNjb3BlLmFkZFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1ZpZXdwb3J0ID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3ZpZXdwb3J0cycsIG5ld1ZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IHNlbGVjdG9yIGl0ZW1cbiAgJHNjb3BlLmFkZFNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1NlbGVjdG9yID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgdHlwZTogJ2NvbnRhaW5lcicsXG4gICAgICBxdWVyeTogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdzZWxlY3RvcnMnLCBuZXdTZWxlY3Rvcik7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBjb29raWUgaXRlbVxuICAkc2NvcGUuYWRkQ29va2llID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0Nvb2tpZSA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHBhdGg6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnY29va2llcycsIG5ld0Nvb2tpZSk7XG4gIH07XG5cbiAgLy8gYWN0aXZhdGUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmFjdGl2YXRlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09IHRydWUgfHwgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09ICd0cnVlJykgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5kZWxldGVUeXBlSXRlbSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnNwbGljZShpZCwgMSk7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlcyBhbGwgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5jbGVhckhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICBQcm9qZWN0cy5jbGVhckhpc3RvcnkoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6IFwiQ2xlYXJlZCBBbGwgSGlzdG9yeSFcIiwgZHVyOiA1LCB0eXBlOiBcInN1Y2Nlc3NcIiwgaWNvbjogXCJoaXN0b3J5XCIgfSk7XG4gICAgICB9XG5cbiAgICAgICwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6IFwiRXJyb3IgT2NjdXJyZWQhIFBsZWFzZSB0cnkgYWdhaW4uXCIsIGR1cjogNSwgdHlwZTogXCJlcnJvclwiLCBpY29uOiBcInN0b3BcIiB9KTtcbiAgICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuY29udHJvbGxlcignU2lkZVBhbmVsQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2plY3RzID0gW107XG5cbiAgLy8gZ3JhYiBhbGwgcHJvamVjdHMgbGlzdFxuICAkc2NvcGUucHJvamVjdHMgPSBQcm9qZWN0cy5nZXRBbGwoKTtcblxuICAvLyBhZGQgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpORVdQUk9KRUNUJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy51bnNoaWZ0KGFyZ3MpO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50aXRsZSA9IGFyZ3MudGl0bGU7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9IGFyZ3MudGltZXN0YW1wO1xuXG4gICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0pIHtcbiAgICAgICAgICAvLyBvbmx5IHVwZGF0ZSB0b3RhbHMgaWYgd2UgaGF2ZSB0aGVtXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuc3VjY2VzcyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5zdWNjZXNzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLndhcm5pbmcgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0ud2FybmluZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLmVycm9yKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMuZXJyb3IgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uZXJyb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS52aWV3cykge1xuICAgICAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udG90YWxzLnZpZXdzID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnZpZXdzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyB1cGRhdGUgdGhlIHByb2plY3RzIGxpc3RcbiAgJHJvb3RTY29wZS4kb24oJ1NJREVQQU5FTDpSRU1PVkUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5pZCA9PT0gYXJncy5pZCkge1xuICAgICAgICAkc2NvcGUucHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gICRzY29wZS5nb1RvUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgLy8gVE9ETzogZml4IHRoaXNcbiAgICAvLyB2YXIgdHlwZSA9ICdzZXR0aW5ncyc7XG4gICAgdmFyIHR5cGUgPSAncnVubmVyJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMjU1LFxuICAgICAgZ3JlZW46IDAsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ2ZsYXQnLFxuICAgIHRyYW5zcGFyZW5jeTogMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAwXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG4gIC5zdGF0ZSgncHJlZmVyZW5jZXMnLCB7XG4gICAgdXJsOiAnL3ByZWZlcmVuY2VzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3ByZWZlcmVuY2VzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcmVmZXJlbmNlc0N0cmwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG59XSk7XG4iLCJNVUcucnVuKFsnJHJvb3RTY29wZScsICckaHR0cCcsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkaHR0cCkge1xuXG4gIC8vIGhlYWRlcnNcbiAgdmFyICRjb21tb24gPSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbjtcbiAgJGNvbW1vblsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJyRzdGF0ZUNoYW5nZUVycm9yJywgZXJyb3IpO1xuICB9KTtcblxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9