var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){var o="modal-open",i="modal-visible";e.activeOption="overlay",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(r,n){n&&n.type&&("preview"===n.type&&(e.activeItem=n.item,e.viewer=n.project||{},e.viewer.items=null),"batch"===n.type&&n.items.length>0&&(e.activeItem=n.items[e.currentIndex],e.viewer=n.project||{},e.viewer.items=n.items),t.addClass(o),setTimeout(function(){t.addClass(i)},30))}),e.close=function(){t.removeClass(i),setTimeout(function(){t.removeClass(o)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r}},e.goToIndex=function(t){e.activeItem=e.viewer.items[t],e.currentIndex=t}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,i,c){function a(e){var o=+new Date,i=e.msg,c=e.icon?e.icon:v,a=f.replace("BODY",i).replace("ICON",c),g=r(a)(n);g[0].id=o,d=o,p.append(g);var h=p.find("#"+o);u(h,e.type),e.callback&&h.find(".msg-action").addClass("show"),t(function(){h.addClass("add")},20),l=t(function(){s(h)},m)}function s(e){if(!e&&d)e=p.find("#"+d);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,f='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',p=angular.element(o),m=5e3,d="",v="info";n.body="",n.callback=null,n.icon=v,n.action=function(){var e=p.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(m=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var i;o.$observe("fromTime",function(t){i=e.parse(t)}),r.$watch(function(){return t.getTime()-i},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs");MUG.factory("Compare",["$q","Config",function(e,t){function r(r,n){var o=e.defer(),i={};return resemble.outputSettings(t.Compare),resemble(r).compareTo(n).onComplete(function(e){i.report=JSON.stringify(e),i.src=e.getImageDataUrl(),o.resolve(i)}),o.promise}__dirname+"screens/reference/",__dirname+"screens/compare/";return{runSingle:r}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}var i=__dirname+"/projects.json",c=__dirname+"/projects/";return{getAll:function(){return o(i,[])},getById:function(e){return o(c+e+".json")},getTypeById:function(e,t){return o(c+e+"_"+t+".json",[])},createNew:function(){var t=e.defer(),o=JSON.parse(fs.readFileSync(i,"utf8")),a=r(o.length),s=n(a);return o.unshift(a),fs.writeFile(i,JSON.stringify(o),function(e){return e?void t.reject(e):void fs.writeFile(c+a.id+".json",JSON.stringify(s),function(e){return e?void t.reject(e):void t.resolve(a)})}),t.promise},save:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t.id&&(n[r].title=t.title,n[r].timestamp=+new Date)}),fs.writeFile(c+t.id+".json",JSON.stringify(t),function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve(t)})}),r.promise},remove:function(t){var r=e.defer(),n=JSON.parse(fs.readFileSync(i,"utf8"));return n.map(function(e,r){e.id===t&&n.splice(r,1)}),fs.unlink(c+t+".json",function(e){return e?void r.reject(e):void fs.writeFile(i,JSON.stringify(n),function(e){return e?void r.reject(e):void r.resolve()})}),r.promise}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,i=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,i)}var n=t.settings.strings,o=n.prefixAgo,i=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,i=n.suffixFromNow);var c=Math.abs(e)/1e3,a=c/60,s=a/60,u=s/24,l=u/365,f=45>c&&r(n.seconds,Math.round(c))||90>c&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),p=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,f,i].join(p).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]),MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]),MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function i(e){function r(e){if(e.status){var t=0;switch(e.status){case"warning":t=1;break;case"failed":t=2}n[t].items.unshift(e)}}var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),n}t.processing=!1,t.hasSettings=!0,t.hasReference=!0,t.activeFilter="All",t.batchItems=[],t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0},t.activeData=e.project.batchHistory[t.currentBatch],t.changeFilter=function(e){t.activeFilter=e};var c=o.getTypeById(n.id,"history");t.batchItems=i(c),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.runNewTest=function(){t.processing=!0,r(function(){t.progress.percent=12},200),r(function(){t.progress.percent=56},700),r(function(){t.progress.percent=93},1800),r(function(){t.processing=!1},2e3)},e.$on("RUNNER:PROGRESS:UPDATE",function(e,r){r&&(t.progress.percent=parseInt(r.percent,10))})}]),MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}var i;t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.master={},angular.copy(e.project,t.master),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var i=e.project.id;n.remove(i).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:i}),r.go("main"),e.project={},t.hasChanges=!1},function(e){console.log("err",e)})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n]=r)})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="settings";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:0,green:255,blue:255},errorType:"movement",transparency:.1,largeImageThreshold:1200,misMatchThreshold:1}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,i){console.log("$stateChangeError",i)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZhZGVpbi5qcyIsIm1vZGFsLmpzIiwibXNnY2VudGVyLmpzIiwidGltZWFnby5qcyIsImNvbXBhcmUuanMiLCJub3d0aW1lLmpzIiwicHJvamVjdHMuanMiLCJ0aW1lLWFnby5qcyIsIm1haW5jdHJsLmpzIiwicHJvamVjdGN0cmwuanMiLCJwcm9qZWN0aGlzdG9yeWN0cmwuanMiLCJwcm9qZWN0cnVubmVyY3RybC5qcyIsInByb2plY3RzZXR0aW5nc2N0cmwuanMiLCJzaWRlcGFuZWxjdHJsLmpzIiwiY29uZmlnLmpzIiwicm91dGVzLmpzIiwiaW5pdC5qcyJdLCJuYW1lcyI6WyJNVUciLCJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtIiwiYXR0cnMiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsImFkZENsYXNzIiwic2V0VGltZW91dCIsImNzcyIsIiR0aW1lb3V0IiwiJGNvbXBpbGUiLCIkcm9vdFNjb3BlIiwicmVwbGFjZSIsInRlbXBsYXRlVXJsIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0ciIsIm1vZGFsQWN0aXZlIiwibW9kYWxWaXNpYmxlIiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4IiwiYWN0aXZlSXRlbSIsInZpZXdlciIsIml0ZW1zIiwiYW1vdW50IiwiaW52ZXJzZSIsInBlcmNlbnQiLCIkd2F0Y2giLCJudiIsIm92IiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsIm9wdGlvbk1vZGUiLCJ0eXBlIiwiJG9uIiwiZSIsImFyZ3MiLCJjbG9zZSIsIml0ZW0iLCJwcm9qZWN0IiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJtb2RhbEFjdGlvbk5hdiIsIm5leHRJZHgiLCJ0b3RhbCIsImdvVG9JbmRleCIsImlkeCIsImVsIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCJuZXdCb2R5IiwibXNnIiwibmV3SWNuIiwiaWNvbiIsImRlZmF1bHRJY29uIiwidGVtcGxhdGUiLCJtc2dUZW1wbGF0ZSIsIm5ld01lc3NhZ2UiLCJpZCIsInByZXZpb3VzSWQiLCJfZWwiLCJhcHBlbmQiLCJtc2dFbCIsImZpbmQiLCJjaGFuZ2VUeXBlIiwiY2FsbGJhY2siLCJ0aW1lciIsImNsZWFyRWwiLCJkdXJhdGlvbiIsImVsZW1lbnQiLCJyZW1vdmUiLCJib2R5IiwiYWN0aW9uIiwiYWN0aW9uRWwiLCJ0aGlzIiwid2luZG93IiwiY2xlYXJUaW1lb3V0IiwiZHVyIiwidGltZUFnbyIsIm5vd1RpbWUiLCJmcm9tVGltZSIsIiRvYnNlcnZlIiwidmFsdWUiLCJwYXJzZSIsImdldFRpbWUiLCJ0ZXh0IiwiaW5Xb3JkcyIsImZzIiwicmVxdWlyZSIsImZhY3RvcnkiLCIkcSIsIkNvbmZpZyIsImNvbXBhcmVTaW5nbGUiLCJhIiwiYiIsImRmZCIsImRlZmVyIiwib3V0cHV0IiwicmVzZW1ibGUiLCJvdXRwdXRTZXR0aW5ncyIsIkNvbXBhcmUiLCJjb21wYXJlVG8iLCJvbkNvbXBsZXRlIiwiZGlmZkRhdGEiLCJyZXBvcnQiLCJKU09OIiwic3RyaW5naWZ5Iiwic3JjIiwiZ2V0SW1hZ2VEYXRhVXJsIiwicmVzb2x2ZSIsInByb21pc2UiLCJfX2Rpcm5hbWUiLCJydW5TaW5nbGUiLCJub3ciLCJ1cGRhdGVUaW1lIiwiY3JlYXRlVVVJRCIsInMiLCJBcnJheSIsImpvaW4iLCJuIiwicmFuZG9tIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY3JlYXRlRHVtbXlQcm9qZWN0IiwicHJvamVjdElkIiwidGl0bGUiLCJ0aW1lc3RhbXAiLCJ0b3RhbHMiLCJzdWNjZXNzIiwid2FybmluZyIsImVycm9yIiwidmlld3MiLCJjcmVhdGVEdW1teVByb2plY3RGaWxlIiwib3B0aW9ucyIsInZpZXdwb3J0cyIsInNlbGVjdG9ycyIsImNvb2tpZXMiLCJtZXRhIiwidXJsIiwicmVhZHlFdmVudCIsImRlbGF5IiwibWlzTWF0Y2hUaHJlc2hvbGQiLCJnZXRKc29uRmlsZSIsInBhdGgiLCJmaWxlIiwicmVhZEZpbGVTeW5jIiwiY29kZSIsInByb2plY3RzUGF0aCIsInByb2plY3RGaWxlc1BhdGgiLCJnZXRBbGwiLCJnZXRCeUlkIiwiZ2V0VHlwZUJ5SWQiLCJjcmVhdGVOZXciLCJhbGxQcm9qZWN0cyIsIm5ld1Byb2plY3REYXRhIiwibmV3UHJvamVjdEZpbGUiLCJ1bnNoaWZ0Iiwid3JpdGVGaWxlIiwiZXJyIiwicmVqZWN0Iiwic2F2ZSIsInByb2plY3REYXRhIiwibWFwIiwib2JqIiwic3BsaWNlIiwidW5saW5rIiwidHJpbURpZ2l0cyIsIm51bSIsIm0iLCJ0b1N0cmluZyIsInNsaWNlIiwic2VydmljZSIsInNldHRpbmdzIiwicmVmcmVzaE1pbGxpcyIsImFsbG93RnV0dXJlIiwic3RyaW5ncyIsInByZWZpeEFnbyIsInByZWZpeEZyb21Ob3ciLCJzdWZmaXhBZ28iLCJzdWZmaXhGcm9tTm93Iiwic2Vjb25kcyIsIm1pbnV0ZSIsIm1pbnV0ZXMiLCJob3VyIiwiaG91cnMiLCJkYXkiLCJkYXlzIiwibW9udGgiLCJtb250aHMiLCJ5ZWFyIiwieWVhcnMiLCJudW1iZXJzIiwiZGlzdGFuY2VNaWxsaXMiLCJzdWJzdGl0dXRlIiwic3RyaW5nT3JGdW5jdGlvbiIsIm51bWJlciIsInN0cmluZyIsImlzRnVuY3Rpb24iLCIkbCIsInByZWZpeCIsInN1ZmZpeCIsImFicyIsIndvcmRzIiwic2VwYXJhdG9yIiwidW5kZWZpbmVkIiwid29yZFNlcGFyYXRvciIsInRyaW0iLCJpc284NjAxIiwiaXNOdW1iZXIiLCJvcmlnaW5hbFRpbWVzdGFtcCIsImZpbHRlciIsImRpZmYiLCJjb250cm9sbGVyIiwiJHN0YXRlIiwiUHJvamVjdHMiLCJjdXJyZW50UHJvamVjdElkIiwiY3JlYXRlTmV3UHJvamVjdCIsInRoZW4iLCJyZXMiLCIkYnJvYWRjYXN0IiwiZ28iLCJjb25zb2xlIiwibG9nIiwiJHN0YXRlUGFyYW1zIiwiYWN0aXZlRmlsdGVyIiwiYWN0aXZlRmlsdGVyUXVlcnkiLCJoaXN0b3J5SXRlbXMiLCJjaGFuZ2VGaWx0ZXIiLCJwcmV2aWV3SXRlbSIsIiRlbWl0IiwicHJvY2Vzc0JhdGNoIiwiYWxsRGF0YSIsInBsYWNlSXRlbSIsInN0YXR1cyIsInRhcmdldCIsImZvcm1hdHRlZCIsImJhdGNoIiwiY3VycmVudEJhdGNoIiwicHJvY2Vzc2luZyIsImhhc1NldHRpbmdzIiwiaGFzUmVmZXJlbmNlIiwiYmF0Y2hJdGVtcyIsImFjdGl2ZURhdGEiLCJwcm9ncmVzcyIsImJhdGNoSGlzdG9yeSIsImhpc3RvcnlEYXRhIiwicHJldmlld0JhdGNoIiwicnVuTmV3VGVzdCIsImFkZE5ld1R5cGUiLCJwdXNoIiwic2F2ZVRpbWVyIiwic2VsZWN0b3JUeXBlcyIsImhhc0NoYW5nZXMiLCJtYXN0ZXIiLCJjb3B5IiwiblYiLCJvViIsImNhbmNlbFNhdmUiLCJzdXJlIiwiY29uZmlybSIsImRlbGV0ZVByb2plY3QiLCJwcm9qZWN0SUQiLCJhZGRWaWV3cG9ydCIsIm5ld1ZpZXdwb3J0IiwiYWN0aXZlIiwibmFtZSIsIndpZHRoIiwiaGVpZ2h0IiwiYWRkU2VsZWN0b3IiLCJuZXdTZWxlY3RvciIsInF1ZXJ5IiwiYWRkQ29va2llIiwibmV3Q29va2llIiwiYWN0aXZhdGVUeXBlIiwiZGVsZXRlVHlwZUl0ZW0iLCJwcm9qZWN0cyIsImdvVG9Qcm9qZWN0IiwiY29uc3RhbnQiLCJFTlYiLCJTVEFHRSIsIlBST0QiLCJlcnJvckNvbG9yIiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiZXJyb3JUeXBlIiwidHJhbnNwYXJlbmN5IiwibGFyZ2VJbWFnZVRocmVzaG9sZCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJvdGhlcndpc2UiLCJydW4iLCIkaHR0cCIsIiRjb21tb24iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZy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QUEsUUNoRUEvUyxJQUFBZ1QsS0FBQSxhQUFBLFFBQ0EsU0FBQS9SLEVBQUFnUyxHQUdBLEdBQUFDLEdBQUFELEVBQUFFLFNBQUFDLFFBQUFDLE1BQ0FILEdBQUEsZ0JBQUEsbUJBRUFqUyxFQUFBeUIsSUFBQSxvQkFBQSxTQUFBNFEsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTdLLEdBQ0EyRixRQUFBQyxJQUFBLG9CQUFBNUYiLCJmaWxlIjoibXVnLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1VRyA9IGFuZ3VsYXIubW9kdWxlKCdtdWdzaG90JywgWyd1aS5yb3V0ZXInLCAnbXVndGVtcGxhdGVzJ10pO1xuIiwiLyoqXG4gKiBmYWRlSW5cbiAqIEEgZGlyZWN0aXZlIGZvciBhbmltYXRpbmcgaW4gZWxlbWVudHNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnZmFkZUluJywgWyBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KGF0dHJzLmZhZGVJbikgfHwgMTA7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdmYWRlLWluJyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVsZW0uY3NzKFwib3BhY2l0eVwiLCBcIjFcIik7XG4gICAgICAgICAgICB9LCBvZmZzZXQpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsIi8qKlxuICogTW9kYWxcbiAqIEJ1aWxkcyBhIG1vZGFsIGZvciBpbWFnZSB2aWV3aW5nIGFuZCBjb21wYXJpbmdcbiAqXG4gKiBAdXNhZ2VcbiAqIDxtb2RhbD48L21vZGFsPlxuICovXG5NVUcuZGlyZWN0aXZlKCdtb2RhbCcsXG5bJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLFxuZnVuY3Rpb24oJHRpbWVvdXQsICRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAnbW9kYWwuaHRtbCcsXG4gICAgc2NvcGU6IHt9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyKSB7XG4gICAgICB2YXIgbW9kYWxBY3RpdmUgPSAnbW9kYWwtb3Blbic7XG4gICAgICB2YXIgbW9kYWxWaXNpYmxlID0gJ21vZGFsLXZpc2libGUnO1xuXG4gICAgICAkc2NvcGUuYWN0aXZlT3B0aW9uID0gJ292ZXJsYXknO1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHt9O1xuICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IHt9O1xuICAgICAgJHNjb3BlLnZpZXdlciA9IHtcbiAgICAgICAgaXRlbXM6IFtdXG4gICAgICB9O1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHtcbiAgICAgICAgYW1vdW50OiAwLjgsXG4gICAgICAgIGludmVyc2U6IDAuMixcbiAgICAgICAgcGVyY2VudDogJzgwJSdcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS4kd2F0Y2goJ29wYWNpdHlSYW5nZS5hbW91bnQnLCBmdW5jdGlvbihudiwgb3YpIHtcbiAgICAgICAgaWYgKG52ID09PSBvdikge3JldHVybjt9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBvdGhlciB2YWx1ZXNcbiAgICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZS5pbnZlcnNlID0gKDEgLSBudikudG9GaXhlZCgyKTtcbiAgICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZS5wZXJjZW50ID0gTWF0aC5yb3VuZChudiAqIDEwMCkgKyAnJSc7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hvb3NlIHRoZSB2aWV3ZXIgbGF5b3V0XG4gICAgICAkc2NvcGUub3B0aW9uTW9kZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZU9wdGlvbiA9IHR5cGU7XG5cbiAgICAgICAgLy8gaWYgKHR5cGUgPT09ICdvdmVybGF5Jykge1xuICAgICAgICAvLyB9XG5cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IG11bHRpcGxlIGl0ZW1zXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdiYXRjaCcgJiYgYXJncy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW1zWyRzY29wZS5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IGFyZ3MuaXRlbXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG4gICAgICB9O1xuXG4gICAgICAvLyBHbyBkaXJlY3RseSB0byBhbiBpdGVtXG4gICAgICAkc2NvcGUuZ29Ub0luZGV4ID0gZnVuY3Rpb24oaWR4KSB7XG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tpZHhdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaWR4O1xuICAgICAgfTtcblxuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogbXNnQ2VudGVyXG4gKiBhIGRpcmVjdGl2ZSBmb3IgaGFuZGxpbmcgYWxsIG1lc3NhZ2UgcmVsYXkgZm9yIGEgdXNlclxuICpcbiAqIFVTRTpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnTVNHQ0VOVEVSOkZJUkUnLCB7IG1zZzogXCJIZXkgdGhlcmUsIEltIGEgbWVzc2FnZSEhXCIsIGR1cjogNSwgdHlwZTogXCJpbmZvXCIsIGljb246IFwiaW5mb1wiLCBjYWxsYmFjazogZnVuY3Rpb24oKXt9IH0pO1xuICpcbiAqIFRZUEVTOlxuICogLSBERUZBVUxULCBzaG93cyBncmVlbiBtZXNzYWdlLCB1c2VkIGZvciBzdWNjZXNzXG4gKiAtIFdhcm5pbmc6IFwid2FyblwiIC0gc2hvd3Mgb3JhbmdlIG1lc3NhZ2UsIHVzZWQgZm9yIGVycm9ycyBvciB3YXJuaW5nc1xuICogLSBJbmZvOiBcImluZm9cIiAtIHNob3dzIGRhcmsgYmx1ZSBtZXNzYWdlLCB1c2VkIGZvciBnZW5lcmFsIHRoaW5nc1xuICpcbiAqIE9QVElPTlM6XG4gKiAtIG1zZzogdGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLCAoVE9ETzogY2FuIGJlIGh0bWwgb3Igc2ltcGxlIHRleHQpXG4gKiAtIGNhbGxiYWNrOiBhIGZ1bmN0aW9uIHRvIGZpcmUgb24gYWN0aW9uIHRha2VuIG9uIG1lc3NhZ2VcbiAqIC0gZHVyOiB0aGUgdGltZW91dCBvZiB0aGUgbWVzc2FnZVxuICogLSB0eXBlOiBzZWUgYWJvdmUgdHlwZXNcbiAqIC0gaWNvbjogZGVmYXVsdCBpcyBnbG9iZSwgY2FuIGJlIHNldCB0byBBTlkgaS1zcHJpdGVzIChzcHJpdGVzLmxlc3MpXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ21zZ0NlbnRlcicsXG5bIFwiJHJvb3RTY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJGNvbXBpbGVcIixcbmZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkdGltZW91dCwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgIHZhciBtc2dUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwibXNnXCIgbmctY2xpY2s9XCJhY3Rpb24oKVwiPicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctaWNuXCI+PGkgY2xhc3M9XCJpdyBpLUlDT05cIj48L2k+PC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1jb250XCI+Qk9EWTwvZGl2PicrXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJtc2ctYWN0aW9uXCI+PGkgY2xhc3M9XCJpYiBpLXItYXJyb3dcIj48L2k+PC9kaXY+JytcbiAgICAgICAgJzwvZGl2Pic7XG5cbiAgICAgIHZhciBfZWwgPSBhbmd1bGFyLmVsZW1lbnQoZWwpO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBwcmV2aW91c0lkID0gXCJcIjtcbiAgICAgIHZhciBkZWZhdWx0SWNvbiA9IFwiaW5mb1wiO1xuXG4gICAgICBzY29wZS5ib2R5ID0gXCJcIjtcbiAgICAgIHNjb3BlLmNhbGxiYWNrID0gbnVsbDtcbiAgICAgIHNjb3BlLmljb24gPSBkZWZhdWx0SWNvbjtcbiAgICAgIHNjb3BlLmFjdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBhY3Rpb25FbCA9IF9lbC5maW5kKFwiI1wiICsgdGhpcy5pZCk7XG4gICAgICAgIHNjb3BlLmNhbGxiYWNrKCk7XG4gICAgICAgIGNsZWFyRWwoIGFjdGlvbkVsICk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBzaG93TWVzc2FnZSAoIGRhdGEgKXtcbiAgICAgICAgdmFyIF9pZCA9ICgrbmV3IERhdGUoKSk7XG4gICAgICAgIHZhciBuZXdCb2R5ID0gZGF0YS5tc2c7XG4gICAgICAgIHZhciBuZXdJY24gPSAoZGF0YS5pY29uKT8gZGF0YS5pY29uIDogZGVmYXVsdEljb247XG5cbiAgICAgICAgdmFyIHRlbXBsYXRlID0gbXNnVGVtcGxhdGUucmVwbGFjZShcIkJPRFlcIiwgbmV3Qm9keSkucmVwbGFjZShcIklDT05cIiwgbmV3SWNuKTtcbiAgICAgICAgdmFyIG5ld01lc3NhZ2UgPSAkY29tcGlsZSh0ZW1wbGF0ZSkoc2NvcGUpO1xuXG4gICAgICAgIC8vIHNldCBhIHVuaXF1ZSBpZFxuICAgICAgICBuZXdNZXNzYWdlWzBdLmlkID0gX2lkO1xuICAgICAgICBwcmV2aW91c0lkID0gX2lkO1xuXG4gICAgICAgIC8vIHRocm93IGludG8gZG9tLCB0aGVuIHNob3cgaW4gdmlldywgc3RhcnQgdGltZXJcbiAgICAgICAgX2VsLmFwcGVuZCggbmV3TWVzc2FnZSApO1xuXG4gICAgICAgIC8vIHJlbWVtYmVyIHRoZSBuZXcgZWwgZm9yIGxhdGVyXG4gICAgICAgIHZhciBtc2dFbCA9IF9lbC5maW5kKFwiI1wiICsgX2lkKTtcbiAgICAgICAgY2hhbmdlVHlwZSggbXNnRWwsIGRhdGEudHlwZSApO1xuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIG1zZ0VsLmZpbmQoXCIubXNnLWFjdGlvblwiKS5hZGRDbGFzcyhcInNob3dcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG93XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1zZ0VsLmFkZENsYXNzKCdhZGQnKTtcbiAgICAgICAgfSwgMjApO1xuXG4gICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbGVhckVsKCBtc2dFbCApO1xuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRWwgKCBlbGVtICkge1xuICAgICAgICBpZighZWxlbSAmJiBwcmV2aW91c0lkKXtcbiAgICAgICAgICBlbGVtID0gX2VsLmZpbmQoXCIjXCIgKyBwcmV2aW91c0lkKTtcbiAgICAgICAgfSBlbHNlIGlmKCFlbGVtKSB7IHJldHVybjsgfVxuXG4gICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2FkZCcpO1xuICAgICAgICBlbGVtLmFkZENsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbSkucmVtb3ZlKCk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCB0aGUgdHlwZSBieSBhIGNsYXNzXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VUeXBlICggZWxlbSwgdHlwZSApIHtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLWluZm8nKTtcbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnbXNnLXdhcm4nKTtcblxuICAgICAgICBpZih0eXBlKXtcbiAgICAgICAgICBlbGVtLmFkZENsYXNzKCdtc2ctJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCdNU0dDRU5URVI6RklSRScsIGZ1bmN0aW9uKGUsIGRhdGEpe1xuICAgICAgICBpZighZGF0YS5tc2cpeyByZXR1cm47IH1cbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIGNsZWFyRWwoKTtcblxuICAgICAgICBpZihkYXRhLmR1cil7XG4gICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1ciAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihkYXRhLmNhbGxiYWNrKXtcbiAgICAgICAgICBzY29wZS5jYWxsYmFjayA9IGRhdGEuY2FsbGJhY2s7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TWVzc2FnZSggZGF0YSApO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ3RpbWVBZ28nLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZXJ2aWNlID0ge307XG5cbiAgc2VydmljZS5zZXR0aW5ncyA9IHtcbiAgICByZWZyZXNoTWlsbGlzOiA2MDAwMCxcbiAgICBhbGxvd0Z1dHVyZTogZmFsc2UsXG4gICAgc3RyaW5nczoge1xuICAgICAgcHJlZml4QWdvOiBudWxsLFxuICAgICAgcHJlZml4RnJvbU5vdzogbnVsbCxcbiAgICAgIHN1ZmZpeEFnbzogJ2FnbycsXG4gICAgICBzdWZmaXhGcm9tTm93OiAnZnJvbSBub3cnLFxuICAgICAgc2Vjb25kczogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsXG4gICAgICBtaW51dGU6ICdhYm91dCBhIG1pbnV0ZScsXG4gICAgICBtaW51dGVzOiAnJWQgbWludXRlcycsXG4gICAgICBob3VyOiAnYWJvdXQgYW4gaG91cicsXG4gICAgICBob3VyczogJyVkIGhvdXJzJyxcbiAgICAgIGRheTogJ2EgZGF5JyxcbiAgICAgIGRheXM6ICclZCBkYXlzJyxcbiAgICAgIG1vbnRoOiAnYWJvdXQgYSBtb250aCcsXG4gICAgICBtb250aHM6ICclZCBtb250aHMnLFxuICAgICAgeWVhcjogJ2Fib3V0IGEgeWVhcicsXG4gICAgICB5ZWFyczogJyVkIHllYXJzJyxcbiAgICAgIG51bWJlcnM6IFtdXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHRyaW1EaWdpdHMgKCBudW0gKSB7XG4gICAgICB2YXIgbSA9IG51bS50b1N0cmluZygpLnNsaWNlKDAsMTMpO1xuICAgICAgcmV0dXJuIChtLmxlbmd0aCA9PSAxMyk/IHBhcnNlSW50KG0pIDogbnVtO1xuICB9XG5cbiAgc2VydmljZS5pbldvcmRzID0gZnVuY3Rpb24gKGRpc3RhbmNlTWlsbGlzKSB7XG4gICAgdmFyICRsID0gc2VydmljZS5zZXR0aW5ncy5zdHJpbmdzO1xuICAgIHZhciBwcmVmaXggPSAkbC5wcmVmaXhBZ287XG4gICAgdmFyIHN1ZmZpeCA9ICRsLnN1ZmZpeEFnbztcbiAgICBpZiAoc2VydmljZS5zZXR0aW5ncy5hbGxvd0Z1dHVyZSkge1xuICAgICAgaWYgKGRpc3RhbmNlTWlsbGlzIDwgMCkge1xuICAgICAgICBwcmVmaXggPSAkbC5wcmVmaXhGcm9tTm93O1xuICAgICAgICBzdWZmaXggPSAkbC5zdWZmaXhGcm9tTm93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5hYnMoZGlzdGFuY2VNaWxsaXMpIC8gMTAwMDtcbiAgICB2YXIgbWludXRlcyA9IHNlY29uZHMgLyA2MDtcbiAgICB2YXIgaG91cnMgPSBtaW51dGVzIC8gNjA7XG4gICAgdmFyIGRheXMgPSBob3VycyAvIDI0O1xuICAgIHZhciB5ZWFycyA9IGRheXMgLyAzNjU7XG5cbiAgICBmdW5jdGlvbiBzdWJzdGl0dXRlKHN0cmluZ09yRnVuY3Rpb24sIG51bWJlcikge1xuICAgICAgdmFyIHN0cmluZyA9IGFuZ3VsYXIuaXNGdW5jdGlvbihzdHJpbmdPckZ1bmN0aW9uKSA/XG4gICAgICBzdHJpbmdPckZ1bmN0aW9uKG51bWJlciwgZGlzdGFuY2VNaWxsaXMpIDogc3RyaW5nT3JGdW5jdGlvbjtcbiAgICAgIHZhciB2YWx1ZSA9ICgkbC5udW1iZXJzICYmICRsLm51bWJlcnNbbnVtYmVyXSkgfHwgbnVtYmVyO1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8lZC9pLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgdmFyIHdvcmRzID0gc2Vjb25kcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwuc2Vjb25kcywgTWF0aC5yb3VuZChzZWNvbmRzKSkgfHxcbiAgICAgICAgc2Vjb25kcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwubWludXRlLCAxKSB8fFxuICAgICAgICBtaW51dGVzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGVzLCBNYXRoLnJvdW5kKG1pbnV0ZXMpKSB8fFxuICAgICAgICBtaW51dGVzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5ob3VyLCAxKSB8fFxuICAgICAgICBob3VycyA8IDI0ICYmIHN1YnN0aXR1dGUoJGwuaG91cnMsIE1hdGgucm91bmQoaG91cnMpKSB8fFxuICAgICAgICBob3VycyA8IDQyICYmIHN1YnN0aXR1dGUoJGwuZGF5LCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzAgJiYgc3Vic3RpdHV0ZSgkbC5kYXlzLCBNYXRoLnJvdW5kKGRheXMpKSB8fFxuICAgICAgICBkYXlzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aCwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDM2NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRocywgTWF0aC5yb3VuZChkYXlzIC8gMzApKSB8fFxuICAgICAgICB5ZWFycyA8IDEuNSAmJiBzdWJzdGl0dXRlKCRsLnllYXIsIDEpIHx8XG4gICAgICAgIHN1YnN0aXR1dGUoJGwueWVhcnMsIE1hdGgucm91bmQoeWVhcnMpKTtcblxuICAgIHZhciBzZXBhcmF0b3IgPSAkbC53b3JkU2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnICcgOiAkbC53b3JkU2VwYXJhdG9yO1xuICAgIHJldHVybiBbcHJlZml4LCB3b3Jkcywgc3VmZml4XS5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICB9O1xuXG4gIHNlcnZpY2UucGFyc2UgPSBmdW5jdGlvbiAoaXNvODYwMSkge1xuICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGlzbzg2MDEpKSB7XG4gICAgICBpc284NjAxID0gaXNvODYwMSArIFwiXCI7XG4gICAgICAvLyBmb3JtYXQgZm9yIGNvcnJlY3QgbGVuZ3RoXG4gICAgICB2YXIgb3JpZ2luYWxUaW1lc3RhbXAgPSB0cmltRGlnaXRzKCBpc284NjAxICk7XG4gICAgICByZXR1cm4gcGFyc2VJbnQob3JpZ2luYWxUaW1lc3RhbXAsIDEwKTtcbiAgICB9XG4gICAgdmFyIHMgPSAoaXNvODYwMSB8fCAnJykudHJpbSgpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1xcLlxcZCsvLCAnJyk7IC8vIHJlbW92ZSBtaWxsaXNlY29uZHNcbiAgICBzID0gcy5yZXBsYWNlKC8tLywgJy8nKS5yZXBsYWNlKC8tLywgJy8nKTtcbiAgICBzID0gcy5yZXBsYWNlKC9ULywgJyAnKS5yZXBsYWNlKC9aLywgJyBVVEMnKTtcbiAgICBzID0gcy5yZXBsYWNlKC8oW1xcK1xcLV1cXGRcXGQpXFw6PyhcXGRcXGQpLywgJyAkMSQyJyk7IC8vIC0wNDowMCAtPiAtMDQwMFxuICAgIHJldHVybiBuZXcgRGF0ZShzKTtcbiAgfTtcblxuICByZXR1cm4gc2VydmljZTtcbn0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcblxuTVVHLmZhY3RvcnkoJ0NvbXBhcmUnLFxuWyckcScsICdDb25maWcnLFxuZnVuY3Rpb24oJHEsIENvbmZpZykge1xuICAvLyBDb25maWcgdGhlIG1haW4gcGF0aHNcbiAgdmFyIHJlZmVyZW5jZVBhdGggPSBfX2Rpcm5hbWUgKyAnc2NyZWVucy9yZWZlcmVuY2UvJztcbiAgdmFyIGNvbXBhcmVQYXRoID0gX19kaXJuYW1lICsgJ3NjcmVlbnMvY29tcGFyZS8nO1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmVTaW5nbGUoYSwgYikge1xuICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBvdXRwdXQgPSB7fTtcblxuICAgIC8vIEFwcGx5IE1haW4gQ29tcGFyZSBDb25maWdcbiAgICByZXNlbWJsZS5vdXRwdXRTZXR0aW5ncyhDb25maWcuQ29tcGFyZSk7XG5cbiAgICAvLyBSdW4gdGhlIGNvbXBhcmUgZnVuY3Rpb24sIHJldHVybiB0aGUgZGlmZiBkYXRhXG4gICAgcmVzZW1ibGUoYSlcbiAgICAgIC5jb21wYXJlVG8oYilcbiAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKGRpZmZEYXRhKSB7XG4gICAgICAgIG91dHB1dC5yZXBvcnQgPSBKU09OLnN0cmluZ2lmeShkaWZmRGF0YSk7XG4gICAgICAgIG91dHB1dC5zcmMgPSBkaWZmRGF0YS5nZXRJbWFnZURhdGFVcmwoKTtcblxuICAgICAgICBkZmQucmVzb2x2ZShvdXRwdXQpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gZGZkLnByb21pc2U7XG4gIH07XG5cbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHR3byBpbWFnZXMgYW5kIHJldHVybnMgYWxsIGRhdGEgd2l0aCBhbiBpbWFnZSBvZiBjaGFuZ2VzXG4gICAgICovXG4gICAgcnVuU2luZ2xlOiBjb21wYXJlU2luZ2xlXG4gIH07XG59XSk7XG4iLCJNVUcuZmFjdG9yeSgnbm93VGltZScsXG5bJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gIHZhciBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgdmFyIHVwZGF0ZVRpbWUgPSBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG5vd1RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdXBkYXRlVGltZSgpO1xuICAgIH0sIDEwMDApO1xuICB9O1xuXG4gIHVwZGF0ZVRpbWUoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRUaW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBub3dUaW1lO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5mYWN0b3J5KCdQcm9qZWN0cycsXG5bJyRxJyxcbmZ1bmN0aW9uKCRxKSB7XG4gIC8vIENvbmZpZyB0aGUgbWFpbiBwYXRoc1xuICB2YXIgcHJvamVjdHNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy5qc29uJztcbiAgdmFyIHByb2plY3RGaWxlc1BhdGggPSBfX2Rpcm5hbWUgKyAnL3Byb2plY3RzLyc7XG5cbiAgLy8gQ3JlYXRlcyBhIFVVSUQgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGhcbiAgZnVuY3Rpb24gY3JlYXRlVVVJRChzKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKHR5cGVvZiBzID09ICdudW1iZXInICYmIHMgPT09IHBhcnNlSW50KHMsIDEwKSkge1xuICAgICAgcyA9IEFycmF5KHMgKyAxKS5qb2luKCd4Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMucmVwbGFjZSgveC9nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNjEpICsgNDg7XG4gICAgICBuID0gbiA+IDU3ID8gKG4gKyA3ID4gOTAgPyBuICsgMTMgOiBuICsgNykgOiBuO1xuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUobik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDcmVhdGVzIGEgSlNPTiBvYmplY3QgZm9yIGEgYmFzZWxpbmUgbmV3IHByb2plY3RcbiAgZnVuY3Rpb24gY3JlYXRlRHVtbXlQcm9qZWN0KHRvdGFsKSB7XG4gICAgdG90YWwgPSB0b3RhbCB8fCAwO1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgIHRpdGxlOiAnUHJvamVjdCAnICsgKHBhcnNlSW50KHRvdGFsLCAxMCkgKyAxKSxcbiAgICAgIHRpbWVzdGFtcDogKCtuZXcgRGF0ZSksXG4gICAgICB0b3RhbHM6IHtcbiAgICAgICAgc3VjY2VzczogbnVsbCxcbiAgICAgICAgd2FybmluZzogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHZpZXdzOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIFNldHMgdXAgdGhlIG5lZWRlZCBiYXNlIGRhdGEgZm9yIHN0b3JpbmcgYW4gaW5kaXZpZHVhbCBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdEZpbGUob3B0aW9ucykge1xuICAgIHZhciBwcm9qZWN0SWQgPSBjcmVhdGVVVUlEKDEyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSxcbiAgICAgIHRpbWVzdGFtcDogb3B0aW9ucy50aW1lc3RhbXAsXG4gICAgICB2aWV3cG9ydHM6IFtdLFxuICAgICAgc2VsZWN0b3JzOiBbXSxcbiAgICAgIGNvb2tpZXM6IFtdLFxuICAgICAgbWV0YToge1xuICAgICAgICB1cmw6IG51bGwsXG4gICAgICAgIHJlYWR5RXZlbnQ6IG51bGwsXG4gICAgICAgIGRlbGF5OiBudWxsLFxuICAgICAgICBtaXNNYXRjaFRocmVzaG9sZDogbnVsbFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBHcmFicyBKU09OIGZpbGUgYW5kIGFwcHJvcHJpYXRlbHkgaGFuZGxlcyBlcnJvcnNcbiAgZnVuY3Rpb24gZ2V0SnNvbkZpbGUocGF0aCwgdHlwZSkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGUgPSBmcy5yZWFkRmlsZVN5bmMocGF0aCwgJ3V0ZjgnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBjb3VsZG4ndCBmaW5kIGZpbGVcbiAgICAgIGlmIChlLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICAgIHJldHVybiB0eXBlIHx8IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5wYXJzZShmaWxlKTtcbiAgfVxuXG4gIHJldHVybiB7XG5cbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuICAgIH0sXG5cbiAgICBnZXRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicpO1xuICAgIH0sXG5cbiAgICBnZXRUeXBlQnlJZDogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnXycgKyB0eXBlICsgJy5qc29uJywgW10pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgbmV3IHByb2plY3QsIGFuZCByZXR1cm5zIHRoZSBkYXRhIGluIGEgcHJvbWlzZVxuICAgICAqL1xuICAgIGNyZWF0ZU5ldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHByb2plY3RzUGF0aCwgJ3V0ZjgnKSk7XG4gICAgICB2YXIgbmV3UHJvamVjdERhdGEgPSBjcmVhdGVEdW1teVByb2plY3QoYWxsUHJvamVjdHMubGVuZ3RoKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RmlsZSA9IGNyZWF0ZUR1bW15UHJvamVjdEZpbGUobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICBhbGxQcm9qZWN0cy51bnNoaWZ0KG5ld1Byb2plY3REYXRhKTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgZnMud3JpdGVGaWxlKHByb2plY3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGRmZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFzIGFuIGluZGl2aWR1YWwgZmlsZVxuICAgICAgICBmcy53cml0ZUZpbGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJy5qc29uJywgSlNPTi5zdHJpbmdpZnkobmV3UHJvamVjdEZpbGUpLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkZmQucmVqZWN0KGVycik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVkaXJlY3QgdXNlciB0byB0aGUgc2V0dGluZ3MgcGFnZVxuICAgICAgICAgIGRmZC5yZXNvbHZlKG5ld1Byb2plY3REYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlIHRvIGZpbGUgYW5kIGxpc3RzLCByZXR1cm4gbGlzdCBkYXRhXG4gICAgc2F2ZTogZnVuY3Rpb24ocHJvamVjdERhdGEpIHtcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0RGF0YS5pZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGl0bGUgPSBwcm9qZWN0RGF0YS50aXRsZTtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9ICgrbmV3IERhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gc2F2ZSBhcyBhbiBpbmRpdmlkdWFsIGZpbGVcbiAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0RGF0YSksIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJldHVybiB0aGUgbGlzdGluZyBkYXRhLCBzbyB3ZSBjYW4gdXBkYXRlIHRoZSBzaWRlcGFuZWxcbiAgICAgICAgICBkZmQucmVzb2x2ZShwcm9qZWN0RGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlcyBhIHNpbmdsZSBwcm9qZWN0IGJ5IElEXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwcm9qZWN0c1BhdGgsICd1dGY4JykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpc3RpbmcgZGF0YVxuICAgICAgYWxsUHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgIGlmIChvYmouaWQgPT09IGlkKSB7XG4gICAgICAgICAgYWxsUHJvamVjdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIHByb2plY3QgZmlsZVxuICAgICAgZnMudW5saW5rKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlzdGluZyBkYXRhXG4gICAgICAgIGZzLndyaXRlRmlsZShwcm9qZWN0c1BhdGgsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJldHVyblxuICAgICAgICAgIGRmZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJNVUcuZmlsdGVyKCd0aW1lQWdvJyxcblsnbm93VGltZScsICd0aW1lQWdvJyxcbmZ1bmN0aW9uIChub3dUaW1lLCB0aW1lQWdvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgZnJvbVRpbWUgPSB0aW1lQWdvLnBhcnNlKHZhbHVlKTtcbiAgICB2YXIgZGlmZiA9IG5vd1RpbWUuZ2V0VGltZSgpIC0gZnJvbVRpbWU7XG4gICAgcmV0dXJuIHRpbWVBZ28uaW5Xb3JkcyhkaWZmKTtcbiAgfTtcbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdNYWluQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdDb25maWcnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIENvbmZpZywgUHJvamVjdHMpIHtcbiAgJHJvb3RTY29wZS5jdXJyZW50UHJvamVjdElkID0gJyc7XG5cbiAgJHNjb3BlLmNyZWF0ZU5ld1Byb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICBQcm9qZWN0cy5jcmVhdGVOZXcoKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdTSURFUEFORUw6TkVXUFJPSkVDVCcsIHJlcyk7XG4gICAgICAkc3RhdGUuZ28oJ3Byb2plY3RzLnNldHRpbmdzJywgeyBpZDogcmVzLmlkIH0pO1xuICAgIH0sXG5cbiAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJNVUcuY29udHJvbGxlcignUHJvamVjdEN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG5cbiAgLy8gQWxsb3cgdGhlIGNoaWxkIHZpZXdzIHRvIGJpbmQgdG8gc2FtZSBzY29wZVxuICAkcm9vdFNjb3BlLnByb2plY3QgPSBQcm9qZWN0cy5nZXRCeUlkKCRzdGF0ZVBhcmFtcy5pZCk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0SGlzdG9yeUN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnUHJvamVjdHMnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAnQWxsJztcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gJyc7XG5cbiAgLy8gZ3JhYiBhbGwgdGhlIGhpc3RvcnkgZGF0YVxuICAkc2NvcGUuaGlzdG9yeUl0ZW1zID0gUHJvamVjdHMuZ2V0VHlwZUJ5SWQoJHN0YXRlUGFyYW1zLmlkLCAnaGlzdG9yeScpO1xuXG4gICRzY29wZS5jaGFuZ2VGaWx0ZXIgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9IHR5cGU7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlclF1ZXJ5ID0gKHR5cGUgPT0gJ0FsbCcpID8gJycgOiB0eXBlO1xuICB9O1xuXG4gICRzY29wZS5wcmV2aWV3SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAncHJldmlldycsIGl0ZW06IGl0ZW0sIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RSdW5uZXJDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJHN0YXRlUGFyYW1zJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1NldHRpbmdzID0gdHJ1ZTsgLy8gVE9ETzogbWFrZSB0aGlzIHJlYWxcbiAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IHRydWU7IC8vIFRPRE86IG1ha2UgdGhpcyByZWFsXG4gICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAnQWxsJztcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBbXTtcbiAgJHNjb3BlLmFjdGl2ZURhdGEgPSB7fTtcbiAgJHNjb3BlLmN1cnJlbnRCYXRjaCA9ICRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggfHwgMDtcbiAgJHNjb3BlLnByb2dyZXNzID0ge1xuICAgIHBlcmNlbnQ6IDBcbiAgfTtcblxuICAvLyBTZXQgdGhlIGFjdGl2ZSBkYXRhIGJhc2VkIG9uIGN1cnJlbnRCYXRjaFxuICAkc2NvcGUuYWN0aXZlRGF0YSA9ICRyb290U2NvcGUucHJvamVjdC5iYXRjaEhpc3RvcnlbJHNjb3BlLmN1cnJlbnRCYXRjaF07XG5cbiAgLy8gUHV0cyBkYXRhIGludG8gc29ydGVkIHNlY3Rpb25zXG4gIGZ1bmN0aW9uIHByb2Nlc3NCYXRjaChhbGxEYXRhKSB7XG4gICAgdmFyIGZvcm1hdHRlZCA9IFt7IHR5cGU6ICdzdWNjZXNzJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnd2FybmluZycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ2Vycm9yJywgaXRlbXM6IFtdfV07XG5cbiAgICBmdW5jdGlvbiBwbGFjZUl0ZW0oaXRlbSkge1xuXG4gICAgICAvLyBLZWVwIHRoaW5ncyBvcmdhbml6ZXMgd2l0aCBwcmVzZXQgcHJpb3JpdHlcbiAgICAgIGlmIChpdGVtLnN0YXR1cykge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gMDtcblxuICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICB0YXJnZXQgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgIHRhcmdldCA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdHRlZFt0YXJnZXRdLml0ZW1zLnVuc2hpZnQoaXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxsRGF0YS5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouYmF0Y2ggPT09ICRzY29wZS5jdXJyZW50QmF0Y2gpIHtcbiAgICAgICAgcGxhY2VJdGVtKG9iaik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkO1xuICB9XG5cbiAgLy8gVE9ETzpcbiAgLy8gKiBQcm9ncmVzcyBCYXJcbiAgLy8gICAqIExpc3RlbiB0byBQcm9ncmVzcyBldmVudFxuICAvLyAqIEludHJvXG4gIC8vICAgKiBzZWUgbGFzdCBydW4gKGlmIGFueSlcbiAgLy8gICAqIHN0YXJ0IG5ldyBydW5cbiAgLy8gICAqIHN0YXJ0IHJlZmVyZW5jZVxuICAvLyAqIFN0YXRzIChwYXNzL2ZhaWwpXG4gIC8vICAgKiBJbWFnZXMgd2l0aCBjbGljayBjb21wYXJlXG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgfTtcblxuICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICB2YXIgaGlzdG9yeURhdGEgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgLy8gU3RvcmUgdGhlIHByb2Nlc3NlZCBkYXRhIGludG8gdGhlIGJhdGNoIGRhdGFcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuXG4gIC8vIEZpcmUgb2ZmIHRoZSB2aWV3ZXJcbiAgJHNjb3BlLnByZXZpZXdCYXRjaCA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgJHJvb3RTY29wZS4kZW1pdCgnTU9EQUw6T1BFTicsIHsgdHlwZTogJ2JhdGNoJywgaXRlbXM6IGl0ZW1zLCBwcm9qZWN0OiAkcm9vdFNjb3BlLnByb2plY3QgfSk7XG4gIH07XG5cbiAgLy8gVE9ETzogZmluaXNoXG4gIC8vIEZpcmUgb2ZmIGEgbmV3IHRlc3QhIVxuICAkc2NvcGUucnVuTmV3VGVzdCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gdHJ1ZTtcblxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSAxMjtcbiAgICB9LCAyMDApO1xuXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MucGVyY2VudCA9IDU2O1xuICAgIH0sIDcwMCk7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcy5wZXJjZW50ID0gOTM7XG4gICAgfSwgMTgwMCk7XG5cbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgfSwgMjAwMCk7XG4gIH07XG5cbiAgJHJvb3RTY29wZS4kb24oJ1JVTk5FUjpQUk9HUkVTUzpVUERBVEUnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzKSB7cmV0dXJuO31cblxuICAgIC8vIHVwZGF0ZSB0aGUgcHJvZ3Jlc3MhXG4gICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSBwYXJzZUludChhcmdzLnBlcmNlbnQsIDEwKTtcbiAgfSk7XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0U2V0dGluZ3NDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICB2YXIgc2F2ZVRpbWVyO1xuXG4gICRzY29wZS5zZWxlY3RvclR5cGVzID0gWydjb250YWluZXInLCAnaGlkZScsICdyZW1vdmUnXTtcbiAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuICBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0LCAkc2NvcGUubWFzdGVyKTtcblxuICBmdW5jdGlvbiBhZGROZXdUeXBlKHR5cGUsIGRhdGEpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0ucHVzaChkYXRhKTtcbiAgfVxuXG4gIC8vIFdhdGNoIGZvciBjaGFuZ2VzLCBzbyB3ZSBjYW4gc2F2ZVxuICAkc2NvcGUuJHdhdGNoKCdwcm9qZWN0JywgZnVuY3Rpb24oblYsIG9WKSB7XG4gICAgaWYgKG5WICE9IG9WKSB7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgICAkc2NvcGUuc2F2ZSgpO1xuICAgIH1cbiAgfSwgdHJ1ZSk7XG5cbiAgLy8gVE9ETzogc2V0dXAgdmFsaWRhdGlvbnNcbiAgLy8gc2F2ZSB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNhdmVUaW1lcikge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChzYXZlVGltZXIpO1xuICAgIH1cblxuICAgIC8vIHRocm90dGxlIHRoZSBzYXZlcywgc2luY2Ugd2Ugc2F2ZSBvbiBhbnkgY2hhbmdlc1xuICAgIHNhdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8vIFNhdmUgdGVoIHByb2plY3RvaWRcbiAgICAgIFByb2plY3RzLnNhdmUoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNpZGViYXIgd2l0aCBjaGFuZ2VzXG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsIHJlcyk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJldmVydCBtb2RlbFxuICAgICAgICAgIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sIDIwMCk7XG4gIH07XG5cbiAgLy8gcmV2ZXJ0IHRoZSBjdXJyZW50IHByb2plY3RcbiAgJHNjb3BlLmNhbmNlbFNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbGVhciBhbGwgeW91ciBjaGFuZ2VzPycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICAvLyBwdXQgcmV2ZXJ0IG1vZGVsIGludG8gdGhlIHByb2plY3QgbW9kZWxcbiAgICAgIGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICAgICAgJHNjb3BlLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZGVsZXRlIHRoZSBwcm9qZWN0LCBhbmQgcmVtb3ZlIGZyb20gcHJvamVjdCBsaXN0cywgdGhlbiByZWRpcmVjdCB0byBtYWluXG4gICRzY29wZS5kZWxldGVQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN1cmUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdD8nKTtcbiAgICBpZiAoc3VyZSkge1xuICAgICAgdmFyIHByb2plY3RJRCA9ICRyb290U2NvcGUucHJvamVjdC5pZDtcblxuICAgICAgUHJvamVjdHMucmVtb3ZlKHByb2plY3RJRClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlJFTU9WRScsIHsgaWQ6IHByb2plY3RJRCB9KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ21haW4nKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnByb2plY3QgPSB7fTtcbiAgICAgICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IHZpZXdwb3J0IGl0ZW1cbiAgJHNjb3BlLmFkZFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1ZpZXdwb3J0ID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3ZpZXdwb3J0cycsIG5ld1ZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IHNlbGVjdG9yIGl0ZW1cbiAgJHNjb3BlLmFkZFNlbGVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1NlbGVjdG9yID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgdHlwZTogJ2NvbnRhaW5lcicsXG4gICAgICBxdWVyeTogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdzZWxlY3RvcnMnLCBuZXdTZWxlY3Rvcik7XG4gIH07XG5cbiAgLy8gQWRkcyBhIG5ldyBjb29raWUgaXRlbVxuICAkc2NvcGUuYWRkQ29va2llID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0Nvb2tpZSA9IHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIG5hbWU6IG51bGwsXG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHBhdGg6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgnY29va2llcycsIG5ld0Nvb2tpZSk7XG4gIH07XG5cbiAgLy8gYWN0aXZhdGUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmFjdGl2YXRlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPSAoJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09IHRydWUgfHwgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdW2lkXS5hY3RpdmUgPT09ICd0cnVlJykgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgY29va2llL3ZpZXcvc2VsZWN0XG4gICRzY29wZS5kZWxldGVUeXBlSXRlbSA9IGZ1bmN0aW9uKHR5cGUsIGlkKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0W3R5cGVdLnNwbGljZShpZCwgMSk7XG5cbiAgICAvLyBzYXZlIHRoZSBmaWxlIGZvciBjb252ZW5pZW5jZVxuICAgICRzY29wZS5zYXZlKCk7XG4gIH07XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5jb250cm9sbGVyKCdTaWRlUGFuZWxDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICAkc2NvcGUucHJvamVjdHMgPSBbXTtcblxuICAvLyBncmFiIGFsbCBwcm9qZWN0cyBsaXN0XG4gICRzY29wZS5wcm9qZWN0cyA9IFByb2plY3RzLmdldEFsbCgpO1xuXG4gIC8vIGFkZCBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOk5FV1BST0pFQ1QnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLnVuc2hpZnQoYXJncyk7XG4gIH0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOlVQREFURScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmlkID09PSBhcmdzLmlkKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdID0gYXJncztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdXBkYXRlIHRoZSBwcm9qZWN0cyBsaXN0XG4gICRyb290U2NvcGUuJG9uKCdTSURFUEFORUw6UkVNT1ZFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5pZCkgeyByZXR1cm47IH1cblxuICAgICRzY29wZS5wcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgIGlmIChvYmouaWQgPT09IGFyZ3MuaWQpIHtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAkc2NvcGUuZ29Ub1Byb2plY3QgPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciB0eXBlID0gJ3NldHRpbmdzJztcblxuICAgIC8vIFRPRE86IHNldHVwIHRvIGZpZ3VyZSBvdXQgaWYgd2UgbmVlZCB0byBnbyB0byBzZXR0aW5ncywgb3RoZXJ3aXNlIGdvIHRvIHJ1bm5lclxuICAgICRzdGF0ZS5nbygncHJvamVjdHMuJyArIHR5cGUsIHsgaWQ6IGlkIH0pO1xuICAgICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9IGlkO1xuICB9XG5cbn1dKTtcbiIsIi8qKlxuICogQ29uZmlnXG4gKi9cbk1VRy5jb25zdGFudCgnQ29uZmlnJywge1xuICBFTlY6ICdTVEFHRScsXG4gIFNUQUdFOiB7XG4gIH0sXG4gIFBST0Q6IHtcbiAgfSxcbiAgQ29tcGFyZToge1xuICAgIGVycm9yQ29sb3I6IHtcbiAgICAgIHJlZDogMCxcbiAgICAgIGdyZWVuOiAyNTUsXG4gICAgICBibHVlOiAyNTVcbiAgICB9LFxuICAgIGVycm9yVHlwZTogJ21vdmVtZW50JyxcbiAgICB0cmFuc3BhcmVuY3k6IDAuMSxcbiAgICBsYXJnZUltYWdlVGhyZXNob2xkOiAxMjAwLFxuICAgIG1pc01hdGNoVGhyZXNob2xkOiAxXG4gIH1cbn0pO1xuIiwiTVVHLmNvbmZpZyhcblsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcbmZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAvLyBSb3V0ZXNcbiAgLy8gL1xuICAvLyAvcHJvamVjdHNcbiAgLy8gL3Byb2plY3RzLzppZC9ydW5uZXJcbiAgLy8gL3Byb2plY3RzLzppZC9oaXN0b3J5XG4gIC8vIC9wcm9qZWN0cy86aWQvc2V0dGluZ3NcblxuICAkc3RhdGVQcm92aWRlclxuXG4gIC8qKlxuICAgKiBCYXNlIFJvdXRlXG4gICAqL1xuICAuc3RhdGUoJ21haW4nLCB7XG4gICAgdXJsOiAnLycsXG4gICAgdGVtcGxhdGVVcmw6ICdtYWluLmh0bWwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFByb2plY3QgUm91dGVzXG4gICAqL1xuICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgIHVybDogJy9wcm9qZWN0cy86aWQnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnNldHRpbmdzJywge1xuICAgIHVybDogJy9zZXR0aW5ncycsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5zZXR0aW5ncy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFNldHRpbmdzQ3RybCdcbiAgfSlcbiAgLnN0YXRlKCdwcm9qZWN0cy5ydW5uZXInLCB7XG4gICAgdXJsOiAnL3J1bm5lcicsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5ydW5uZXIuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1Byb2plY3RSdW5uZXJDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLmhpc3RvcnknLCB7XG4gICAgdXJsOiAnL2hpc3RvcnknLFxuICAgIHRlbXBsYXRlVXJsOiAncHJvamVjdHMuaGlzdG9yeS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEhpc3RvcnlDdHJsJ1xuICB9KVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUm91dGVzXG4gICAqL1xuXG4gIC8vIC5zdGF0ZSgnbWFpbi40MDQnLCB7XG4gIC8vICAgICB1cmw6IFwiLzQwNFwiLFxuICAvLyAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzLzQwNC5odG1sXCIsXG4gIC8vICAgICBpc0V4dGVybmFsOiB0cnVlXG4gIC8vIH0pXG5cbiAgLy8gRW5kIG9mIHRoZSB3b3JsZFxuICA7XG5cbiAgLy8gdXJsIHJlLXJvdXRpbmdcbiAgLy8gJHVybFJvdXRlclByb3ZpZGVyXG4gIC8vICAgLndoZW4oJy9wcm9qZWN0cycsICcvJylcbiAgLy8gICAud2hlbignL3Byb2plY3RzLycsICcvJyk7XG5cbiAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufV0pO1xuIiwiTVVHLnJ1bihbJyRyb290U2NvcGUnLCAnJGh0dHAnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJGh0dHApIHtcblxuICAvLyBoZWFkZXJzXG4gIHZhciAkY29tbW9uID0gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb247XG4gICRjb21tb25bJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCckc3RhdGVDaGFuZ2VFcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==