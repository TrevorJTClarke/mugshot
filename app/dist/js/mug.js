var MUG=angular.module("mugshot",["ui.router","mugtemplates"]);MUG.directive("alert",["$rootScope","$timeout","$compile","$templateCache",function(e,t,r,n){return{restrict:"E",replace:!0,template:'<div class="alert-parent"></div>',scope:{},link:function(o,c,i,a){function s(n){var o=+new Date,c=(n.title,n.icon?n.icon:null,e.$new(!0));c.alert={},c.alert.id=o,c.alert.icon=n.icon?n.icon:null,c.alert.type=n.type?n.type:"info",c.alert.title=n.title,c.alert.action=n.callback?function(){this.id;n.callback(),u(this)}:null;var i=r(p)(c);i[0].id=o,d=o,f.append(i),i.addClass(h),t(function(){i.addClass(v)},20),l=t(function(){u(i)},m)}function u(e){if(!e&&d)e=angular.element(document.getElementById(d));else{if(!e)return;e&&(e=angular.element(e))}e.removeClass(v),t(function(){e.remove()},300)}var l,p=n.get("alert.html"),f=angular.element(c),m=5e3,d="",h="alert-active",v="alert-visible";e.$on("ALERT:FIRE",function(e,t){t.title&&(window.clearTimeout(l),u(),t.dur&&(m=1e3*t.dur),s(t))})}}}]),MUG.directive("fadeIn",[function(){return{restrict:"A",link:function(e,t,r){var n=parseInt(r.fadeIn)||10;t.addClass("fade-in"),setTimeout(function(){t.css("opacity","1")},n)}}}]),MUG.directive("modal",["$timeout","$compile","$rootScope",function(e,t,r){return{restrict:"E",replace:!0,templateUrl:"modal.html",scope:{},link:function(e,t,n){function o(t){var n=t.remoteSource?t.remoteSource:t.source;e.compareItem.a=t.remoteSource?n:"screens/reference/"+r.project.id+"/"+n.replace(r.project.currentBatch+".png",r.project.currentReference+".png"),e.compareItem.b=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n,e.compareItem.c=t.remoteSource?n:"screens/compare/"+r.project.id+"/"+n.replace(".png","_diff.png")}var c="modal-open",i="modal-visible";e.project=angular.copy(r.project),e.activeOption="sides",e.opacityRange={},e.currentIndex=0,e.activeItem={},e.compareItem={a:"",b:"",c:""},e.viewer={items:[]},e.opacityRange={amount:.8,inverse:.2,percent:"80%"},e.$watch("opacityRange.amount",function(t,r){t!==r&&(e.opacityRange.inverse=(1-t).toFixed(2),e.opacityRange.percent=Math.round(100*t)+"%")}),e.optionMode=function(t){e.activeOption=t},r.$on("MODAL:CLOSE",function(t,r){e.close()}),r.$on("MODAL:OPEN",function(n,a){a&&a.type&&(e.currentIndex=0,e.project=angular.copy(r.project),"preview"===a.type&&(e.activeItem=a.item,e.viewer=a.project||{},e.viewer.items=null,e.compareItem.a=e.activeItem.remoteSource?e.activeItem.remoteSource:"screens/"+e.activeItem.type+"/"+r.project.id+"/"+e.activeItem.source),"batch"===a.type&&a.items.length>0&&(e.activeItem=a.items[e.currentIndex],e.viewer=a.project||{},e.viewer.items=a.items,o(e.activeItem)),t.addClass(c),setTimeout(function(){t.addClass(i)},30))}),e.close=function(){t.removeClass(i),setTimeout(function(){t.removeClass(c)},230)},e.modalActionNav=function(t){if(!(e.viewer.items.length<1)){var r,n=e.viewer.items.length-1;r="right"===t?e.currentIndex===n?0:e.currentIndex+1:0===e.currentIndex?n:e.currentIndex-1,e.activeItem=e.viewer.items[r],e.currentIndex=r,o(e.activeItem)}},e.goToIndex=function(t){e.currentIndex!==t&&(e.activeItem=e.viewer.items[t],e.currentIndex=t,o(e.activeItem))}}}}]),MUG.directive("msgCenter",["$rootScope","$timeout","$compile",function(e,t,r){return{scope:{},link:function(n,o,c,i){function a(e){var o=+new Date,c=e.msg,i=e.icon?e.icon:h,a=p.replace("BODY",c).replace("ICON",i),v=r(a)(n);v[0].id=o,d=o,f.append(v);var g=f.find("#"+o);u(g,e.type),e.callback&&g.find(".msg-action").addClass("show"),t(function(){g.addClass("add")},20),l=t(function(){s(g)},m)}function s(e){if(!e&&d)e=f.find("#"+d);else if(!e)return;e.removeClass("add"),e.addClass("remove"),t(function(){angular.element(e).remove()},300)}function u(e,t){e.removeClass("msg-info"),e.removeClass("msg-warn"),t&&e.addClass("msg-"+t)}var l,p='<div class="msg" ng-click="action()"><div class="msg-icn"><i class="iw i-ICON"></i></div><div class="msg-cont">BODY</div><div class="msg-action"><i class="ib i-r-arrow"></i></div></div>',f=angular.element(o),m=5e3,d="",h="info";n.body="",n.callback=null,n.icon=h,n.action=function(){var e=f.find("#"+this.id);n.callback(),s(e)},e.$on("MSGCENTER:FIRE",function(e,t){t.msg&&(window.clearTimeout(l),s(),t.dur&&(m=1e3*t.dur),t.callback&&(n.callback=t.callback),a(t))})}}}]);var P=require("./core/preloader");MUG.directive("preloader",["$rootScope","$timeout",function(e,t){function r(e){var t=0,r=0,o=0,c=12;if(e.selectors&&e.selectors.length>0)for(var i=0;i<e.selectors.length;i++)e.selectors[i]&&"container"===e.selectors[i].type&&(o+=1);e.viewports&&e.viewports.length>0&&(r=e.viewports.length),e.meta&&e.meta.delay&&(t=parseInt(e.meta.delay,10)),n=c*r*o+30}var n=30;return{replace:!0,restrict:"E",scope:{},template:'<div class="preloader"></div>',link:function(o,c,i,a){function s(e,t){if(t&&t.msg){if(t.project&&r(t.project),!h)return h=!0,void(f=setTimeout(function(){h=!1},10*n));m=t.msg;var o;switch(m){case"Opening Browser Session":o=0;break;case"Capturing Screens":o=1}m!==d&&l&&l.animate&&l.animate(o,n,function(){d=m})}}function u(){l.resetBrowser()}var l,p,f,m,d,h=!1;t(function(){l=new P.Browser,l.init(),p=document.querySelector(".preloader"),p.appendChild(l.instance),l.drawBrowser()},30),e.$on("PRELOADER:UPDATE",s),e.$on("PRELOADER:OFF",u)}}}]),MUG.directive("timeAgo",["timeAgoService","nowTimeService",function(e,t){return{restrict:"EA",link:function(r,n,o){var c;o.$observe("fromTime",function(t){c=e.parse(t)}),r.$watch(function(){return t.getTime()-c},function(t){angular.element(n).text(e.inWords(t))})}}}]);var fs=require("fs"),async=require("async");MUG.factory("Compare",["$q","Config",function(e,t){function r(e,t){fs.readFile(o+e,"base64",t)}function n(n,o){var i=e.defer(),a={};return resemble.outputSettings(t.Compare),async.map([n,o],r,function(e,t){var r=c+t[0],n=c+t[1];e&&i.reject(e),resemble(r).compareTo(n).ignoreColors().onComplete(function(e){a.report=e,a.src=e.getImageDataUrl(),i.resolve(a)})}),i.promise}var o=__dirname+"/",c="data:image/png;base64,",i=["passed","warning","failed"];return{runSingle:n,getStatus:function(e){var t=parseFloat(e.misMatchPercentage);return.1>t?e.isSameDimensions===!1?i[1]:i[0]:t>.1&&2>t?i[1]:i[2]}}}]),MUG.factory("nowTime",["$timeout",function(e){var t=Date.now(),r=function(){e(function(){t=Date.now(),r()},1e3)};return r(),{getTime:function(){return t}}}]);var fs=require("fs"),path=require("path"),AWS=require("./core/aws");MUG.factory("Projects",["$q",function(e){function t(e){return"number"==typeof e&&e===parseInt(e,10)&&(e=Array(e+1).join("x")),e.replace(/x/g,function(){var e=Math.round(61*Math.random())+48;return e=e>57?e+7>90?e+13:e+7:e,String.fromCharCode(e)})}function r(e){e=e||0;var r=t(12);return{id:r,title:"Project "+(parseInt(e,10)+1),timestamp:+new Date,totals:{success:null,warning:null,error:null,views:0}}}function n(e){t(12);return{batchHistory:{},currentBatch:null,currentReference:null,id:e.id,title:e.title,timestamp:e.timestamp,viewports:[],selectors:[],cookies:[],meta:{url:null,readyEvent:null,delay:null,misMatchThreshold:null}}}function o(e,t){var r;try{r=fs.readFileSync(e,"utf8")}catch(n){if("ENOENT"===n.code)return t||{};throw n}return JSON.parse(r)}function c(e){try{var t=fs.readdirSync(e)}catch(r){return}if(t.length>0)for(var n=0;n<t.length;n++){var o=path.join(e,t[n]);fs.statSync(o).isFile()?fs.unlinkSync(o):rmDir(o)}}function i(t,r){var n=e.defer();return fs.writeFile(t,JSON.stringify(r),function(e){return e?void n.reject(e):void n.resolve()}),n.promise}function a(t){var r=e.defer();return fs.unlink(t,function(e){return e?void r.reject(e):void r.resolve()}),r.promise}var s=__dirname+"/projects.json",u=__dirname+"/projects/";return{get:function(e,t){return o(__dirname+e,t)},getAll:function(){return o(s,[])},getById:function(e){return o(u+e+".json")},getTypeById:function(e,t){var r=t?"_"+t:"";return o(u+e+r+".json",[])},validate:function(e){var t=e.cookies,r=e.viewports,n=e.selectors,o=e.title,c=e.meta.url,i=!0;return!r||!n||!o||!c||r.length<1||n.length<1?!1:(r&&r.map(function(e,t){e.width&&e.height&&e.name||(i=!1)}),n&&n.map(function(e,t){e.query&&e.type||(i=!1)}),t&&t.map(function(e,t){e.name&&e.path&&e.value||(i=!1)}),i)},createNew:function(){var t=e.defer(),o=[],c=JSON.parse(fs.readFileSync(s,"utf8")),a=r(c.length),l=n(a);c.unshift(a);var p=i(s,c),f=i(u+a.id+".json",l),m=i(u+a.id+"_history.json",[]);return o.push(p),o.push(f),o.push(m),e.all(o).then(function(){t.resolve(a)},t.reject),t.promise},save:function(t){var r=e.defer(),n=[],c=o(s,[]);c.map(function(e,r){e.id===t.id&&(c[r].title=t.title,c[r].timestamp=+new Date)});var a=i(u+t.id+".json",t),l=i(s,c);return n.push(a),n.push(l),e.all(n).then(function(){r.resolve(t)},r.reject),r.promise},remove:function(t){var r=e.defer(),n=[],o=JSON.parse(fs.readFileSync(s,"utf8"));o.map(function(e,r){e.id===t&&o.splice(r,1)}),this.cleanImageFiles(t);var c=a(u+t+".json"),l=a(u+t+"_history.json"),p=i(s,o);return n.push(c),n.push(l),n.push(p),e.all(n).then(r.resolve,r.reject),r.promise},clearHistory:function(t){var r=e.defer(),n=[],c=o(s,[]);t.currentBatch=null,t.currentReference=null,t.batchHistory={},c.map(function(e,r){e.id===t.id&&(c[r].totals.success=0,c[r].totals.warning=0,c[r].totals.error=0,c[r].totals.views=0)}),this.cleanImageFiles(t.id);var a=i(u+t.id+"_history.json",[]),l=i(u+t.id+".json",t),p=i(s,c);return n.push(a),n.push(l),n.push(p),e.all(n).then(r.resolve,r.reject),r.promise},sync:function(t){if(t){for(var r=this,n=e.defer(),o=this.getById(t),c=this.getTypeById(t,"history"),i=[],a=0;a<c.length;a++){var s=c[a];if(s.source&&-1===s.source.search("amazon")){var u=s.source,l=s.type,p=__dirname+"/screens/"+l+"/"+o.id+"/"+u;i.push({key:l+"/"+u,path:p})}}return AWS.init().upload(i,o.id).then(function(e){r.cleanAfterSync(o,e).then(n.resolve,n.reject)},function(e){n.reject(e)}),n.promise}},cleanAfterSync:function(t,r){var n=e.defer(),c=o(u+t.id+"_history.json",[]),s=[],l=[];t.updatedAt=+new Date;for(var p=0;p<r.length;p++){var f=r[p],m=f.split("/"),d=m[m.length-2],h=m[m.length-1];c.map(function(e,n){if(e.source===h&&"compare"===d){var o=__dirname+"/screens/"+d+"/"+t.id+"/"+h,i=a(o),s=a(o.replace(".","_diff."));delete c[n].source,c[n].remoteSource=r[p],l.push(i),l.push(s)}})}var v=__dirname+"/projects/"+t.id+".json",g=v.replace(".json","_history.json"),y=i(v,t),j=i(g,c);l.unshift(y),l.unshift(j),s.push({key:t.id,path:v}),s.push({key:t.id+"_history",path:g});var w=AWS.init().upload(s,t.id);return l.unshift(w),e.all(l).then(n.resolve,n.reject),n.promise},cleanImageFiles:function(e){var t=__dirname+"/screens/BASE/"+e,r=t.replace("BASE","compare"),n=t.replace("BASE","reference");c(r),c(n)}}}]),MUG.factory("timeAgo",function(){function e(e){var t=e.toString().slice(0,13);return 13==t.length?parseInt(t):e}var t={};return t.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},t.inWords=function(e){function r(t,r){var o=angular.isFunction(t)?t(r,e):t,c=n.numbers&&n.numbers[r]||r;return o.replace(/%d/i,c)}var n=t.settings.strings,o=n.prefixAgo,c=n.suffixAgo;t.settings.allowFuture&&0>e&&(o=n.prefixFromNow,c=n.suffixFromNow);var i=Math.abs(e)/1e3,a=i/60,s=a/60,u=s/24,l=u/365,p=45>i&&r(n.seconds,Math.round(i))||90>i&&r(n.minute,1)||45>a&&r(n.minutes,Math.round(a))||90>a&&r(n.hour,1)||24>s&&r(n.hours,Math.round(s))||42>s&&r(n.day,1)||30>u&&r(n.days,Math.round(u))||45>u&&r(n.month,1)||365>u&&r(n.months,Math.round(u/30))||1.5>l&&r(n.year,1)||r(n.years,Math.round(l)),f=void 0===n.wordSeparator?" ":n.wordSeparator;return[o,p,c].join(f).trim()},t.parse=function(t){if(angular.isNumber(t)){t+="";var r=e(t);return parseInt(r,10)}var n=(t||"").trim();return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)},t}),MUG.filter("timeAgo",["nowTime","timeAgo",function(e,t){return function(r){var n=t.parse(r),o=e.getTime()-n;return t.inWords(o)}}]);var ipc=require("ipc");MUG.controller("MainCtrl",["$rootScope","$scope","$state","Config","Projects",function(e,t,r,n,o){e.currentProjectId="",t.createNewProject=function(){o.createNew().then(function(t){e.$broadcast("SIDEPANEL:NEWPROJECT",t),r.go("projects.settings",{id:t.id})},function(e){console.log("err",e)})},ipc.on("NAVIGATE:TO",function(e){e&&e.location&&(console.log("NAVIGATE:TO",e),r.go(e.location))}),e.SafeApply=function(e,t){e.$$phase||e.$root.$$phase?"undefined"!=typeof t&&t():e.$apply(t)}}]);var fs=require("fs"),AWS=require("./core/aws");MUG.controller("PreferencesCtrl",["$rootScope","$scope","$state",function(e,t,r){t.awsConfig={bucket:"",accessKeyId:"",secretAccessKey:""},t.awsConfig=AWS.getConfig(),t.save=function(){AWS.setConfig(t.awsConfig)}}]),MUG.controller("ProjectCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){e.project=n.getById(r.id)}]),MUG.controller("ProjectHistoryCtrl",["$rootScope","$scope","$stateParams","Projects",function(e,t,r,n){t.activeFilter="All",t.activeFilterQuery="",t.historyItems=n.getTypeById(r.id,"history"),t.changeFilter=function(e){t.activeFilter=e,t.activeFilterQuery="All"==e?"":e},t.previewItem=function(t){e.$emit("MODAL:OPEN",{type:"preview",item:t,project:e.project})}}]);var ipc=require("ipc");MUG.controller("ProjectRunnerCtrl",["$rootScope","$scope","$timeout","$stateParams","Projects",function(e,t,r,n,o){function c(e){function r(e){if(e.status){var r=0;switch(e.status){case"warning":r=1;break;case"failed":r=2}n[r].items.unshift(e),t.activeData[n[r].type]=t.activeData[n[r].type]+1}}if(!e||e.length<1)return t.hasReference=!1,[];t.activeData={},t.activeData.success=0,t.activeData.warning=0,t.activeData.error=0;var n=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];return e.map(function(e,n){e.batch===t.currentBatch&&r(e)}),t.hasReference=!0,n}function i(){if(null!==e.project.currentBatch){var r=o.getTypeById(e.project.id,"history");t.batchItems=c(r),t.runningType=e.project.currentReference>=e.project.currentBatch?"reference":"compare"}}function a(){var t=o.validate(e.project);return t||e.$broadcast("ALERT:FIRE",{title:"Please finish configuring settings!",dur:5,type:"error",icon:"stop"}),t}function s(){t.hasSettings=a(),t.hasReference=null!==e.project.currentReference,"reference"===t.runningType?t.hasCompare=!1:(t.hasCompare=null!==e.project.currentBatch&&0!==e.project.currentBatch,t.hasCompare=e.project.currentReference<=e.project.currentBatch)}function u(){e.project=o.getById(e.project.id),t.currentBatch=e.project.currentBatch,t.activeData=e.project&&e.project.batchHistory?e.project.batchHistory[t.currentBatch]:null,e.$emit("SIDEPANEL:UPDATE",e.project)}function l(){void 0===typeof e.project.meta.autoSyncAws||e.project.meta.autoSyncAws!==!0||h||(e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:3,type:"info"}),h=!0,o.sync(e.project.id).then(function(t){h=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:3,type:"success",icon:"check"})},function(t){console.log("syncNow err",t),h=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})}))}function p(r){if(r&&r.msg&&r.percent){t.progress.percent=parseInt(r.percent,10),t.progress.title=r.msg?r.msg:t.progress.title;var n=r;n.project=e.project,e.$emit("PRELOADER:UPDATE",n)}}function f(){r(function(){u(),i(),s(),l(),t.processing=!1},3)}function m(e){console.log("RUNNER:FAILED reason",e),t.processing=!1}var d=[{type:"success",items:[]},{type:"warning",items:[]},{type:"error",items:[]}];t.processing=!1,t.hasSettings=!1,t.hasReference=!1,t.hasCompare=!1,t.runningType="reference",t.batchItems=d,t.activeData={},t.currentBatch=e.project.currentBatch||0,t.progress={percent:0,title:"Starting"};var h=!1;u(),i(),s(),t.previewBatch=function(t){e.$emit("MODAL:OPEN",{type:"batch",items:t,project:e.project})},t.newCompare=function(){var r=a();r&&(t.runningType="compare",t.processing=!0,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"compare",projectId:e.project.id}))},t.newReference=function(){var r=a();r&&(t.processing=!0,t.runningType="reference",t.hasCompare=!1,setTimeout(function(){e.$emit("PRELOADER:ON")},10),ipc.send("RUNNER:FIRE",{type:"reference",projectId:e.project.id}))},ipc.on("RUNNER:PROGRESS",p),ipc.on("RUNNER:COMPLETE",f),ipc.on("RUNNER:FAILED",m)}]);var fs=require("fs");MUG.controller("ProjectSettingsCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){function o(t,r){e.project[t].push(r)}function c(){var e=n.get("/config/aws.json",{});return e&&e.bucket&&e.accessKeyId&&e.secretAccessKey?!0:!1}var i;t.syncing=!1,t.selectorTypes=["container","hide","remove"],t.hasChanges=!1,t.hasAwsSettings=!1,t.master={},angular.copy(e.project,t.master),t.hasAwsSettings=c(),t.$watch("project",function(e,r){e!=r&&(t.hasChanges=!0,t.save())},!0),t.save=function(){i&&window.clearTimeout(i),i=setTimeout(function(){n.save(e.project).then(function(r){e.$emit("SIDEPANEL:UPDATE",r),angular.copy(e.project,t.master),t.hasChanges=!1},function(e){console.log("err",e)})},200)},t.syncNow=function(){t.syncing=!0,e.$broadcast("ALERT:FIRE",{title:"Sync Starting",dur:5,type:"info"}),n.sync(e.project.id).then(function(r){t.syncing=!1,e.$broadcast("ALERT:FIRE",{title:"Sync Complete",dur:5,type:"success",icon:"check"})},function(r){t.syncing=!1,console.log("syncNow err",r),e.$broadcast("ALERT:FIRE",{title:"Sync Failed",dur:5,type:"error",icon:"stope"})})},t.cancelSave=function(){var r=confirm("Are you sure you want to clear all your changes?");r&&(angular.copy(t.master,e.project),t.hasChanges=!1)},t.deleteProject=function(){var o=confirm("Are you sure you want to delete this project?");if(o){var c=e.project.id;n.remove(c).then(function(n){e.$emit("SIDEPANEL:REMOVE",{id:c}),r.go("main"),e.project={},t.hasChanges=!1,e.$broadcast("ALERT:FIRE",{title:"Project Removed Successfully",dur:5,type:"success"})},function(n){console.log("err",n),e.$emit("SIDEPANEL:REMOVE",{id:c}),r.go("main"),e.project={},t.hasChanges=!1})}},t.addViewport=function(){var e={active:!0,name:null,width:null,height:null};o("viewports",e)},t.addSelector=function(){var e={active:!0,type:"container",query:null};o("selectors",e)},t.addCookie=function(){var e={active:!0,name:null,value:null,path:null};o("cookies",e)},t.activateType=function(r,n){e.project[r][n].active=e.project[r][n].active===!0||"true"===e.project[r][n].active?!1:!0,t.save()},t.deleteTypeItem=function(r,n){e.project[r].splice(n,1),t.save()},t.clearHistory=function(){n.clearHistory(e.project).then(function(t){e.$broadcast("ALERT:FIRE",{title:"Cleared All History!",dur:5,type:"success",icon:"history"})},function(t){e.$broadcast("ALERT:FIRE",{title:"Error Occurred! Please try again.",dur:5,type:"error",icon:"stop"})})}}]);var fs=require("fs");MUG.controller("SidePanelCtrl",["$rootScope","$scope","$state","Projects",function(e,t,r,n){t.projects=[],t.projects=n.getAll(),e.$on("SIDEPANEL:NEWPROJECT",function(e,r){r&&r.id&&t.projects.unshift(r)}),e.$on("SIDEPANEL:UPDATE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&(t.projects[n].title=r.title,t.projects[n].timestamp=r.timestamp,r.batchHistory[r.currentBatch]&&(r.batchHistory[r.currentBatch].success&&(t.projects[n].totals.success=r.batchHistory[r.currentBatch].success),r.batchHistory[r.currentBatch].warning&&(t.projects[n].totals.warning=r.batchHistory[r.currentBatch].warning),r.batchHistory[r.currentBatch].error&&(t.projects[n].totals.error=r.batchHistory[r.currentBatch].error),r.batchHistory[r.currentBatch].views&&(t.projects[n].totals.views=r.batchHistory[r.currentBatch].views)))})}),e.$on("SIDEPANEL:REMOVE",function(e,r){r&&r.id&&t.projects.map(function(e,n){e.id===r.id&&t.projects.splice(n,1)})}),t.goToProject=function(t){var n="runner";r.go("projects."+n,{id:t}),e.currentProjectId=t}}]),MUG.constant("Config",{ENV:"STAGE",STAGE:{},PROD:{},Compare:{errorColor:{red:255,green:0,blue:255},errorType:"flat",transparency:1,largeImageThreshold:0}}),MUG.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",templateUrl:"main.html"}).state("preferences",{url:"/preferences",templateUrl:"preferences.html",controller:"PreferencesCtrl"}).state("projects",{url:"/projects/:id",templateUrl:"projects.html",controller:"ProjectCtrl"}).state("projects.settings",{url:"/settings",templateUrl:"projects.settings.html",controller:"ProjectSettingsCtrl"}).state("projects.runner",{url:"/runner",templateUrl:"projects.runner.html",controller:"ProjectRunnerCtrl"}).state("projects.history",{url:"/history",templateUrl:"projects.history.html",controller:"ProjectHistoryCtrl"}),t.otherwise("/")}]),MUG.run(["$rootScope","$http",function(e,t){var r=t.defaults.headers.common;r["Content-Type"]="application/json",e.$on("$stateChangeError",function(e,t,r,n,o,c){console.log("$stateChangeError",c)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFsZXJ0LmpzIiwiZmFkZWluLmpzIiwibW9kYWwuanMiLCJtc2djZW50ZXIuanMiLCJwcmVsb2FkZXIuanMiLCJ0aW1lYWdvLmpzIiwiY29tcGFyZS5qcyIsIm5vd3RpbWUuanMiLCJwcm9qZWN0cy5qcyIsInRpbWUtYWdvLmpzIiwibWFpbmN0cmwuanMiLCJwcmVmZXJlbmNlc2N0cmwuanMiLCJwcm9qZWN0Y3RybC5qcyIsInByb2plY3RoaXN0b3J5Y3RybC5qcyIsInByb2plY3RydW5uZXJjdHJsLmpzIiwicHJvamVjdHNldHRpbmdzY3RybC5qcyIsInNpZGVwYW5lbGN0cmwuanMiLCJjb25maWcuanMiLCJyb3V0ZXMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbIk1VRyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCIkY29tcGlsZSIsIiR0ZW1wbGF0ZUNhY2hlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJzY29wZSIsImxpbmsiLCJlbCIsImF0dHJzIiwiY3RybCIsInNob3dNZXNzYWdlIiwiZGF0YSIsIl9pZCIsIkRhdGUiLCIkdG1wU2NvcGUiLCJ0aXRsZSIsImljb24iLCIkbmV3IiwiYWxlcnQiLCJpZCIsInR5cGUiLCJhY3Rpb24iLCJjYWxsYmFjayIsInRoaXMiLCJjbGVhckVsIiwiYWxlcnRFbCIsImFsZXJ0VGVtcGxhdGUiLCJwcmV2aW91c0lkIiwiX2VsIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJhbGVydEFjdGl2ZSIsImFsZXJ0VmlzaWJsZSIsInRpbWVyIiwiZHVyYXRpb24iLCJlbGVtIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImdldCIsIiRvbiIsImUiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJkdXIiLCJvZmZzZXQiLCJwYXJzZUludCIsImZhZGVJbiIsInNldFRpbWVvdXQiLCJjc3MiLCJ0ZW1wbGF0ZVVybCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHIiLCJzZXRBY3RpdmVJdGVtIiwiaW1hZ2VTcmMiLCJyZW1vdGVTb3VyY2UiLCJzb3VyY2UiLCJjb21wYXJlSXRlbSIsImEiLCJwcm9qZWN0IiwiY3VycmVudEJhdGNoIiwiY3VycmVudFJlZmVyZW5jZSIsImIiLCJjIiwibW9kYWxBY3RpdmUiLCJtb2RhbFZpc2libGUiLCJjb3B5IiwiYWN0aXZlT3B0aW9uIiwib3BhY2l0eVJhbmdlIiwiY3VycmVudEluZGV4IiwiYWN0aXZlSXRlbSIsInZpZXdlciIsIml0ZW1zIiwiYW1vdW50IiwiaW52ZXJzZSIsInBlcmNlbnQiLCIkd2F0Y2giLCJudiIsIm92IiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsIm9wdGlvbk1vZGUiLCJhcmdzIiwiY2xvc2UiLCJpdGVtIiwibGVuZ3RoIiwibW9kYWxBY3Rpb25OYXYiLCJuZXh0SWR4IiwidG90YWwiLCJnb1RvSW5kZXgiLCJpZHgiLCJuZXdCb2R5IiwibXNnIiwibmV3SWNuIiwiZGVmYXVsdEljb24iLCJtc2dUZW1wbGF0ZSIsIm5ld01lc3NhZ2UiLCJtc2dFbCIsImZpbmQiLCJjaGFuZ2VUeXBlIiwiYm9keSIsImFjdGlvbkVsIiwiUCIsInJlcXVpcmUiLCJjYWxjdWxhdGVJbmNyZW1lbnRzIiwiZGVsYXkiLCJ2aWV3cG9ydHMiLCJzZWxlY3RvcnMiLCJpbmNyZW1lbnQiLCJpIiwibWV0YSIsInRvdGFsSW5jcmVtZW50IiwidXBkYXRlUHJlbG9hZGVyIiwiaXNBbmltYXRpbmciLCJwcmV2aW91c1RpdGxlIiwiQiIsImFuaW1hdGUiLCJyZXNldFByZWxvYWRlciIsInJlc2V0QnJvd3NlciIsIkJyb3dzZXIiLCJpbml0IiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiaW5zdGFuY2UiLCJkcmF3QnJvd3NlciIsInRpbWVBZ28iLCJub3dUaW1lIiwiZnJvbVRpbWUiLCIkb2JzZXJ2ZSIsInZhbHVlIiwicGFyc2UiLCJnZXRUaW1lIiwidGV4dCIsImluV29yZHMiLCJmcyIsImFzeW5jIiwiZmFjdG9yeSIsIiRxIiwiQ29uZmlnIiwicmVhZEFzeW5jIiwiZmlsZSIsInJlYWRGaWxlIiwiZmlsZURpclByZWZpeCIsImNvbXBhcmVTaW5nbGUiLCJkZmQiLCJkZWZlciIsIm91dHB1dCIsInJlc2VtYmxlIiwib3V0cHV0U2V0dGluZ3MiLCJDb21wYXJlIiwibWFwIiwiZXJyIiwicmVzdWx0cyIsImFEYXRhIiwiaW1hZ2VQcmVmaXgiLCJiRGF0YSIsInJlamVjdCIsImNvbXBhcmVUbyIsImlnbm9yZUNvbG9ycyIsIm9uQ29tcGxldGUiLCJkaWZmRGF0YSIsInJlcG9ydCIsInNyYyIsImdldEltYWdlRGF0YVVybCIsInJlc29sdmUiLCJwcm9taXNlIiwiX19kaXJuYW1lIiwic3RhdHVzVHlwZXMiLCJydW5TaW5nbGUiLCJnZXRTdGF0dXMiLCJtaXNNYXRjaFZhbHVlIiwicGFyc2VGbG9hdCIsIm1pc01hdGNoUGVyY2VudGFnZSIsImlzU2FtZURpbWVuc2lvbnMiLCJub3ciLCJ1cGRhdGVUaW1lIiwicGF0aCIsIkFXUyIsImNyZWF0ZVVVSUQiLCJzIiwiQXJyYXkiLCJqb2luIiwibiIsInJhbmRvbSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZUR1bW15UHJvamVjdCIsInByb2plY3RJZCIsInRpbWVzdGFtcCIsInRvdGFscyIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiZXJyb3IiLCJ2aWV3cyIsImNyZWF0ZUR1bW15UHJvamVjdEZpbGUiLCJvcHRpb25zIiwiYmF0Y2hIaXN0b3J5IiwiY29va2llcyIsInVybCIsInJlYWR5RXZlbnQiLCJtaXNNYXRjaFRocmVzaG9sZCIsImdldEpzb25GaWxlIiwicmVhZEZpbGVTeW5jIiwiY29kZSIsIkpTT04iLCJyZW1vdmVBbGxJbkRpcmVjdG9yeSIsImRpclBhdGgiLCJmaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsZVBhdGgiLCJzdGF0U3luYyIsImlzRmlsZSIsInVubGlua1N5bmMiLCJybURpciIsInByb21pc2VXcml0ZSIsIl9xIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwicHJvbWlzZVJlbW92ZSIsIl96IiwidW5saW5rIiwicHJvamVjdHNQYXRoIiwicHJvamVjdEZpbGVzUGF0aCIsImdldEFsbCIsImdldEJ5SWQiLCJnZXRUeXBlQnlJZCIsImFkZGl0aW9uIiwidmFsaWRhdGUiLCJib29sIiwib2JqIiwid2lkdGgiLCJoZWlnaHQiLCJuYW1lIiwicXVlcnkiLCJjcmVhdGVOZXciLCJkZmRkIiwicXVldWVQcm9taXNlcyIsImFsbFByb2plY3RzIiwibmV3UHJvamVjdERhdGEiLCJuZXdQcm9qZWN0RmlsZSIsInVuc2hpZnQiLCJwcm9qZWN0QWxsRGF0YSIsInByb2plY3REYXRhIiwicHJvamVjdEhpc3RvcnlEYXRhIiwicHVzaCIsImFsbCIsInRoZW4iLCJzYXZlIiwicHJvamVjdFRlbXBEYXRhIiwic3BsaWNlIiwiY2xlYW5JbWFnZUZpbGVzIiwiY2xlYXJIaXN0b3J5IiwibWFpblByb2plY3RzIiwic3luYyIsIl90aGlzIiwiZCIsInByb2plY3RGaWxlcyIsInJlYWR5RmlsZXMiLCJ0bXBGaWxlIiwic2VhcmNoIiwia2V5IiwidXBsb2FkIiwicmVzIiwiY2xlYW5BZnRlclN5bmMiLCJuZXdSZWZzIiwiaGlzdG9yeURhdGEiLCJ1cGRhdGVkUmVtb3RlRmlsZXMiLCJ1cGRhdGVkQXQiLCJ0bXBTcmMiLCJ0bXBSZWYiLCJzcGxpdCIsInRtcFR5cGUiLCJ0bXBBbGlhcyIsInJlbVJlZlBhdGgiLCJyZW1SZWYiLCJyZW1SZWZEaWZmIiwicHJvamVjdEZpbGUiLCJwcm9qZWN0SGlzdG9yeUZpbGUiLCJwcm9qZWN0V3JpdGUiLCJwcm9qZWN0SGlzdG9yeVdyaXRlIiwiYXdzVXBsb2FkIiwiYmFzZSIsImNvbXBzIiwicmVmcyIsInRyaW1EaWdpdHMiLCJudW0iLCJtIiwidG9TdHJpbmciLCJzbGljZSIsInNlcnZpY2UiLCJzZXR0aW5ncyIsInJlZnJlc2hNaWxsaXMiLCJhbGxvd0Z1dHVyZSIsInN0cmluZ3MiLCJwcmVmaXhBZ28iLCJwcmVmaXhGcm9tTm93Iiwic3VmZml4QWdvIiwic3VmZml4RnJvbU5vdyIsInNlY29uZHMiLCJtaW51dGUiLCJtaW51dGVzIiwiaG91ciIsImhvdXJzIiwiZGF5IiwiZGF5cyIsIm1vbnRoIiwibW9udGhzIiwieWVhciIsInllYXJzIiwibnVtYmVycyIsImRpc3RhbmNlTWlsbGlzIiwic3Vic3RpdHV0ZSIsInN0cmluZ09yRnVuY3Rpb24iLCJudW1iZXIiLCJzdHJpbmciLCJpc0Z1bmN0aW9uIiwiJGwiLCJwcmVmaXgiLCJzdWZmaXgiLCJhYnMiLCJ3b3JkcyIsInNlcGFyYXRvciIsInVuZGVmaW5lZCIsIndvcmRTZXBhcmF0b3IiLCJ0cmltIiwiaXNvODYwMSIsImlzTnVtYmVyIiwib3JpZ2luYWxUaW1lc3RhbXAiLCJmaWx0ZXIiLCJkaWZmIiwiaXBjIiwiY29udHJvbGxlciIsIiRzdGF0ZSIsIlByb2plY3RzIiwiY3VycmVudFByb2plY3RJZCIsImNyZWF0ZU5ld1Byb2plY3QiLCIkYnJvYWRjYXN0IiwiZ28iLCJjb25zb2xlIiwibG9nIiwib24iLCJsb2NhdGlvbiIsIlNhZmVBcHBseSIsImZuIiwiJCRwaGFzZSIsIiRyb290IiwiJGFwcGx5IiwiYXdzQ29uZmlnIiwiYnVja2V0IiwiYWNjZXNzS2V5SWQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJnZXRDb25maWciLCJzZXRDb25maWciLCIkc3RhdGVQYXJhbXMiLCJhY3RpdmVGaWx0ZXIiLCJhY3RpdmVGaWx0ZXJRdWVyeSIsImhpc3RvcnlJdGVtcyIsImNoYW5nZUZpbHRlciIsInByZXZpZXdJdGVtIiwiJGVtaXQiLCJwcm9jZXNzQmF0Y2giLCJhbGxEYXRhIiwicGxhY2VJdGVtIiwic3RhdHVzIiwidGFyZ2V0IiwiZm9ybWF0dGVkIiwiYWN0aXZlRGF0YSIsImhhc1JlZmVyZW5jZSIsImJhdGNoIiwic2V0dXBDdXJyZW50QmF0Y2giLCJiYXRjaEl0ZW1zIiwicnVubmluZ1R5cGUiLCJ2YWxpZGF0ZVByb2plY3QiLCJpc1ZhbGlkIiwiY2hlY2tTdGF0ZSIsImhhc1NldHRpbmdzIiwiaGFzQ29tcGFyZSIsImdyYWJMYXRlc3REYXRhIiwic3luY1Byb2plY3QiLCJhdXRvU3luY0F3cyIsInN5bmNpbmciLCJydW5uZXJFdmVudHMiLCJwcm9ncmVzcyIsInByZUFyZ3MiLCJydW5uZXJDb21wbGV0ZSIsInByb2Nlc3NpbmciLCJydW5uZXJGYWlsZWQiLCJyZWFzb24iLCJkZWZhdWx0Rm9ybWF0IiwicHJldmlld0JhdGNoIiwibmV3Q29tcGFyZSIsInZhbGlkIiwic2VuZCIsIm5ld1JlZmVyZW5jZSIsImFkZE5ld1R5cGUiLCJjaGVja0F3c1NldHRpbmdzIiwic2F2ZVRpbWVyIiwic2VsZWN0b3JUeXBlcyIsImhhc0NoYW5nZXMiLCJoYXNBd3NTZXR0aW5ncyIsIm1hc3RlciIsIm5WIiwib1YiLCJzeW5jTm93IiwiY2FuY2VsU2F2ZSIsInN1cmUiLCJjb25maXJtIiwiZGVsZXRlUHJvamVjdCIsInByb2plY3RJRCIsImFkZFZpZXdwb3J0IiwibmV3Vmlld3BvcnQiLCJhY3RpdmUiLCJhZGRTZWxlY3RvciIsIm5ld1NlbGVjdG9yIiwiYWRkQ29va2llIiwibmV3Q29va2llIiwiYWN0aXZhdGVUeXBlIiwiZGVsZXRlVHlwZUl0ZW0iLCJwcm9qZWN0cyIsImdvVG9Qcm9qZWN0IiwiY29uc3RhbnQiLCJFTlYiLCJTVEFHRSIsIlBST0QiLCJlcnJvckNvbG9yIiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiZXJyb3JUeXBlIiwidHJhbnNwYXJlbmN5IiwibGFyZ2VJbWFnZVRocmVzaG9sZCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJvdGhlcndpc2UiLCJydW4iLCIkaHR0cCIsIiRjb21tb24iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsV0FBQSxZQUFBLGdCQ21CQUYsS0FBQUcsVUFBQSxTQUNBLGFBQUEsV0FBQSxXQUFBLGlCQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxTQUFBLEVBQ0FDLFNBQUEsbUNBQ0FDLFNBQ0FDLEtBQUEsU0FBQUQsRUFBQUUsRUFBQUMsRUFBQUMsR0FTQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLElBQUEsR0FBQUMsTUFHQUMsR0FGQUgsRUFBQUksTUFDQUosRUFBQSxLQUFBQSxFQUFBSyxLQUFBLEtBQ0FsQixFQUFBbUIsTUFBQSxHQUdBSCxHQUFBSSxTQUNBSixFQUFBSSxNQUFBQyxHQUFBUCxFQUNBRSxFQUFBSSxNQUFBRixLQUFBTCxFQUFBLEtBQUFBLEVBQUFLLEtBQUEsS0FDQUYsRUFBQUksTUFBQUUsS0FBQVQsRUFBQSxLQUFBQSxFQUFBUyxLQUFBLE9BQ0FOLEVBQUFJLE1BQUFILE1BQUFKLEVBQUFJLE1BQ0FELEVBQUFJLE1BQUFHLE9BQUFWLEVBQUFXLFNBQUEsV0FDQUMsS0FBQUosRUFDQVIsR0FBQVcsV0FDQUUsRUFBQUQsT0FIQSxJQU1BLElBQUFFLEdBQUF6QixFQUFBMEIsR0FBQVosRUFHQVcsR0FBQSxHQUFBTixHQUFBUCxFQUNBZSxFQUFBZixFQUdBZ0IsRUFBQUMsT0FBQUosR0FDQUEsRUFBQUssU0FBQUMsR0FHQWhDLEVBQUEsV0FDQTBCLEVBQUFLLFNBQUFFLElBQ0EsSUFFQUMsRUFBQWxDLEVBQUEsV0FDQXlCLEVBQUFDLElBQ0FTLEdBR0EsUUFBQVYsR0FBQVcsR0FDQSxJQUFBQSxHQUFBUixFQUNBUSxFQUFBeEMsUUFBQXlDLFFBQUFDLFNBQUFDLGVBQUFYLFFBQ0EsQ0FBQSxJQUFBUSxFQUNBLE1BQ0FBLEtBQ0FBLEVBQUF4QyxRQUFBeUMsUUFBQUQsSUFHQUEsRUFBQUksWUFBQVAsR0FDQWpDLEVBQUEsV0FDQW9DLEVBQUFLLFVBQ0EsS0ExREEsR0FFQVAsR0FGQVAsRUFBQXpCLEVBQUF3QyxJQUFBLGNBQ0FiLEVBQUFqQyxRQUFBeUMsUUFBQTdCLEdBRUEyQixFQUFBLElBQ0FQLEVBQUEsR0FDQUksRUFBQSxlQUNBQyxFQUFBLGVBdURBbEMsR0FBQTRDLElBQUEsYUFBQSxTQUFBQyxFQUFBaEMsR0FDQUEsRUFBQUksUUFFQTZCLE9BQUFDLGFBQUFaLEdBQ0FULElBRUFiLEVBQUFtQyxNQUNBWixFQUFBLElBQUF2QixFQUFBbUMsS0FHQXBDLEVBQUFDLFdDL0ZBakIsSUFBQUcsVUFBQSxVQUFBLFdBQ0EsT0FDQUssU0FBQSxJQUNBSSxLQUFBLFNBQUFELEVBQUE4QixFQUFBM0IsR0FDQSxHQUFBdUMsR0FBQUMsU0FBQXhDLEVBQUF5QyxTQUFBLEVBQ0FkLEdBQUFMLFNBQUEsV0FFQW9CLFdBQUEsV0FDQWYsRUFBQWdCLElBQUEsVUFBQSxNQUNBSixRQ05BckQsSUFBQUcsVUFBQSxTQUNBLFdBQUEsV0FBQSxhQUNBLFNBQUFFLEVBQUFDLEVBQUFGLEdBQ0EsT0FDQUksU0FBQSxJQUNBQyxTQUFBLEVBQ0FpRCxZQUFBLGFBQ0EvQyxTQUNBQyxLQUFBLFNBQUErQyxFQUFBQyxFQUFBQyxHQStDQSxRQUFBQyxHQUFBN0MsR0FDQSxHQUFBOEMsR0FBQTlDLEVBQUErQyxhQUFBL0MsRUFBQStDLGFBQUEvQyxFQUFBZ0QsTUFDQU4sR0FBQU8sWUFBQUMsRUFBQWxELEVBQUErQyxhQUFBRCxFQUFBLHFCQUFBM0QsRUFBQWdFLFFBQUEzQyxHQUFBLElBQUFzQyxFQUFBdEQsUUFBQUwsRUFBQWdFLFFBQUFDLGFBQUEsT0FBQWpFLEVBQUFnRSxRQUFBRSxpQkFBQSxRQUNBWCxFQUFBTyxZQUFBSyxFQUFBdEQsRUFBQStDLGFBQUFELEVBQUEsbUJBQUEzRCxFQUFBZ0UsUUFBQTNDLEdBQUEsSUFBQXNDLEVBQ0FKLEVBQUFPLFlBQUFNLEVBQUF2RCxFQUFBK0MsYUFBQUQsRUFBQSxtQkFBQTNELEVBQUFnRSxRQUFBM0MsR0FBQSxJQUFBc0MsRUFBQXRELFFBQUEsT0FBQSxhQWxEQSxHQUFBZ0UsR0FBQSxhQUNBQyxFQUFBLGVBRUFmLEdBQUFTLFFBQUFuRSxRQUFBMEUsS0FBQXZFLEVBQUFnRSxTQUNBVCxFQUFBaUIsYUFBQSxRQUNBakIsRUFBQWtCLGdCQUNBbEIsRUFBQW1CLGFBQUEsRUFDQW5CLEVBQUFvQixjQUNBcEIsRUFBQU8sYUFDQUMsRUFBQSxHQUNBSSxFQUFBLEdBQ0FDLEVBQUEsSUFFQWIsRUFBQXFCLFFBQ0FDLFVBRUF0QixFQUFBa0IsY0FDQUssT0FBQSxHQUNBQyxRQUFBLEdBQ0FDLFFBQUEsT0FrQkF6QixFQUFBMEIsT0FBQSxzQkFBQSxTQUFBQyxFQUFBQyxHQUNBRCxJQUFBQyxJQUdBNUIsRUFBQWtCLGFBQUFNLFNBQUEsRUFBQUcsR0FBQUUsUUFBQSxHQUNBN0IsRUFBQWtCLGFBQUFPLFFBQUFLLEtBQUFDLE1BQUEsSUFBQUosR0FBQSxPQVlBM0IsRUFBQWdDLFdBQUEsU0FBQWpFLEdBQ0FpQyxFQUFBaUIsYUFBQWxELEdBR0F0QixFQUFBNEMsSUFBQSxjQUFBLFNBQUFDLEVBQUEyQyxHQUNBakMsRUFBQWtDLFVBR0F6RixFQUFBNEMsSUFBQSxhQUFBLFNBQUFDLEVBQUEyQyxHQUNBQSxHQUFBQSxFQUFBbEUsT0FHQWlDLEVBQUFtQixhQUFBLEVBQ0FuQixFQUFBUyxRQUFBbkUsUUFBQTBFLEtBQUF2RSxFQUFBZ0UsU0FHQSxZQUFBd0IsRUFBQWxFLE9BQ0FpQyxFQUFBb0IsV0FBQWEsRUFBQUUsS0FDQW5DLEVBQUFxQixPQUFBWSxFQUFBeEIsWUFDQVQsRUFBQXFCLE9BQUFDLE1BQUEsS0FHQXRCLEVBQUFPLFlBQUFDLEVBREFSLEVBQUFvQixXQUFBZixhQUNBTCxFQUFBb0IsV0FBQWYsYUFFQSxXQUFBTCxFQUFBb0IsV0FBQXJELEtBQUEsSUFBQXRCLEVBQUFnRSxRQUFBM0MsR0FBQSxJQUFBa0MsRUFBQW9CLFdBQUFkLFFBS0EsVUFBQTJCLEVBQUFsRSxNQUFBa0UsRUFBQVgsTUFBQWMsT0FBQSxJQUNBcEMsRUFBQW9CLFdBQUFhLEVBQUFYLE1BQUF0QixFQUFBbUIsY0FDQW5CLEVBQUFxQixPQUFBWSxFQUFBeEIsWUFDQVQsRUFBQXFCLE9BQUFDLE1BQUFXLEVBQUFYLE1BQ0FuQixFQUFBSCxFQUFBb0IsYUFJQW5CLEVBQUF4QixTQUFBcUMsR0FFQWpCLFdBQUEsV0FDQUksRUFBQXhCLFNBQUFzQyxJQUNBLE9BR0FmLEVBQUFrQyxNQUFBLFdBQ0FqQyxFQUFBZixZQUFBNkIsR0FFQWxCLFdBQUEsV0FDQUksRUFBQWYsWUFBQTRCLElBQ0EsTUFJQWQsRUFBQXFDLGVBQUEsU0FBQXRFLEdBQ0EsS0FBQWlDLEVBQUFxQixPQUFBQyxNQUFBYyxPQUFBLEdBQUEsQ0FFQSxHQUNBRSxHQURBQyxFQUFBdkMsRUFBQXFCLE9BQUFDLE1BQUFjLE9BQUEsQ0FJQUUsR0FEQSxVQUFBdkUsRUFDQWlDLEVBQUFtQixlQUFBb0IsRUFBQSxFQUFBdkMsRUFBQW1CLGFBQUEsRUFFQSxJQUFBbkIsRUFBQW1CLGFBQUFvQixFQUFBdkMsRUFBQW1CLGFBQUEsRUFHQW5CLEVBQUFvQixXQUFBcEIsRUFBQXFCLE9BQUFDLE1BQUFnQixHQUNBdEMsRUFBQW1CLGFBQUFtQixFQUNBbkMsRUFBQUgsRUFBQW9CLGNBSUFwQixFQUFBd0MsVUFBQSxTQUFBQyxHQUNBekMsRUFBQW1CLGVBQUFzQixJQUVBekMsRUFBQW9CLFdBQUFwQixFQUFBcUIsT0FBQUMsTUFBQW1CLEdBQ0F6QyxFQUFBbUIsYUFBQXNCLEVBQ0F0QyxFQUFBSCxFQUFBb0IsbUJDL0hBL0UsSUFBQUcsVUFBQSxhQUNBLGFBQUEsV0FBQSxXQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsT0FDQUssU0FDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxFQUFBQyxHQXNCQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLElBQUEsR0FBQUMsTUFDQWtGLEVBQUFwRixFQUFBcUYsSUFDQUMsRUFBQXRGLEVBQUEsS0FBQUEsRUFBQUssS0FBQWtGLEVBRUE5RixFQUFBK0YsRUFBQWhHLFFBQUEsT0FBQTRGLEdBQUE1RixRQUFBLE9BQUE4RixHQUNBRyxFQUFBcEcsRUFBQUksR0FBQUMsRUFHQStGLEdBQUEsR0FBQWpGLEdBQUFQLEVBQ0FlLEVBQUFmLEVBR0FnQixFQUFBQyxPQUFBdUUsRUFHQSxJQUFBQyxHQUFBekUsRUFBQTBFLEtBQUEsSUFBQTFGLEVBQ0EyRixHQUFBRixFQUFBMUYsRUFBQVMsTUFFQVQsRUFBQVcsVUFDQStFLEVBQUFDLEtBQUEsZUFBQXhFLFNBQUEsUUFJQS9CLEVBQUEsV0FDQXNHLEVBQUF2RSxTQUFBLFFBQ0EsSUFFQUcsRUFBQWxDLEVBQUEsV0FDQXlCLEVBQUE2RSxJQUNBbkUsR0FHQSxRQUFBVixHQUFBVyxHQUNBLElBQUFBLEdBQUFSLEVBQ0FRLEVBQUFQLEVBQUEwRSxLQUFBLElBQUEzRSxPQUNBLEtBQUFRLEVBQUEsTUFFQUEsR0FBQUksWUFBQSxPQUNBSixFQUFBTCxTQUFBLFVBQ0EvQixFQUFBLFdBQ0FKLFFBQUF5QyxRQUFBRCxHQUFBSyxVQUNBLEtBSUEsUUFBQStELEdBQUFwRSxFQUFBZixHQUNBZSxFQUFBSSxZQUFBLFlBQ0FKLEVBQUFJLFlBQUEsWUFFQW5CLEdBQ0FlLEVBQUFMLFNBQUEsT0FBQVYsR0F4RUEsR0FPQWEsR0FQQWtFLEVBQUEsNExBTUF2RSxFQUFBakMsUUFBQXlDLFFBQUE3QixHQUVBMkIsRUFBQSxJQUNBUCxFQUFBLEdBQ0F1RSxFQUFBLE1BRUE3RixHQUFBbUcsS0FBQSxHQUNBbkcsRUFBQWlCLFNBQUEsS0FDQWpCLEVBQUFXLEtBQUFrRixFQUNBN0YsRUFBQWdCLE9BQUEsV0FDQSxHQUFBb0YsR0FBQTdFLEVBQUEwRSxLQUFBLElBQUEvRSxLQUFBSixHQUNBZCxHQUFBaUIsV0FDQUUsRUFBQWlGLElBMERBM0csRUFBQTRDLElBQUEsaUJBQUEsU0FBQUMsRUFBQWhDLEdBQ0FBLEVBQUFxRixNQUNBcEQsT0FBQUMsYUFBQVosR0FDQVQsSUFFQWIsRUFBQW1DLE1BQ0FaLEVBQUEsSUFBQXZCLEVBQUFtQyxLQUdBbkMsRUFBQVcsV0FDQWpCLEVBQUFpQixTQUFBWCxFQUFBVyxVQUdBWixFQUFBQyxVQ3ZHQSxJQUFBK0YsR0FBQUMsUUFBQSxtQkFFQWpILEtBQUFHLFVBQUEsYUFDQSxhQUFBLFdBQ0EsU0FBQUMsRUFBQUMsR0FHQSxRQUFBNkcsR0FBQTlDLEdBQ0EsR0FBQStDLEdBQUEsRUFDQUMsRUFBQSxFQUNBQyxFQUFBLEVBQ0FDLEVBQUEsRUFHQSxJQUFBbEQsRUFBQWlELFdBQUFqRCxFQUFBaUQsVUFBQXRCLE9BQUEsRUFDQSxJQUFBLEdBQUF3QixHQUFBLEVBQUFBLEVBQUFuRCxFQUFBaUQsVUFBQXRCLE9BQUF3QixJQUNBbkQsRUFBQWlELFVBQUFFLElBQUEsY0FBQW5ELEVBQUFpRCxVQUFBRSxHQUFBN0YsT0FDQTJGLEdBQUEsRUFNQWpELEdBQUFnRCxXQUFBaEQsRUFBQWdELFVBQUFyQixPQUFBLElBQ0FxQixFQUFBaEQsRUFBQWdELFVBQUFyQixRQUlBM0IsRUFBQW9ELE1BQUFwRCxFQUFBb0QsS0FBQUwsUUFDQUEsRUFBQTdELFNBQUFjLEVBQUFvRCxLQUFBTCxNQUFBLEtBSUFNLEVBQUFILEVBQUFGLEVBQUFDLEVBQUEsR0E1QkEsR0FBQUksR0FBQSxFQStCQSxRQUNBaEgsU0FBQSxFQUNBRCxTQUFBLElBQ0FHLFNBQ0FELFNBQUEsZ0NBQ0FFLEtBQUEsU0FBQUQsRUFBQThCLEVBQUEzQixFQUFBQyxHQXdCQSxRQUFBMkcsR0FBQXpFLEVBQUEyQyxHQUNBLEdBQUFBLEdBQUFBLEVBQUFVLElBQUEsQ0FPQSxHQUxBVixFQUFBeEIsU0FDQThDLEVBQUF0QixFQUFBeEIsVUFJQXVELEVBTUEsTUFMQUEsSUFBQSxPQUNBcEYsRUFBQWlCLFdBQUEsV0FDQW1FLEdBQUEsR0FDQSxHQUFBRixHQUtBcEcsR0FBQXVFLEVBQUFVLEdBRUEsSUFBQTVFLEVBRUEsUUFBQUwsR0FJQSxJQUFBLDBCQUNBSyxFQUFBLENBQ0EsTUFDQSxLQUFBLG9CQUNBQSxFQUFBLEVBWUFMLElBQUF1RyxHQUFBQyxHQUFBQSxFQUFBQyxTQUdBRCxFQUFBQyxRQUFBcEcsRUFBQStGLEVBQUEsV0FDQUcsRUFBQXZHLEtBS0EsUUFBQTBHLEtBQ0FGLEVBQUFHLGVBMUVBLEdBQUFILEdBQ0FoSCxFQUNBMEIsRUFDQWxCLEVBQ0F1RyxFQUdBRCxHQUFBLENBSUF0SCxHQUFBLFdBQ0F3SCxFQUFBLEdBQUFiLEdBQUFpQixRQUNBSixFQUFBSyxPQUdBckgsRUFBQThCLFNBQUF3RixjQUFBLGNBQ0F0SCxFQUFBdUgsWUFBQVAsRUFBQVEsVUFHQVIsRUFBQVMsZUFDQSxJQXlEQWxJLEVBQUE0QyxJQUFBLG1CQUFBMEUsR0FDQXRILEVBQUE0QyxJQUFBLGdCQUFBK0UsUUNwSUEvSCxJQUFBRyxVQUFBLFdBQ0EsaUJBQUEsaUJBQ0EsU0FBQW9JLEVBQUFDLEdBQ0EsT0FDQWhJLFNBQUEsS0FDQUksS0FBQSxTQUFBRCxFQUFBOEIsRUFBQTNCLEdBQ0EsR0FBQTJILEVBR0EzSCxHQUFBNEgsU0FBQSxXQUFBLFNBQUFDLEdBQ0FGLEVBQUFGLEVBQUFLLE1BQUFELEtBSUFoSSxFQUFBMEUsT0FBQSxXQUNBLE1BQUFtRCxHQUFBSyxVQUFBSixHQUNBLFNBQUFFLEdBQ0ExSSxRQUFBeUMsUUFBQUQsR0FBQXFHLEtBQUFQLEVBQUFRLFFBQUFKLFVDakJBLElBQUFLLElBQUEvQixRQUFBLE1BQ0FnQyxNQUFBaEMsUUFBQSxRQUVBakgsS0FBQWtKLFFBQUEsV0FDQSxLQUFBLFNBQ0EsU0FBQUMsRUFBQUMsR0FPQSxRQUFBQyxHQUFBQyxFQUFBMUgsR0FDQW9ILEdBQUFPLFNBQUFDLEVBQUFGLEVBQUEsU0FBQTFILEdBSUEsUUFBQTZILEdBQUF0RixFQUFBSSxHQUNBLEdBQUFtRixHQUFBUCxFQUFBUSxRQUNBQyxJQTJCQSxPQXhCQUMsVUFBQUMsZUFBQVYsRUFBQVcsU0FHQWQsTUFBQWUsS0FBQTdGLEVBQUFJLEdBQUE4RSxFQUFBLFNBQUFZLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsRUFBQUYsRUFBQSxHQUNBRyxFQUFBRCxFQUFBRixFQUFBLEVBR0FELElBQ0FQLEVBQUFZLE9BQUFMLEdBSUFKLFNBQUFNLEdBQ0FJLFVBQUFGLEdBQ0FHLGVBQ0FDLFdBQUEsU0FBQUMsR0FDQWQsRUFBQWUsT0FBQUQsRUFDQWQsRUFBQWdCLElBQUFGLEVBQUFHLGtCQUVBbkIsRUFBQW9CLFFBQUFsQixPQUlBRixFQUFBcUIsUUF2Q0EsR0FBQXZCLEdBQUF3QixVQUFBLElBQ0FaLEVBQUEseUJBQ0FhLEdBQUEsU0FBQSxVQUFBLFNBd0NBLFFBS0FDLFVBQUF6QixFQUtBMEIsVUFBQSxTQUFBbEssR0FDQSxHQUFBbUssR0FBQUMsV0FBQXBLLEVBQUFxSyxtQkFHQSxPQUFBLEdBQUFGLEVBR0FuSyxFQUFBc0ssb0JBQUEsRUFDQU4sRUFBQSxHQUVBQSxFQUFBLEdBS0FHLEVBQUEsSUFBQSxFQUFBQSxFQUNBSCxFQUFBLEdBSUFBLEVBQUEsUUMvRUFqTCxJQUFBa0osUUFBQSxXQUNBLFdBQ0EsU0FBQTdJLEdBQ0EsR0FBQW1JLEdBQUFySCxLQUFBcUssTUFDQUMsRUFBQSxXQUNBcEwsRUFBQSxXQUNBbUksRUFBQXJILEtBQUFxSyxNQUNBQyxLQUNBLEtBSUEsT0FEQUEsTUFFQTVDLFFBQUEsV0FDQSxNQUFBTCxPQ2RBLElBQUFRLElBQUEvQixRQUFBLE1BQ0F5RSxLQUFBekUsUUFBQSxRQUNBMEUsSUFBQTFFLFFBQUEsYUFFQWpILEtBQUFrSixRQUFBLFlBQ0EsS0FDQSxTQUFBQyxHQU1BLFFBQUF5QyxHQUFBQyxHQU1BLE1BSkEsZ0JBQUFBLElBQUFBLElBQUF2SSxTQUFBdUksRUFBQSxNQUNBQSxFQUFBQyxNQUFBRCxFQUFBLEdBQUFFLEtBQUEsTUFHQUYsRUFBQXBMLFFBQUEsS0FBQSxXQUNBLEdBQUF1TCxHQUFBdkcsS0FBQUMsTUFBQSxHQUFBRCxLQUFBd0csVUFBQSxFQUVBLE9BREFELEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxFQUFBLEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxFQUFBQSxFQUNBRSxPQUFBQyxhQUFBSCxLQUtBLFFBQUFJLEdBQUFsRyxHQUNBQSxFQUFBQSxHQUFBLENBQ0EsSUFBQW1HLEdBQUFULEVBQUEsR0FDQSxRQUNBbkssR0FBQTRLLEVBQ0FoTCxNQUFBLFlBQUFpQyxTQUFBNEMsRUFBQSxJQUFBLEdBQ0FvRyxXQUFBLEdBQUFuTCxNQUNBb0wsUUFDQUMsUUFBQSxLQUNBQyxRQUFBLEtBQ0FDLE1BQUEsS0FDQUMsTUFBQSxJQU1BLFFBQUFDLEdBQUFDLEdBQ0FqQixFQUFBLEdBQ0EsUUFDQWtCLGdCQUNBekksYUFBQSxLQUNBQyxpQkFBQSxLQUNBN0MsR0FBQW9MLEVBQUFwTCxHQUNBSixNQUFBd0wsRUFBQXhMLE1BQ0FpTCxVQUFBTyxFQUFBUCxVQUNBbEYsYUFDQUMsYUFDQTBGLFdBQ0F2RixNQUNBd0YsSUFBQSxLQUNBQyxXQUFBLEtBQ0E5RixNQUFBLEtBQ0ErRixrQkFBQSxPQU1BLFFBQUFDLEdBQUF6QixFQUFBaEssR0FDQSxHQUFBNEgsRUFFQSxLQUNBQSxFQUFBTixHQUFBb0UsYUFBQTFCLEVBQUEsUUFDQSxNQUFBekksR0FFQSxHQUFBLFdBQUFBLEVBQUFvSyxLQUNBLE1BQUEzTCxNQUVBLE1BQUF1QixHQUlBLE1BQUFxSyxNQUFBMUUsTUFBQVUsR0FJQSxRQUFBaUUsR0FBQUMsR0FDQSxJQUNBLEdBQUFDLEdBQUF6RSxHQUFBMEUsWUFBQUYsR0FDQSxNQUFBdkssR0FBQSxPQUVBLEdBQUF3SyxFQUFBMUgsT0FBQSxFQUNBLElBQUEsR0FBQXdCLEdBQUEsRUFBQUEsRUFBQWtHLEVBQUExSCxPQUFBd0IsSUFBQSxDQUNBLEdBQUFvRyxHQUFBakMsS0FBQUssS0FBQXlCLEVBQUFDLEVBQUFsRyxHQUVBeUIsSUFBQTRFLFNBQUFELEdBQUFFLFNBQ0E3RSxHQUFBOEUsV0FBQUgsR0FFQUksTUFBQUosSUFNQSxRQUFBSyxHQUFBTCxFQUFBMU0sR0FDQSxHQUFBZ04sR0FBQTlFLEVBQUFRLE9BV0EsT0FUQVgsSUFBQWtGLFVBQUFQLEVBQUFMLEtBQUFhLFVBQUFsTixHQUFBLFNBQUFnSixHQUNBLE1BQUFBLE9BQ0FnRSxHQUFBM0QsT0FBQUwsT0FJQWdFLEdBQUFuRCxZQUdBbUQsRUFBQWxELFFBSUEsUUFBQXFELEdBQUExQyxHQUNBLEdBQUEyQyxHQUFBbEYsRUFBQVEsT0FZQSxPQVRBWCxJQUFBc0YsT0FBQTVDLEVBQUEsU0FBQXpCLEdBQ0EsTUFBQUEsT0FDQW9FLEdBQUEvRCxPQUFBTCxPQUlBb0UsR0FBQXZELFlBR0F1RCxFQUFBdEQsUUExSEEsR0FBQXdELEdBQUF2RCxVQUFBLGlCQUNBd0QsRUFBQXhELFVBQUEsWUE0SEEsUUFFQWpJLElBQUEsU0FBQTJJLEVBQUFoSyxHQUNBLE1BQUF5TCxHQUFBbkMsVUFBQVUsRUFBQWhLLElBR0ErTSxPQUFBLFdBQ0EsTUFBQXRCLEdBQUFvQixPQUdBRyxRQUFBLFNBQUFqTixHQUNBLE1BQUEwTCxHQUFBcUIsRUFBQS9NLEVBQUEsVUFHQWtOLFlBQUEsU0FBQWxOLEVBQUFDLEdBQ0EsR0FBQWtOLEdBQUEsRUFBQSxJQUFBbE4sRUFBQSxFQUNBLE9BQUF5TCxHQUFBcUIsRUFBQS9NLEVBQUFtTixFQUFBLGFBTUFDLFNBQUEsU0FBQXpLLEdBQ0EsR0FBQTJJLEdBQUEzSSxFQUFBMkksUUFDQTNGLEVBQUFoRCxFQUFBZ0QsVUFDQUMsRUFBQWpELEVBQUFpRCxVQUNBaEcsRUFBQStDLEVBQUEvQyxNQUNBMkwsRUFBQTVJLEVBQUFvRCxLQUFBd0YsSUFDQThCLEdBQUEsQ0FHQSxRQUFBMUgsSUFBQUMsSUFBQWhHLElBQUEyTCxHQUFBNUYsRUFBQXJCLE9BQUEsR0FBQXNCLEVBQUF0QixPQUFBLEdBQ0EsR0FJQXFCLEdBQ0FBLEVBQUE0QyxJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUFDLE9BQUFELEVBQUFFLFFBQUFGLEVBQUFHLE9BQ0FKLEdBQUEsS0FNQXpILEdBQ0FBLEVBQUEyQyxJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUFJLE9BQUFKLEVBQUFyTixPQUNBb04sR0FBQSxLQU1BL0IsR0FDQUEsRUFBQS9DLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQUcsTUFBQUgsRUFBQXJELE1BQUFxRCxFQUFBcEcsUUFDQW1HLEdBQUEsS0FNQUEsSUFNQU0sVUFBQSxXQUNBLEdBQUFDLEdBQUFsRyxFQUFBUSxRQUNBMkYsS0FDQUMsRUFBQWpDLEtBQUExRSxNQUFBSSxHQUFBb0UsYUFBQW1CLEVBQUEsU0FDQWlCLEVBQUFwRCxFQUFBbUQsRUFBQXhKLFFBQ0EwSixFQUFBN0MsRUFBQTRDLEVBRUFELEdBQUFHLFFBQUFGLEVBR0EsSUFBQUcsR0FBQTNCLEVBQUFPLEVBQUFnQixHQUNBSyxFQUFBNUIsRUFBQVEsRUFBQWdCLEVBQUEvTixHQUFBLFFBQUFnTyxHQUNBSSxFQUFBN0IsRUFBQVEsRUFBQWdCLEVBQUEvTixHQUFBLG1CQVVBLE9BVEE2TixHQUFBUSxLQUFBSCxHQUNBTCxFQUFBUSxLQUFBRixHQUNBTixFQUFBUSxLQUFBRCxHQUdBMUcsRUFBQTRHLElBQUFULEdBQUFVLEtBQUEsV0FDQVgsRUFBQXZFLFFBQUEwRSxJQUNBSCxFQUFBL0UsUUFFQStFLEVBQUF0RSxTQUlBa0YsS0FBQSxTQUFBTCxHQUNBLEdBQUFQLEdBQUFsRyxFQUFBUSxRQUNBMkYsS0FDQUMsRUFBQXBDLEVBQUFvQixLQUdBZ0IsR0FBQXZGLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQXROLEtBQUFtTyxFQUFBbk8sS0FDQThOLEVBQUFuSixHQUFBL0UsTUFBQXVPLEVBQUF2TyxNQUNBa08sRUFBQW5KLEdBQUFrRyxXQUFBLEdBQUFuTCxRQUtBLElBQUErTyxHQUFBbEMsRUFBQVEsRUFBQW9CLEVBQUFuTyxHQUFBLFFBQUFtTyxHQUNBRCxFQUFBM0IsRUFBQU8sRUFBQWdCLEVBU0EsT0FSQUQsR0FBQVEsS0FBQUksR0FDQVosRUFBQVEsS0FBQUgsR0FHQXhHLEVBQUE0RyxJQUFBVCxHQUFBVSxLQUFBLFdBQ0FYLEVBQUF2RSxRQUFBOEUsSUFDQVAsRUFBQS9FLFFBRUErRSxFQUFBdEUsU0FJQWpJLE9BQUEsU0FBQXJCLEdBQ0EsR0FBQTROLEdBQUFsRyxFQUFBUSxRQUNBMkYsS0FDQUMsRUFBQWpDLEtBQUExRSxNQUFBSSxHQUFBb0UsYUFBQW1CLEVBQUEsUUFHQWdCLEdBQUF2RixJQUFBLFNBQUErRSxFQUFBM0ksR0FDQTJJLEVBQUF0TixLQUFBQSxHQUNBOE4sRUFBQVksT0FBQS9KLEVBQUEsS0FLQXZFLEtBQUF1TyxnQkFBQTNPLEVBR0EsSUFBQW1PLEdBQUF4QixFQUFBSSxFQUFBL00sRUFBQSxTQUNBb08sRUFBQXpCLEVBQUFJLEVBQUEvTSxFQUFBLGlCQUNBa08sRUFBQTNCLEVBQUFPLEVBQUFnQixFQVFBLE9BUEFELEdBQUFRLEtBQUFGLEdBQ0FOLEVBQUFRLEtBQUFELEdBQ0FQLEVBQUFRLEtBQUFILEdBR0F4RyxFQUFBNEcsSUFBQVQsR0FBQVUsS0FBQVgsRUFBQXZFLFFBQUF1RSxFQUFBL0UsUUFFQStFLEVBQUF0RSxTQU1Bc0YsYUFBQSxTQUFBak0sR0FDQSxHQUFBaUwsR0FBQWxHLEVBQUFRLFFBQ0EyRixLQUNBZ0IsRUFBQW5ELEVBQUFvQixLQUdBbkssR0FBQUMsYUFBQSxLQUNBRCxFQUFBRSxpQkFBQSxLQUNBRixFQUFBMEksZ0JBR0F3RCxFQUFBdEcsSUFBQSxTQUFBK0UsRUFBQTNJLEdBQ0EySSxFQUFBdE4sS0FBQTJDLEVBQUEzQyxLQUNBNk8sRUFBQWxLLEdBQUFtRyxPQUFBQyxRQUFBLEVBQ0E4RCxFQUFBbEssR0FBQW1HLE9BQUFFLFFBQUEsRUFDQTZELEVBQUFsSyxHQUFBbUcsT0FBQUcsTUFBQSxFQUNBNEQsRUFBQWxLLEdBQUFtRyxPQUFBSSxNQUFBLEtBS0E5SyxLQUFBdU8sZ0JBQUFoTSxFQUFBM0MsR0FHQSxJQUFBb08sR0FBQTdCLEVBQUFRLEVBQUFwSyxFQUFBM0MsR0FBQSxvQkFDQW1PLEVBQUE1QixFQUFBUSxFQUFBcEssRUFBQTNDLEdBQUEsUUFBQTJDLEdBQ0F1TCxFQUFBM0IsRUFBQU8sRUFBQStCLEVBUUEsT0FQQWhCLEdBQUFRLEtBQUFELEdBQ0FQLEVBQUFRLEtBQUFGLEdBQ0FOLEVBQUFRLEtBQUFILEdBR0F4RyxFQUFBNEcsSUFBQVQsR0FBQVUsS0FBQVgsRUFBQXZFLFFBQUF1RSxFQUFBL0UsUUFFQStFLEVBQUF0RSxTQU9Bd0YsS0FBQSxTQUFBOU8sR0FDQSxHQUFBQSxFQUFBLENBU0EsSUFBQSxHQVBBK08sR0FBQTNPLEtBQ0E0TyxFQUFBdEgsRUFBQVEsUUFDQXZGLEVBQUF2QyxLQUFBNk0sUUFBQWpOLEdBQ0FpUCxFQUFBN08sS0FBQThNLFlBQUFsTixFQUFBLFdBQ0FrUCxLQUdBcEosRUFBQSxFQUFBQSxFQUFBbUosRUFBQTNLLE9BQUF3QixJQUFBLENBQ0EsR0FBQXFKLEdBQUFGLEVBQUFuSixFQUNBLElBQUFxSixFQUFBM00sUUFBQSxLQUFBMk0sRUFBQTNNLE9BQUE0TSxPQUFBLFVBQUEsQ0FDQSxHQUFBakcsR0FBQWdHLEVBQUEzTSxPQUNBdkMsRUFBQWtQLEVBQUFsUCxLQUNBZ0ssRUFBQVYsVUFBQSxZQUFBdEosRUFBQSxJQUFBMEMsRUFBQTNDLEdBQUEsSUFBQW1KLENBQ0ErRixHQUFBYixNQUFBZ0IsSUFBQXBQLEVBQUEsSUFBQWtKLEVBQUFjLEtBQUFBLEtBaUJBLE1BWkFDLEtBQUF6RCxPQUNBNkksT0FBQUosRUFBQXZNLEVBQUEzQyxJQUNBdU8sS0FBQSxTQUFBZ0IsR0FHQVIsRUFBQVMsZUFBQTdNLEVBQUE0TSxHQUFBaEIsS0FBQVMsRUFBQTNGLFFBQUEyRixFQUFBbkcsU0FHQSxTQUFBTCxHQUNBd0csRUFBQW5HLE9BQUFMLEtBR0F3RyxFQUFBMUYsVUFNQWtHLGVBQUEsU0FBQTdNLEVBQUE4TSxHQUNBLEdBQUE3QixHQUFBbEcsRUFBQVEsUUFDQXdILEVBQUFoRSxFQUFBcUIsRUFBQXBLLEVBQUEzQyxHQUFBLG9CQUNBMlAsS0FDQTlCLElBQ0FsTCxHQUFBaU4sV0FBQSxHQUFBbFEsS0FHQSxLQUFBLEdBQUFvRyxHQUFBLEVBQUFBLEVBQUEySixFQUFBbkwsT0FBQXdCLElBQUEsQ0FDQSxHQUFBK0osR0FBQUosRUFBQTNKLEdBQ0FnSyxFQUFBRCxFQUFBRSxNQUFBLEtBQ0FDLEVBQUFGLEVBQUFBLEVBQUF4TCxPQUFBLEdBQ0EyTCxFQUFBSCxFQUFBQSxFQUFBeEwsT0FBQSxFQUVBb0wsR0FBQW5ILElBQUEsU0FBQWxFLEVBQUFNLEdBR0EsR0FBQU4sRUFBQTdCLFNBQUF5TixHQUFBLFlBQUFELEVBQUEsQ0FFQSxHQUFBRSxHQUFBM0csVUFBQSxZQUFBeUcsRUFBQSxJQUFBck4sRUFBQTNDLEdBQUEsSUFBQWlRLEVBQ0FFLEVBQUF4RCxFQUFBdUQsR0FDQUUsRUFBQXpELEVBQUF1RCxFQUFBbFIsUUFBQSxJQUFBLGlCQUdBMFEsR0FBQS9LLEdBQUFuQyxPQUNBa04sRUFBQS9LLEdBQUFwQyxhQUFBa04sRUFBQTNKLEdBR0ErSCxFQUFBUSxLQUFBOEIsR0FDQXRDLEVBQUFRLEtBQUErQixNQU1BLEdBQUFDLEdBQUE5RyxVQUFBLGFBQUE1RyxFQUFBM0MsR0FBQSxRQUNBc1EsRUFBQUQsRUFBQXJSLFFBQUEsUUFBQSxpQkFDQXVSLEVBQUFoRSxFQUFBOEQsRUFBQTFOLEdBQ0E2TixFQUFBakUsRUFBQStELEVBQUFaLEVBQ0E3QixHQUFBSSxRQUFBc0MsR0FDQTFDLEVBQUFJLFFBQUF1QyxHQUdBYixFQUFBdEIsTUFBQWdCLElBQUExTSxFQUFBM0MsR0FBQWlLLEtBQUFvRyxJQUNBVixFQUFBdEIsTUFBQWdCLElBQUExTSxFQUFBM0MsR0FBQSxXQUFBaUssS0FBQXFHLEdBR0EsSUFBQUcsR0FBQXZHLElBQUF6RCxPQUFBNkksT0FBQUssRUFBQWhOLEVBQUEzQyxHQU1BLE9BTEE2TixHQUFBSSxRQUFBd0MsR0FHQS9JLEVBQUE0RyxJQUFBVCxHQUFBVSxLQUFBWCxFQUFBdkUsUUFBQXVFLEVBQUEvRSxRQUVBK0UsRUFBQXRFLFNBTUFxRixnQkFBQSxTQUFBL0QsR0FDQSxHQUFBOEYsR0FBQW5ILFVBQUEsaUJBQUFxQixFQUNBK0YsRUFBQUQsRUFBQTFSLFFBQUEsT0FBQSxXQUNBNFIsRUFBQUYsRUFBQTFSLFFBQUEsT0FBQSxZQUVBOE0sR0FBQTZFLEdBQ0E3RSxFQUFBOEUsUUhqYkFyUyxJQUFBa0osUUFBQSxVQUFBLFdBMEJBLFFBQUFvSixHQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFFLFdBQUFDLE1BQUEsRUFBQSxHQUNBLE9BQUEsS0FBQUYsRUFBQXpNLE9BQUF6QyxTQUFBa1AsR0FBQUQsRUEzQkEsR0FBQUksS0FxRkEsT0FuRkFBLEdBQUFDLFVBQ0FDLGNBQUEsSUFDQUMsYUFBQSxFQUNBQyxTQUNBQyxVQUFBLEtBQ0FDLGNBQUEsS0FDQUMsVUFBQSxNQUNBQyxjQUFBLFdBQ0FDLFFBQUEscUJBQ0FDLE9BQUEsaUJBQ0FDLFFBQUEsYUFDQUMsS0FBQSxnQkFDQUMsTUFBQSxXQUNBQyxJQUFBLFFBQ0FDLEtBQUEsVUFDQUMsTUFBQSxnQkFDQUMsT0FBQSxZQUNBQyxLQUFBLGVBQ0FDLE1BQUEsV0FDQUMsYUFTQXBCLEVBQUE1SixRQUFBLFNBQUFpTCxHQWlCQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFuVSxRQUFBb1UsV0FBQUgsR0FDQUEsRUFBQUMsRUFBQUgsR0FBQUUsRUFDQXZMLEVBQUEyTCxFQUFBUCxTQUFBTyxFQUFBUCxRQUFBSSxJQUFBQSxDQUNBLE9BQUFDLEdBQUEzVCxRQUFBLE1BQUFrSSxHQXBCQSxHQUFBMkwsR0FBQTNCLEVBQUFDLFNBQUFHLFFBQ0F3QixFQUFBRCxFQUFBdEIsVUFDQXdCLEVBQUFGLEVBQUFwQixTQUNBUCxHQUFBQyxTQUFBRSxhQUNBLEVBQUFrQixJQUNBTyxFQUFBRCxFQUFBckIsY0FDQXVCLEVBQUFGLEVBQUFuQixjQUlBLElBQUFDLEdBQUEzTixLQUFBZ1AsSUFBQVQsR0FBQSxJQUNBVixFQUFBRixFQUFBLEdBQ0FJLEVBQUFGLEVBQUEsR0FDQUksRUFBQUYsRUFBQSxHQUNBTSxFQUFBSixFQUFBLElBU0FnQixFQUFBLEdBQUF0QixHQUFBYSxFQUFBSyxFQUFBbEIsUUFBQTNOLEtBQUFDLE1BQUEwTixLQUNBLEdBQUFBLEdBQUFhLEVBQUFLLEVBQUFqQixPQUFBLElBQ0EsR0FBQUMsR0FBQVcsRUFBQUssRUFBQWhCLFFBQUE3TixLQUFBQyxNQUFBNE4sS0FDQSxHQUFBQSxHQUFBVyxFQUFBSyxFQUFBZixLQUFBLElBQ0EsR0FBQUMsR0FBQVMsRUFBQUssRUFBQWQsTUFBQS9OLEtBQUFDLE1BQUE4TixLQUNBLEdBQUFBLEdBQUFTLEVBQUFLLEVBQUFiLElBQUEsSUFDQSxHQUFBQyxHQUFBTyxFQUFBSyxFQUFBWixLQUFBak8sS0FBQUMsTUFBQWdPLEtBQ0EsR0FBQUEsR0FBQU8sRUFBQUssRUFBQVgsTUFBQSxJQUNBLElBQUFELEdBQUFPLEVBQUFLLEVBQUFWLE9BQUFuTyxLQUFBQyxNQUFBZ08sRUFBQSxNQUNBLElBQUFJLEdBQUFHLEVBQUFLLEVBQUFULEtBQUEsSUFDQUksRUFBQUssRUFBQVIsTUFBQXJPLEtBQUFDLE1BQUFvTyxJQUVBYSxFQUFBQyxTQUFBTixFQUFBTyxjQUFBLElBQUFQLEVBQUFPLGFBQ0EsUUFBQU4sRUFBQUcsRUFBQUYsR0FBQXpJLEtBQUE0SSxHQUFBRyxRQUdBbkMsRUFBQS9KLE1BQUEsU0FBQW1NLEdBQ0EsR0FBQTlVLFFBQUErVSxTQUFBRCxHQUFBLENBQ0FBLEdBQUEsRUFFQSxJQUFBRSxHQUFBM0MsRUFBQXlDLEVBQ0EsT0FBQXpSLFVBQUEyUixFQUFBLElBRUEsR0FBQXBKLElBQUFrSixHQUFBLElBQUFELE1BS0EsT0FKQWpKLEdBQUFBLEVBQUFwTCxRQUFBLFFBQUEsSUFDQW9MLEVBQUFBLEVBQUFwTCxRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLEtBQ0FvTCxFQUFBQSxFQUFBcEwsUUFBQSxJQUFBLEtBQUFBLFFBQUEsSUFBQSxRQUNBb0wsRUFBQUEsRUFBQXBMLFFBQUEsd0JBQUEsU0FDQSxHQUFBVSxNQUFBMEssSUFHQThHLElJdEZBM1MsSUFBQWtWLE9BQUEsV0FDQSxVQUFBLFVBQ0EsU0FBQTFNLEVBQUFELEdBQ0EsTUFBQSxVQUFBSSxHQUNBLEdBQUFGLEdBQUFGLEVBQUFLLE1BQUFELEdBQ0F3TSxFQUFBM00sRUFBQUssVUFBQUosQ0FDQSxPQUFBRixHQUFBUSxRQUFBb00sTUNOQSxJQUFBQyxLQUFBbk8sUUFBQSxNQUVBakgsS0FBQXFWLFdBQUEsWUFDQSxhQUFBLFNBQUEsU0FBQSxTQUFBLFdBQ0EsU0FBQWpWLEVBQUF1RCxFQUFBMlIsRUFBQWxNLEVBQUFtTSxHQUNBblYsRUFBQW9WLGlCQUFBLEdBRUE3UixFQUFBOFIsaUJBQUEsV0FDQUYsRUFBQW5HLFlBQUFZLEtBQUEsU0FBQWdCLEdBQ0E1USxFQUFBc1YsV0FBQSx1QkFBQTFFLEdBQ0FzRSxFQUFBSyxHQUFBLHFCQUFBbFUsR0FBQXVQLEVBQUF2UCxNQUdBLFNBQUF3SSxHQUNBMkwsUUFBQUMsSUFBQSxNQUFBNUwsTUFJQW1MLElBQUFVLEdBQUEsY0FBQSxTQUFBbFEsR0FDQUEsR0FBQUEsRUFBQW1RLFdBRUFILFFBQUFDLElBQUEsY0FBQWpRLEdBQ0EwUCxFQUFBSyxHQUFBL1AsRUFBQW1RLGFBSUEzVixFQUFBNFYsVUFBQSxTQUFBclYsRUFBQXNWLEdBQ0F0VixFQUFBdVYsU0FBQXZWLEVBQUF3VixNQUFBRCxRQUNBLG1CQUFBRCxJQUNBQSxJQUdBdFYsRUFBQXlWLE9BQUFILE1DaENBLElBQUFqTixJQUFBL0IsUUFBQSxNQUNBMEUsSUFBQTFFLFFBQUEsYUFFQWpILEtBQUFxVixXQUFBLG1CQUNBLGFBQUEsU0FBQSxTQUNBLFNBQUFqVixFQUFBdUQsRUFBQTJSLEdBQ0EzUixFQUFBMFMsV0FDQUMsT0FBQSxHQUNBQyxZQUFBLEdBQ0FDLGdCQUFBLElBSUE3UyxFQUFBMFMsVUFBQTFLLElBQUE4SyxZQUVBOVMsRUFBQXNNLEtBQUEsV0FFQXRFLElBQUErSyxVQUFBL1MsRUFBQTBTLGVDakJBclcsSUFBQXFWLFdBQUEsZUFDQSxhQUFBLFNBQUEsZUFBQSxXQUNBLFNBQUFqVixFQUFBdUQsRUFBQWdULEVBQUFwQixHQUdBblYsRUFBQWdFLFFBQUFtUixFQUFBN0csUUFBQWlJLEVBQUFsVixPQ0xBekIsSUFBQXFWLFdBQUEsc0JBQ0EsYUFBQSxTQUFBLGVBQUEsV0FDQSxTQUFBalYsRUFBQXVELEVBQUFnVCxFQUFBcEIsR0FDQTVSLEVBQUFpVCxhQUFBLE1BQ0FqVCxFQUFBa1Qsa0JBQUEsR0FHQWxULEVBQUFtVCxhQUFBdkIsRUFBQTVHLFlBQUFnSSxFQUFBbFYsR0FBQSxXQUVBa0MsRUFBQW9ULGFBQUEsU0FBQXJWLEdBQ0FpQyxFQUFBaVQsYUFBQWxWLEVBQ0FpQyxFQUFBa1Qsa0JBQUEsT0FBQW5WLEVBQUEsR0FBQUEsR0FHQWlDLEVBQUFxVCxZQUFBLFNBQUFsUixHQUNBMUYsRUFBQTZXLE1BQUEsY0FBQXZWLEtBQUEsVUFBQW9FLEtBQUFBLEVBQUExQixRQUFBaEUsRUFBQWdFLGFDZkEsSUFBQWdSLEtBQUFuTyxRQUFBLE1BRUFqSCxLQUFBcVYsV0FBQSxxQkFDQSxhQUFBLFNBQUEsV0FBQSxlQUFBLFdBQ0EsU0FBQWpWLEVBQUF1RCxFQUFBdEQsRUFBQXNXLEVBQUFwQixHQWlCQSxRQUFBMkIsR0FBQUMsR0FhQSxRQUFBQyxHQUFBdFIsR0FHQSxHQUFBQSxFQUFBdVIsT0FBQSxDQUNBLEdBQUFDLEdBQUEsQ0FFQSxRQUFBeFIsRUFBQXVSLFFBQ0EsSUFBQSxVQUNBQyxFQUFBLENBQ0EsTUFDQSxLQUFBLFNBQ0FBLEVBQUEsRUFJQUMsRUFBQUQsR0FBQXJTLE1BQUF5SyxRQUFBNUosR0FDQW5DLEVBQUE2VCxXQUFBRCxFQUFBRCxHQUFBNVYsTUFBQWlDLEVBQUE2VCxXQUFBRCxFQUFBRCxHQUFBNVYsTUFBQSxHQTVCQSxJQUFBeVYsR0FBQUEsRUFBQXBSLE9BQUEsRUFFQSxNQURBcEMsR0FBQThULGNBQUEsSUFLQTlULEdBQUE2VCxjQUNBN1QsRUFBQTZULFdBQUFoTCxRQUFBLEVBQ0E3SSxFQUFBNlQsV0FBQS9LLFFBQUEsRUFDQTlJLEVBQUE2VCxXQUFBOUssTUFBQSxDQUNBLElBQUE2SyxLQUFBN1YsS0FBQSxVQUFBdUQsV0FBQXZELEtBQUEsVUFBQXVELFdBQUF2RCxLQUFBLFFBQUF1RCxVQTZCQSxPQVBBa1MsR0FBQW5OLElBQUEsU0FBQStFLEVBQUEzSSxHQUNBMkksRUFBQTJJLFFBQUEvVCxFQUFBVSxjQUNBK1MsRUFBQXJJLEtBSUFwTCxFQUFBOFQsY0FBQSxFQUNBRixFQUdBLFFBQUFJLEtBQ0EsR0FBQSxPQUFBdlgsRUFBQWdFLFFBQUFDLGFBQUEsQ0FHQSxHQUFBOE0sR0FBQW9FLEVBQUE1RyxZQUFBdk8sRUFBQWdFLFFBQUEzQyxHQUFBLFVBR0FrQyxHQUFBaVUsV0FBQVYsRUFBQS9GLEdBR0F4TixFQUFBa1UsWUFBQXpYLEVBQUFnRSxRQUFBRSxrQkFBQWxFLEVBQUFnRSxRQUFBQyxhQUFBLFlBQUEsV0FJQSxRQUFBeVQsS0FFQSxHQUFBQyxHQUFBeEMsRUFBQTFHLFNBQUF6TyxFQUFBZ0UsUUFPQSxPQUpBMlQsSUFDQTNYLEVBQUFzVixXQUFBLGNBQUFyVSxNQUFBLHNDQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxRQUFBSixLQUFBLFNBR0F5VyxFQUlBLFFBQUFDLEtBQ0FyVSxFQUFBc1UsWUFBQUgsSUFDQW5VLEVBQUE4VCxhQUFBLE9BQUFyWCxFQUFBZ0UsUUFBQUUsaUJBRUEsY0FBQVgsRUFBQWtVLFlBQ0FsVSxFQUFBdVUsWUFBQSxHQUVBdlUsRUFBQXVVLFdBQUEsT0FBQTlYLEVBQUFnRSxRQUFBQyxjQUFBLElBQUFqRSxFQUFBZ0UsUUFBQUMsYUFDQVYsRUFBQXVVLFdBQUE5WCxFQUFBZ0UsUUFBQUUsa0JBQUFsRSxFQUFBZ0UsUUFBQUMsY0FLQSxRQUFBOFQsS0FDQS9YLEVBQUFnRSxRQUFBbVIsRUFBQTdHLFFBQUF0TyxFQUFBZ0UsUUFBQTNDLElBQ0FrQyxFQUFBVSxhQUFBakUsRUFBQWdFLFFBQUFDLGFBR0FWLEVBQUE2VCxXQUFBcFgsRUFBQWdFLFNBQUFoRSxFQUFBZ0UsUUFBQTBJLGFBQUExTSxFQUFBZ0UsUUFBQTBJLGFBQUFuSixFQUFBVSxjQUFBLEtBRUFqRSxFQUFBNlcsTUFBQSxtQkFBQTdXLEVBQUFnRSxTQU1BLFFBQUFnVSxLQUNBeEQsZUFBQXhVLEdBQUFnRSxRQUFBb0QsS0FBQTZRLGFBQUFqWSxFQUFBZ0UsUUFBQW9ELEtBQUE2USxlQUFBLEdBQUFDLElBQ0FsWSxFQUFBc1YsV0FBQSxjQUFBclUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsU0FDQTRXLEdBQUEsRUFFQS9DLEVBQUFoRixLQUFBblEsRUFBQWdFLFFBQUEzQyxJQUNBdU8sS0FBQSxTQUFBZ0IsR0FDQXNILEdBQUEsRUFDQWxZLEVBQUFzVixXQUFBLGNBQUFyVSxNQUFBLGdCQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxVQUFBSixLQUFBLFdBR0EsU0FBQTJJLEdBQ0EyTCxRQUFBQyxJQUFBLGNBQUE1TCxHQUNBcU8sR0FBQSxFQUNBbFksRUFBQXNWLFdBQUEsY0FBQXJVLE1BQUEsY0FBQStCLElBQUEsRUFBQTFCLEtBQUEsUUFBQUosS0FBQSxhQWlEQSxRQUFBaVgsR0FBQTNTLEdBQ0EsR0FBQUEsR0FBQUEsRUFBQVUsS0FBQVYsRUFBQVIsUUFBQSxDQUdBekIsRUFBQTZVLFNBQUFwVCxRQUFBOUIsU0FBQXNDLEVBQUFSLFFBQUEsSUFDQXpCLEVBQUE2VSxTQUFBblgsTUFBQXVFLEVBQUEsSUFBQUEsRUFBQVUsSUFBQTNDLEVBQUE2VSxTQUFBblgsS0FFQSxJQUFBb1gsR0FBQTdTLENBQ0E2UyxHQUFBclUsUUFBQWhFLEVBQUFnRSxRQUNBaEUsRUFBQTZXLE1BQUEsbUJBQUF3QixJQUlBLFFBQUFDLEtBQ0FyWSxFQUFBLFdBQ0E4WCxJQUNBUixJQUNBSyxJQUNBSSxJQUNBelUsRUFBQWdWLFlBQUEsR0FDQSxHQUdBLFFBQUFDLEdBQUFDLEdBQ0FqRCxRQUFBQyxJQUFBLHVCQUFBZ0QsR0FDQWxWLEVBQUFnVixZQUFBLEVBeE1BLEdBQUFHLEtBQUFwWCxLQUFBLFVBQUF1RCxXQUFBdkQsS0FBQSxVQUFBdUQsV0FBQXZELEtBQUEsUUFBQXVELFVBRUF0QixHQUFBZ1YsWUFBQSxFQUNBaFYsRUFBQXNVLGFBQUEsRUFDQXRVLEVBQUE4VCxjQUFBLEVBQ0E5VCxFQUFBdVUsWUFBQSxFQUNBdlUsRUFBQWtVLFlBQUEsWUFDQWxVLEVBQUFpVSxXQUFBa0IsRUFDQW5WLEVBQUE2VCxjQUNBN1QsRUFBQVUsYUFBQWpFLEVBQUFnRSxRQUFBQyxjQUFBLEVBQ0FWLEVBQUE2VSxVQUNBcFQsUUFBQSxFQUNBL0QsTUFBQSxXQWtHQSxJQUFBaVgsSUFBQSxDQXFCQUgsS0FDQVIsSUFDQUssSUFHQXJVLEVBQUFvVixhQUFBLFNBQUE5VCxHQUNBN0UsRUFBQTZXLE1BQUEsY0FBQXZWLEtBQUEsUUFBQXVELE1BQUFBLEVBQUFiLFFBQUFoRSxFQUFBZ0UsV0FJQVQsRUFBQXFWLFdBQUEsV0FDQSxHQUFBQyxHQUFBbkIsR0FHQW1CLEtBRUF0VixFQUFBa1UsWUFBQSxVQUNBbFUsRUFBQWdWLFlBQUEsRUFFQW5WLFdBQUEsV0FDQXBELEVBQUE2VyxNQUFBLGlCQUNBLElBRUE3QixJQUFBOEQsS0FBQSxlQUFBeFgsS0FBQSxVQUFBMkssVUFBQWpNLEVBQUFnRSxRQUFBM0MsT0FJQWtDLEVBQUF3VixhQUFBLFdBQ0EsR0FBQUYsR0FBQW5CLEdBR0FtQixLQUVBdFYsRUFBQWdWLFlBQUEsRUFDQWhWLEVBQUFrVSxZQUFBLFlBQ0FsVSxFQUFBdVUsWUFBQSxFQUVBMVUsV0FBQSxXQUNBcEQsRUFBQTZXLE1BQUEsaUJBQ0EsSUFFQTdCLElBQUE4RCxLQUFBLGVBQUF4WCxLQUFBLFlBQUEySyxVQUFBak0sRUFBQWdFLFFBQUEzQyxPQStCQTJULElBQUFVLEdBQUEsa0JBQUF5QyxHQUNBbkQsSUFBQVUsR0FBQSxrQkFBQTRDLEdBQ0F0RCxJQUFBVSxHQUFBLGdCQUFBOEMsS0NsTkEsSUFBQTVQLElBQUEvQixRQUFBLEtBRUFqSCxLQUFBcVYsV0FBQSx1QkFDQSxhQUFBLFNBQUEsU0FBQSxXQUNBLFNBQUFqVixFQUFBdUQsRUFBQTJSLEVBQUFDLEdBVUEsUUFBQTZELEdBQUExWCxFQUFBVCxHQUNBYixFQUFBZ0UsUUFBQTFDLEdBQUFvTyxLQUFBN08sR0FHQSxRQUFBb1ksS0FFQSxHQUFBL1AsR0FBQWlNLEVBQUF4UyxJQUFBLHNCQUVBLE9BQUF1RyxJQUFBQSxFQUFBZ04sUUFBQWhOLEVBQUFpTixhQUFBak4sRUFBQWtOLGlCQUlBLEdBSEEsRUFsQkEsR0FBQThDLEVBRUEzVixHQUFBMlUsU0FBQSxFQUNBM1UsRUFBQTRWLGVBQUEsWUFBQSxPQUFBLFVBQ0E1VixFQUFBNlYsWUFBQSxFQUNBN1YsRUFBQThWLGdCQUFBLEVBQ0E5VixFQUFBK1YsVUFDQXpaLFFBQUEwRSxLQUFBdkUsRUFBQWdFLFFBQUFULEVBQUErVixRQWtCQS9WLEVBQUE4VixlQUFBSixJQUdBMVYsRUFBQTBCLE9BQUEsVUFBQSxTQUFBc1UsRUFBQUMsR0FDQUQsR0FBQUMsSUFDQWpXLEVBQUE2VixZQUFBLEVBR0E3VixFQUFBc00sVUFFQSxHQUlBdE0sRUFBQXNNLEtBQUEsV0FDQXFKLEdBQ0FwVyxPQUFBQyxhQUFBbVcsR0FJQUEsRUFBQTlWLFdBQUEsV0FHQStSLEVBQUF0RixLQUFBN1AsRUFBQWdFLFNBQ0E0TCxLQUFBLFNBQUFnQixHQUVBNVEsRUFBQTZXLE1BQUEsbUJBQUFqRyxHQUdBL1EsUUFBQTBFLEtBQUF2RSxFQUFBZ0UsUUFBQVQsRUFBQStWLFFBQ0EvVixFQUFBNlYsWUFBQSxHQUdBLFNBQUF2UCxHQUNBMkwsUUFBQUMsSUFBQSxNQUFBNUwsTUFFQSxNQUlBdEcsRUFBQWtXLFFBQUEsV0FDQWxXLEVBQUEyVSxTQUFBLEVBQ0FsWSxFQUFBc1YsV0FBQSxjQUFBclUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsU0FFQTZULEVBQUFoRixLQUFBblEsRUFBQWdFLFFBQUEzQyxJQUNBdU8sS0FBQSxTQUFBZ0IsR0FDQXJOLEVBQUEyVSxTQUFBLEVBQ0FsWSxFQUFBc1YsV0FBQSxjQUFBclUsTUFBQSxnQkFBQStCLElBQUEsRUFBQTFCLEtBQUEsVUFBQUosS0FBQSxXQUdBLFNBQUEySSxHQUNBdEcsRUFBQTJVLFNBQUEsRUFDQTFDLFFBQUFDLElBQUEsY0FBQTVMLEdBQ0E3SixFQUFBc1YsV0FBQSxjQUFBclUsTUFBQSxjQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxRQUFBSixLQUFBLGFBS0FxQyxFQUFBbVcsV0FBQSxXQUNBLEdBQUFDLEdBQUFDLFFBQUEsbURBQ0FELEtBRUE5WixRQUFBMEUsS0FBQWhCLEVBQUErVixPQUFBdFosRUFBQWdFLFNBQ0FULEVBQUE2VixZQUFBLElBS0E3VixFQUFBc1csY0FBQSxXQUNBLEdBQUFGLEdBQUFDLFFBQUEsZ0RBQ0EsSUFBQUQsRUFBQSxDQUNBLEdBQUFHLEdBQUE5WixFQUFBZ0UsUUFBQTNDLEVBRUE4VCxHQUFBelMsT0FBQW9YLEdBQ0FsSyxLQUFBLFNBQUFnQixHQUNBNVEsRUFBQTZXLE1BQUEsb0JBQUF4VixHQUFBeVksSUFDQTVFLEVBQUFLLEdBQUEsUUFDQXZWLEVBQUFnRSxXQUNBVCxFQUFBNlYsWUFBQSxFQUNBcFosRUFBQXNWLFdBQUEsY0FBQXJVLE1BQUEsK0JBQUErQixJQUFBLEVBQUExQixLQUFBLGFBR0EsU0FBQXVJLEdBQ0EyTCxRQUFBQyxJQUFBLE1BQUE1TCxHQUNBN0osRUFBQTZXLE1BQUEsb0JBQUF4VixHQUFBeVksSUFDQTVFLEVBQUFLLEdBQUEsUUFDQXZWLEVBQUFnRSxXQUNBVCxFQUFBNlYsWUFBQSxNQU1BN1YsRUFBQXdXLFlBQUEsV0FDQSxHQUFBQyxJQUNBQyxRQUFBLEVBQ0FuTCxLQUFBLEtBQ0FGLE1BQUEsS0FDQUMsT0FBQSxLQUdBbUssR0FBQSxZQUFBZ0IsSUFJQXpXLEVBQUEyVyxZQUFBLFdBQ0EsR0FBQUMsSUFDQUYsUUFBQSxFQUNBM1ksS0FBQSxZQUNBeU4sTUFBQSxLQUdBaUssR0FBQSxZQUFBbUIsSUFJQTVXLEVBQUE2VyxVQUFBLFdBQ0EsR0FBQUMsSUFDQUosUUFBQSxFQUNBbkwsS0FBQSxLQUNBdkcsTUFBQSxLQUNBK0MsS0FBQSxLQUdBME4sR0FBQSxVQUFBcUIsSUFJQTlXLEVBQUErVyxhQUFBLFNBQUFoWixFQUFBRCxHQUNBckIsRUFBQWdFLFFBQUExQyxHQUFBRCxHQUFBNFksT0FBQWphLEVBQUFnRSxRQUFBMUMsR0FBQUQsR0FBQTRZLFVBQUEsR0FBQSxTQUFBamEsRUFBQWdFLFFBQUExQyxHQUFBRCxHQUFBNFksUUFBQSxHQUFBLEVBR0ExVyxFQUFBc00sUUFJQXRNLEVBQUFnWCxlQUFBLFNBQUFqWixFQUFBRCxHQUNBckIsRUFBQWdFLFFBQUExQyxHQUFBeU8sT0FBQTFPLEVBQUEsR0FHQWtDLEVBQUFzTSxRQUlBdE0sRUFBQTBNLGFBQUEsV0FDQWtGLEVBQUFsRixhQUFBalEsRUFBQWdFLFNBQ0E0TCxLQUFBLFNBQUFnQixHQUNBNVEsRUFBQXNWLFdBQUEsY0FBQXJVLE1BQUEsdUJBQUErQixJQUFBLEVBQUExQixLQUFBLFVBQUFKLEtBQUEsYUFHQSxTQUFBMkksR0FDQTdKLEVBQUFzVixXQUFBLGNBQUFyVSxNQUFBLG9DQUFBK0IsSUFBQSxFQUFBMUIsS0FBQSxRQUFBSixLQUFBLGNDckxBLElBQUEwSCxJQUFBL0IsUUFBQSxLQUVBakgsS0FBQXFWLFdBQUEsaUJBQ0EsYUFBQSxTQUFBLFNBQUEsV0FDQSxTQUFBalYsRUFBQXVELEVBQUEyUixFQUFBQyxHQUNBNVIsRUFBQWlYLFlBR0FqWCxFQUFBaVgsU0FBQXJGLEVBQUE5RyxTQUdBck8sRUFBQTRDLElBQUEsdUJBQUEsU0FBQUMsRUFBQTJDLEdBQ0FBLEdBQUFBLEVBQUFuRSxJQUVBa0MsRUFBQWlYLFNBQUFsTCxRQUFBOUosS0FJQXhGLEVBQUE0QyxJQUFBLG1CQUFBLFNBQUFDLEVBQUEyQyxHQUNBQSxHQUFBQSxFQUFBbkUsSUFFQWtDLEVBQUFpWCxTQUFBNVEsSUFBQSxTQUFBK0UsRUFBQTNJLEdBQ0EySSxFQUFBdE4sS0FBQW1FLEVBQUFuRSxLQUNBa0MsRUFBQWlYLFNBQUF4VSxHQUFBL0UsTUFBQXVFLEVBQUF2RSxNQUNBc0MsRUFBQWlYLFNBQUF4VSxHQUFBa0csVUFBQTFHLEVBQUEwRyxVQUVBMUcsRUFBQWtILGFBQUFsSCxFQUFBdkIsZ0JBRUF1QixFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBbUksVUFDQTdJLEVBQUFpWCxTQUFBeFUsR0FBQW1HLE9BQUFDLFFBQUE1RyxFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBbUksU0FHQTVHLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFvSSxVQUNBOUksRUFBQWlYLFNBQUF4VSxHQUFBbUcsT0FBQUUsUUFBQTdHLEVBQUFrSCxhQUFBbEgsRUFBQXZCLGNBQUFvSSxTQUdBN0csRUFBQWtILGFBQUFsSCxFQUFBdkIsY0FBQXFJLFFBQ0EvSSxFQUFBaVgsU0FBQXhVLEdBQUFtRyxPQUFBRyxNQUFBOUcsRUFBQWtILGFBQUFsSCxFQUFBdkIsY0FBQXFJLE9BR0E5RyxFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBc0ksUUFDQWhKLEVBQUFpWCxTQUFBeFUsR0FBQW1HLE9BQUFJLE1BQUEvRyxFQUFBa0gsYUFBQWxILEVBQUF2QixjQUFBc0ksYUFRQXZNLEVBQUE0QyxJQUFBLG1CQUFBLFNBQUFDLEVBQUEyQyxHQUNBQSxHQUFBQSxFQUFBbkUsSUFFQWtDLEVBQUFpWCxTQUFBNVEsSUFBQSxTQUFBK0UsRUFBQTNJLEdBQ0EySSxFQUFBdE4sS0FBQW1FLEVBQUFuRSxJQUNBa0MsRUFBQWlYLFNBQUF6SyxPQUFBL0osRUFBQSxPQUtBekMsRUFBQWtYLFlBQUEsU0FBQXBaLEdBR0EsR0FBQUMsR0FBQSxRQUdBNFQsR0FBQUssR0FBQSxZQUFBalUsR0FBQUQsR0FBQUEsSUFDQXJCLEVBQUFvVixpQkFBQS9ULE1DL0RBekIsSUFBQThhLFNBQUEsVUFDQUMsSUFBQSxRQUNBQyxTQUVBQyxRQUVBbFIsU0FDQW1SLFlBQ0FDLElBQUEsSUFDQUMsTUFBQSxFQUNBQyxLQUFBLEtBRUFDLFVBQUEsT0FDQUMsYUFBQSxFQUNBQyxvQkFBQSxLQ2pCQXhiLElBQUF5YixRQUNBLGlCQUFBLHFCQUNBLFNBQUFDLEVBQUFDLEdBU0FELEVBS0FFLE1BQUEsUUFDQTVPLElBQUEsSUFDQXRKLFlBQUEsY0FFQWtZLE1BQUEsZUFDQTVPLElBQUEsZUFDQXRKLFlBQUEsbUJBQ0EyUixXQUFBLG9CQU1BdUcsTUFBQSxZQUNBNU8sSUFBQSxnQkFDQXRKLFlBQUEsZ0JBQ0EyUixXQUFBLGdCQUVBdUcsTUFBQSxxQkFDQTVPLElBQUEsWUFDQXRKLFlBQUEseUJBQ0EyUixXQUFBLHdCQUVBdUcsTUFBQSxtQkFDQTVPLElBQUEsVUFDQXRKLFlBQUEsdUJBQ0EyUixXQUFBLHNCQUVBdUcsTUFBQSxvQkFDQTVPLElBQUEsV0FDQXRKLFlBQUEsd0JBQ0EyUixXQUFBLHVCQXNCQXNHLEVBQUFFLFVBQUEsUUNyRUE3YixJQUFBOGIsS0FBQSxhQUFBLFFBQ0EsU0FBQTFiLEVBQUEyYixHQUdBLEdBQUFDLEdBQUFELEVBQUFFLFNBQUFDLFFBQUFDLE1BQ0FILEdBQUEsZ0JBQUEsbUJBRUE1YixFQUFBNEMsSUFBQSxvQkFBQSxTQUFBb1osRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTlQLEdBQ0FrSixRQUFBQyxJQUFBLG9CQUFBbkoiLCJmaWxlIjoibXVnLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1VRyA9IGFuZ3VsYXIubW9kdWxlKCdtdWdzaG90JywgWyd1aS5yb3V0ZXInLCAnbXVndGVtcGxhdGVzJ10pO1xuIiwiLyoqXG4gKiBhbGVydFxuICogYSBkaXJlY3RpdmUgZm9yIGhhbmRsaW5nIGFsbCBhbGVydHMgYW5kIG5vdGljZXMgZm9yIGEgdXNlclxuICpcbiAqIFVTRTpcbiAqIDxhbGVydD48L2FsZXJ0PlxuICpcbiAqICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6IFwiSGV5IHRoZXJlLCBJbSBhIG1lc3NhZ2UhIVwiLCBkdXI6IDUsIHR5cGU6IFwiaW5mb1wiLCBpY29uOiBcImluZm9cIiwgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fSB9KTtcbiAqXG4gKiBUWVBFUzpcbiAqIC0gaW5mbywgc3VjY2Vzcywgd2FybmluZywgZXJyb3JcbiAqXG4gKiBPUFRJT05TOlxuICogLSB0aXRsZTogdGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLCAoVE9ETzogY2FuIGJlIGh0bWwgb3Igc2ltcGxlIHRleHQpXG4gKiAtIGNhbGxiYWNrOiBhIGZ1bmN0aW9uIHRvIGZpcmUgb24gYWN0aW9uIHRha2VuIG9uIG1lc3NhZ2VcbiAqIC0gZHVyOiB0aGUgdGltZW91dCBvZiB0aGUgbWVzc2FnZSwgaW4gc2Vjb25kc1xuICogLSB0eXBlOiBzZWUgYWJvdmUgdHlwZXNcbiAqIC0gaWNvbjogbm8gZGVmYXVsdCwgc2VlIGh0dHBzOi8vb2N0aWNvbnMuZ2l0aHViLmNvbS8gZm9yIG9wdGlvbnNcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnYWxlcnQnLFxuWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgJyRjb21waWxlJywgJyR0ZW1wbGF0ZUNhY2hlJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiYWxlcnQtcGFyZW50XCI+PC9kaXY+JyxcbiAgICBzY29wZToge30sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIGFsZXJ0VGVtcGxhdGUgPSAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FsZXJ0Lmh0bWwnKTtcbiAgICAgIHZhciBfZWwgPSBhbmd1bGFyLmVsZW1lbnQoZWwpO1xuICAgICAgdmFyIHRpbWVyO1xuICAgICAgdmFyIGR1cmF0aW9uID0gNTAwMDtcbiAgICAgIHZhciBwcmV2aW91c0lkID0gJyc7XG4gICAgICB2YXIgYWxlcnRBY3RpdmUgPSAnYWxlcnQtYWN0aXZlJztcbiAgICAgIHZhciBhbGVydFZpc2libGUgPSAnYWxlcnQtdmlzaWJsZSc7XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgdmFyIF9pZCA9ICgrbmV3IERhdGUoKSk7XG4gICAgICAgIHZhciBuZXdCb2R5ID0gZGF0YS50aXRsZTtcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pID8gZGF0YS5pY29uIDogbnVsbDtcbiAgICAgICAgdmFyICR0bXBTY29wZSA9ICRyb290U2NvcGUuJG5ldyh0cnVlKTtcblxuICAgICAgICAvLyBzZXR1cCBzaW1wbGUgc2NvcGUgZm9yIG9ubHkgdGhpcyBhbGVydCBpdGVtXG4gICAgICAgICR0bXBTY29wZS5hbGVydCA9IHt9O1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuaWQgPSBfaWQ7XG4gICAgICAgICR0bXBTY29wZS5hbGVydC5pY29uID0gKGRhdGEuaWNvbikgPyBkYXRhLmljb24gOiBudWxsO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQudHlwZSA9IChkYXRhLnR5cGUpID8gZGF0YS50eXBlIDogJ2luZm8nO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQudGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgICAgICAkdG1wU2NvcGUuYWxlcnQuYWN0aW9uID0gKCFkYXRhLmNhbGxiYWNrKSA/IG51bGwgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYWN0aW9uRWwgPSB0aGlzLmlkO1xuICAgICAgICAgIGRhdGEuY2FsbGJhY2soKTtcbiAgICAgICAgICBjbGVhckVsKHRoaXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBhbGVydEVsID0gJGNvbXBpbGUoYWxlcnRUZW1wbGF0ZSkoJHRtcFNjb3BlKTtcblxuICAgICAgICAvLyBzZXQgYSB1bmlxdWUgaWRcbiAgICAgICAgYWxlcnRFbFswXS5pZCA9IF9pZDtcbiAgICAgICAgcHJldmlvdXNJZCA9IF9pZDtcblxuICAgICAgICAvLyB0aHJvdyBpbnRvIGRvbSwgdGhlbiBzaG93IGluIHZpZXcsIHN0YXJ0IHRpbWVyXG4gICAgICAgIF9lbC5hcHBlbmQoYWxlcnRFbCk7XG4gICAgICAgIGFsZXJ0RWwuYWRkQ2xhc3MoYWxlcnRBY3RpdmUpO1xuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYWxlcnRFbC5hZGRDbGFzcyhhbGVydFZpc2libGUpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjbGVhckVsKGFsZXJ0RWwpO1xuICAgICAgICB9LCBkdXJhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRWwoZWxlbSkge1xuICAgICAgICBpZiAoIWVsZW0gJiYgcHJldmlvdXNJZCkge1xuICAgICAgICAgIGVsZW0gPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlvdXNJZCkpO1xuICAgICAgICB9IGVsc2UgaWYgKCFlbGVtKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW0pIHtcbiAgICAgICAgICBlbGVtID0gYW5ndWxhci5lbGVtZW50KGVsZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcyhhbGVydFZpc2libGUpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRvbignQUxFUlQ6RklSRScsIGZ1bmN0aW9uKGUsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLnRpdGxlKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBjbGVhckVsKCk7XG5cbiAgICAgICAgaWYgKGRhdGEuZHVyKSB7XG4gICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1ciAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TWVzc2FnZShkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qKlxuICogZmFkZUluXG4gKiBBIGRpcmVjdGl2ZSBmb3IgYW5pbWF0aW5nIGluIGVsZW1lbnRzXG4gKi9cbk1VRy5kaXJlY3RpdmUoJ2ZhZGVJbicsIFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgdmFyIG9mZnNldCA9IHBhcnNlSW50KGF0dHJzLmZhZGVJbikgfHwgMTA7XG4gICAgICBlbGVtLmFkZENsYXNzKCdmYWRlLWluJyk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW0uY3NzKCdvcGFjaXR5JywgJzEnKTtcbiAgICAgIH0sIG9mZnNldCk7XG4gICAgfVxuICB9O1xuXG59XSk7XG4iLCIvKipcbiAqIE1vZGFsXG4gKiBCdWlsZHMgYSBtb2RhbCBmb3IgaW1hZ2Ugdmlld2luZyBhbmQgY29tcGFyaW5nXG4gKlxuICogQHVzYWdlXG4gKiA8bW9kYWw+PC9tb2RhbD5cbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbW9kYWwnLFxuWyckdGltZW91dCcsICckY29tcGlsZScsICckcm9vdFNjb3BlJyxcbmZ1bmN0aW9uKCR0aW1lb3V0LCAkY29tcGlsZSwgJHJvb3RTY29wZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ21vZGFsLmh0bWwnLFxuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cikge1xuICAgICAgdmFyIG1vZGFsQWN0aXZlID0gJ21vZGFsLW9wZW4nO1xuICAgICAgdmFyIG1vZGFsVmlzaWJsZSA9ICdtb2RhbC12aXNpYmxlJztcblxuICAgICAgJHNjb3BlLnByb2plY3QgPSBhbmd1bGFyLmNvcHkoJHJvb3RTY29wZS5wcm9qZWN0KTtcbiAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSAnc2lkZXMnO1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHt9O1xuICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9IHt9O1xuICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtID0ge1xuICAgICAgICBhOiAnJyxcbiAgICAgICAgYjogJycsXG4gICAgICAgIGM6ICcnXG4gICAgICB9O1xuICAgICAgJHNjb3BlLnZpZXdlciA9IHtcbiAgICAgICAgaXRlbXM6IFtdXG4gICAgICB9O1xuICAgICAgJHNjb3BlLm9wYWNpdHlSYW5nZSA9IHtcbiAgICAgICAgYW1vdW50OiAwLjgsXG4gICAgICAgIGludmVyc2U6IDAuMixcbiAgICAgICAgcGVyY2VudDogJzgwJSdcbiAgICAgIH07XG5cbiAgICAgIC8vIHdpbmRvdy5BVExfSlFfUEFHRV9QUk9QUyA9IHtcbiAgICAgIC8vICAgdHJpZ2dlckZ1bmN0aW9uOiBmdW5jdGlvbihzaG93Q29sbGVjdG9yRGlhbG9nKSB7XG4gICAgICAvLyAgICAgLy9SZXF1aXJlcyB0aGF0IGpRdWVyeSBpcyBhdmFpbGFibGUhXG4gICAgICAvLyAgICAgJChcIiNmdW5UaWNrZXRUaW1lXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vICAgICAgIHNob3dDb2xsZWN0b3JEaWFsb2coKTtcbiAgICAgIC8vICAgICB9KTtcbiAgICAgIC8vICAgfSxcbiAgICAgIC8vICAgZmllbGRWYWx1ZXM6IHtcbiAgICAgIC8vICAgICBzdW1tYXJ5OiAnVmlzdWFsIERpZmY6ICcgKyAkc2NvcGUuYWN0aXZlSXRlbS5zdGF0dXMgKyAnIGZvciAnICsgJHNjb3BlLmFjdGl2ZUl0ZW0ubmFtZSxcbiAgICAgIC8vICAgICBkZXNjcmlwdGlvbjogJ0RldGFpbHM6XFxuXFxuKipTdGF0dXM6KiogRXJyb3InLFxuICAgICAgLy8gICAgIHByaW9yaXR5OiAnMidcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfTtcblxuICAgICAgJHNjb3BlLiR3YXRjaCgnb3BhY2l0eVJhbmdlLmFtb3VudCcsIGZ1bmN0aW9uKG52LCBvdikge1xuICAgICAgICBpZiAobnYgPT09IG92KSB7cmV0dXJuO31cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIG90aGVyIHZhbHVlc1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLmludmVyc2UgPSAoMSAtIG52KS50b0ZpeGVkKDIpO1xuICAgICAgICAkc2NvcGUub3BhY2l0eVJhbmdlLnBlcmNlbnQgPSBNYXRoLnJvdW5kKG52ICogMTAwKSArICclJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzZXQgdGhlIGFjdGl2ZSBpdGVtIHdpdGggY29ycmVjdCBwYXRoc1xuICAgICAgZnVuY3Rpb24gc2V0QWN0aXZlSXRlbShkYXRhKSB7XG4gICAgICAgIHZhciBpbWFnZVNyYyA9ICghZGF0YS5yZW1vdGVTb3VyY2UpID8gZGF0YS5zb3VyY2UgOiBkYXRhLnJlbW90ZVNvdXJjZTtcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL3JlZmVyZW5jZS8nICsgJHJvb3RTY29wZS5wcm9qZWN0LmlkICsgJy8nICsgaW1hZ2VTcmMucmVwbGFjZSgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoICsgJy5wbmcnLCAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSArICcucG5nJykgOiBpbWFnZVNyYztcbiAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmIgPSAoIWRhdGEucmVtb3RlU291cmNlKSA/ICdzY3JlZW5zL2NvbXBhcmUvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArIGltYWdlU3JjIDogaW1hZ2VTcmM7XG4gICAgICAgICRzY29wZS5jb21wYXJlSXRlbS5jID0gKCFkYXRhLnJlbW90ZVNvdXJjZSkgPyAnc2NyZWVucy9jb21wYXJlLycgKyAkcm9vdFNjb3BlLnByb2plY3QuaWQgKyAnLycgKyBpbWFnZVNyYy5yZXBsYWNlKCcucG5nJywgJ19kaWZmLnBuZycpIDogaW1hZ2VTcmM7XG4gICAgICB9XG5cbiAgICAgIC8vIENob29zZSB0aGUgdmlld2VyIGxheW91dFxuICAgICAgJHNjb3BlLm9wdGlvbk1vZGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICRzY29wZS5hY3RpdmVPcHRpb24gPSB0eXBlO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01PREFMOkNMT1NFJywgZnVuY3Rpb24oZSwgYXJncykge1xuICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkcm9vdFNjb3BlLiRvbignTU9EQUw6T1BFTicsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKCFhcmdzIHx8ICFhcmdzLnR5cGUpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlc2V0IGN1cnJlbnQgSW5kZXhcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICRzY29wZS5wcm9qZWN0ID0gYW5ndWxhci5jb3B5KCRyb290U2NvcGUucHJvamVjdCk7XG5cbiAgICAgICAgLy8gU2hvdyBhIHNpbmdsZSBpdGVtXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gYXJncy5pdGVtO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IG51bGw7XG5cbiAgICAgICAgICBpZiAoJHNjb3BlLmFjdGl2ZUl0ZW0ucmVtb3RlU291cmNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGFyZUl0ZW0uYSA9ICRzY29wZS5hY3RpdmVJdGVtLnJlbW90ZVNvdXJjZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmNvbXBhcmVJdGVtLmEgPSAnc2NyZWVucy8nICsgJHNjb3BlLmFjdGl2ZUl0ZW0udHlwZSArICcvJyArICRyb290U2NvcGUucHJvamVjdC5pZCArICcvJyArICRzY29wZS5hY3RpdmVJdGVtLnNvdXJjZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IG11bHRpcGxlIGl0ZW1zXG4gICAgICAgIGlmIChhcmdzLnR5cGUgPT09ICdiYXRjaCcgJiYgYXJncy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJHNjb3BlLmFjdGl2ZUl0ZW0gPSBhcmdzLml0ZW1zWyRzY29wZS5jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICRzY29wZS52aWV3ZXIgPSBhcmdzLnByb2plY3QgfHwge307XG4gICAgICAgICAgJHNjb3BlLnZpZXdlci5pdGVtcyA9IGFyZ3MuaXRlbXM7XG4gICAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYWtlIHRoZSBtb2RhbCBhY3RpdmUgd2l0aCBkYXRhXG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsQWN0aXZlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKG1vZGFsVmlzaWJsZSk7XG4gICAgICAgIH0sIDMwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MobW9kYWxWaXNpYmxlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKG1vZGFsQWN0aXZlKTtcbiAgICAgICAgfSwgMjMwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIG9mIGxlZnQvcmlnaHQgbmF2aWdhdGlvblxuICAgICAgJHNjb3BlLm1vZGFsQWN0aW9uTmF2ID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoJHNjb3BlLnZpZXdlci5pdGVtcy5sZW5ndGggPCAxKSB7IHJldHVybjsgfVxuXG4gICAgICAgIHZhciB0b3RhbCA9ICRzY29wZS52aWV3ZXIuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIG5leHRJZHg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IHRvdGFsKSA/IDAgOiAkc2NvcGUuY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0SWR4ID0gKCRzY29wZS5jdXJyZW50SW5kZXggPT09IDApID8gdG90YWwgOiAkc2NvcGUuY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hY3RpdmVJdGVtID0gJHNjb3BlLnZpZXdlci5pdGVtc1tuZXh0SWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IG5leHRJZHg7XG4gICAgICAgIHNldEFjdGl2ZUl0ZW0oJHNjb3BlLmFjdGl2ZUl0ZW0pO1xuICAgICAgfTtcblxuICAgICAgLy8gR28gZGlyZWN0bHkgdG8gYW4gaXRlbVxuICAgICAgJHNjb3BlLmdvVG9JbmRleCA9IGZ1bmN0aW9uKGlkeCkge1xuICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRJbmRleCA9PT0gaWR4KSB7cmV0dXJuO31cblxuICAgICAgICAkc2NvcGUuYWN0aXZlSXRlbSA9ICRzY29wZS52aWV3ZXIuaXRlbXNbaWR4XTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGlkeDtcbiAgICAgICAgc2V0QWN0aXZlSXRlbSgkc2NvcGUuYWN0aXZlSXRlbSk7XG4gICAgICB9O1xuXG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyoqXG4gKiBtc2dDZW50ZXJcbiAqIGEgZGlyZWN0aXZlIGZvciBoYW5kbGluZyBhbGwgbWVzc2FnZSByZWxheSBmb3IgYSB1c2VyXG4gKlxuICogVVNFOlxuICogJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdNU0dDRU5URVI6RklSRScsIHsgbXNnOiBcIkhleSB0aGVyZSwgSW0gYSBtZXNzYWdlISFcIiwgZHVyOiA1LCB0eXBlOiBcImluZm9cIiwgaWNvbjogXCJpbmZvXCIsIGNhbGxiYWNrOiBmdW5jdGlvbigpe30gfSk7XG4gKlxuICogVFlQRVM6XG4gKiAtIERFRkFVTFQsIHNob3dzIGdyZWVuIG1lc3NhZ2UsIHVzZWQgZm9yIHN1Y2Nlc3NcbiAqIC0gV2FybmluZzogXCJ3YXJuXCIgLSBzaG93cyBvcmFuZ2UgbWVzc2FnZSwgdXNlZCBmb3IgZXJyb3JzIG9yIHdhcm5pbmdzXG4gKiAtIEluZm86IFwiaW5mb1wiIC0gc2hvd3MgZGFyayBibHVlIG1lc3NhZ2UsIHVzZWQgZm9yIGdlbmVyYWwgdGhpbmdzXG4gKlxuICogT1BUSU9OUzpcbiAqIC0gbXNnOiB0aGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UsIChUT0RPOiBjYW4gYmUgaHRtbCBvciBzaW1wbGUgdGV4dClcbiAqIC0gY2FsbGJhY2s6IGEgZnVuY3Rpb24gdG8gZmlyZSBvbiBhY3Rpb24gdGFrZW4gb24gbWVzc2FnZVxuICogLSBkdXI6IHRoZSB0aW1lb3V0IG9mIHRoZSBtZXNzYWdlXG4gKiAtIHR5cGU6IHNlZSBhYm92ZSB0eXBlc1xuICogLSBpY29uOiBkZWZhdWx0IGlzIGdsb2JlLCBjYW4gYmUgc2V0IHRvIEFOWSBpLXNwcml0ZXMgKHNwcml0ZXMubGVzcylcbiAqL1xuTVVHLmRpcmVjdGl2ZSgnbXNnQ2VudGVyJyxcblsgXCIkcm9vdFNjb3BlXCIsIFwiJHRpbWVvdXRcIiwgXCIkY29tcGlsZVwiLFxuZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0LCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHNjb3BlOiB7fSxcbiAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIG1zZ1RlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtc2dcIiBuZy1jbGljaz1cImFjdGlvbigpXCI+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1pY25cIj48aSBjbGFzcz1cIml3IGktSUNPTlwiPjwvaT48L2Rpdj4nK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibXNnLWNvbnRcIj5CT0RZPC9kaXY+JytcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1zZy1hY3Rpb25cIj48aSBjbGFzcz1cImliIGktci1hcnJvd1wiPjwvaT48L2Rpdj4nK1xuICAgICAgICAnPC9kaXY+JztcblxuICAgICAgdmFyIF9lbCA9IGFuZ3VsYXIuZWxlbWVudChlbCk7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgZHVyYXRpb24gPSA1MDAwO1xuICAgICAgdmFyIHByZXZpb3VzSWQgPSBcIlwiO1xuICAgICAgdmFyIGRlZmF1bHRJY29uID0gXCJpbmZvXCI7XG5cbiAgICAgIHNjb3BlLmJvZHkgPSBcIlwiO1xuICAgICAgc2NvcGUuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgc2NvcGUuaWNvbiA9IGRlZmF1bHRJY29uO1xuICAgICAgc2NvcGUuYWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFjdGlvbkVsID0gX2VsLmZpbmQoXCIjXCIgKyB0aGlzLmlkKTtcbiAgICAgICAgc2NvcGUuY2FsbGJhY2soKTtcbiAgICAgICAgY2xlYXJFbCggYWN0aW9uRWwgKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNob3dNZXNzYWdlICggZGF0YSApe1xuICAgICAgICB2YXIgX2lkID0gKCtuZXcgRGF0ZSgpKTtcbiAgICAgICAgdmFyIG5ld0JvZHkgPSBkYXRhLm1zZztcbiAgICAgICAgdmFyIG5ld0ljbiA9IChkYXRhLmljb24pPyBkYXRhLmljb24gOiBkZWZhdWx0SWNvbjtcblxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBtc2dUZW1wbGF0ZS5yZXBsYWNlKFwiQk9EWVwiLCBuZXdCb2R5KS5yZXBsYWNlKFwiSUNPTlwiLCBuZXdJY24pO1xuICAgICAgICB2YXIgbmV3TWVzc2FnZSA9ICRjb21waWxlKHRlbXBsYXRlKShzY29wZSk7XG5cbiAgICAgICAgLy8gc2V0IGEgdW5pcXVlIGlkXG4gICAgICAgIG5ld01lc3NhZ2VbMF0uaWQgPSBfaWQ7XG4gICAgICAgIHByZXZpb3VzSWQgPSBfaWQ7XG5cbiAgICAgICAgLy8gdGhyb3cgaW50byBkb20sIHRoZW4gc2hvdyBpbiB2aWV3LCBzdGFydCB0aW1lclxuICAgICAgICBfZWwuYXBwZW5kKCBuZXdNZXNzYWdlICk7XG5cbiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIG5ldyBlbCBmb3IgbGF0ZXJcbiAgICAgICAgdmFyIG1zZ0VsID0gX2VsLmZpbmQoXCIjXCIgKyBfaWQpO1xuICAgICAgICBjaGFuZ2VUeXBlKCBtc2dFbCwgZGF0YS50eXBlICk7XG5cbiAgICAgICAgaWYoZGF0YS5jYWxsYmFjayl7XG4gICAgICAgICAgbXNnRWwuZmluZChcIi5tc2ctYWN0aW9uXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3dcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbXNnRWwuYWRkQ2xhc3MoJ2FkZCcpO1xuICAgICAgICB9LCAyMCk7XG5cbiAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsZWFyRWwoIG1zZ0VsICk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXJFbCAoIGVsZW0gKSB7XG4gICAgICAgIGlmKCFlbGVtICYmIHByZXZpb3VzSWQpe1xuICAgICAgICAgIGVsZW0gPSBfZWwuZmluZChcIiNcIiArIHByZXZpb3VzSWQpO1xuICAgICAgICB9IGVsc2UgaWYoIWVsZW0pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnYWRkJyk7XG4gICAgICAgIGVsZW0uYWRkQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHRoZSB0eXBlIGJ5IGEgY2xhc3NcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVR5cGUgKCBlbGVtLCB0eXBlICkge1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctaW5mbycpO1xuICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdtc2ctd2FybicpO1xuXG4gICAgICAgIGlmKHR5cGUpe1xuICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ21zZy0nICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kb24oJ01TR0NFTlRFUjpGSVJFJywgZnVuY3Rpb24oZSwgZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLm1zZyl7IHJldHVybjsgfVxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgY2xlYXJFbCgpO1xuXG4gICAgICAgIGlmKGRhdGEuZHVyKXtcbiAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRhdGEuY2FsbGJhY2spe1xuICAgICAgICAgIHNjb3BlLmNhbGxiYWNrID0gZGF0YS5jYWxsYmFjaztcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dNZXNzYWdlKCBkYXRhICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCIvKipcbiAqIHByZWxvYWRlclxuICogYSBkaXJlY3RpdmUgZm9yIHNob3dpbmcgYSBwcmVsb2FkZXIgYW5pbWF0aW9uIGR1cmluZyBhIHByb2Nlc3NpbmcgcGVyaW9kXG4gKlxuICogVVNFOlxuICogPHByZWxvYWRlcj48L3ByZWxvYWRlcj5cbiAqXG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1BSRUxPQURFUjpVUERBVEUnLCB7IG1zZzogJ09wZW5pbmcgQnJvd3NlciBTZXNzaW9uJywgcGVyY2VudDogMzcgfSk7XG4gKiAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ1BSRUxPQURFUjpPRkYnKTtcbiAqXG4gKi9cbnZhciBQID0gcmVxdWlyZSgnLi9jb3JlL3ByZWxvYWRlcicpO1xuXG5NVUcuZGlyZWN0aXZlKCdwcmVsb2FkZXInLFxuWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XG4gIHZhciB0b3RhbEluY3JlbWVudCA9IDMwO1xuXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZUluY3JlbWVudHMocHJvamVjdCkge1xuICAgIHZhciBkZWxheSA9IDA7XG4gICAgdmFyIHZpZXdwb3J0cyA9IDA7XG4gICAgdmFyIHNlbGVjdG9ycyA9IDA7XG4gICAgdmFyIGluY3JlbWVudCA9IDEyO1xuXG4gICAgLy8gZ2V0IGFsbCBjb250YWluZXIgc2VsZWN0b3JzIHRvdGFsXG4gICAgaWYgKHByb2plY3Quc2VsZWN0b3JzICYmIHByb2plY3Quc2VsZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvamVjdC5zZWxlY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHByb2plY3Quc2VsZWN0b3JzW2ldICYmIHByb2plY3Quc2VsZWN0b3JzW2ldLnR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3JzICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdldCB0aGUgdmlld3BvcnRzXG4gICAgaWYgKHByb2plY3Qudmlld3BvcnRzICYmIHByb2plY3Qudmlld3BvcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHZpZXdwb3J0cyA9IHByb2plY3Qudmlld3BvcnRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBzZWUgaWYgdGhlcmUgaXMgYSBkZWxheVxuICAgIGlmIChwcm9qZWN0Lm1ldGEgJiYgcHJvamVjdC5tZXRhLmRlbGF5KSB7XG4gICAgICBkZWxheSA9IHBhcnNlSW50KHByb2plY3QubWV0YS5kZWxheSwgMTApO1xuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0ZSBhIHJlYXNvbmFibGUgaW5jcmVtZW50IGZvciB0aGUgYW5pbWF0aW9uXG4gICAgdG90YWxJbmNyZW1lbnQgPSAoaW5jcmVtZW50ICogKHZpZXdwb3J0cyAqIHNlbGVjdG9ycykpICsgMzA7IC8vICsgZGVsYXlcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHNjb3BlOiB7fSxcbiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwcmVsb2FkZXJcIj48L2Rpdj4nLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIEI7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgdGltZXI7XG4gICAgICB2YXIgdGl0bGU7XG4gICAgICB2YXIgcHJldmlvdXNUaXRsZTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDA7XG4gICAgICB2YXIgbG9hZGluZyA9ICdsb2FkaW5nJztcbiAgICAgIHZhciBpc0FuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBJTklUIVxuICAgICAgLy8gYXZvaWQgdGhlIG5nLWNsb2FrIHRpbWVsaW5lXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgQiA9IG5ldyBQLkJyb3dzZXIoKTtcbiAgICAgICAgQi5pbml0KCk7XG5cbiAgICAgICAgLy8gc2V0dXAgb25lIGluc3RhbmNlIG9mIHRoZSBjYW52YXNcbiAgICAgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlbG9hZGVyJyk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKEIuaW5zdGFuY2UpO1xuXG4gICAgICAgIC8vIGRyYXcgYnJvd3NlclxuICAgICAgICBCLmRyYXdCcm93c2VyKCk7XG4gICAgICB9LCAzMCk7XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByZWxvYWRlcihlLCBhcmdzKSB7XG4gICAgICAgIGlmICghYXJncyB8fCAhYXJncy5tc2cpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKGFyZ3MucHJvamVjdCkge1xuICAgICAgICAgIGNhbGN1bGF0ZUluY3JlbWVudHMoYXJncy5wcm9qZWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb250IGFuaW1hdGUgb3ZlciBhIHByZXZpb3VzIGFuaW1hdGlvblxuICAgICAgICBpZiAoIWlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgfSwgdG90YWxJbmNyZW1lbnQgKiAxMCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aXRsZSA9IGFyZ3MubXNnO1xuXG4gICAgICAgIHZhciB0eXBlO1xuXG4gICAgICAgIHN3aXRjaCAodGl0bGUpIHtcbiAgICAgICAgICAvLyBjYXNlICdTdGFydGluZyBjb21wYXJlIGNhcHR1cmUnOlxuICAgICAgICAgIC8vICAgdHlwZSA9IDA7XG4gICAgICAgICAgLy8gICBicmVhaztcbiAgICAgICAgICBjYXNlICdPcGVuaW5nIEJyb3dzZXIgU2Vzc2lvbic6XG4gICAgICAgICAgICB0eXBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0NhcHR1cmluZyBTY3JlZW5zJzpcbiAgICAgICAgICAgIHR5cGUgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAvLyBjYXNlICdVcGRhdGVkIFByb2plY3QgSGlzdG9yeSc6XG4gICAgICAgICAgLy8gICB0eXBlID0gMjtcbiAgICAgICAgICAvLyAgIGJyZWFrO1xuICAgICAgICAgIC8vIGNhc2UgJ0NvbXBhcmluZyBDYXB0dXJlIERhdGEnOlxuICAgICAgICAgIC8vICAgdHlwZSA9IDI7XG4gICAgICAgICAgLy8gICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIHRoYXQgdGhlIHRpdGxlIGhhcyBjaGFuZ2VkXG4gICAgICAgIGlmICh0aXRsZSAhPT0gcHJldmlvdXNUaXRsZSAmJiBCICYmIEIuYW5pbWF0ZSkge1xuXG4gICAgICAgICAgLy8gU3RhcnQgYW5pbWF0aW9uXG4gICAgICAgICAgQi5hbmltYXRlKHR5cGUsIHRvdGFsSW5jcmVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHByZXZpb3VzVGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZXNldFByZWxvYWRlcigpIHtcbiAgICAgICAgQi5yZXNldEJyb3dzZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpPTicsIHNob3dQcmVsb2FkZXIpO1xuICAgICAgJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpVUERBVEUnLCB1cGRhdGVQcmVsb2FkZXIpO1xuICAgICAgJHJvb3RTY29wZS4kb24oJ1BSRUxPQURFUjpPRkYnLCByZXNldFByZWxvYWRlcik7XG4gICAgfVxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ3RpbWVBZ28nLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZXJ2aWNlID0ge307XG5cbiAgc2VydmljZS5zZXR0aW5ncyA9IHtcbiAgICByZWZyZXNoTWlsbGlzOiA2MDAwMCxcbiAgICBhbGxvd0Z1dHVyZTogZmFsc2UsXG4gICAgc3RyaW5nczoge1xuICAgICAgcHJlZml4QWdvOiBudWxsLFxuICAgICAgcHJlZml4RnJvbU5vdzogbnVsbCxcbiAgICAgIHN1ZmZpeEFnbzogJ2FnbycsXG4gICAgICBzdWZmaXhGcm9tTm93OiAnZnJvbSBub3cnLFxuICAgICAgc2Vjb25kczogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsXG4gICAgICBtaW51dGU6ICdhYm91dCBhIG1pbnV0ZScsXG4gICAgICBtaW51dGVzOiAnJWQgbWludXRlcycsXG4gICAgICBob3VyOiAnYWJvdXQgYW4gaG91cicsXG4gICAgICBob3VyczogJyVkIGhvdXJzJyxcbiAgICAgIGRheTogJ2EgZGF5JyxcbiAgICAgIGRheXM6ICclZCBkYXlzJyxcbiAgICAgIG1vbnRoOiAnYWJvdXQgYSBtb250aCcsXG4gICAgICBtb250aHM6ICclZCBtb250aHMnLFxuICAgICAgeWVhcjogJ2Fib3V0IGEgeWVhcicsXG4gICAgICB5ZWFyczogJyVkIHllYXJzJyxcbiAgICAgIG51bWJlcnM6IFtdXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHRyaW1EaWdpdHMgKCBudW0gKSB7XG4gICAgICB2YXIgbSA9IG51bS50b1N0cmluZygpLnNsaWNlKDAsMTMpO1xuICAgICAgcmV0dXJuIChtLmxlbmd0aCA9PSAxMyk/IHBhcnNlSW50KG0pIDogbnVtO1xuICB9XG5cbiAgc2VydmljZS5pbldvcmRzID0gZnVuY3Rpb24gKGRpc3RhbmNlTWlsbGlzKSB7XG4gICAgdmFyICRsID0gc2VydmljZS5zZXR0aW5ncy5zdHJpbmdzO1xuICAgIHZhciBwcmVmaXggPSAkbC5wcmVmaXhBZ287XG4gICAgdmFyIHN1ZmZpeCA9ICRsLnN1ZmZpeEFnbztcbiAgICBpZiAoc2VydmljZS5zZXR0aW5ncy5hbGxvd0Z1dHVyZSkge1xuICAgICAgaWYgKGRpc3RhbmNlTWlsbGlzIDwgMCkge1xuICAgICAgICBwcmVmaXggPSAkbC5wcmVmaXhGcm9tTm93O1xuICAgICAgICBzdWZmaXggPSAkbC5zdWZmaXhGcm9tTm93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZWNvbmRzID0gTWF0aC5hYnMoZGlzdGFuY2VNaWxsaXMpIC8gMTAwMDtcbiAgICB2YXIgbWludXRlcyA9IHNlY29uZHMgLyA2MDtcbiAgICB2YXIgaG91cnMgPSBtaW51dGVzIC8gNjA7XG4gICAgdmFyIGRheXMgPSBob3VycyAvIDI0O1xuICAgIHZhciB5ZWFycyA9IGRheXMgLyAzNjU7XG5cbiAgICBmdW5jdGlvbiBzdWJzdGl0dXRlKHN0cmluZ09yRnVuY3Rpb24sIG51bWJlcikge1xuICAgICAgdmFyIHN0cmluZyA9IGFuZ3VsYXIuaXNGdW5jdGlvbihzdHJpbmdPckZ1bmN0aW9uKSA/XG4gICAgICBzdHJpbmdPckZ1bmN0aW9uKG51bWJlciwgZGlzdGFuY2VNaWxsaXMpIDogc3RyaW5nT3JGdW5jdGlvbjtcbiAgICAgIHZhciB2YWx1ZSA9ICgkbC5udW1iZXJzICYmICRsLm51bWJlcnNbbnVtYmVyXSkgfHwgbnVtYmVyO1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8lZC9pLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgdmFyIHdvcmRzID0gc2Vjb25kcyA8IDQ1ICYmIHN1YnN0aXR1dGUoJGwuc2Vjb25kcywgTWF0aC5yb3VuZChzZWNvbmRzKSkgfHxcbiAgICAgICAgc2Vjb25kcyA8IDkwICYmIHN1YnN0aXR1dGUoJGwubWludXRlLCAxKSB8fFxuICAgICAgICBtaW51dGVzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5taW51dGVzLCBNYXRoLnJvdW5kKG1pbnV0ZXMpKSB8fFxuICAgICAgICBtaW51dGVzIDwgOTAgJiYgc3Vic3RpdHV0ZSgkbC5ob3VyLCAxKSB8fFxuICAgICAgICBob3VycyA8IDI0ICYmIHN1YnN0aXR1dGUoJGwuaG91cnMsIE1hdGgucm91bmQoaG91cnMpKSB8fFxuICAgICAgICBob3VycyA8IDQyICYmIHN1YnN0aXR1dGUoJGwuZGF5LCAxKSB8fFxuICAgICAgICBkYXlzIDwgMzAgJiYgc3Vic3RpdHV0ZSgkbC5kYXlzLCBNYXRoLnJvdW5kKGRheXMpKSB8fFxuICAgICAgICBkYXlzIDwgNDUgJiYgc3Vic3RpdHV0ZSgkbC5tb250aCwgMSkgfHxcbiAgICAgICAgZGF5cyA8IDM2NSAmJiBzdWJzdGl0dXRlKCRsLm1vbnRocywgTWF0aC5yb3VuZChkYXlzIC8gMzApKSB8fFxuICAgICAgICB5ZWFycyA8IDEuNSAmJiBzdWJzdGl0dXRlKCRsLnllYXIsIDEpIHx8XG4gICAgICAgIHN1YnN0aXR1dGUoJGwueWVhcnMsIE1hdGgucm91bmQoeWVhcnMpKTtcblxuICAgIHZhciBzZXBhcmF0b3IgPSAkbC53b3JkU2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnICcgOiAkbC53b3JkU2VwYXJhdG9yO1xuICAgIHJldHVybiBbcHJlZml4LCB3b3Jkcywgc3VmZml4XS5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICB9O1xuXG4gIHNlcnZpY2UucGFyc2UgPSBmdW5jdGlvbiAoaXNvODYwMSkge1xuICAgIGlmIChhbmd1bGFyLmlzTnVtYmVyKGlzbzg2MDEpKSB7XG4gICAgICBpc284NjAxID0gaXNvODYwMSArIFwiXCI7XG4gICAgICAvLyBmb3JtYXQgZm9yIGNvcnJlY3QgbGVuZ3RoXG4gICAgICB2YXIgb3JpZ2luYWxUaW1lc3RhbXAgPSB0cmltRGlnaXRzKCBpc284NjAxICk7XG4gICAgICByZXR1cm4gcGFyc2VJbnQob3JpZ2luYWxUaW1lc3RhbXAsIDEwKTtcbiAgICB9XG4gICAgdmFyIHMgPSAoaXNvODYwMSB8fCAnJykudHJpbSgpO1xuICAgIHMgPSBzLnJlcGxhY2UoL1xcLlxcZCsvLCAnJyk7IC8vIHJlbW92ZSBtaWxsaXNlY29uZHNcbiAgICBzID0gcy5yZXBsYWNlKC8tLywgJy8nKS5yZXBsYWNlKC8tLywgJy8nKTtcbiAgICBzID0gcy5yZXBsYWNlKC9ULywgJyAnKS5yZXBsYWNlKC9aLywgJyBVVEMnKTtcbiAgICBzID0gcy5yZXBsYWNlKC8oW1xcK1xcLV1cXGRcXGQpXFw6PyhcXGRcXGQpLywgJyAkMSQyJyk7IC8vIC0wNDowMCAtPiAtMDQwMFxuICAgIHJldHVybiBuZXcgRGF0ZShzKTtcbiAgfTtcblxuICByZXR1cm4gc2VydmljZTtcbn0pO1xuIiwidmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbnZhciBhc3luYyA9IHJlcXVpcmUoJ2FzeW5jJyk7XG5cbk1VRy5mYWN0b3J5KCdDb21wYXJlJyxcblsnJHEnLCAnQ29uZmlnJyxcbmZ1bmN0aW9uKCRxLCBDb25maWcpIHtcbiAgLy8gQ29uZmlnIHZhcnNcbiAgdmFyIGZpbGVEaXJQcmVmaXggPSBfX2Rpcm5hbWUgKyAnLyc7XG4gIHZhciBpbWFnZVByZWZpeCA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJztcbiAgdmFyIHN0YXR1c1R5cGVzID0gWydwYXNzZWQnLCAnd2FybmluZycsICdmYWlsZWQnXTtcblxuICAvLyBhc3luYyBoZWxwZXJcbiAgZnVuY3Rpb24gcmVhZEFzeW5jKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgZnMucmVhZEZpbGUoZmlsZURpclByZWZpeCArIGZpbGUsICdiYXNlNjQnLCBjYWxsYmFjayk7XG4gIH1cblxuICAvLyBUT0RPOiBsZXQgdGhlIGJhY2tlbmQgcHJvY2VzcyBoYW5kbGUgdGhpcyFcbiAgZnVuY3Rpb24gY29tcGFyZVNpbmdsZShhLCBiKSB7XG4gICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XG4gICAgdmFyIG91dHB1dCA9IHt9O1xuXG4gICAgLy8gQXBwbHkgTWFpbiBDb21wYXJlIENvbmZpZ1xuICAgIHJlc2VtYmxlLm91dHB1dFNldHRpbmdzKENvbmZpZy5Db21wYXJlKTtcblxuICAgIC8vIE9wZW4gYm90aCBmaWxlcywgYmVmb3JlIHdlIGFyZSByZWFkeSB0byBwcm9jZXNzXG4gICAgYXN5bmMubWFwKFthLCBiXSwgcmVhZEFzeW5jLCBmdW5jdGlvbihlcnIsIHJlc3VsdHMpIHtcbiAgICAgIHZhciBhRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1swXTtcbiAgICAgIHZhciBiRGF0YSA9IGltYWdlUHJlZml4ICsgcmVzdWx0c1sxXTtcblxuICAgICAgLy8gSGFuZGxlcyBlcnJvcnNcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZGZkLnJlamVjdChlcnIpO1xuICAgICAgfVxuXG4gICAgICAvLyBSdW4gdGhlIGNvbXBhcmUgZnVuY3Rpb24sIHJldHVybiB0aGUgZGlmZiBkYXRhXG4gICAgICByZXNlbWJsZShhRGF0YSlcbiAgICAgICAgLmNvbXBhcmVUbyhiRGF0YSlcbiAgICAgICAgLmlnbm9yZUNvbG9ycygpXG4gICAgICAgIC5vbkNvbXBsZXRlKGZ1bmN0aW9uKGRpZmZEYXRhKSB7XG4gICAgICAgICAgb3V0cHV0LnJlcG9ydCA9IGRpZmZEYXRhO1xuICAgICAgICAgIG91dHB1dC5zcmMgPSBkaWZmRGF0YS5nZXRJbWFnZURhdGFVcmwoKTtcblxuICAgICAgICAgIGRmZC5yZXNvbHZlKG91dHB1dCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRmZC5wcm9taXNlO1xuICB9O1xuXG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0d28gaW1hZ2VzIGFuZCByZXR1cm5zIGFsbCBkYXRhIHdpdGggYW4gaW1hZ2Ugb2YgY2hhbmdlc1xuICAgICAqL1xuICAgIHJ1blNpbmdsZTogY29tcGFyZVNpbmdsZSxcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIHR5cGUgb2YgcGFzcy93YXJuL2ZhaWwgc3RhdHVzXG4gICAgICovXG4gICAgZ2V0U3RhdHVzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgbWlzTWF0Y2hWYWx1ZSA9IHBhcnNlRmxvYXQoZGF0YS5taXNNYXRjaFBlcmNlbnRhZ2UpO1xuXG4gICAgICAvLyBsb3dlc3QgdG9sZXJhbmNlXG4gICAgICBpZiAobWlzTWF0Y2hWYWx1ZSA8IDAuMSkge1xuXG4gICAgICAgIC8vIFdhcm4gdGhhdCBkaW1lbnNpb25zIGFyZSBkaWZmZXJlbmNlXG4gICAgICAgIGlmIChkYXRhLmlzU2FtZURpbWVuc2lvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzdGF0dXNUeXBlc1swXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3YXJuaW5nIHRvbGVyYW5jZVxuICAgICAgaWYgKG1pc01hdGNoVmFsdWUgPiAwLjEgJiYgbWlzTWF0Y2hWYWx1ZSA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzFdO1xuICAgICAgfVxuXG4gICAgICAvLyBlcnJvciB0b2xlcmFuY2UgcmVhY2hlZFxuICAgICAgcmV0dXJuIHN0YXR1c1R5cGVzWzJdO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwiTVVHLmZhY3RvcnkoJ25vd1RpbWUnLFxuWyckdGltZW91dCcsXG5mdW5jdGlvbigkdGltZW91dCkge1xuICB2YXIgbm93VGltZSA9IERhdGUubm93KCk7XG4gIHZhciB1cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBub3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcblxuICB1cGRhdGVUaW1lKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0VGltZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbm93VGltZTtcbiAgICB9XG4gIH07XG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgQVdTID0gcmVxdWlyZSgnLi9jb3JlL2F3cycpO1xuXG5NVUcuZmFjdG9yeSgnUHJvamVjdHMnLFxuWyckcScsXG5mdW5jdGlvbigkcSkge1xuICAvLyBDb25maWcgdGhlIG1haW4gcGF0aHNcbiAgdmFyIHByb2plY3RzUGF0aCA9IF9fZGlybmFtZSArICcvcHJvamVjdHMuanNvbic7XG4gIHZhciBwcm9qZWN0RmlsZXNQYXRoID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy8nO1xuXG4gIC8vIENyZWF0ZXMgYSBVVUlEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoXG4gIGZ1bmN0aW9uIGNyZWF0ZVVVSUQocykge1xuICAgIHZhciBuO1xuICAgIGlmICh0eXBlb2YgcyA9PSAnbnVtYmVyJyAmJiBzID09PSBwYXJzZUludChzLCAxMCkpIHtcbiAgICAgIHMgPSBBcnJheShzICsgMSkuam9pbigneCcpO1xuICAgIH1cblxuICAgIHJldHVybiBzLnJlcGxhY2UoL3gvZywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbiA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDYxKSArIDQ4O1xuICAgICAgbiA9IG4gPiA1NyA/IChuICsgNyA+IDkwID8gbiArIDEzIDogbiArIDcpIDogbjtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ3JlYXRlcyBhIEpTT04gb2JqZWN0IGZvciBhIGJhc2VsaW5lIG5ldyBwcm9qZWN0XG4gIGZ1bmN0aW9uIGNyZWF0ZUR1bW15UHJvamVjdCh0b3RhbCkge1xuICAgIHRvdGFsID0gdG90YWwgfHwgMDtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBwcm9qZWN0SWQsXG4gICAgICB0aXRsZTogJ1Byb2plY3QgJyArIChwYXJzZUludCh0b3RhbCwgMTApICsgMSksXG4gICAgICB0aW1lc3RhbXA6ICgrbmV3IERhdGUpLFxuICAgICAgdG90YWxzOiB7XG4gICAgICAgIHN1Y2Nlc3M6IG51bGwsXG4gICAgICAgIHdhcm5pbmc6IG51bGwsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB2aWV3czogMFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBTZXRzIHVwIHRoZSBuZWVkZWQgYmFzZSBkYXRhIGZvciBzdG9yaW5nIGFuIGluZGl2aWR1YWwgcHJvamVjdFxuICBmdW5jdGlvbiBjcmVhdGVEdW1teVByb2plY3RGaWxlKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvamVjdElkID0gY3JlYXRlVVVJRCgxMik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJhdGNoSGlzdG9yeToge30sXG4gICAgICBjdXJyZW50QmF0Y2g6IG51bGwsXG4gICAgICBjdXJyZW50UmVmZXJlbmNlOiBudWxsLFxuICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSxcbiAgICAgIHRpbWVzdGFtcDogb3B0aW9ucy50aW1lc3RhbXAsXG4gICAgICB2aWV3cG9ydHM6IFtdLFxuICAgICAgc2VsZWN0b3JzOiBbXSxcbiAgICAgIGNvb2tpZXM6IFtdLFxuICAgICAgbWV0YToge1xuICAgICAgICB1cmw6IG51bGwsXG4gICAgICAgIHJlYWR5RXZlbnQ6IG51bGwsXG4gICAgICAgIGRlbGF5OiBudWxsLFxuICAgICAgICBtaXNNYXRjaFRocmVzaG9sZDogbnVsbFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBHcmFicyBKU09OIGZpbGUgYW5kIGFwcHJvcHJpYXRlbHkgaGFuZGxlcyBlcnJvcnNcbiAgZnVuY3Rpb24gZ2V0SnNvbkZpbGUocGF0aCwgdHlwZSkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZpbGUgPSBmcy5yZWFkRmlsZVN5bmMocGF0aCwgJ3V0ZjgnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBjb3VsZG4ndCBmaW5kIGZpbGVcbiAgICAgIGlmIChlLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICAgIHJldHVybiB0eXBlIHx8IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSlNPTi5wYXJzZShmaWxlKTtcbiAgfVxuXG4gIC8vIHJlbW92ZSBhbGwgZmlsZXMgaW4gZGlyZWN0b3J5XG4gIGZ1bmN0aW9uIHJlbW92ZUFsbEluRGlyZWN0b3J5KGRpclBhdGgpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGZpbGVzID0gZnMucmVhZGRpclN5bmMoZGlyUGF0aCk7XG4gICAgfSBjYXRjaCAoZSkgeyByZXR1cm47IH1cblxuICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmlsZVBhdGggPSBwYXRoLmpvaW4oZGlyUGF0aCwgZmlsZXNbaV0pO1xuXG4gICAgICAgIGlmIChmcy5zdGF0U3luYyhmaWxlUGF0aCkuaXNGaWxlKCkpIHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBybURpcihmaWxlUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfTtcblxuICAvLyBzZXRzIHVwIGEgcHJvbWlzZSBkcml2ZW4gZmlsZSB3cml0ZVxuICBmdW5jdGlvbiBwcm9taXNlV3JpdGUoZmlsZVBhdGgsIGRhdGEpIHtcbiAgICB2YXIgX3EgPSAkcS5kZWZlcigpO1xuXG4gICAgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShkYXRhKSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIF9xLnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF9xLnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfcS5wcm9taXNlO1xuICB9XG5cbiAgLy8gc2V0cyB1cCBhIHByb21pc2UgZHJpdmVuIGZpbGUgZGVsZXRlXG4gIGZ1bmN0aW9uIHByb21pc2VSZW1vdmUocGF0aCkge1xuICAgIHZhciBfeiA9ICRxLmRlZmVyKCk7XG5cbiAgICAvLyBmcy51bmxpbmtcbiAgICBmcy51bmxpbmsocGF0aCwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIF96LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF96LnJlc29sdmUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfei5wcm9taXNlO1xuICB9XG5cbiAgcmV0dXJuIHtcblxuICAgIGdldDogZnVuY3Rpb24ocGF0aCwgdHlwZSkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKF9fZGlybmFtZSArIHBhdGgsIHR5cGUpO1xuICAgIH0sXG5cbiAgICBnZXRBbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RzUGF0aCwgW10pO1xuICAgIH0sXG5cbiAgICBnZXRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICcuanNvbicpO1xuICAgIH0sXG5cbiAgICBnZXRUeXBlQnlJZDogZnVuY3Rpb24oaWQsIHR5cGUpIHtcbiAgICAgIHZhciBhZGRpdGlvbiA9ICh0eXBlKSA/ICdfJyArIHR5cGUgOiAnJztcbiAgICAgIHJldHVybiBnZXRKc29uRmlsZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyBhZGRpdGlvbiArICcuanNvbicsIFtdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdmFsaWRhdGVzIHRoZSBwcm9qZWN0LCBtYWtlcyBzdXJlIGFsbCBzZXR0aW5ncyBhcmUgc2V0dXAgYW5kIHZhbGlkXG4gICAgICovXG4gICAgdmFsaWRhdGU6IGZ1bmN0aW9uKHByb2plY3QpIHtcbiAgICAgIHZhciBjb29raWVzID0gcHJvamVjdC5jb29raWVzO1xuICAgICAgdmFyIHZpZXdwb3J0cyA9IHByb2plY3Qudmlld3BvcnRzO1xuICAgICAgdmFyIHNlbGVjdG9ycyA9IHByb2plY3Quc2VsZWN0b3JzO1xuICAgICAgdmFyIHRpdGxlID0gcHJvamVjdC50aXRsZTtcbiAgICAgIHZhciB1cmwgPSBwcm9qZWN0Lm1ldGEudXJsO1xuICAgICAgdmFyIGJvb2wgPSB0cnVlO1xuXG4gICAgICAvLyB2ZXJpZnkgYWxsIGRlZmF1bHRzIGFyZSBzZXR1cFxuICAgICAgaWYgKCF2aWV3cG9ydHMgfHwgIXNlbGVjdG9ycyB8fCAhdGl0bGUgfHwgIXVybCB8fCB2aWV3cG9ydHMubGVuZ3RoIDwgMSB8fCBzZWxlY3RvcnMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGhhdmUgdmlld3BvcnRzLCB2ZXJpZnkgdGhleSdyZSBzZXR1cCByaWdodFxuICAgICAgaWYgKHZpZXdwb3J0cykge1xuICAgICAgICB2aWV3cG9ydHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICAgICAgaWYgKCFvYmoud2lkdGggfHwgIW9iai5oZWlnaHQgfHwgIW9iai5uYW1lKSB7XG4gICAgICAgICAgICBib29sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgaGF2ZSBzZWxlY3RvcnMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoc2VsZWN0b3JzKSB7XG4gICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgICBpZiAoIW9iai5xdWVyeSB8fCAhb2JqLnR5cGUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIGNvb2tpZXMsIHZlcmlmeSB0aGV5J3JlIHNldHVwIHJpZ2h0XG4gICAgICBpZiAoY29va2llcykge1xuICAgICAgICBjb29raWVzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICAgIGlmICghb2JqLm5hbWUgfHwgIW9iai5wYXRoIHx8ICFvYmoudmFsdWUpIHtcbiAgICAgICAgICAgIGJvb2wgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWZhdWx0IHRvIHRydWVcbiAgICAgIHJldHVybiBib29sO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgbmV3IHByb2plY3QsIGFuZCByZXR1cm5zIHRoZSBkYXRhIGluIGEgcHJvbWlzZVxuICAgICAqL1xuICAgIGNyZWF0ZU5ldzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGZkZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgcXVldWVQcm9taXNlcyA9IFtdO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcbiAgICAgIHZhciBuZXdQcm9qZWN0RGF0YSA9IGNyZWF0ZUR1bW15UHJvamVjdChhbGxQcm9qZWN0cy5sZW5ndGgpO1xuICAgICAgdmFyIG5ld1Byb2plY3RGaWxlID0gY3JlYXRlRHVtbXlQcm9qZWN0RmlsZShuZXdQcm9qZWN0RGF0YSk7XG5cbiAgICAgIGFsbFByb2plY3RzLnVuc2hpZnQobmV3UHJvamVjdERhdGEpO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICB2YXIgcHJvamVjdEFsbERhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdHNQYXRoLCBhbGxQcm9qZWN0cyk7XG4gICAgICB2YXIgcHJvamVjdERhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdEZpbGVzUGF0aCArIG5ld1Byb2plY3REYXRhLmlkICsgJy5qc29uJywgbmV3UHJvamVjdEZpbGUpO1xuICAgICAgdmFyIHByb2plY3RIaXN0b3J5RGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0RmlsZXNQYXRoICsgbmV3UHJvamVjdERhdGEuaWQgKyAnX2hpc3RvcnkuanNvbicsIFtdKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0QWxsRGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdERhdGEpO1xuICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHByb2plY3RIaXN0b3J5RGF0YSk7XG5cbiAgICAgIC8vIGRvIGFsbCBwcm9taXNlIG9wZXJhdGlvbnNcbiAgICAgICRxLmFsbChxdWV1ZVByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBkZmRkLnJlc29sdmUobmV3UHJvamVjdERhdGEpO1xuICAgICAgfSwgZGZkZC5yZWplY3QpO1xuXG4gICAgICByZXR1cm4gZGZkZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlIHRvIGZpbGUgYW5kIGxpc3RzLCByZXR1cm4gbGlzdCBkYXRhXG4gICAgc2F2ZTogZnVuY3Rpb24ocHJvamVjdERhdGEpIHtcbiAgICAgIHZhciBkZmRkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBxdWV1ZVByb21pc2VzID0gW107XG4gICAgICB2YXIgYWxsUHJvamVjdHMgPSBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBwcm9qZWN0RGF0YS5pZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzW2lkeF0udGl0bGUgPSBwcm9qZWN0RGF0YS50aXRsZTtcbiAgICAgICAgICBhbGxQcm9qZWN0c1tpZHhdLnRpbWVzdGFtcCA9ICgrbmV3IERhdGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgdmFyIHByb2plY3RUZW1wRGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0RmlsZXNQYXRoICsgcHJvamVjdERhdGEuaWQgKyAnLmpzb24nLCBwcm9qZWN0RGF0YSk7XG4gICAgICB2YXIgcHJvamVjdEFsbERhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdHNQYXRoLCBhbGxQcm9qZWN0cyk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdFRlbXBEYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0QWxsRGF0YSk7XG5cbiAgICAgIC8vIGRvIGFsbCBwcm9taXNlIG9wZXJhdGlvbnNcbiAgICAgICRxLmFsbChxdWV1ZVByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBkZmRkLnJlc29sdmUocHJvamVjdERhdGEpO1xuICAgICAgfSwgZGZkZC5yZWplY3QpO1xuXG4gICAgICByZXR1cm4gZGZkZC5wcm9taXNlO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmVzIGEgc2luZ2xlIHByb2plY3QgYnkgSURcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZGZkZCA9ICRxLmRlZmVyKCk7XG4gICAgICB2YXIgcXVldWVQcm9taXNlcyA9IFtdO1xuICAgICAgdmFyIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMocHJvamVjdHNQYXRoLCAndXRmOCcpKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBsaXN0aW5nIGRhdGFcbiAgICAgIGFsbFByb2plY3RzLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgICBpZiAob2JqLmlkID09PSBpZCkge1xuICAgICAgICAgIGFsbFByb2plY3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gcmVtb3ZlIGFsbCBsb2NhbCBpbWFnZXNcbiAgICAgIHRoaXMuY2xlYW5JbWFnZUZpbGVzKGlkKTtcblxuICAgICAgLy8gc2F2ZSB0aGUgZGF0YSB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAgICAgdmFyIHByb2plY3REYXRhID0gcHJvbWlzZVJlbW92ZShwcm9qZWN0RmlsZXNQYXRoICsgaWQgKyAnLmpzb24nKTtcbiAgICAgIHZhciBwcm9qZWN0SGlzdG9yeURhdGEgPSBwcm9taXNlUmVtb3ZlKHByb2plY3RGaWxlc1BhdGggKyBpZCArICdfaGlzdG9yeS5qc29uJyk7XG4gICAgICB2YXIgcHJvamVjdEFsbERhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdHNQYXRoLCBhbGxQcm9qZWN0cyk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdERhdGEpO1xuICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHByb2plY3RIaXN0b3J5RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdEFsbERhdGEpO1xuXG4gICAgICAvLyBkbyBhbGwgcHJvbWlzZSBvcGVyYXRpb25zXG4gICAgICAkcS5hbGwocXVldWVQcm9taXNlcykudGhlbihkZmRkLnJlc29sdmUsIGRmZGQucmVqZWN0KTtcblxuICAgICAgcmV0dXJuIGRmZGQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlcyBhbGwgc3RvcmVkIGhpc3RvcnkgZm9yIGEgcHJvamVjdFxuICAgICAqL1xuICAgIGNsZWFySGlzdG9yeTogZnVuY3Rpb24ocHJvamVjdCkge1xuICAgICAgdmFyIGRmZGQgPSAkcS5kZWZlcigpO1xuICAgICAgdmFyIHF1ZXVlUHJvbWlzZXMgPSBbXTtcbiAgICAgIHZhciBtYWluUHJvamVjdHMgPSBnZXRKc29uRmlsZShwcm9qZWN0c1BhdGgsIFtdKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9qZWN0IGRhdGEgdG8gcmVmbGVjdCBubyBoaXN0b3J5XG4gICAgICBwcm9qZWN0LmN1cnJlbnRCYXRjaCA9IG51bGw7XG4gICAgICBwcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgPSBudWxsO1xuICAgICAgcHJvamVjdC5iYXRjaEhpc3RvcnkgPSB7fTtcblxuICAgICAgLy8gdXBkYXRlIHRoZSBjdXJyZW50IHByb2plY3QgdG8gaGF2ZSBubyBiYXRjaEhpc3RvcnlcbiAgICAgIG1haW5Qcm9qZWN0cy5tYXAoZnVuY3Rpb24ob2JqLCBpZHgpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gcHJvamVjdC5pZCkge1xuICAgICAgICAgIG1haW5Qcm9qZWN0c1tpZHhdLnRvdGFscy5zdWNjZXNzID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMud2FybmluZyA9IDA7XG4gICAgICAgICAgbWFpblByb2plY3RzW2lkeF0udG90YWxzLmVycm9yID0gMDtcbiAgICAgICAgICBtYWluUHJvamVjdHNbaWR4XS50b3RhbHMudmlld3MgPSAwO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gcmVtb3ZlIGFsbCBsb2NhbCBpbWFnZXNcbiAgICAgIHRoaXMuY2xlYW5JbWFnZUZpbGVzKHByb2plY3QuaWQpO1xuXG4gICAgICAvLyBzYXZlIHRoZSBkYXRhIHRvIHRoZSBwcm9qZWN0cyBsaXN0XG4gICAgICB2YXIgcHJvamVjdEhpc3RvcnlEYXRhID0gcHJvbWlzZVdyaXRlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0LmlkICsgJ19oaXN0b3J5Lmpzb24nLCBbXSk7XG4gICAgICB2YXIgcHJvamVjdERhdGEgPSBwcm9taXNlV3JpdGUocHJvamVjdEZpbGVzUGF0aCArIHByb2plY3QuaWQgKyAnLmpzb24nLCBwcm9qZWN0KTtcbiAgICAgIHZhciBwcm9qZWN0QWxsRGF0YSA9IHByb21pc2VXcml0ZShwcm9qZWN0c1BhdGgsIG1haW5Qcm9qZWN0cyk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdEhpc3RvcnlEYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMucHVzaChwcm9qZWN0RGF0YSk7XG4gICAgICBxdWV1ZVByb21pc2VzLnB1c2gocHJvamVjdEFsbERhdGEpO1xuXG4gICAgICAvLyBkbyBhbGwgcHJvbWlzZSBvcGVyYXRpb25zXG4gICAgICAkcS5hbGwocXVldWVQcm9taXNlcykudGhlbihkZmRkLnJlc29sdmUsIGRmZGQucmVqZWN0KTtcblxuICAgICAgcmV0dXJuIGRmZGQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcGFzcyBpbiBhIHByb2plY3RJZCwgdGhlbiBpdCB3aWxsIHJlYWQgdGhlIHByb2plY3QgYW5kIGl0cyBjdXJyZW50IGJhdGNoIG9mIGZpbGVzIHRvIHVwbG9hZFxuICAgICAqIG9uY2UgY29tcGxldGUsIGl0IHdpbGwgY2xlYW4gb3V0IGFueSBsb2NhbCBzY3JlZW5zIGFuZCByZXBsYWNlIHdpdGggYXdzIHJlc291cmNlc1xuICAgICAqL1xuICAgIHN5bmM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICBpZiAoIWlkKSB7cmV0dXJuO31cblxuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBwcm9qZWN0ID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgIHZhciBwcm9qZWN0RmlsZXMgPSB0aGlzLmdldFR5cGVCeUlkKGlkLCAnaGlzdG9yeScpO1xuICAgICAgdmFyIHJlYWR5RmlsZXMgPSBbXTtcblxuICAgICAgLy8gcHVsbCBvdXQgZmlsZXMgdGhhdCBhcmUgYWxyZWFkeSBpbnNpZGUgYXdzLCBwcmVwIGZvciB1cGxvYWRcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvamVjdEZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0bXBGaWxlID0gcHJvamVjdEZpbGVzW2ldO1xuICAgICAgICBpZiAodG1wRmlsZS5zb3VyY2UgJiYgdG1wRmlsZS5zb3VyY2Uuc2VhcmNoKCdhbWF6b24nKSA9PT0gLTEpIHtcbiAgICAgICAgICB2YXIgc3JjID0gdG1wRmlsZS5zb3VyY2U7XG4gICAgICAgICAgdmFyIHR5cGUgPSB0bXBGaWxlLnR5cGU7XG4gICAgICAgICAgdmFyIHBhdGggPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvJyArIHR5cGUgKyAnLycgKyBwcm9qZWN0LmlkICsgJy8nICsgc3JjO1xuICAgICAgICAgIHJlYWR5RmlsZXMucHVzaCh7IGtleTogdHlwZSArICcvJyArIHNyYywgcGF0aDogcGF0aCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB1cGxvYWQgZmlsZXNcbiAgICAgIEFXUy5pbml0KClcbiAgICAgICAgLnVwbG9hZChyZWFkeUZpbGVzLCBwcm9qZWN0LmlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcblxuICAgICAgICAgIC8vIGRvIHBvc3QtcHJvY2VzcyBhY3Rpb25cbiAgICAgICAgICBfdGhpcy5jbGVhbkFmdGVyU3luYyhwcm9qZWN0LCByZXMpLnRoZW4oZC5yZXNvbHZlLCBkLnJlamVjdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkLnByb21pc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNsZWFuIGxvY2FsIGltYWdlcywgdXBkYXRlIGhpc3Rvcnkgd2l0aCBhd3MgcmVzb3VyY2VzLCByZXR1cm5zIHRoZSB1cGRhdGVzXG4gICAgICovXG4gICAgY2xlYW5BZnRlclN5bmM6IGZ1bmN0aW9uKHByb2plY3QsIG5ld1JlZnMpIHtcbiAgICAgIHZhciBkZmRkID0gJHEuZGVmZXIoKTtcbiAgICAgIHZhciBoaXN0b3J5RGF0YSA9IGdldEpzb25GaWxlKHByb2plY3RGaWxlc1BhdGggKyBwcm9qZWN0LmlkICsgJ19oaXN0b3J5Lmpzb24nLCBbXSk7XG4gICAgICB2YXIgdXBkYXRlZFJlbW90ZUZpbGVzID0gW107XG4gICAgICB2YXIgcXVldWVQcm9taXNlcyA9IFtdO1xuICAgICAgcHJvamVjdC51cGRhdGVkQXQgPSAoK25ldyBEYXRlKCkpO1xuXG4gICAgICAvLyBsb29wIHRocm91Z2ggbmV3IGZpbGVzXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld1JlZnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRtcFNyYyA9IG5ld1JlZnNbaV07XG4gICAgICAgIHZhciB0bXBSZWYgPSB0bXBTcmMuc3BsaXQoJy8nKTtcbiAgICAgICAgdmFyIHRtcFR5cGUgPSB0bXBSZWZbdG1wUmVmLmxlbmd0aCAtIDJdO1xuICAgICAgICB2YXIgdG1wQWxpYXMgPSB0bXBSZWZbdG1wUmVmLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGhpc3RvcnlEYXRhLm1hcChmdW5jdGlvbihpdGVtLCBpZHgpIHtcblxuICAgICAgICAgIC8vIHVwZGF0ZSBoaXN0b3J5IHJlZlxuICAgICAgICAgIGlmIChpdGVtLnNvdXJjZSA9PT0gdG1wQWxpYXMgJiYgdG1wVHlwZSA9PT0gJ2NvbXBhcmUnKSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBkaWZmIGFsc29cbiAgICAgICAgICAgIHZhciByZW1SZWZQYXRoID0gX19kaXJuYW1lICsgJy9zY3JlZW5zLycgKyB0bXBUeXBlICsgJy8nICsgcHJvamVjdC5pZCArICcvJyArIHRtcEFsaWFzO1xuICAgICAgICAgICAgdmFyIHJlbVJlZiA9IHByb21pc2VSZW1vdmUocmVtUmVmUGF0aCk7XG4gICAgICAgICAgICB2YXIgcmVtUmVmRGlmZiA9IHByb21pc2VSZW1vdmUocmVtUmVmUGF0aC5yZXBsYWNlKCcuJywgJ19kaWZmLicpKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIGhpc3RvcnlcbiAgICAgICAgICAgIGRlbGV0ZSBoaXN0b3J5RGF0YVtpZHhdLnNvdXJjZTtcbiAgICAgICAgICAgIGhpc3RvcnlEYXRhW2lkeF0ucmVtb3RlU291cmNlID0gbmV3UmVmc1tpXTtcblxuICAgICAgICAgICAgLy8gYWRkIHRvIHByb21pc2UgbGlzdFxuICAgICAgICAgICAgcXVldWVQcm9taXNlcy5wdXNoKHJlbVJlZik7XG4gICAgICAgICAgICBxdWV1ZVByb21pc2VzLnB1c2gocmVtUmVmRGlmZik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gc2F2ZSBoaXN0b3J5ICYgcHJvamVjdFxuICAgICAgdmFyIHByb2plY3RGaWxlID0gX19kaXJuYW1lICsgJy9wcm9qZWN0cy8nICsgcHJvamVjdC5pZCArICcuanNvbic7XG4gICAgICB2YXIgcHJvamVjdEhpc3RvcnlGaWxlID0gcHJvamVjdEZpbGUucmVwbGFjZSgnLmpzb24nLCAnX2hpc3RvcnkuanNvbicpO1xuICAgICAgdmFyIHByb2plY3RXcml0ZSA9IHByb21pc2VXcml0ZShwcm9qZWN0RmlsZSwgcHJvamVjdCk7XG4gICAgICB2YXIgcHJvamVjdEhpc3RvcnlXcml0ZSA9IHByb21pc2VXcml0ZShwcm9qZWN0SGlzdG9yeUZpbGUsIGhpc3RvcnlEYXRhKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMudW5zaGlmdChwcm9qZWN0V3JpdGUpO1xuICAgICAgcXVldWVQcm9taXNlcy51bnNoaWZ0KHByb2plY3RIaXN0b3J5V3JpdGUpO1xuXG4gICAgICAvLyBhZGQgcHJvamVjdCBmaWxlcyB0byB0aGUgdXBsb2FkIHJlYWRpbmVzc1xuICAgICAgdXBkYXRlZFJlbW90ZUZpbGVzLnB1c2goeyBrZXk6IHByb2plY3QuaWQsIHBhdGg6IHByb2plY3RGaWxlIH0pO1xuICAgICAgdXBkYXRlZFJlbW90ZUZpbGVzLnB1c2goeyBrZXk6IHByb2plY3QuaWQgKyAnX2hpc3RvcnknLCBwYXRoOiBwcm9qZWN0SGlzdG9yeUZpbGUgfSk7XG5cbiAgICAgIC8vIHVwbG9hZCB1cGRhdGVkIGhpc3RvcnkgJiBwcm9qZWN0XG4gICAgICB2YXIgYXdzVXBsb2FkID0gQVdTLmluaXQoKS51cGxvYWQodXBkYXRlZFJlbW90ZUZpbGVzLCBwcm9qZWN0LmlkKTtcbiAgICAgIHF1ZXVlUHJvbWlzZXMudW5zaGlmdChhd3NVcGxvYWQpO1xuXG4gICAgICAvLyBkbyBhbGwgcHJvbWlzZSBvcGVyYXRpb25zXG4gICAgICAkcS5hbGwocXVldWVQcm9taXNlcykudGhlbihkZmRkLnJlc29sdmUsIGRmZGQucmVqZWN0KTtcblxuICAgICAgcmV0dXJuIGRmZGQucHJvbWlzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2xlYW4gbG9jYWwgaW1hZ2VzLCB1cGRhdGUgaGlzdG9yeSB3aXRoIGF3cyByZXNvdXJjZXMsIHJldHVybnMgdGhlIHVwZGF0ZXNcbiAgICAgKi9cbiAgICBjbGVhbkltYWdlRmlsZXM6IGZ1bmN0aW9uKHByb2plY3RJZCkge1xuICAgICAgdmFyIGJhc2UgPSBfX2Rpcm5hbWUgKyAnL3NjcmVlbnMvQkFTRS8nICsgcHJvamVjdElkO1xuICAgICAgdmFyIGNvbXBzID0gYmFzZS5yZXBsYWNlKCdCQVNFJywgJ2NvbXBhcmUnKTtcbiAgICAgIHZhciByZWZzID0gYmFzZS5yZXBsYWNlKCdCQVNFJywgJ3JlZmVyZW5jZScpO1xuXG4gICAgICByZW1vdmVBbGxJbkRpcmVjdG9yeShjb21wcyk7XG4gICAgICByZW1vdmVBbGxJbkRpcmVjdG9yeShyZWZzKTtcbiAgICB9XG5cbiAgfTtcbn1dKTtcbiIsIk1VRy5maWx0ZXIoJ3RpbWVBZ28nLFxuWydub3dUaW1lJywgJ3RpbWVBZ28nLFxuZnVuY3Rpb24gKG5vd1RpbWUsIHRpbWVBZ28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBmcm9tVGltZSA9IHRpbWVBZ28ucGFyc2UodmFsdWUpO1xuICAgIHZhciBkaWZmID0gbm93VGltZS5nZXRUaW1lKCkgLSBmcm9tVGltZTtcbiAgICByZXR1cm4gdGltZUFnby5pbldvcmRzKGRpZmYpO1xuICB9O1xufV0pO1xuIiwidmFyIGlwYyA9IHJlcXVpcmUoJ2lwYycpO1xuXG5NVUcuY29udHJvbGxlcignTWFpbkN0cmwnLFxuWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckc3RhdGUnLCAnQ29uZmlnJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBDb25maWcsIFByb2plY3RzKSB7XG4gICRyb290U2NvcGUuY3VycmVudFByb2plY3RJZCA9ICcnO1xuXG4gICRzY29wZS5jcmVhdGVOZXdQcm9qZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgUHJvamVjdHMuY3JlYXRlTmV3KCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnU0lERVBBTkVMOk5FV1BST0pFQ1QnLCByZXMpO1xuICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cy5zZXR0aW5ncycsIHsgaWQ6IHJlcy5pZCB9KTtcbiAgICB9LFxuXG4gICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBpcGMub24oJ05BVklHQVRFOlRPJywgZnVuY3Rpb24oYXJncykge1xuICAgIGlmICghYXJncyB8fCAhYXJncy5sb2NhdGlvbikge3JldHVybjt9XG5cbiAgICBjb25zb2xlLmxvZygnTkFWSUdBVEU6VE8nLCBhcmdzKTtcbiAgICAkc3RhdGUuZ28oYXJncy5sb2NhdGlvbik7XG4gIH0pO1xuXG4gIC8vIFVTRSBUSElTIGluc3RlYWQgb2YgJHNjb3BlLiRhcHBseSgpOyBJdCB3aWxsIG1ha2UgdGhlICRkaWdlc3QgZXJyb3JzIG5vdCBoYXBwZW4uXG4gICRyb290U2NvcGUuU2FmZUFwcGx5ID0gZnVuY3Rpb24oc2NvcGUsIGZuKSB7XG4gICAgaWYgKHNjb3BlLiQkcGhhc2UgfHwgc2NvcGUuJHJvb3QuJCRwaGFzZSkge1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NvcGUuJGFwcGx5KGZuKTtcbiAgICB9XG4gIH07XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgQVdTID0gcmVxdWlyZSgnLi9jb3JlL2F3cycpO1xuXG5NVUcuY29udHJvbGxlcignUHJlZmVyZW5jZXNDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlKSB7XG4gICRzY29wZS5hd3NDb25maWcgPSB7XG4gICAgYnVja2V0OiAnJyxcbiAgICBhY2Nlc3NLZXlJZDogJycsXG4gICAgc2VjcmV0QWNjZXNzS2V5OiAnJ1xuICB9O1xuXG4gIC8vIGdyYWIgc2V0dGluZ3MgcmVhbCBxdWlja1xuICAkc2NvcGUuYXdzQ29uZmlnID0gQVdTLmdldENvbmZpZygpO1xuXG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gc2F2ZSB0aGUgQVdTIGNvbmZpZ1xuICAgIEFXUy5zZXRDb25maWcoJHNjb3BlLmF3c0NvbmZpZyk7XG4gIH07XG5cbn1dKTtcbiIsIk1VRy5jb250cm9sbGVyKCdQcm9qZWN0Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcblxuICAvLyBBbGxvdyB0aGUgY2hpbGQgdmlld3MgdG8gYmluZCB0byBzYW1lIHNjb3BlXG4gICRyb290U2NvcGUucHJvamVjdCA9IFByb2plY3RzLmdldEJ5SWQoJHN0YXRlUGFyYW1zLmlkKTtcblxufV0pO1xuIiwiTVVHLmNvbnRyb2xsZXIoJ1Byb2plY3RIaXN0b3J5Q3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgUHJvamVjdHMpIHtcbiAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICdBbGwnO1xuICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAnJztcblxuICAvLyBncmFiIGFsbCB0aGUgaGlzdG9yeSBkYXRhXG4gICRzY29wZS5oaXN0b3J5SXRlbXMgPSBQcm9qZWN0cy5nZXRUeXBlQnlJZCgkc3RhdGVQYXJhbXMuaWQsICdoaXN0b3J5Jyk7XG5cbiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyID0gdHlwZTtcbiAgICAkc2NvcGUuYWN0aXZlRmlsdGVyUXVlcnkgPSAodHlwZSA9PSAnQWxsJykgPyAnJyA6IHR5cGU7XG4gIH07XG5cbiAgJHNjb3BlLnByZXZpZXdJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICRyb290U2NvcGUuJGVtaXQoJ01PREFMOk9QRU4nLCB7IHR5cGU6ICdwcmV2aWV3JywgaXRlbTogaXRlbSwgcHJvamVjdDogJHJvb3RTY29wZS5wcm9qZWN0IH0pO1xuICB9O1xuXG59XSk7XG4iLCJ2YXIgaXBjID0gcmVxdWlyZSgnaXBjJyk7XG5cbk1VRy5jb250cm9sbGVyKCdQcm9qZWN0UnVubmVyQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR0aW1lb3V0JywgJyRzdGF0ZVBhcmFtcycsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGVQYXJhbXMsIFByb2plY3RzKSB7XG4gIHZhciBkZWZhdWx0Rm9ybWF0ID0gW3sgdHlwZTogJ3N1Y2Nlc3MnLCBpdGVtczogW119LCB7IHR5cGU6ICd3YXJuaW5nJywgaXRlbXM6IFtdfSwgeyB0eXBlOiAnZXJyb3InLCBpdGVtczogW119XTtcblxuICAkc2NvcGUucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAkc2NvcGUuaGFzU2V0dGluZ3MgPSBmYWxzZTtcbiAgJHNjb3BlLmhhc1JlZmVyZW5jZSA9IGZhbHNlO1xuICAkc2NvcGUuaGFzQ29tcGFyZSA9IGZhbHNlO1xuICAkc2NvcGUucnVubmluZ1R5cGUgPSAncmVmZXJlbmNlJztcbiAgJHNjb3BlLmJhdGNoSXRlbXMgPSBkZWZhdWx0Rm9ybWF0O1xuICAkc2NvcGUuYWN0aXZlRGF0YSA9IHt9O1xuICAkc2NvcGUuY3VycmVudEJhdGNoID0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCB8fCAwO1xuICAkc2NvcGUucHJvZ3Jlc3MgPSB7XG4gICAgcGVyY2VudDogMCxcbiAgICB0aXRsZTogJ1N0YXJ0aW5nJ1xuICB9O1xuXG4gIC8vIFB1dHMgZGF0YSBpbnRvIHNvcnRlZCBzZWN0aW9uc1xuICBmdW5jdGlvbiBwcm9jZXNzQmF0Y2goYWxsRGF0YSkge1xuICAgIGlmICghYWxsRGF0YSB8fCBhbGxEYXRhLmxlbmd0aCA8IDEpIHtcbiAgICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyByZXNldCBqdXN0IHRoZSBzdGF0c1xuICAgICRzY29wZS5hY3RpdmVEYXRhID0ge307XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEuc3VjY2VzcyA9IDA7XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEud2FybmluZyA9IDA7XG4gICAgJHNjb3BlLmFjdGl2ZURhdGEuZXJyb3IgPSAwO1xuICAgIHZhciBmb3JtYXR0ZWQgPSBbeyB0eXBlOiAnc3VjY2VzcycsIGl0ZW1zOiBbXX0sIHsgdHlwZTogJ3dhcm5pbmcnLCBpdGVtczogW119LCB7IHR5cGU6ICdlcnJvcicsIGl0ZW1zOiBbXX1dO1xuXG4gICAgZnVuY3Rpb24gcGxhY2VJdGVtKGl0ZW0pIHtcblxuICAgICAgLy8gS2VlcCB0aGluZ3Mgb3JnYW5pemVzIHdpdGggcHJlc2V0IHByaW9yaXR5XG4gICAgICBpZiAoaXRlbS5zdGF0dXMpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IDA7XG5cbiAgICAgICAgc3dpdGNoIChpdGVtLnN0YXR1cykge1xuICAgICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICAgICAgdGFyZ2V0ID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICB0YXJnZXQgPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXR0ZWRbdGFyZ2V0XS5pdGVtcy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAkc2NvcGUuYWN0aXZlRGF0YVtmb3JtYXR0ZWRbdGFyZ2V0XS50eXBlXSA9ICRzY29wZS5hY3RpdmVEYXRhW2Zvcm1hdHRlZFt0YXJnZXRdLnR5cGVdICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxEYXRhLm1hcChmdW5jdGlvbihvYmosIGlkeCkge1xuICAgICAgaWYgKG9iai5iYXRjaCA9PT0gJHNjb3BlLmN1cnJlbnRCYXRjaCkge1xuICAgICAgICBwbGFjZUl0ZW0ob2JqKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSB0cnVlO1xuICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR1cEN1cnJlbnRCYXRjaCgpIHtcbiAgICBpZiAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCA9PT0gbnVsbCkge3JldHVybjt9XG5cbiAgICAvLyBncmFiIGFsbCB0aGUgcnVubmVyIHRlc3QgZGF0YVxuICAgIHZhciBoaXN0b3J5RGF0YSA9IFByb2plY3RzLmdldFR5cGVCeUlkKCRyb290U2NvcGUucHJvamVjdC5pZCwgJ2hpc3RvcnknKTtcblxuICAgIC8vIFN0b3JlIHRoZSBwcm9jZXNzZWQgZGF0YSBpbnRvIHRoZSBiYXRjaCBkYXRhXG4gICAgJHNjb3BlLmJhdGNoSXRlbXMgPSBwcm9jZXNzQmF0Y2goaGlzdG9yeURhdGEpO1xuXG4gICAgLy8gc2V0dXAgd2hpY2ggdmlldyB0byBzaG93IGJhc2VkIG9uIGhpc3RvcnlcbiAgICAkc2NvcGUucnVubmluZ1R5cGUgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgPj0gJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCkgPyAncmVmZXJlbmNlJyA6ICdjb21wYXJlJztcbiAgfVxuXG4gIC8vIHZhbGlkYXRpb24gb2YgcHJvamVjdFxuICBmdW5jdGlvbiB2YWxpZGF0ZVByb2plY3QoKSB7XG4gICAgLy8gdmVyaWZ5IGlmIGl0cyB2YWxpZFxuICAgIHZhciBpc1ZhbGlkID0gUHJvamVjdHMudmFsaWRhdGUoJHJvb3RTY29wZS5wcm9qZWN0KTtcblxuICAgIC8vIGFsZXJ0IG9mIGludmFsaWRpdHlcbiAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdQbGVhc2UgZmluaXNoIGNvbmZpZ3VyaW5nIHNldHRpbmdzIScsIGR1cjogNSwgdHlwZTogJ2Vycm9yJywgaWNvbjogJ3N0b3AnIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpc1ZhbGlkO1xuICB9XG5cbiAgLy8gY2hlY2tzIGZvciBjaGFuZ2VzIGFuZCB1cGRhdGVzIFVJIGFjY291cmRpbmdseVxuICBmdW5jdGlvbiBjaGVja1N0YXRlKCkge1xuICAgICRzY29wZS5oYXNTZXR0aW5ncyA9IHZhbGlkYXRlUHJvamVjdCgpO1xuICAgICRzY29wZS5oYXNSZWZlcmVuY2UgPSAoJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRSZWZlcmVuY2UgIT09IG51bGwpO1xuXG4gICAgaWYgKCRzY29wZS5ydW5uaW5nVHlwZSA9PT0gJ3JlZmVyZW5jZScpIHtcbiAgICAgICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5oYXNDb21wYXJlID0gKCRyb290U2NvcGUucHJvamVjdC5jdXJyZW50QmF0Y2ggIT09IG51bGwgJiYgJHJvb3RTY29wZS5wcm9qZWN0LmN1cnJlbnRCYXRjaCAhPT0gMCk7XG4gICAgICAkc2NvcGUuaGFzQ29tcGFyZSA9ICgkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudFJlZmVyZW5jZSA8PSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoKTtcbiAgICB9XG4gIH1cblxuICAvLyBncmFiIHRoZSBsYXRlc3QgZGF0YSBmb3IgdGhlIHByb2plY3RcbiAgZnVuY3Rpb24gZ3JhYkxhdGVzdERhdGEoKSB7XG4gICAgJHJvb3RTY29wZS5wcm9qZWN0ID0gUHJvamVjdHMuZ2V0QnlJZCgkcm9vdFNjb3BlLnByb2plY3QuaWQpO1xuICAgICRzY29wZS5jdXJyZW50QmF0Y2ggPSAkcm9vdFNjb3BlLnByb2plY3QuY3VycmVudEJhdGNoO1xuXG4gICAgLy8gU2V0IHRoZSBhY3RpdmUgZGF0YSBiYXNlZCBvbiBjdXJyZW50QmF0Y2hcbiAgICAkc2NvcGUuYWN0aXZlRGF0YSA9ICgkcm9vdFNjb3BlLnByb2plY3QgJiYgJHJvb3RTY29wZS5wcm9qZWN0LmJhdGNoSGlzdG9yeSkgPyAkcm9vdFNjb3BlLnByb2plY3QuYmF0Y2hIaXN0b3J5WyRzY29wZS5jdXJyZW50QmF0Y2hdIDogbnVsbDtcblxuICAgICRyb290U2NvcGUuJGVtaXQoJ1NJREVQQU5FTDpVUERBVEUnLCAkcm9vdFNjb3BlLnByb2plY3QpO1xuICB9XG5cbiAgLy8gc3luYyBhbGwgcHJvamVjdCBmaWxlcyBhbmQgc2V0dGluZ3MgdG8gQVdTXG4gIHZhciBzeW5jaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gc3luY1Byb2plY3QoKSB7XG4gICAgaWYgKHR5cGVvZiAkcm9vdFNjb3BlLnByb2plY3QubWV0YS5hdXRvU3luY0F3cyAhPT0gdW5kZWZpbmVkICYmICRyb290U2NvcGUucHJvamVjdC5tZXRhLmF1dG9TeW5jQXdzID09PSB0cnVlICYmICFzeW5jaW5nKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBTdGFydGluZycsIGR1cjogMywgdHlwZTogJ2luZm8nIH0pO1xuICAgICAgc3luY2luZyA9IHRydWU7XG5cbiAgICAgIFByb2plY3RzLnN5bmMoJHJvb3RTY29wZS5wcm9qZWN0LmlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBzeW5jaW5nID0gZmFsc2U7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgQ29tcGxldGUnLCBkdXI6IDMsIHR5cGU6ICdzdWNjZXNzJywgaWNvbjogJ2NoZWNrJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3N5bmNOb3cgZXJyJywgZXJyKTtcbiAgICAgICAgICBzeW5jaW5nID0gZmFsc2U7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1N5bmMgRmFpbGVkJywgZHVyOiA1LCB0eXBlOiAnZXJyb3InLCBpY29uOiAnc3RvcGUnIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBncmFiTGF0ZXN0RGF0YSgpO1xuICBzZXR1cEN1cnJlbnRCYXRjaCgpO1xuICBjaGVja1N0YXRlKCk7XG5cbiAgLy8gRmlyZSBvZmYgdGhlIHZpZXdlclxuICAkc2NvcGUucHJldmlld0JhdGNoID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAkcm9vdFNjb3BlLiRlbWl0KCdNT0RBTDpPUEVOJywgeyB0eXBlOiAnYmF0Y2gnLCBpdGVtczogaXRlbXMsIHByb2plY3Q6ICRyb290U2NvcGUucHJvamVjdCB9KTtcbiAgfTtcblxuICAvLyBGaXJlIG9mZiBhIG5ldyB0ZXN0ISFcbiAgJHNjb3BlLm5ld0NvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsaWQgPSB2YWxpZGF0ZVByb2plY3QoKTtcblxuICAgIC8vIHZhbGlkYXRpb24gcGF1c2VcbiAgICBpZiAoIXZhbGlkKSB7cmV0dXJuO31cblxuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdjb21wYXJlJztcbiAgICAkc2NvcGUucHJvY2Vzc2luZyA9IHRydWU7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHJvb3RTY29wZS4kZW1pdCgnUFJFTE9BREVSOk9OJyk7XG4gICAgfSwgMTApO1xuXG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAnY29tcGFyZScsIHByb2plY3RJZDogJHJvb3RTY29wZS5wcm9qZWN0LmlkIH0pO1xuICB9O1xuXG4gIC8vIHNldHVwIG5ldyByZWZlcmVuY2VcbiAgJHNjb3BlLm5ld1JlZmVyZW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWxpZCA9IHZhbGlkYXRlUHJvamVjdCgpO1xuXG4gICAgLy8gdmFsaWRhdGlvbiBwYXVzZVxuICAgIGlmICghdmFsaWQpIHtyZXR1cm47fVxuXG4gICAgJHNjb3BlLnByb2Nlc3NpbmcgPSB0cnVlO1xuICAgICRzY29wZS5ydW5uaW5nVHlwZSA9ICdyZWZlcmVuY2UnO1xuICAgICRzY29wZS5oYXNDb21wYXJlID0gZmFsc2U7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJHJvb3RTY29wZS4kZW1pdCgnUFJFTE9BREVSOk9OJyk7XG4gICAgfSwgMTApO1xuXG4gICAgaXBjLnNlbmQoJ1JVTk5FUjpGSVJFJywgeyB0eXBlOiAncmVmZXJlbmNlJywgcHJvamVjdElkOiAkcm9vdFNjb3BlLnByb2plY3QuaWQgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcnVubmVyRXZlbnRzKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubXNnIHx8ICFhcmdzLnBlcmNlbnQpIHtyZXR1cm47fVxuXG4gICAgLy8gV3JpdGUgdGhlIHByb2dyZXNzIHRvIFVJXG4gICAgJHNjb3BlLnByb2dyZXNzLnBlcmNlbnQgPSBwYXJzZUludChhcmdzLnBlcmNlbnQsIDEwKTtcbiAgICAkc2NvcGUucHJvZ3Jlc3MudGl0bGUgPSAoYXJncy5tc2cpID8gYXJncy5tc2cgOiAkc2NvcGUucHJvZ3Jlc3MudGl0bGU7XG5cbiAgICB2YXIgcHJlQXJncyA9IGFyZ3M7XG4gICAgcHJlQXJncy5wcm9qZWN0ID0gJHJvb3RTY29wZS5wcm9qZWN0O1xuICAgICRyb290U2NvcGUuJGVtaXQoJ1BSRUxPQURFUjpVUERBVEUnLCBwcmVBcmdzKTtcbiAgfVxuXG4gIC8vIHNpZ25hbCBVSSBvZiBjaGFuZ2VzXG4gIGZ1bmN0aW9uIHJ1bm5lckNvbXBsZXRlKCkge1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZ3JhYkxhdGVzdERhdGEoKTtcbiAgICAgIHNldHVwQ3VycmVudEJhdGNoKCk7XG4gICAgICBjaGVja1N0YXRlKCk7XG4gICAgICBzeW5jUHJvamVjdCgpO1xuICAgICAgJHNjb3BlLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICB9LCAzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bm5lckZhaWxlZChyZWFzb24pIHtcbiAgICBjb25zb2xlLmxvZygnUlVOTkVSOkZBSUxFRCByZWFzb24nLCByZWFzb24pO1xuICAgICRzY29wZS5wcm9jZXNzaW5nID0gZmFsc2U7XG4gIH1cblxuICBpcGMub24oJ1JVTk5FUjpQUk9HUkVTUycsIHJ1bm5lckV2ZW50cyk7XG4gIGlwYy5vbignUlVOTkVSOkNPTVBMRVRFJywgcnVubmVyQ29tcGxldGUpO1xuICBpcGMub24oJ1JVTk5FUjpGQUlMRUQnLCBydW5uZXJGYWlsZWQpO1xuXG59XSk7XG4iLCJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5NVUcuY29udHJvbGxlcignUHJvamVjdFNldHRpbmdzQ3RybCcsXG5bJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRzdGF0ZScsICdQcm9qZWN0cycsXG5mdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgUHJvamVjdHMpIHtcbiAgdmFyIHNhdmVUaW1lcjtcblxuICAkc2NvcGUuc3luY2luZyA9IGZhbHNlO1xuICAkc2NvcGUuc2VsZWN0b3JUeXBlcyA9IFsnY29udGFpbmVyJywgJ2hpZGUnLCAncmVtb3ZlJ107XG4gICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICRzY29wZS5oYXNBd3NTZXR0aW5ncyA9IGZhbHNlO1xuICAkc2NvcGUubWFzdGVyID0ge307XG4gIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuXG4gIGZ1bmN0aW9uIGFkZE5ld1R5cGUodHlwZSwgZGF0YSkge1xuICAgICRyb290U2NvcGUucHJvamVjdFt0eXBlXS5wdXNoKGRhdGEpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tBd3NTZXR0aW5ncygpIHtcbiAgICAvLyByZWFkIGlmIGF3cyBzZXR0aW5ncyBhbmQgaWYgdGhleSBhcmUgY29ycmVjdFxuICAgIHZhciBmaWxlID0gUHJvamVjdHMuZ2V0KCcvY29uZmlnL2F3cy5qc29uJywge30pO1xuXG4gICAgaWYgKCFmaWxlIHx8ICFmaWxlLmJ1Y2tldCB8fCAhZmlsZS5hY2Nlc3NLZXlJZCB8fCAhZmlsZS5zZWNyZXRBY2Nlc3NLZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIGluaXRpYWwgYXdzIGNyZWQgY2hlY2tcbiAgJHNjb3BlLmhhc0F3c1NldHRpbmdzID0gY2hlY2tBd3NTZXR0aW5ncygpO1xuXG4gIC8vIFdhdGNoIGZvciBjaGFuZ2VzLCBzbyB3ZSBjYW4gc2F2ZVxuICAkc2NvcGUuJHdhdGNoKCdwcm9qZWN0JywgZnVuY3Rpb24oblYsIG9WKSB7XG4gICAgaWYgKG5WICE9IG9WKSB7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IHRydWU7XG5cbiAgICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgICAkc2NvcGUuc2F2ZSgpO1xuICAgIH1cbiAgfSwgdHJ1ZSk7XG5cbiAgLy8gVE9ETzogc2V0dXAgdmFsaWRhdGlvbnNcbiAgLy8gc2F2ZSB0aGUgY3VycmVudCBwcm9qZWN0XG4gICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNhdmVUaW1lcikge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChzYXZlVGltZXIpO1xuICAgIH1cblxuICAgIC8vIHRocm90dGxlIHRoZSBzYXZlcywgc2luY2Ugd2Ugc2F2ZSBvbiBhbnkgY2hhbmdlc1xuICAgIHNhdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8vIFNhdmUgdGVoIHByb2plY3RvaWRcbiAgICAgIFByb2plY3RzLnNhdmUoJHJvb3RTY29wZS5wcm9qZWN0KVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNpZGViYXIgd2l0aCBjaGFuZ2VzXG4gICAgICAgICAgJHJvb3RTY29wZS4kZW1pdCgnU0lERVBBTkVMOlVQREFURScsIHJlcyk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJldmVydCBtb2RlbFxuICAgICAgICAgIGFuZ3VsYXIuY29weSgkcm9vdFNjb3BlLnByb2plY3QsICRzY29wZS5tYXN0ZXIpO1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sIDIwMCk7XG4gIH07XG5cbiAgLy8gc3luYyB0aGlzIHByb2plY3QgdG8gQVdTXG4gICRzY29wZS5zeW5jTm93ID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnN5bmNpbmcgPSB0cnVlO1xuICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnQUxFUlQ6RklSRScsIHsgdGl0bGU6ICdTeW5jIFN0YXJ0aW5nJywgZHVyOiA1LCB0eXBlOiAnaW5mbycgfSk7XG5cbiAgICBQcm9qZWN0cy5zeW5jKCRyb290U2NvcGUucHJvamVjdC5pZClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkc2NvcGUuc3luY2luZyA9IGZhbHNlO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBDb21wbGV0ZScsIGR1cjogNSwgdHlwZTogJ3N1Y2Nlc3MnLCBpY29uOiAnY2hlY2snIH0pO1xuICAgICAgfVxuXG4gICAgICAsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAkc2NvcGUuc3luY2luZyA9IGZhbHNlO1xuICAgICAgICBjb25zb2xlLmxvZygnc3luY05vdyBlcnInLCBlcnIpO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ0FMRVJUOkZJUkUnLCB7IHRpdGxlOiAnU3luYyBGYWlsZWQnLCBkdXI6IDUsIHR5cGU6ICdlcnJvcicsIGljb246ICdzdG9wZScgfSk7XG4gICAgICB9KTtcbiAgfTtcblxuICAvLyByZXZlcnQgdGhlIGN1cnJlbnQgcHJvamVjdFxuICAkc2NvcGUuY2FuY2VsU2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdXJlID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNsZWFyIGFsbCB5b3VyIGNoYW5nZXM/Jyk7XG4gICAgaWYgKHN1cmUpIHtcbiAgICAgIC8vIHB1dCByZXZlcnQgbW9kZWwgaW50byB0aGUgcHJvamVjdCBtb2RlbFxuICAgICAgYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIsICRyb290U2NvcGUucHJvamVjdCk7XG4gICAgICAkc2NvcGUuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvLyBkZWxldGUgdGhlIHByb2plY3QsIGFuZCByZW1vdmUgZnJvbSBwcm9qZWN0IGxpc3RzLCB0aGVuIHJlZGlyZWN0IHRvIG1haW5cbiAgJHNjb3BlLmRlbGV0ZVByb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VyZSA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0PycpO1xuICAgIGlmIChzdXJlKSB7XG4gICAgICB2YXIgcHJvamVjdElEID0gJHJvb3RTY29wZS5wcm9qZWN0LmlkO1xuXG4gICAgICBQcm9qZWN0cy5yZW1vdmUocHJvamVjdElEKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6UkVNT1ZFJywgeyBpZDogcHJvamVjdElEIH0pO1xuICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xuICAgICAgICAgICRyb290U2NvcGUucHJvamVjdCA9IHt9O1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ1Byb2plY3QgUmVtb3ZlZCBTdWNjZXNzZnVsbHknLCBkdXI6IDUsIHR5cGU6ICdzdWNjZXNzJyB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KCdTSURFUEFORUw6UkVNT1ZFJywgeyBpZDogcHJvamVjdElEIH0pO1xuICAgICAgICAgICRzdGF0ZS5nbygnbWFpbicpO1xuICAgICAgICAgICRyb290U2NvcGUucHJvamVjdCA9IHt9O1xuICAgICAgICAgICRzY29wZS5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZHMgYSBuZXcgdmlld3BvcnQgaXRlbVxuICAkc2NvcGUuYWRkVmlld3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3Vmlld3BvcnQgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICBuYW1lOiBudWxsLFxuICAgICAgd2lkdGg6IG51bGwsXG4gICAgICBoZWlnaHQ6IG51bGxcbiAgICB9O1xuXG4gICAgYWRkTmV3VHlwZSgndmlld3BvcnRzJywgbmV3Vmlld3BvcnQpO1xuICB9O1xuXG4gIC8vIEFkZHMgYSBuZXcgc2VsZWN0b3IgaXRlbVxuICAkc2NvcGUuYWRkU2VsZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3U2VsZWN0b3IgPSB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB0eXBlOiAnY29udGFpbmVyJyxcbiAgICAgIHF1ZXJ5OiBudWxsXG4gICAgfTtcblxuICAgIGFkZE5ld1R5cGUoJ3NlbGVjdG9ycycsIG5ld1NlbGVjdG9yKTtcbiAgfTtcblxuICAvLyBBZGRzIGEgbmV3IGNvb2tpZSBpdGVtXG4gICRzY29wZS5hZGRDb29raWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3Q29va2llID0ge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgcGF0aDogbnVsbFxuICAgIH07XG5cbiAgICBhZGROZXdUeXBlKCdjb29raWVzJywgbmV3Q29va2llKTtcbiAgfTtcblxuICAvLyBhY3RpdmF0ZSBhIGNvb2tpZS92aWV3L3NlbGVjdFxuICAkc2NvcGUuYWN0aXZhdGVUeXBlID0gZnVuY3Rpb24odHlwZSwgaWQpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9ICgkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9PT0gdHJ1ZSB8fCAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV1baWRdLmFjdGl2ZSA9PT0gJ3RydWUnKSA/IGZhbHNlIDogdHJ1ZTtcblxuICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgJHNjb3BlLnNhdmUoKTtcbiAgfTtcblxuICAvLyBSZW1vdmUgYSBjb29raWUvdmlldy9zZWxlY3RcbiAgJHNjb3BlLmRlbGV0ZVR5cGVJdGVtID0gZnVuY3Rpb24odHlwZSwgaWQpIHtcbiAgICAkcm9vdFNjb3BlLnByb2plY3RbdHlwZV0uc3BsaWNlKGlkLCAxKTtcblxuICAgIC8vIHNhdmUgdGhlIGZpbGUgZm9yIGNvbnZlbmllbmNlXG4gICAgJHNjb3BlLnNhdmUoKTtcbiAgfTtcblxuICAvLyBSZW1vdmVzIGFsbCBoaXN0b3J5IGRhdGFcbiAgJHNjb3BlLmNsZWFySGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgIFByb2plY3RzLmNsZWFySGlzdG9yeSgkcm9vdFNjb3BlLnByb2plY3QpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ0NsZWFyZWQgQWxsIEhpc3RvcnkhJywgZHVyOiA1LCB0eXBlOiAnc3VjY2VzcycsIGljb246ICdoaXN0b3J5JyB9KTtcbiAgICAgIH1cblxuICAgICAgLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdBTEVSVDpGSVJFJywgeyB0aXRsZTogJ0Vycm9yIE9jY3VycmVkISBQbGVhc2UgdHJ5IGFnYWluLicsIGR1cjogNSwgdHlwZTogJ2Vycm9yJywgaWNvbjogJ3N0b3AnIH0pO1xuICAgICAgfSk7XG4gIH07XG5cbn1dKTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbk1VRy5jb250cm9sbGVyKCdTaWRlUGFuZWxDdHJsJyxcblsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHN0YXRlJywgJ1Byb2plY3RzJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBQcm9qZWN0cykge1xuICAkc2NvcGUucHJvamVjdHMgPSBbXTtcblxuICAvLyBncmFiIGFsbCBwcm9qZWN0cyBsaXN0XG4gICRzY29wZS5wcm9qZWN0cyA9IFByb2plY3RzLmdldEFsbCgpO1xuXG4gIC8vIGFkZCBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOk5FV1BST0pFQ1QnLCBmdW5jdGlvbihlLCBhcmdzKSB7XG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmlkKSB7IHJldHVybjsgfVxuXG4gICAgJHNjb3BlLnByb2plY3RzLnVuc2hpZnQoYXJncyk7XG4gIH0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOlVQREFURScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmlkID09PSBhcmdzLmlkKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRpdGxlID0gYXJncy50aXRsZTtcbiAgICAgICAgJHNjb3BlLnByb2plY3RzW2lkeF0udGltZXN0YW1wID0gYXJncy50aW1lc3RhbXA7XG5cbiAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXSkge1xuICAgICAgICAgIC8vIG9ubHkgdXBkYXRlIHRvdGFscyBpZiB3ZSBoYXZlIHRoZW1cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRvdGFscy5zdWNjZXNzID0gYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnN1Y2Nlc3M7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS53YXJuaW5nKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMud2FybmluZyA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS53YXJuaW5nO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0uZXJyb3IpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9qZWN0c1tpZHhdLnRvdGFscy5lcnJvciA9IGFyZ3MuYmF0Y2hIaXN0b3J5W2FyZ3MuY3VycmVudEJhdGNoXS5lcnJvcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5iYXRjaEhpc3RvcnlbYXJncy5jdXJyZW50QmF0Y2hdLnZpZXdzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvamVjdHNbaWR4XS50b3RhbHMudmlld3MgPSBhcmdzLmJhdGNoSGlzdG9yeVthcmdzLmN1cnJlbnRCYXRjaF0udmlld3M7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHVwZGF0ZSB0aGUgcHJvamVjdHMgbGlzdFxuICAkcm9vdFNjb3BlLiRvbignU0lERVBBTkVMOlJFTU9WRScsIGZ1bmN0aW9uKGUsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuaWQpIHsgcmV0dXJuOyB9XG5cbiAgICAkc2NvcGUucHJvamVjdHMubWFwKGZ1bmN0aW9uKG9iaiwgaWR4KSB7XG4gICAgICBpZiAob2JqLmlkID09PSBhcmdzLmlkKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgJHNjb3BlLmdvVG9Qcm9qZWN0ID0gZnVuY3Rpb24oaWQpIHtcbiAgICAvLyBUT0RPOiBmaXggdGhpc1xuICAgIC8vIHZhciB0eXBlID0gJ3NldHRpbmdzJztcbiAgICB2YXIgdHlwZSA9ICdydW5uZXInO1xuXG4gICAgLy8gVE9ETzogc2V0dXAgdG8gZmlndXJlIG91dCBpZiB3ZSBuZWVkIHRvIGdvIHRvIHNldHRpbmdzLCBvdGhlcndpc2UgZ28gdG8gcnVubmVyXG4gICAgJHN0YXRlLmdvKCdwcm9qZWN0cy4nICsgdHlwZSwgeyBpZDogaWQgfSk7XG4gICAgJHJvb3RTY29wZS5jdXJyZW50UHJvamVjdElkID0gaWQ7XG4gIH1cblxufV0pO1xuIiwiLyoqXG4gKiBDb25maWdcbiAqL1xuTVVHLmNvbnN0YW50KCdDb25maWcnLCB7XG4gIEVOVjogJ1NUQUdFJyxcbiAgU1RBR0U6IHtcbiAgfSxcbiAgUFJPRDoge1xuICB9LFxuICBDb21wYXJlOiB7XG4gICAgZXJyb3JDb2xvcjoge1xuICAgICAgcmVkOiAyNTUsXG4gICAgICBncmVlbjogMCxcbiAgICAgIGJsdWU6IDI1NVxuICAgIH0sXG4gICAgZXJyb3JUeXBlOiAnZmxhdCcsXG4gICAgdHJhbnNwYXJlbmN5OiAxLFxuICAgIGxhcmdlSW1hZ2VUaHJlc2hvbGQ6IDBcbiAgfVxufSk7XG4iLCJNVUcuY29uZmlnKFxuWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLFxuZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG4gIC8vIFJvdXRlc1xuICAvLyAvXG4gIC8vIC9wcm9qZWN0c1xuICAvLyAvcHJvamVjdHMvOmlkL3J1bm5lclxuICAvLyAvcHJvamVjdHMvOmlkL2hpc3RvcnlcbiAgLy8gL3Byb2plY3RzLzppZC9zZXR0aW5nc1xuXG4gICRzdGF0ZVByb3ZpZGVyXG5cbiAgLyoqXG4gICAqIEJhc2UgUm91dGVcbiAgICovXG4gIC5zdGF0ZSgnbWFpbicsIHtcbiAgICB1cmw6ICcvJyxcbiAgICB0ZW1wbGF0ZVVybDogJ21haW4uaHRtbCdcbiAgfSlcbiAgLnN0YXRlKCdwcmVmZXJlbmNlcycsIHtcbiAgICB1cmw6ICcvcHJlZmVyZW5jZXMnLFxuICAgIHRlbXBsYXRlVXJsOiAncHJlZmVyZW5jZXMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1ByZWZlcmVuY2VzQ3RybCdcbiAgfSlcblxuICAvKipcbiAgICogUHJvamVjdCBSb3V0ZXNcbiAgICovXG4gIC5zdGF0ZSgncHJvamVjdHMnLCB7XG4gICAgdXJsOiAnL3Byb2plY3RzLzppZCcsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdEN0cmwnXG4gIH0pXG4gIC5zdGF0ZSgncHJvamVjdHMuc2V0dGluZ3MnLCB7XG4gICAgdXJsOiAnL3NldHRpbmdzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLnNldHRpbmdzLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0U2V0dGluZ3NDdHJsJ1xuICB9KVxuICAuc3RhdGUoJ3Byb2plY3RzLnJ1bm5lcicsIHtcbiAgICB1cmw6ICcvcnVubmVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3Byb2plY3RzLnJ1bm5lci5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnUHJvamVjdFJ1bm5lckN0cmwnXG4gIH0pXG4gIC5zdGF0ZSgncHJvamVjdHMuaGlzdG9yeScsIHtcbiAgICB1cmw6ICcvaGlzdG9yeScsXG4gICAgdGVtcGxhdGVVcmw6ICdwcm9qZWN0cy5oaXN0b3J5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0SGlzdG9yeUN0cmwnXG4gIH0pXG5cbiAgLyoqXG4gICAqIFN0YXRpYyBSb3V0ZXNcbiAgICovXG5cbiAgLy8gLnN0YXRlKCdtYWluLjQwNCcsIHtcbiAgLy8gICAgIHVybDogXCIvNDA0XCIsXG4gIC8vICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvNDA0Lmh0bWxcIixcbiAgLy8gICAgIGlzRXh0ZXJuYWw6IHRydWVcbiAgLy8gfSlcblxuICAvLyBFbmQgb2YgdGhlIHdvcmxkXG4gIDtcblxuICAvLyB1cmwgcmUtcm91dGluZ1xuICAvLyAkdXJsUm91dGVyUHJvdmlkZXJcbiAgLy8gICAud2hlbignL3Byb2plY3RzJywgJy8nKVxuICAvLyAgIC53aGVuKCcvcHJvamVjdHMvJywgJy8nKTtcblxuICAvLyBpZiBub25lIG9mIHRoZSBhYm92ZSBzdGF0ZXMgYXJlIG1hdGNoZWQsIHVzZSB0aGlzIGFzIHRoZSBmYWxsYmFja1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbn1dKTtcbiIsIk1VRy5ydW4oWyckcm9vdFNjb3BlJywgJyRodHRwJyxcbmZ1bmN0aW9uKCRyb290U2NvcGUsICRodHRwKSB7XG5cbiAgLy8gaGVhZGVyc1xuICB2YXIgJGNvbW1vbiA9ICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uO1xuICAkY29tbW9uWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnJHN0YXRlQ2hhbmdlRXJyb3InLCBlcnJvcik7XG4gIH0pO1xuXG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=